"use strict";(self.webpackChunkapparel_top100_showcase=self.webpackChunkapparel_top100_showcase||[]).push([[179],{830:(q_,Rb,_t)=>{var ef={};_t.r(ef),_t.d(ef,{aggregate:()=>Wc,bin:()=>MR,collect:()=>NR,compare:()=>eQ,countpattern:()=>OR,cross:()=>kR,density:()=>IR,dotbin:()=>FR,expression:()=>aQ,extent:()=>PR,facet:()=>eC,field:()=>lQ,filter:()=>$R,flatten:()=>BR,fold:()=>UR,formula:()=>VR,generate:()=>uQ,impute:()=>jR,joinaggregate:()=>HR,kde:()=>zR,key:()=>cQ,load:()=>dQ,lookup:()=>WR,multiextent:()=>fQ,multivalues:()=>hQ,params:()=>pQ,pivot:()=>qR,prefacet:()=>gQ,project:()=>YR,proxy:()=>mQ,quantile:()=>KR,relay:()=>_Q,sample:()=>XR,sequence:()=>QR,sieve:()=>yQ,subflow:()=>LR,timeunit:()=>JR,tupleindex:()=>bQ,values:()=>wQ,window:()=>ZR});var ra={};_t.r(ra),_t.d(ra,{interpolate:()=>Jc,interpolateArray:()=>tLe,interpolateBasis:()=>sJ,interpolateBasisClosed:()=>aJ,interpolateCubehelix:()=>HLe,interpolateCubehelixLong:()=>zLe,interpolateDate:()=>fJ,interpolateDiscrete:()=>ALe,interpolateHcl:()=>ULe,interpolateHclLong:()=>VLe,interpolateHsl:()=>PLe,interpolateHslLong:()=>LLe,interpolateHue:()=>TLe,interpolateLab:()=>BLe,interpolateNumber:()=>ba,interpolateNumberArray:()=>pF,interpolateObject:()=>hJ,interpolateRgb:()=>hF,interpolateRgbBasis:()=>ZPe,interpolateRgbBasisClosed:()=>eLe,interpolateRound:()=>d1,interpolateString:()=>pJ,interpolateTransformCss:()=>NLe,interpolateTransformSvg:()=>OLe,interpolateZoom:()=>FLe,piecewise:()=>AF,quantize:()=>GLe});var dc={};_t.r(dc),_t.d(dc,{bound:()=>_te,identifier:()=>QP,mark:()=>vte,overlap:()=>bte,render:()=>Ate,viewlayout:()=>kte});var bp={};_t.r(bp),_t.d(bp,{axisticks:()=>Rte,datajoin:()=>Fte,encode:()=>Pte,legendentries:()=>Lte,linkpath:()=>JP,pie:()=>ZP,scale:()=>Hte,sortitems:()=>Wte,stack:()=>tL});var fc={};_t.r(fc),_t.d(fc,{contour:()=>IL,geojson:()=>PL,geopath:()=>LL,geopoint:()=>$L,geoshape:()=>BL,graticule:()=>UL,heatmap:()=>VL,isocontour:()=>NL,kde2d:()=>kL,projection:()=>die});var wp={};_t.r(wp),_t.d(wp,{force:()=>qL});var Ui={};_t.r(Ui),_t.d(Ui,{nest:()=>n3,pack:()=>r3,partition:()=>s3,stratify:()=>a3,tree:()=>u3,treelinks:()=>c3,treemap:()=>f3});var tf={};_t.r(tf),_t.d(tf,{label:()=>E3});var Y_={};_t.r(Y_),_t.d(Y_,{loess:()=>D3,regression:()=>S3});var nf={};_t.r(nf),_t.d(nf,{voronoi:()=>e$});var Fo={};_t.r(Fo),_t.d(Fo,{wordcloud:()=>n$});var ou={};_t.r(ou),_t.d(ou,{crossfilter:()=>i$,resolvefilter:()=>r$});var rf={};_t.r(rf),_t.d(rf,{Bounds:()=>li,CanvasHandler:()=>k1,CanvasRenderer:()=>lS,DATE:()=>vo,DAY:()=>Er,DAYOFYEAR:()=>vl,Dataflow:()=>sm,Debug:()=>NY,Error:()=>rI,EventStream:()=>GD,Gradient:()=>FZ,GroupItem:()=>$C,HOURS:()=>Ko,Handler:()=>xP,HybridHandler:()=>Xee,HybridRenderer:()=>UP,Info:()=>MY,Item:()=>LC,MILLISECONDS:()=>ya,MINUTES:()=>Xo,MONTH:()=>wr,Marks:()=>Zo,MultiPulse:()=>iR,None:()=>xY,Operator:()=>an,Parameters:()=>zD,Pulse:()=>Gc,QUARTER:()=>yo,RenderType:()=>ud,Renderer:()=>N1,ResourceLoader:()=>WZ,SECONDS:()=>Fs,SVGHandler:()=>Oee,SVGRenderer:()=>BP,SVGStringRenderer:()=>Kee,Scenegraph:()=>vee,TIME_UNITS:()=>TI,Transform:()=>Q,View:()=>Woe,WEEK:()=>wi,Warn:()=>oI,YEAR:()=>Ji,accessor:()=>mo,accessorFields:()=>_r,accessorName:()=>zn,array:()=>De,ascending:()=>ED,bandwidthNRD:()=>dR,bin:()=>FX,bootstrapCI:()=>PX,boundClip:()=>ste,boundContext:()=>D1,boundItem:()=>AP,boundMark:()=>gee,boundStroke:()=>Fu,changeset:()=>Wf,clampRange:()=>jY,codegenExpression:()=>Vre,compare:()=>cI,constant:()=>br,cumulativeLogNormal:()=>_R,cumulativeNormal:()=>XD,cumulativeUniform:()=>wR,dayofyear:()=>mK,debounce:()=>dI,defaultLocale:()=>HI,definition:()=>TX,densityLogNormal:()=>mR,densityNormal:()=>fR,densityUniform:()=>bR,domChild:()=>Di,domClear:()=>Vs,domCreate:()=>ad,domFind:()=>TP,dotbin:()=>LX,error:()=>ee,expressionFunction:()=>Jn,extend:()=>ut,extent:()=>ml,extentIndex:()=>HY,falsy:()=>Lc,fastmap:()=>Wg,field:()=>ks,flush:()=>zY,font:()=>QC,fontFamily:()=>x1,fontSize:()=>xl,format:()=>LD,formatLocale:()=>FD,formats:()=>QI,hasOwnProperty:()=>Ae,id:()=>Iy,identity:()=>yr,inferType:()=>uX,inferTypes:()=>cX,ingest:()=>Vt,inherits:()=>ye,inrange:()=>qg,interpolate:()=>qF,interpolateColors:()=>kC,interpolateRange:()=>yZ,intersect:()=>nte,intersectBoxLine:()=>wm,intersectPath:()=>dP,intersectPoint:()=>fP,intersectRule:()=>eee,isArray:()=>te,isBoolean:()=>$c,isDate:()=>Bc,isFunction:()=>lt,isIterable:()=>GY,isNumber:()=>Ft,isObject:()=>Ee,isRegExp:()=>WY,isString:()=>Ce,isTuple:()=>VD,key:()=>fI,lerp:()=>qY,lineHeight:()=>od,loader:()=>$D,locale:()=>sX,logger:()=>sI,lruCache:()=>YY,markup:()=>$P,merge:()=>KY,mergeConfig:()=>zg,multiLineOffset:()=>DP,one:()=>Hg,pad:()=>XY,panLinear:()=>PY,panLog:()=>LY,panPow:()=>$Y,panSymlog:()=>BY,parse:()=>uqe,parseExpression:()=>h$,parseSelector:()=>Sd,path:()=>uC,pathCurves:()=>ZF,pathEqual:()=>ate,pathParse:()=>ym,pathRectangle:()=>jZ,pathRender:()=>y1,pathSymbols:()=>VZ,pathTrail:()=>HZ,peek:()=>St,point:()=>ZC,projection:()=>ML,quantileLogNormal:()=>yR,quantileNormal:()=>QD,quantileUniform:()=>ER,quantiles:()=>uR,quantizeInterpolator:()=>vZ,quarter:()=>UY,quartiles:()=>cR,random:()=>Ps,randomInteger:()=>YRe,randomKDE:()=>pR,randomLCG:()=>qRe,randomLogNormal:()=>BX,randomMixture:()=>UX,randomNormal:()=>hR,randomUniform:()=>VX,read:()=>pX,regressionConstant:()=>DR,regressionExp:()=>HX,regressionLinear:()=>CR,regressionLoess:()=>YX,regressionLog:()=>jX,regressionPoly:()=>GX,regressionPow:()=>zX,regressionQuad:()=>SR,renderModule:()=>fS,repeat:()=>Ry,resetDefaultLocale:()=>VIe,resetSVGClipId:()=>GZ,resetSVGDefIds:()=>sBe,responseType:()=>hX,runtimeContext:()=>Aoe,sampleCurve:()=>ZD,sampleLogNormal:()=>gR,sampleNormal:()=>KD,sampleUniform:()=>vR,scale:()=>Lt,sceneEqual:()=>jP,sceneFromJSON:()=>_ee,scenePickVisit:()=>GC,sceneToJSON:()=>mee,sceneVisit:()=>Da,sceneZOrder:()=>hP,scheme:()=>YF,serializeXML:()=>jee,setHybridRendererOptions:()=>nBe,setRandom:()=>GRe,span:()=>Fy,splitAccessPath:()=>gl,stringValue:()=>me,textMetrics:()=>Jo,timeBin:()=>FK,timeFloor:()=>DK,timeFormatLocale:()=>Xy,timeInterval:()=>nm,timeOffset:()=>AK,timeSequence:()=>MK,timeUnitSpecifier:()=>gK,timeUnits:()=>MI,toBoolean:()=>hI,toDate:()=>pI,toNumber:()=>vr,toSet:()=>_a,toString:()=>gI,transform:()=>xX,transforms:()=>am,truncate:()=>QY,truthy:()=>Is,tupleid:()=>Be,typeParsers:()=>YI,utcFloor:()=>CK,utcInterval:()=>im,utcOffset:()=>TK,utcSequence:()=>NK,utcdayofyear:()=>vK,utcquarter:()=>VY,utcweek:()=>bK,version:()=>cqe,visitArray:()=>Uc,week:()=>_K,writeConfig:()=>Gg,zero:()=>Pc,zoomLinear:()=>aI,zoomLog:()=>lI,zoomPow:()=>wD,zoomSymlog:()=>uI});var sf={};_t.r(sf),_t.d(sf,{accessPathDepth:()=>o_,accessPathWithDatum:()=>T5,compile:()=>Itt,contains:()=>mt,deepEqual:()=>cs,deleteNestedProperty:()=>aT,duplicate:()=>Ze,entries:()=>Td,every:()=>D5,fieldIntersection:()=>A5,flatAccessWithDatum:()=>Zse,getFirstDefined:()=>Zn,hasIntersection:()=>C5,hasProperty:()=>ue,hash:()=>bt,internalField:()=>nae,isBoolean:()=>Lv,isEmpty:()=>tn,isEqual:()=>Dqe,isInternalField:()=>iae,isNullOrFalse:()=>E5,isNumeric:()=>lT,keys:()=>oe,logicalExpr:()=>$v,mergeDeep:()=>Qse,never:()=>Xse,normalize:()=>$ue,normalizeAngle:()=>Uv,omit:()=>Mo,pick:()=>n_,prefixGenerator:()=>S5,removePathFromField:()=>r_,replaceAll:()=>Rh,replacePathInField:()=>qs,resetIdCounter:()=>Sqe,setEqual:()=>Jse,some:()=>i_,stringify:()=>nn,titleCase:()=>Bv,unique:()=>Vl,uniqueId:()=>tae,vals:()=>rr,varName:()=>xn,version:()=>Ptt});var af={};_t.r(af),_t.d(af,{carbong10:()=>Rnt,carbong100:()=>Pnt,carbong90:()=>Fnt,carbonwhite:()=>Int,dark:()=>int,excel:()=>rnt,fivethirtyeight:()=>ant,ggplot2:()=>lnt,googlecharts:()=>bnt,latimes:()=>fnt,powerbi:()=>Mnt,quartz:()=>hnt,urbaninstitute:()=>vnt,version:()=>Lnt,vox:()=>pnt});var ro={};function wt(e){return"function"==typeof e}function lf(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}_t.r(ro),_t.d(ro,{afterMain:()=>qW,afterRead:()=>zW,afterWrite:()=>XW,applyStyles:()=>Uk,arrow:()=>Pk,auto:()=>ZE,basePlacements:()=>Mg,beforeMain:()=>GW,beforeRead:()=>jW,beforeWrite:()=>YW,bottom:()=>Wo,clippingParents:()=>UW,computeStyles:()=>Bk,createPopper:()=>m8,createPopperBase:()=>Fxe,createPopperLite:()=>cq,detectOverflow:()=>Fg,end:()=>Ng,eventListeners:()=>Lk,flip:()=>Ik,hide:()=>Kfe,left:()=>Ur,main:()=>WW,modifierPhases:()=>QW,offset:()=>Vk,placements:()=>Sk,popper:()=>Og,popperGenerator:()=>nD,popperOffsets:()=>$k,preventOverflow:()=>Fk,read:()=>HW,reference:()=>VW,right:()=>qo,start:()=>Nf,top:()=>Br,variationPlacements:()=>Ck,viewport:()=>Dk,write:()=>KW});const uf=lf(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function _s(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Vi{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(wt(i))try{i()}catch(o){t=o instanceof uf?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{f6(o)}catch(s){t=t??[],s instanceof uf?t=[...t,...s.errors]:t.push(s)}}if(t)throw new uf(t)}}add(t){var n;if(t&&t!==this)if(this.closed)f6(t);else{if(t instanceof Vi){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&_s(n,t)}remove(t){const{_finalizers:n}=this;n&&_s(n,t),t instanceof Vi&&t._removeParent(this)}}Vi.EMPTY=(()=>{const e=new Vi;return e.closed=!0,e})();const Fb=Vi.EMPTY;function Pb(e){return e instanceof Vi||e&&"closed"in e&&wt(e.remove)&&wt(e.add)&&wt(e.unsubscribe)}function f6(e){wt(e)?e():e.unsubscribe()}const cf={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lb={setTimeout(e,t,...n){const{delegate:i}=Lb;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Lb;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function h6(e){Lb.setTimeout(()=>{const{onUnhandledError:t}=cf;if(!t)throw e;t(e)})}function Ep(){}const Bpe=u2("C",void 0,void 0);function u2(e,t,n){return{kind:e,value:t,error:n}}let df=null;function $b(e){if(cf.useDeprecatedSynchronousErrorHandling){const t=!df;if(t&&(df={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=df;if(df=null,n)throw i}}else e()}class c2 extends Vi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Pb(t)&&t.add(this)):this.destination=Wpe}static create(t,n,i){return new K_(t,n,i)}next(t){this.isStopped?f2(function Vpe(e){return u2("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?f2(function Upe(e){return u2("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?f2(Bpe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Hpe=Function.prototype.bind;function d2(e,t){return Hpe.call(e,t)}class zpe{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Bb(i)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Bb(i)}else Bb(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Bb(n)}}}class K_ extends c2{constructor(t,n,i){let r;if(super(),wt(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&cf.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&d2(t.next,o),error:t.error&&d2(t.error,o),complete:t.complete&&d2(t.complete,o)}):r=t}this.destination=new zpe(r)}}function Bb(e){cf.useDeprecatedSynchronousErrorHandling?function jpe(e){cf.useDeprecatedSynchronousErrorHandling&&df&&(df.errorThrown=!0,df.error=e)}(e):h6(e)}function f2(e,t){const{onStoppedNotification:n}=cf;n&&Lb.setTimeout(()=>n(e,t))}const Wpe={closed:!0,next:Ep,error:function Gpe(e){throw e},complete:Ep},h2="function"==typeof Symbol&&Symbol.observable||"@@observable";function su(e){return e}function p6(e){return 0===e.length?su:1===e.length?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}let on=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function Kpe(e){return e&&e instanceof c2||function Ype(e){return e&&wt(e.next)&&wt(e.error)&&wt(e.complete)}(e)&&Pb(e)}(n)?n:new K_(n,i,r);return $b(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=g6(i))((r,o)=>{const s=new K_({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[h2](){return this}pipe(...n){return p6(n)(this)}toPromise(n){return new(n=g6(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function g6(e){var t;return null!==(t=e??cf.Promise)&&void 0!==t?t:Promise}const Xpe=lf(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ln=(()=>{class e extends on{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new m6(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Xpe}next(n){$b(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){$b(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){$b(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Fb:(this.currentObservers=null,o.push(n),new Vi(()=>{this.currentObservers=null,_s(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new on;return n.source=this,n}}return e.create=(t,n)=>new m6(t,n),e})();class m6 extends ln{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:Fb}}function _6(e){return wt(e?.lift)}function Ln(e){return t=>{if(_6(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(e,t,n,i,r){return new Qpe(e,t,n,i,r)}class Qpe extends c2{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Xe(e,t){return Ln((n,i)=>{let r=0;n.subscribe(un(i,o=>{i.next(e.call(t,o,r++))}))})}function hc(e){return this instanceof hc?(this.v=e,this):new hc(e)}function w6(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function _2(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const y2=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function E6(e){return wt(e?.then)}function D6(e){return wt(e[h2])}function C6(e){return Symbol.asyncIterator&&wt(e?.[Symbol.asyncIterator])}function S6(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const A6=function vge(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function T6(e){return wt(e?.[A6])}function x6(e){return function b6(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,p){i[h]&&(r[h]=function(g){return new Promise(function(m,_){o.push([h,g,m,_])>1||l(h,g)})},p&&(r[h]=p(r[h])))}function l(h,p){try{!function u(h){h.value instanceof hc?Promise.resolve(h.value.v).then(c,d):f(o[0][2],h)}(i[h](p))}catch(g){f(o[0][3],g)}}function c(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:r}=yield hc(n.read());if(r)return yield hc(void 0);yield yield hc(i)}}finally{n.releaseLock()}})}function M6(e){return wt(e?.getReader)}function ji(e){if(e instanceof on)return e;if(null!=e){if(D6(e))return function bge(e){return new on(t=>{const n=e[h2]();if(wt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(y2(e))return function wge(e){return new on(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(E6(e))return function Ege(e){return new on(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,h6)})}(e);if(C6(e))return N6(e);if(T6(e))return function Dge(e){return new on(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(M6(e))return function Cge(e){return N6(x6(e))}(e)}throw S6(e)}function N6(e){return new on(t=>{(function Sge(e,t){var n,i,r,o;return function y6(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=w6(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function au(e,t,n,i=0,r=!1){const o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function di(e,t,n=1/0){return wt(t)?di((i,r)=>Xe((o,s)=>t(i,o,r,s))(ji(e(i,r))),n):("number"==typeof t&&(n=t),Ln((i,r)=>function Age(e,t,n,i,r,o,s,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=g=>u<i?p(g):l.push(g),p=g=>{o&&t.next(g),u++;let m=!1;ji(n(g,c++)).subscribe(un(t,_=>{r?.(_),o?h(_):t.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<i;){const _=l.shift();s?au(t,s,()=>p(_)):p(_)}f()}catch(_){t.error(_)}}))};return e.subscribe(un(t,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,e,n)))}function Dp(e=1/0){return di(su,e)}const ys=new on(e=>e.complete());function O6(e){return e&&wt(e.schedule)}function v2(e){return e[e.length-1]}function Ub(e){return wt(v2(e))?e.pop():void 0}function X_(e){return O6(v2(e))?e.pop():void 0}function k6(e,t=0){return Ln((n,i)=>{n.subscribe(un(i,r=>au(i,e,()=>i.next(r),t),()=>au(i,e,()=>i.complete(),t),r=>au(i,e,()=>i.error(r),t)))})}function I6(e,t=0){return Ln((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function R6(e,t){if(!e)throw new Error("Iterable cannot be null");return new on(n=>{au(n,t,()=>{const i=e[Symbol.asyncIterator]();au(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ii(e,t){return t?function Rge(e,t){if(null!=e){if(D6(e))return function Mge(e,t){return ji(e).pipe(I6(t),k6(t))}(e,t);if(y2(e))return function Oge(e,t){return new on(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(E6(e))return function Nge(e,t){return ji(e).pipe(I6(t),k6(t))}(e,t);if(C6(e))return R6(e,t);if(T6(e))return function kge(e,t){return new on(n=>{let i;return au(n,t,()=>{i=e[A6](),au(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>wt(i?.return)&&i.return()})}(e,t);if(M6(e))return function Ige(e,t){return R6(x6(e),t)}(e,t)}throw S6(e)}(e,t):ji(e)}function F6(...e){const t=X_(e),n=function xge(e,t){return"number"==typeof v2(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?ji(i[0]):Dp(n)(ii(i,t)):ys}function b2(e,t,...n){if(!0===t)return void e();if(!1===t)return;const i=new K_({next:()=>{i.unsubscribe(),e()}});return t(...n).subscribe(i)}function sn(e){for(let t in e)if(e[t]===sn)return t;throw Error("Could not find renamed property on target object.")}function w2(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function cn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(cn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function E2(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Pge=sn({__forward_ref__:sn});function et(e){return e.__forward_ref__=et,e.toString=function(){return cn(this())},e}function Ye(e){return D2(e)?e():e}function D2(e){return"function"==typeof e&&e.hasOwnProperty(Pge)&&e.__forward_ref__===et}function C2(e){return e&&!!e.\u0275providers}const P6="https://g.co/ng/security#xss";class Z extends Error{constructor(t,n){super(Vb(t,n)),this.code=t}}function Vb(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function it(e){return"string"==typeof e?e:null==e?"":String(e)}function jb(e,t){throw new Z(-201,!1)}function Ht(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Bt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Hb(e){return L6(e,zb)||L6(e,B6)}function L6(e,t){return e.hasOwnProperty(t)?e[t]:null}function $6(e){return e&&(e.hasOwnProperty(S2)||e.hasOwnProperty(zge))?e[S2]:null}const zb=sn({\u0275prov:sn}),S2=sn({\u0275inj:sn}),B6=sn({ngInjectableDef:sn}),zge=sn({ngInjectorDef:sn});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let A2;function bs(e){const t=A2;return A2=e,t}function U6(e,t,n){const i=Hb(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Ke.Optional?null:void 0!==t?t:void jb(cn(e))}const _n=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Q_={},T2="__NG_DI_FLAG__",Gb="ngTempTokenPath",Wge="ngTokenPath",qge=/\n/gm,Yge="\u0275",V6="__source";let J_;function Cp(e){const t=J_;return J_=e,t}function Kge(e,t=Ke.Default){if(void 0===J_)throw new Z(-203,!1);return null===J_?U6(e,void 0,t):J_.get(e,t&Ke.Optional?null:void 0,t)}function fe(e,t=Ke.Default){return(function Gge(){return A2}()||Kge)(Ye(e),t)}function tt(e,t=Ke.Default){return fe(e,Wb(t))}function Wb(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function x2(e){const t=[];for(let n=0;n<e.length;n++){const i=Ye(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Z(900,!1);let r,o=Ke.Default;for(let s=0;s<i.length;s++){const a=i[s],l=Xge(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(fe(r,o))}else t.push(fe(i))}return t}function Z_(e,t){return e[T2]=t,e.prototype[T2]=t,e}function Xge(e){return e[T2]}function lu(e){return{toString:e}.toString()}var el=(()=>((el=el||{})[el.OnPush=0]="OnPush",el[el.Default=1]="Default",el))(),oa=(()=>{return(e=oa||(oa={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",oa;var e})();const uu={},Ut=[],qb=sn({\u0275cmp:sn}),M2=sn({\u0275dir:sn}),N2=sn({\u0275pipe:sn}),H6=sn({\u0275mod:sn}),cu=sn({\u0275fac:sn}),e0=sn({__NG_ELEMENT_ID__:sn});let Zge=0;function kt(e){return lu(()=>{const t=G6(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===el.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||oa.Emulated,id:"c"+Zge++,styles:e.styles||Ut,_:null,schemas:e.schemas||null,tView:null};W6(n);const i=e.dependencies;return n.directiveDefs=Yb(i,!1),n.pipeDefs=Yb(i,!0),n})}function tme(e){return Gt(e)||cr(e)}function nme(e){return null!==e}function zt(e){return lu(()=>({type:e.type,bootstrap:e.bootstrap||Ut,declarations:e.declarations||Ut,imports:e.imports||Ut,exports:e.exports||Ut,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function z6(e,t){if(null==e)return uu;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}function ve(e){return lu(()=>{const t=G6(e);return W6(t),t})}function ur(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Gt(e){return e[qb]||null}function cr(e){return e[M2]||null}function oo(e){return e[N2]||null}function Lo(e,t){const n=e[H6]||null;if(!n&&!0===t)throw new Error(`Type ${cn(e)} does not have '\u0275mod' property.`);return n}function G6(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||Ut,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:z6(e.inputs,t),outputs:z6(e.outputs)}}function W6(e){e.features?.forEach(t=>t(e))}function Yb(e,t){if(!e)return null;const n=t?oo:tme;return()=>("function"==typeof e?e():e).map(i=>n(i)).filter(nme)}const du=0,xe=1,ct=2,$n=3,sa=4,ff=5,dr=6,Ap=7,Yn=8,Kb=9,Xb=10,ft=11,O2=12,t0=13,q6=14,Tp=15,fr=16,n0=17,xp=18,tl=19,r0=20,Y6=21,yn=22,k2=1,K6=2,Qb=7,Jb=8,Mp=9,kr=10;function $o(e){return Array.isArray(e)&&"object"==typeof e[k2]}function aa(e){return Array.isArray(e)&&!0===e[k2]}function I2(e){return 0!=(4&e.flags)}function o0(e){return e.componentOffset>-1}function Zb(e){return 1==(1&e.flags)}function la(e){return!!e.template}function rme(e){return 0!=(256&e[ct])}function hf(e,t){return e.hasOwnProperty(cu)?e[cu]:null}class ame{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Bn(){return J6}function J6(e){return e.type.prototype.ngOnChanges&&(e.setInput=ume),lme}function lme(){const e=e9(this),t=e?.current;if(t){const n=e.previous;if(n===uu)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function ume(e,t,n,i){const r=this.declaredInputs[n],o=e9(e)||function cme(e,t){return e[Z6]=t}(e,{previous:uu,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new ame(l&&l.currentValue,t,a===uu),e[i]=t}Bn.ngInherit=!0;const Z6="__ngSimpleChanges__";function e9(e){return e[Z6]||null}const ws=function(e,t,n){};function Hi(e){for(;Array.isArray(e);)e=e[du];return e}function ew(e,t){return Hi(t[e])}function Bo(e,t){return Hi(t[e.index])}function i9(e,t){return e.data[t]}function Np(e,t){return e[t]}function so(e,t){const n=t[e];return $o(n)?n:n[du]}function tw(e){return 64==(64&e[ct])}function gc(e,t){return null==t?null:e[t]}function r9(e){e[xp]=0}function F2(e,t){e[ff]+=t;let n=e,i=e[$n];for(;null!==i&&(1===t&&1===n[ff]||-1===t&&0===n[ff]);)i[ff]+=t,n=i,i=i[$n]}const rt={lFrame:p9(null),bindingsEnabled:!0};function s9(){return rt.bindingsEnabled}function se(){return rt.lFrame.lView}function Tt(){return rt.lFrame.tView}function It(e){return rt.lFrame.contextLView=e,e[Yn]}function Rt(e){return rt.lFrame.contextLView=null,e}function zi(){let e=a9();for(;null!==e&&64===e.type;)e=e.parent;return e}function a9(){return rt.lFrame.currentTNode}function s0(){const e=rt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function nl(e,t){const n=rt.lFrame;n.currentTNode=e,n.isParent=t}function P2(){return rt.lFrame.isParent}function L2(){rt.lFrame.isParent=!1}function Ir(){const e=rt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function fu(){return rt.lFrame.bindingIndex}function Op(){return rt.lFrame.bindingIndex++}function hu(e){const t=rt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function c9(e){rt.lFrame.inI18n=e}function Dme(e,t){const n=rt.lFrame;n.bindingIndex=n.bindingRootIndex=e,$2(t)}function $2(e){rt.lFrame.currentDirectiveIndex=e}function d9(){return rt.lFrame.currentQueryIndex}function U2(e){rt.lFrame.currentQueryIndex=e}function Sme(e){const t=e[xe];return 2===t.type?t.declTNode:1===t.type?e[dr]:null}function f9(e,t,n){if(n&Ke.SkipSelf){let r=t,o=e;for(;!(r=r.parent,null!==r||n&Ke.Host||(r=Sme(o),null===r||(o=o[Tp],10&r.type))););if(null===r)return!1;t=r,e=o}const i=rt.lFrame=h9();return i.currentTNode=t,i.lView=e,!0}function V2(e){const t=h9(),n=e[xe];rt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function h9(){const e=rt.lFrame,t=null===e?null:e.child;return null===t?p9(e):t}function p9(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function g9(){const e=rt.lFrame;return rt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const m9=g9;function j2(){const e=g9();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Rr(){return rt.lFrame.selectedIndex}function pf(e){rt.lFrame.selectedIndex=e}function Nn(){const e=rt.lFrame;return i9(e.tView,e.selectedIndex)}function nw(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(e.contentHooks??(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks??(e.contentHooks=[])).push(n,a),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks??(e.viewHooks=[])).push(-n,l),u&&((e.viewHooks??(e.viewHooks=[])).push(n,u),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks??(e.destroyHooks=[])).push(n,c)}}function iw(e,t,n){_9(e,t,3,n)}function rw(e,t,n,i){(3&e[ct])===n&&_9(e,t,n,i)}function H2(e,t){let n=e[ct];(3&n)===t&&(n&=2047,n+=1,e[ct]=n)}function _9(e,t,n,i){const o=i??-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&e[xp]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[xp]+=65536),(a<o||-1==o)&&(Rme(e,n,t,l),e[xp]=(4294901760&e[xp])+l+2),l++}function Rme(e,t,n,i){const r=n[i]<0,o=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[ct]>>11<e[xp]>>16&&(3&e[ct])===t){e[ct]+=2048,ws(4,a,o);try{o.call(a)}finally{ws(5,a,o)}}}else{ws(4,a,o);try{o.call(a)}finally{ws(5,a,o)}}}const kp=-1;class a0{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function G2(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{const o=r,s=n[++i];v9(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function y9(e){return 3===e||4===e||6===e}function v9(e){return 64===e.charCodeAt(0)}function l0(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||b9(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function b9(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function w9(e){return e!==kp}function ow(e){return 32767&e}function sw(e,t){let n=function $me(e){return e>>16}(e),i=t;for(;n>0;)i=i[Tp],n--;return i}let W2=!0;function aw(e){const t=W2;return W2=e,t}const E9=255,D9=5;let Bme=0;const il={};function lw(e,t){const n=C9(e,t);if(-1!==n)return n;const i=t[xe];i.firstCreatePass&&(e.injectorIndex=t.length,q2(i.data,e),q2(t,null),q2(i.blueprint,null));const r=Y2(e,t),o=e.injectorIndex;if(w9(r)){const s=ow(r),a=sw(r,t),l=a[xe].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function q2(e,t){e.push(0,0,0,0,0,0,0,0,t)}function C9(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Y2(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=O9(r),null===i)return kp;if(n++,r=r[Tp],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return kp}function K2(e,t,n){!function Ume(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(e0)&&(i=n[e0]),null==i&&(i=n[e0]=Bme++);const r=i&E9;t.data[e+(r>>D9)]|=1<<r}(e,t,n)}function S9(e,t,n){if(n&Ke.Optional||void 0!==e)return e;jb()}function A9(e,t,n,i){if(n&Ke.Optional&&void 0===i&&(i=null),!(n&(Ke.Self|Ke.Host))){const r=e[Kb],o=bs(void 0);try{return r?r.get(t,i,n&Ke.Optional):U6(t,i,n&Ke.Optional)}finally{bs(o)}}return S9(i,0,n)}function T9(e,t,n,i=Ke.Default,r){if(null!==e){if(1024&t[ct]){const s=function Gme(e,t,n,i,r){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[ct]&&!(256&s[ct]);){const a=x9(o,s,n,i|Ke.Self,il);if(a!==il)return a;let l=o.parent;if(!l){const u=s[Y6];if(u){const c=u.get(n,il,i);if(c!==il)return c}l=O9(s),s=s[Tp]}o=l}return r}(e,t,n,i,il);if(s!==il)return s}const o=x9(e,t,n,i,il);if(o!==il)return o}return A9(t,n,i,r)}function x9(e,t,n,i,r){const o=function Hme(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(e0)?e[e0]:void 0;return"number"==typeof t?t>=0?t&E9:zme:t}(n);if("function"==typeof o){if(!f9(t,e,i))return i&Ke.Host?S9(r,0,i):A9(t,n,i,r);try{const s=o(i);if(null!=s||i&Ke.Optional)return s;jb()}finally{m9()}}else if("number"==typeof o){let s=null,a=C9(e,t),l=kp,u=i&Ke.Host?t[fr][dr]:null;for((-1===a||i&Ke.SkipSelf)&&(l=-1===a?Y2(e,t):t[a+8],l!==kp&&N9(i,!1)?(s=t[xe],a=ow(l),t=sw(l,t)):a=-1);-1!==a;){const c=t[xe];if(M9(o,a,c.data)){const d=jme(a,t,n,s,i,u);if(d!==il)return d}l=t[a+8],l!==kp&&N9(i,t[xe].data[a+8]===u)&&M9(o,a,t)?(s=c,a=ow(l),t=sw(l,t)):a=-1}}return r}function jme(e,t,n,i,r,o){const s=t[xe],a=s.data[e+8],c=uw(a,s,n,null==i?o0(a)&&W2:i!=s&&0!=(3&a.type),r&Ke.Host&&o===a);return null!==c?gf(t,s,c,a):il}function uw(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,f=r?a+c:e.directiveEnd;for(let h=i?a:a+c;h<f;h++){const p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(r){const h=s[l];if(h&&la(h)&&h.type===n)return l}return null}function gf(e,t,n,i){let r=e[n];const o=t.data;if(function Fme(e){return e instanceof a0}(r)){const s=r;s.resolving&&function Lge(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Z(-200,`Circular dependency in DI detected for ${e}${n}`)}(function jt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():it(e)}(o[n]));const a=aw(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?bs(s.injectImpl):null;f9(e,i,Ke.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function Ime(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=J6(t);(n.preOrderHooks??(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,s)}r&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&bs(l),aw(a),s.resolving=!1,m9()}}return r}function M9(e,t,n){return!!(n[t+(e>>D9)]&1<<e)}function N9(e,t){return!(e&Ke.Self||e&Ke.Host&&t)}class Ip{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return T9(this._tNode,this._lView,t,Wb(i),n)}}function zme(){return new Ip(zi(),se())}function Un(e){return lu(()=>{const t=e.prototype.constructor,n=t[cu]||X2(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[cu]||X2(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function X2(e){return D2(e)?()=>{const t=X2(Ye(e));return t&&t()}:hf(e)}function O9(e){const t=e[xe],n=t.type;return 2===n?t.declTNode:1===n?e[dr]:null}function mc(e){return function Vme(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(y9(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(zi(),e)}const Fp="__parameters__";function Lp(e,t,n){return lu(()=>{const i=function Q2(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,u,c){const d=l.hasOwnProperty(Fp)?l[Fp]:Object.defineProperty(l,Fp,{value:[]})[Fp];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class Ie{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function mf(e,t){e.forEach(n=>Array.isArray(n)?mf(n,t):t(n))}function I9(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function cw(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function d0(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function Uo(e,t,n){let i=$p(e,t);return i>=0?e[1|i]=n:(i=~i,function Kme(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function Z2(e,t){const n=$p(e,t);if(n>=0)return e[1|n]}function $p(e,t){return function R9(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}(e,t,1)}const f0=Z_(Lp("Optional"),8),h0=Z_(Lp("SkipSelf"),4);var ao=(()=>((ao=ao||{})[ao.Important=1]="Important",ao[ao.DashCase=2]="DashCase",ao))();const p_e=/^>|^->|<!--|-->|--!>|<!-$/g,g_e=/(<|>)/,m_e="\u200b$1\u200b";const oM=new Map;let __e=0;const aM="__ngContext__";function hr(e,t){$o(t)?(e[aM]=t[r0],function v_e(e){oM.set(e[r0],e)}(t)):e[aM]=t}let lM;function uM(e,t){return lM(e,t)}function _0(e){const t=e[$n];return aa(t)?t[$n]:t}function cM(e){return e7(e[t0])}function dM(e){return e7(e[sa])}function e7(e){for(;null!==e&&!aa(e);)e=e[sa];return e}function Up(e,t,n,i,r){if(null!=i){let o,s=!1;aa(i)?o=i:$o(i)&&(s=!0,i=i[du]);const a=Hi(i);0===e&&null!==n?null==r?s7(t,n,a):_f(t,n,a,r||null,!0):1===e&&null!==n?_f(t,n,a,r||null,!0):2===e?yM(t,a,s):3===e&&t.destroyNode(a),null!=o&&function j_e(e,t,n,i,r){const o=n[Qb];o!==Hi(n)&&Up(t,e,i,o,r);for(let a=kr;a<n.length;a++){const l=n[a];y0(l[xe],l,e,t,i,o)}}(t,e,o,n,r)}}function fM(e,t){return e.createText(t)}function t7(e,t,n){e.setValue(t,n)}function N_e(e,t){return e.createComment(function W9(e){return e.replace(p_e,t=>t.replace(g_e,m_e))}(t))}function hM(e,t,n){return e.createElement(t,n)}function n7(e,t){const n=e[Mp],i=n.indexOf(t),r=t[$n];512&t[ct]&&(t[ct]&=-513,F2(r,-1)),n.splice(i,1)}function pM(e,t){if(e.length<=kr)return;const n=kr+t,i=e[n];if(i){const r=i[n0];null!==r&&r!==e&&n7(r,i),t>0&&(e[n-1][sa]=i[sa]);const o=cw(e,kr+t);!function O_e(e,t){y0(e,t,t[ft],2,null,null),t[du]=null,t[dr]=null}(i[xe],i);const s=o[tl];null!==s&&s.detachView(o[xe]),i[$n]=null,i[sa]=null,i[ct]&=-65}return i}function i7(e,t){if(!(128&t[ct])){const n=t[ft];n.destroyNode&&y0(e,t,n,3,null,null),function R_e(e){let t=e[t0];if(!t)return gM(e[xe],e);for(;t;){let n=null;if($o(t))n=t[t0];else{const i=t[kr];i&&(n=i)}if(!n){for(;t&&!t[sa]&&t!==e;)$o(t)&&gM(t[xe],t),t=t[$n];null===t&&(t=e),$o(t)&&gM(t[xe],t),n=t&&t[sa]}t=n}}(t)}}function gM(e,t){if(!(128&t[ct])){t[ct]&=-65,t[ct]|=128,function $_e(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof a0)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];ws(4,a,l);try{l.call(a)}finally{ws(5,a,l)}}else{ws(4,r,o);try{o.call(r)}finally{ws(5,r,o)}}}}}(e,t),function L_e(e,t){const n=e.cleanup,i=t[Ap];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?i[r=s]():i[r=-s].unsubscribe(),o+=2}else{const s=i[r=n[o+1]];n[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();t[Ap]=null}}(e,t),1===t[xe].type&&t[ft].destroy();const n=t[n0];if(null!==n&&aa(t[$n])){n!==t[$n]&&n7(n,t);const i=t[tl];null!==i&&i.detachView(e)}!function b_e(e){oM.delete(e[r0])}(t)}}function r7(e,t,n){return o7(e,t.parent,n)}function o7(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[du];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=e.data[i.directiveStart+r];if(o===oa.None||o===oa.Emulated)return null}return Bo(i,n)}}function _f(e,t,n,i,r){e.insertBefore(t,n,i,r)}function s7(e,t,n){e.appendChild(t,n)}function a7(e,t,n,i,r){null!==i?_f(e,t,n,i,r):s7(e,t,n)}function pw(e,t){return e.parentNode(t)}function l7(e,t,n){return c7(e,t,n)}function u7(e,t,n){return 40&e.type?Bo(e,n):null}let mM,_w,wM,yw,c7=u7;function d7(e,t){c7=e,mM=t}function gw(e,t,n,i){const r=r7(e,i,t),o=t[ft],a=l7(i.parent||t[dr],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)a7(o,r,n[l],a,!1);else a7(o,r,n,a,!1);void 0!==mM&&mM(o,i,t,n,r)}function mw(e,t){if(null!==t){const n=t.type;if(3&n)return Bo(t,e);if(4&n)return _M(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return mw(e,i);{const r=e[t.index];return aa(r)?_M(-1,r):Hi(r)}}if(32&n)return uM(t,e)()||Hi(e[t.index]);{const i=f7(e,t);return null!==i?Array.isArray(i)?i[0]:mw(_0(e[fr]),i):mw(e,t.next)}}return null}function f7(e,t){return null!==t?e[fr][dr].projection[t.projection]:null}function _M(e,t){const n=kr+e+1;if(n<t.length){const i=t[n],r=i[xe].firstChild;if(null!==r)return mw(i,r)}return t[Qb]}function yM(e,t,n){const i=pw(e,t);i&&function B_e(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}function vM(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===t&&(a&&hr(Hi(a),i),n.flags|=2),32!=(32&n.flags))if(8&l)vM(e,t,n.child,i,r,o,!1),Up(t,e,r,a,o);else if(32&l){const u=uM(n,i);let c;for(;c=u();)Up(t,e,r,c,o);Up(t,e,r,a,o)}else 16&l?h7(e,t,i,n,r,o):Up(t,e,r,a,o);n=s?n.projectionNext:n.next}}function y0(e,t,n,i,r,o){vM(n,i,e.firstChild,t,r,o,!1)}function h7(e,t,n,i,r,o){const s=n[fr],l=s[dr].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Up(t,e,r,l[u],o);else vM(e,t,l,s[$n],r,o,!0)}function p7(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function g7(e,t,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&G2(e,t,i),null!==r&&p7(e,t,r),null!==o&&function z_e(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}function Vp(e){return function bM(){if(void 0===_w&&(_w=null,_n.trustedTypes))try{_w=_n.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return _w}()?.createHTML(e)||e}function v7(e){return function EM(){if(void 0===yw&&(yw=null,_n.trustedTypes))try{yw=_n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return yw}()?.createScriptURL(e)||e}class b7{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${P6})`}}function _c(e){return e instanceof b7?e.changingThisBreaksApplicationSecurity:e}function v0(e,t){const n=function e0e(e){return e instanceof b7&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${P6})`)}return n===t}class t0e{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Vp(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class n0e{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Vp(t),n}}const r0e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function DM(e){return(e=String(e)).match(r0e)?e:"unsafe:"+e}function pu(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function b0(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const E7=pu("area,br,col,hr,img,wbr"),D7=pu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C7=pu("rp,rt"),CM=b0(E7,b0(D7,pu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),b0(C7,pu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),b0(C7,D7)),SM=pu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),S7=b0(SM,pu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var ri=(()=>((ri=ri||{})[ri.NONE=0]="NONE",ri[ri.HTML=1]="HTML",ri[ri.STYLE=2]="STYLE",ri[ri.SCRIPT=3]="SCRIPT",ri[ri.URL=4]="URL",ri[ri.RESOURCE_URL=5]="RESOURCE_URL",ri))();function Vo(e){const t=w0();return t?t.sanitize(ri.URL,e)||"":v0(e,"URL")?_c(e):DM(it(e))}function T7(e){const t=w0();if(t)return v7(t.sanitize(ri.RESOURCE_URL,e)||"");if(v0(e,"ResourceURL"))return v7(_c(e));throw new Z(904,!1)}function w0(){const e=se();return e&&e[O2]}const bw=new Ie("ENVIRONMENT_INITIALIZER"),M7=new Ie("INJECTOR",-1),N7=new Ie("INJECTOR_DEF_TYPES");class O7{get(t,n=Q_){if(n===Q_){const i=new Error(`NullInjectorError: No provider for ${cn(t)}!`);throw i.name="NullInjectorError",i}return n}}function y0e(...e){return{\u0275providers:k7(0,e),\u0275fromNgModule:!0}}function k7(e,...t){const n=[],i=new Set;let r;return mf(t,o=>{const s=o;TM(s,n,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&I7(r,n),n}function I7(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];xM(r,o=>{t.push(o)})}}function TM(e,t,n,i){if(!(e=Ye(e)))return!1;let r=null,o=$6(e);const s=!o&&Gt(e);if(o||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(o=$6(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of l)TM(u,t,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;i.add(r);try{mf(o.imports,c=>{TM(c,t,n,i)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&I7(u,t)}if(!a){const u=hf(r)||(()=>new r);t.push({provide:r,useFactory:u,deps:Ut},{provide:N7,useValue:r,multi:!0},{provide:bw,useValue:()=>fe(r),multi:!0})}const l=o.providers;null==l||a||xM(l,c=>{t.push(c)})}}return r!==e&&void 0!==e.providers}function xM(e,t){for(let n of e)C2(n)&&(n=n.\u0275providers),Array.isArray(n)?xM(n,t):t(n)}const v0e=sn({provide:String,useValue:sn});function MM(e){return null!==e&&"object"==typeof e&&v0e in e}function yf(e){return"function"==typeof e}const NM=new Ie("Set Injector scope."),ww={},w0e={};let OM;function Ew(){return void 0===OM&&(OM=new O7),OM}class Ds{}class P7 extends Ds{get destroyed(){return this._destroyed}constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,IM(t,s=>this.processProvider(s)),this.records.set(M7,jp(void 0,this)),r.has("environment")&&this.records.set(Ds,jp(void 0,this));const o=this.records.get(NM);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(N7.multi,Ut,Ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Cp(this),i=bs(void 0);try{return t()}finally{Cp(n),bs(i)}}get(t,n=Q_,i=Ke.Default){this.assertNotDestroyed(),i=Wb(i);const r=Cp(this),o=bs(void 0);try{if(!(i&Ke.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function A0e(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ie}(t)&&Hb(t);a=l&&this.injectableDefInScope(l)?jp(kM(t),ww):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&Ke.Self?Ew():this.parent).get(t,n=i&Ke.Optional&&n===Q_?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Gb]=s[Gb]||[]).unshift(cn(t)),r)throw s;return function Qge(e,t,n,i){const r=e[Gb];throw t[V6]&&r.unshift(t[V6]),e.message=function Jge(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Yge?e.slice(2):e;let r=cn(t);if(Array.isArray(t))r=t.map(cn).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):cn(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(qge,"\n  ")}`}("\n"+e.message,r,n,i),e[Wge]=r,e[Gb]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{bs(o),Cp(r)}}resolveInjectorInitializers(){const t=Cp(this),n=bs(void 0);try{const i=this.get(bw.multi,Ut,Ke.Self);for(const r of i)r()}finally{Cp(t),bs(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(cn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(t){let n=yf(t=Ye(t))?t:Ye(t&&t.provide);const i=function D0e(e){return MM(e)?jp(void 0,e.useValue):jp(L7(e),ww)}(t);if(yf(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=jp(void 0,ww,!0),r.factory=()=>x2(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===ww&&(n.value=w0e,n.value=n.factory()),"object"==typeof n.value&&n.value&&function S0e(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Ye(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function kM(e){const t=Hb(e),n=null!==t?t.factory:hf(e);if(null!==n)return n;if(e instanceof Ie)throw new Z(204,!1);if(e instanceof Function)return function E0e(e){const t=e.length;if(t>0)throw d0(t,"?"),new Z(204,!1);const n=function Hge(e){return e&&(e[zb]||e[B6])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Z(204,!1)}function L7(e,t,n){let i;if(yf(e)){const r=Ye(e);return hf(r)||kM(r)}if(MM(e))i=()=>Ye(e.useValue);else if(function F7(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...x2(e.deps||[]));else if(function R7(e){return!(!e||!e.useExisting)}(e))i=()=>fe(Ye(e.useExisting));else{const r=Ye(e&&(e.useClass||e.provide));if(!function C0e(e){return!!e.deps}(e))return hf(r)||kM(r);i=()=>new r(...x2(e.deps))}return i}function jp(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function IM(e,t){for(const n of e)Array.isArray(n)?IM(n,t):n&&C2(n)?IM(n.\u0275providers,t):t(n)}class T0e{}class $7{}class M0e{resolveComponentFactory(t){throw function x0e(e){const t=Error(`No component factory found for ${cn(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let E0=(()=>{class e{}return e.NULL=new M0e,e})();function N0e(){return Hp(zi(),se())}function Hp(e,t){return new Ot(Bo(e,t))}let Ot=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=N0e,e})();function O0e(e){return e instanceof Ot?e.nativeElement:e}class zp{}let pr=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function k0e(){const e=se(),n=so(zi().index,e);return($o(n)?n:e)[ft]}(),e})(),I0e=(()=>{class e{}return e.\u0275prov=he({token:e,providedIn:"root",factory:()=>null}),e})();class D0{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const R0e=new D0("15.2.10"),RM={},FM="ngOriginalError";function PM(e){return e[FM]}class Gp{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&PM(t);for(;n&&PM(n);)n=PM(n);return n||null}}function U7(e){return e.ownerDocument.defaultView}function gu(e){return e instanceof Function?e():e}function j7(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}const H7="ng-template";function z0e(e,t,n){let i=0,r=!0;for(;i<e.length;){let o=e[i++];if("string"==typeof o&&r){const s=e[i++];if(n&&"class"===o&&-1!==j7(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;i<e.length&&"string"==typeof(o=e[i++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function z7(e){return 4===e.type&&e.value!==H7}function G0e(e,t,n){return t===(4!==e.type||n?e.value:H7)}function W0e(e,t,n){let i=4;const r=e.attrs||[],o=function K0e(e){for(let t=0;t<e.length;t++)if(y9(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!G0e(e,l,n)||""===l&&1===t.length){if(ua(i))return!1;s=!0}}else{const u=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!z0e(e.attrs,u,n)){if(ua(i))return!1;s=!0}continue}const d=q0e(8&i?"class":l,r,z7(e),n);if(-1===d){if(ua(i))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==j7(h,u,0)||2&i&&u!==f){if(ua(i))return!1;s=!0}}}}else{if(!s&&!ua(i)&&!ua(l))return!1;if(s&&ua(l))continue;s=!1,i=l|1&i}}return ua(i)||s}function ua(e){return 0==(1&e)}function q0e(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function X0e(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function G7(e,t,n=!1){for(let i=0;i<t.length;i++)if(W0e(e,t[i],n))return!0;return!1}function Q0e(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function W7(e,t){return e?":not("+t.trim()+")":t}function J0e(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!ua(s)&&(t+=W7(o,r),r=""),i=s,o=o||!ua(i);n++}return""!==r&&(t+=W7(o,r)),t}const ot={};function q(e){q7(Tt(),se(),Rr()+e,!1)}function q7(e,t,n,i){if(!i)if(3==(3&t[ct])){const o=e.preOrderCheckHooks;null!==o&&iw(t,o,n)}else{const o=e.preOrderHooks;null!==o&&rw(t,o,0,n)}pf(n)}function Q7(e,t=null,n=null,i){const r=J7(e,t,n,i);return r.resolveInjectorInitializers(),r}function J7(e,t=null,n=null,i,r=new Set){const o=[n||Ut,y0e(e)];return i=i||("object"==typeof e?void 0:cn(e)),new P7(o,t||Ew(),i||null,r)}let uo=(()=>{class e{static create(n,i){if(Array.isArray(n))return Q7({name:""},i,n,"");{const r=n.name??"";return Q7({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=Q_,e.NULL=new O7,e.\u0275prov=he({token:e,providedIn:"any",factory:()=>fe(M7)}),e.__NG_ELEMENT_ID__=-1,e})();function L(e,t=Ke.Default){const n=se();return null===n?fe(e,t):T9(zi(),n,Ye(e),t)}function sU(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const s=e.data[o];U2(n[i]),s.contentQueries(2,t[o],o)}}}function Cw(e,t,n,i,r,o,s,a,l,u,c){const d=t.blueprint.slice();return d[du]=r,d[ct]=76|i,(null!==c||e&&1024&e[ct])&&(d[ct]|=1024),r9(d),d[$n]=d[Tp]=e,d[Yn]=n,d[Xb]=s||e&&e[Xb],d[ft]=a||e&&e[ft],d[O2]=l||e&&e[O2]||null,d[Kb]=u||e&&e[Kb]||null,d[dr]=o,d[r0]=function y_e(){return __e++}(),d[Y6]=c,d[fr]=2==t.type?e[fr]:d,d}function Yp(e,t,n,i,r){let o=e.data[t];if(null===o)o=VM(e,t,n,i,r),function Eme(){return rt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=s0();o.injectorIndex=null===s?-1:s.injectorIndex}return nl(o,!0),o}function VM(e,t,n,i,r){const o=a9(),s=P2(),l=e.data[t]=function Cye(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}function C0(e,t,n,i){if(0===n)return-1;const r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function jM(e,t,n){V2(t);try{const i=e.viewQuery;null!==i&&QM(1,i,n);const r=e.template;null!==r&&aU(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&sU(e,t),e.staticViewQueries&&QM(2,e.viewQuery,n);const o=e.components;null!==o&&function wye(e,t){for(let n=0;n<t.length;n++)zye(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[ct]&=-5,j2()}}function Sw(e,t,n,i){const r=t[ct];if(128!=(128&r)){V2(t);try{r9(t),function u9(e){return rt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&aU(e,t,n,2,i);const s=3==(3&r);if(s){const u=e.preOrderCheckHooks;null!==u&&iw(t,u,null)}else{const u=e.preOrderHooks;null!==u&&rw(t,u,0,null),H2(t,0)}if(function jye(e){for(let t=cM(e);null!==t;t=dM(t)){if(!t[K6])continue;const n=t[Mp];for(let i=0;i<n.length;i++){const r=n[i];512&r[ct]||F2(r[$n],1),r[ct]|=512}}}(t),function Vye(e){for(let t=cM(e);null!==t;t=dM(t))for(let n=kr;n<t.length;n++){const i=t[n],r=i[xe];tw(i)&&Sw(r,i,r.template,i[Yn])}}(t),null!==e.contentQueries&&sU(e,t),s){const u=e.contentCheckHooks;null!==u&&iw(t,u)}else{const u=e.contentHooks;null!==u&&rw(t,u,1),H2(t,1)}!function vye(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)pf(~r);else{const o=r,s=n[++i],a=n[++i];Dme(s,o),a(2,t[o])}}}finally{pf(-1)}}(e,t);const a=e.components;null!==a&&function bye(e,t){for(let n=0;n<t.length;n++)Hye(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&QM(2,l,i),s){const u=e.viewCheckHooks;null!==u&&iw(t,u)}else{const u=e.viewHooks;null!==u&&rw(t,u,2),H2(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[ct]&=-41,512&t[ct]&&(t[ct]&=-513,F2(t[$n],-1))}finally{j2()}}}function aU(e,t,n,i,r){const o=Rr(),s=2&i;try{pf(-1),s&&t.length>yn&&q7(e,t,yn,!1),ws(s?2:0,r),n(i,r)}finally{pf(o),ws(s?3:1,r)}}function HM(e,t,n){if(I2(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}function zM(e,t,n){s9()&&(function Oye(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;o0(n)&&function $ye(e,t,n){const i=Bo(t,e),r=lU(n),o=e[Xb],s=Aw(e,Cw(e,r,null,n.onPush?32:16,i,t,o,o.createRenderer(i,n),null,null,null));e[t.index]=s}(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||lw(n,t),hr(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],u=gf(t,e,a,n);hr(u,t),null!==s&&Bye(0,a-r,u,l,0,s),la(l)&&(so(n.index,t)[Yn]=gf(t,e,a,n))}}(e,t,n,Bo(n,t)),64==(64&n.flags)&&hU(e,t,n))}function GM(e,t,n=Bo){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function lU(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=WM(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function WM(e,t,n,i,r,o,s,a,l,u){const c=yn+i,d=c+r,f=function Eye(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:ot);return n}(c,d),h="function"==typeof u?u():u;return f[xe]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function uU(e,t,n,i){const r=gU(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&mU(e).push(i,r.length-1))}function cU(e,t,n,i){for(let r in e)if(e.hasOwnProperty(r)){n=null===n?{}:n;const o=e[r];null===i?dU(n,t,r,o):i.hasOwnProperty(r)&&dU(n,t,i[r],o)}return n}function dU(e,t,n,i){e.hasOwnProperty(n)?e[n].push(t,i):e[n]=[t,i]}function jo(e,t,n,i,r,o,s,a){const l=Bo(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[i])?(JM(e,n,c,i,r),o0(t)&&function Tye(e,t){const n=so(t,e);16&n[ct]||(n[ct]|=32)}(n,t.index)):3&t.type&&(i=function Aye(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(l,i,r))}function qM(e,t,n,i){if(s9()){const r=null===i?null:{"":-1},o=function Iye(e,t){const n=e.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(G7(t,s.selectors,!1))if(i||(i=[]),la(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),YM(e,t,a.length)}else i.unshift(s),YM(e,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&fU(e,t,n,s,r,a),r&&function Rye(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const o=n[t[r+1]];if(null==o)throw new Z(-301,!1);i.push(t[r],o)}}}(n,i,r)}n.mergedAttrs=l0(n.mergedAttrs,n.attrs)}function fU(e,t,n,i,r,o){for(let u=0;u<i.length;u++)K2(lw(n,t),e,i[u].type);!function Pye(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,i.length);for(let u=0;u<i.length;u++){const c=i[u];c.providersResolver&&c.providersResolver(c)}let s=!1,a=!1,l=C0(e,t,i.length,null);for(let u=0;u<i.length;u++){const c=i[u];n.mergedAttrs=l0(n.mergedAttrs,c.hostAttrs),Lye(e,n,t,l,c),Fye(l,c,r),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const d=c.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function Sye(e,t,n){const r=t.directiveEnd,o=e.data,s=t.attrs,a=[];let l=null,u=null;for(let c=t.directiveStart;c<r;c++){const d=o[c],f=n?n.get(d):null,p=f?f.outputs:null;l=cU(d.inputs,c,l,f?f.inputs:null),u=cU(d.outputs,c,u,p);const g=null===l||null===s||z7(t)?null:Uye(l,c,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}(e,n,o)}function hU(e,t,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function Cme(){return rt.lFrame.currentDirectiveIndex}();try{pf(o);for(let a=i;a<r;a++){const l=e.data[a],u=t[a];$2(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&kye(l,u)}}finally{pf(-1),$2(s)}}function kye(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function YM(e,t,n){t.componentOffset=n,(e.components??(e.components=[])).push(t.index)}function Fye(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;la(t)&&(n[""]=e)}}function Lye(e,t,n,i,r){e.data[i]=r;const o=r.factory||(r.factory=hf(r.type)),s=new a0(o,la(r),L);e.blueprint[i]=s,n[i]=s,function Mye(e,t,n,i,r){const o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function Nye(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,i,o)}}(e,t,i,C0(e,n,r.hostVars,ot),r)}function KM(e,t,n,i,r,o,s){if(null==o)e.removeAttribute(t,r,n);else{const a=null==s?it(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}function Bye(e,t,n,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const u=s[l++],c=s[l++],d=s[l++];null!==a?i.setInput(n,d,u,c):n[c]=d}}}function Uye(e,t,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===i&&(i=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){i.push(o,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function pU(e,t,n,i){return[e,!0,!1,t,null,0,i,n,null,null]}function Hye(e,t){const n=so(t,e);if(tw(n)){const i=n[xe];48&n[ct]?Sw(i,n,i.template,n[Yn]):n[ff]>0&&XM(n)}}function XM(e){for(let i=cM(e);null!==i;i=dM(i))for(let r=kr;r<i.length;r++){const o=i[r];if(tw(o))if(512&o[ct]){const s=o[xe];Sw(s,o,s.template,o[Yn])}else o[ff]>0&&XM(o)}const n=e[xe].components;if(null!==n)for(let i=0;i<n.length;i++){const r=so(n[i],e);tw(r)&&r[ff]>0&&XM(r)}}function zye(e,t){const n=so(t,e),i=n[xe];(function Gye(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),jM(i,n,n[Yn])}function Aw(e,t){return e[t0]?e[q6][sa]=t:e[t0]=t,e[q6]=t,t}function Tw(e){for(;e;){e[ct]|=32;const t=_0(e);if(rme(e)&&!t)return e;e=t}return null}function xw(e,t,n,i=!0){const r=t[Xb];r.begin&&r.begin();try{Sw(e,t,e.template,n)}catch(s){throw i&&yU(t,s),s}finally{r.end&&r.end()}}function QM(e,t,n){U2(0),t(e,n)}function gU(e){return e[Ap]||(e[Ap]=[])}function mU(e){return e.cleanup||(e.cleanup=[])}function yU(e,t){const n=e[Kb],i=n?n.get(Gp,null):null;i&&i.handleError(t)}function JM(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],u=e.data[s];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function Mw(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=E2(r,a):2==o&&(i=E2(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Nw(e,t,n,i,r=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&i.push(Hi(o)),aa(o))for(let a=kr;a<o.length;a++){const l=o[a],u=l[xe].firstChild;null!==u&&Nw(l[xe],l,u,i)}const s=n.type;if(8&s)Nw(e,t,n.child,i);else if(32&s){const a=uM(n,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=f7(t,n);if(Array.isArray(a))i.push(...a);else{const l=_0(t[fr]);Nw(l[xe],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class S0{get rootNodes(){const t=this._lView,n=t[xe];return Nw(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(t){this._lView[Yn]=t}get destroyed(){return 128==(128&this._lView[ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[$n];if(aa(t)){const n=t[Jb],i=n?n.indexOf(this):-1;i>-1&&(pM(t,i),cw(n,i))}this._attachedToViewContainer=!1}i7(this._lView[xe],this._lView)}onDestroy(t){uU(this._lView[xe],this._lView,null,t)}markForCheck(){Tw(this._cdRefInjectingView||this._lView)}detach(){this._lView[ct]&=-65}reattach(){this._lView[ct]|=64}detectChanges(){xw(this._lView[xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I_e(e,t){y0(e,t,t[ft],2,null,null)}(this._lView[xe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=t}}class Wye extends S0{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;xw(t[xe],t,t[Yn],!1)}checkNoChanges(){}get context(){return null}}class vU extends E0{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Gt(t);return new A0(n,this.ngModule)}}function bU(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Yye{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Wb(i);const r=this.injector.get(t,RM,i);return r!==RM||n===RM?r:this.parentInjector.get(t,n,i)}}class A0 extends $7{get inputs(){return bU(this.componentDef.inputs)}get outputs(){return bU(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Z0e(e){return e.map(J0e).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,r){let o=(r=r||this.ngModule)instanceof Ds?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Yye(t,o):t,a=s.get(zp,null);if(null===a)throw new Z(407,!1);const l=s.get(I0e,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=i?function Dye(e,t,n){return e.selectRootElement(t,n===oa.ShadowDom)}(u,i,this.componentDef.encapsulation):hM(u,c,function qye(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),f=this.componentDef.onPush?288:272,h=WM(0,null,null,1,0,null,null,null,null,null),p=Cw(null,h,null,f,null,null,a,u,l,s,null);let g,m;V2(p);try{const _=this.componentDef;let y,v=null;_.findHostDirectiveDefs?(y=[],v=new Map,_.findHostDirectiveDefs(_,y,v),y.push(_)):y=[_];const b=function Xye(e,t){const n=e[xe],i=yn;return e[i]=t,Yp(n,i,2,"#host",null)}(p,d),w=function Qye(e,t,n,i,r,o,s,a){const l=r[xe];!function Jye(e,t,n,i){for(const r of e)t.mergedAttrs=l0(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Mw(t,t.mergedAttrs,!0),null!==n&&g7(i,n,t))}(i,e,t,s);const u=o.createRenderer(t,n),c=Cw(r,lU(n),null,n.onPush?32:16,r[e.index],e,o,u,a||null,null,null);return l.firstCreatePass&&YM(l,e,i.length-1),Aw(r,c),r[e.index]=c}(b,d,_,y,p,a,u);m=i9(h,yn),d&&function e1e(e,t,n,i){if(i)G2(e,n,["ng-version",R0e.full]);else{const{attrs:r,classes:o}=function eye(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!ua(r))break;r=o}i++}return{attrs:t,classes:n}}(t.selectors[0]);r&&G2(e,n,r),o&&o.length>0&&p7(e,n,o.join(" "))}}(u,_,d,i),void 0!==n&&function t1e(e,t,n){const i=e.projection=[];for(let r=0;r<t.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(m,this.ngContentSelectors,n),g=function Zye(e,t,n,i,r,o){const s=zi(),a=r[xe],l=Bo(s,r);fU(a,r,s,n,null,i);for(let c=0;c<n.length;c++)hr(gf(r,a,s.directiveStart+c,s),r);hU(a,r,s),l&&hr(l,r);const u=gf(r,a,s.directiveStart+s.componentOffset,s);if(e[Yn]=r[Yn]=u,null!==o)for(const c of o)c(u,t);return HM(a,s,e),u}(w,_,y,v,p,[n1e]),jM(h,p,null)}finally{j2()}return new Kye(this.componentType,g,Hp(m,p),p,m)}}class Kye extends T0e{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new Wye(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const o=this._rootLView;JM(o[xe],o,r,t,n),Tw(so(this._tNode.index,o))}}get injector(){return new Ip(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function n1e(){const e=zi();nw(se()[xe],e)}function Wt(e){let t=function wU(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(la(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Z(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const s=e;s.inputs=ZM(e.inputs),s.declaredInputs=ZM(e.declaredInputs),s.outputs=ZM(e.outputs);const a=r.hostBindings;a&&s1e(e,a);const l=r.viewQuery,u=r.contentQueries;if(l&&r1e(e,l),u&&o1e(e,u),w2(e.inputs,r.inputs),w2(e.declaredInputs,r.declaredInputs),w2(e.outputs,r.outputs),la(r)&&r.data.animation){const c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Wt&&(n=!1)}}t=Object.getPrototypeOf(t)}!function i1e(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=l0(r.hostAttrs,n=l0(n,r.hostAttrs))}}(i)}function ZM(e){return e===uu?{}:e===Ut?[]:e}function r1e(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function o1e(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,o)=>{t(i,r,o),n(i,r,o)}:t}function s1e(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}function Ow(e){return!!eN(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function eN(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ol(e,t,n){return e[t]=n}function gr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function vf(e,t,n,i){const r=gr(e,t,n);return gr(e,t+1,i)||r}function Et(e,t,n,i){const r=se();return gr(r,Op(),t)&&(Tt(),function rl(e,t,n,i,r,o){const s=Bo(e,t);KM(t[ft],s,o,e.value,n,i,r)}(Nn(),r,e,t,n,i)),Et}function Xp(e,t,n,i){return gr(e,Op(),n)?t+it(n)+i:ot}function ge(e,t,n,i,r,o,s,a){const l=se(),u=Tt(),c=e+yn,d=u.firstCreatePass?function g1e(e,t,n,i,r,o,s,a,l){const u=t.consts,c=Yp(t,e,4,s||null,gc(u,a));qM(t,n,c,gc(u,l)),nw(t,c);const d=c.tView=WM(2,c,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,i,r,o,s):u.data[c];nl(d,!1);const f=l[ft].createComment("");gw(u,l,f,d),hr(f,l),Aw(l,l[c]=pU(f,l,f,d)),Zb(d)&&zM(u,l,d),null!=s&&GM(l,d,a)}function co(e){return Np(function wme(){return rt.lFrame.contextLView}(),yn+e)}function X(e,t,n){const i=se();return gr(i,Op(),t)&&jo(Tt(),Nn(),i,e,t,i[ft],n,!1),X}function tN(e,t,n,i,r){const s=r?"class":"style";JM(e,n,t.inputs[s],s,i)}function $(e,t,n,i){const r=se(),o=Tt(),s=yn+e,a=r[ft],l=o.firstCreatePass?function _1e(e,t,n,i,r,o){const s=t.consts,l=Yp(t,e,2,i,gc(s,r));return qM(t,n,l,gc(s,o)),null!==l.attrs&&Mw(l,l.attrs,!1),null!==l.mergedAttrs&&Mw(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,r,t,n,i):o.data[s],u=r[s]=hM(a,t,function kme(){return rt.lFrame.currentNamespace}()),c=Zb(l);return nl(l,!0),g7(a,u,l),32!=(32&l.flags)&&gw(o,r,u,l),0===function mme(){return rt.lFrame.elementDepthCount}()&&hr(u,r),function _me(){rt.lFrame.elementDepthCount++}(),c&&(zM(o,r,l),HM(o,l,r)),null!==i&&GM(r,l),$}function B(){let e=zi();P2()?L2():(e=e.parent,nl(e,!1));const t=e;!function yme(){rt.lFrame.elementDepthCount--}();const n=Tt();return n.firstCreatePass&&(nw(n,e),I2(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Pme(e){return 0!=(8&e.flags)}(t)&&tN(n,t,se(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Lme(e){return 0!=(16&e.flags)}(t)&&tN(n,t,se(),t.stylesWithoutHost,!1),B}function Re(e,t,n,i){return $(e,t,n,i),B(),Re}function Iw(e,t,n){const i=se(),r=Tt(),o=e+yn,s=r.firstCreatePass?function y1e(e,t,n,i,r){const o=t.consts,s=gc(o,i),a=Yp(t,e,8,"ng-container",s);return null!==s&&Mw(a,s,!0),qM(t,n,a,gc(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,i,t,n):r.data[o];nl(s,!0);const a=i[o]=i[ft].createComment("");return gw(r,i,a,s),hr(a,i),Zb(s)&&(zM(r,i,s),HM(r,s,i)),null!=n&&GM(i,s),Iw}function Rw(){let e=zi();const t=Tt();return P2()?L2():(e=e.parent,nl(e,!1)),t.firstCreatePass&&(nw(t,e),I2(e)&&t.queries.elementEnd(e)),Rw}function vn(){return se()}function M0(e){return!!e&&"function"==typeof e.then}const nN=function FU(e){return!!e&&"function"==typeof e.subscribe};function Oe(e,t,n,i){const r=se(),o=Tt(),s=zi();return function LU(e,t,n,i,r,o,s){const a=Zb(i),u=e.firstCreatePass&&mU(e),c=t[Yn],d=gU(t);let f=!0;if(3&i.type||s){const g=Bo(i,t),m=s?s(g):g,_=d.length,y=s?b=>s(Hi(b[i.index])):i.index;let v=null;if(!s&&a&&(v=function v1e(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=t[Ap],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,f=!1;else{o=BU(i,t,c,o,!1);const b=n.listen(m,r,o);d.push(o,b),u&&u.push(r,y,_,_+1)}}else o=BU(i,t,c,o,!1);const h=i.outputs;let p;if(f&&null!==h&&(p=h[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const w=t[p[m]][p[m+1]].subscribe(o),D=d.length;d.push(o,w),u&&u.push(r,i.index,D,-(D+1))}}}(o,r,r[ft],s,e,t,i),Oe}function $U(e,t,n,i){try{return ws(6,t,n),!1!==n(i)}catch(r){return yU(e,r),!1}finally{ws(7,t,n)}}function BU(e,t,n,i,r){return function o(s){if(s===Function)return i;Tw(e.componentOffset>-1?so(e.index,t):t);let l=$U(t,n,i,s),u=o.__ngNextListenerFn__;for(;u;)l=$U(t,n,u,s)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function _e(e=1){return function Ame(e){return(rt.lFrame.contextLView=function Tme(e,t){for(;e>0;)t=t[Tp],e--;return t}(e,rt.lFrame.contextLView))[Yn]}(e)}function b1e(e,t){let n=null;const i=function Y0e(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?G7(e,o,!0):Q0e(i,o))return r}else n=r}return n}function N0(e){const t=se()[fr][dr];if(!t.projection){const i=t.projection=d0(e?e.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=e?b1e(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function O0(e,t=0,n){const i=se(),r=Tt(),o=Yp(r,yn+e,16,null,n||null);null===o.projection&&(o.projection=t),L2(),32!=(32&o.flags)&&function V_e(e,t,n){h7(t[ft],0,t,n,r7(e,n,t),l7(n.parent||t[dr],n,t))}(r,i,o)}function sl(e,t,n){return _u(e,"",t,"",n),sl}function _u(e,t,n,i,r){const o=se(),s=Xp(o,t,n,i);return s!==ot&&jo(Tt(),Nn(),o,e,s,o[ft],r,!1),_u}function Fw(e,t){return e<<17|t<<2}function yc(e){return e>>17&32767}function iN(e){return 2|e}function bf(e){return(131068&e)>>2}function rN(e,t){return-131069&e|t<<2}function oN(e){return 1|e}function YU(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?yc(o):bf(o),l=!1;for(;0!==a&&(!1===l||s);){const c=e[a+1];A1e(e[a],t)&&(l=!0,e[a+1]=i?oN(c):iN(c)),a=i?yc(c):bf(c)}l&&(e[n+1]=i?iN(o):oN(o))}function A1e(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&$p(e,t)>=0}const hi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KU(e){return e.substring(hi.key,hi.keyEnd)}function XU(e,t){const n=hi.textEnd;return n===t?-1:(t=hi.keyEnd=function N1e(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,hi.key=t,n),rg(e,t,n))}function rg(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function og(e,t,n){return ca(e,t,n,!1),og}function Je(e,t){return ca(e,t,null,!0),Je}function vc(e){da(B1e,ll,e,!0)}function ll(e,t){for(let n=function x1e(e){return function JU(e){hi.key=0,hi.keyEnd=0,hi.value=0,hi.valueEnd=0,hi.textEnd=e.length}(e),XU(e,rg(e,0,hi.textEnd))}(t);n>=0;n=XU(t,n))Uo(e,KU(t),!0)}function ca(e,t,n,i){const r=se(),o=Tt(),s=hu(2);o.firstUpdatePass&&nV(o,e,s,i),t!==ot&&gr(r,s,t)&&rV(o,o.data[Rr()],r,r[ft],e,r[s+1]=function V1e(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=cn(_c(e)))),e}(t,n),i,s)}function da(e,t,n,i){const r=Tt(),o=hu(2);r.firstUpdatePass&&nV(r,null,o,i);const s=se();if(n!==ot&&gr(s,o,n)){const a=r.data[Rr()];if(sV(a,i)&&!tV(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=E2(l,n||"")),tN(r,a,s,n,i)}else!function U1e(e,t,n,i,r,o,s,a){r===ot&&(r=Ut);let l=0,u=0,c=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==c||null!==d;){const f=l<r.length?r[l+1]:void 0,h=u<o.length?o[u+1]:void 0;let g,p=null;c===d?(l+=2,u+=2,f!==h&&(p=d,g=h)):null===d||null!==c&&c<d?(l+=2,p=c):(u+=2,p=d,g=h),null!==p&&rV(e,t,n,i,p,g,s,a),c=l<r.length?r[l]:null,d=u<o.length?o[u]:null}}(r,a,s,s[ft],s[o+1],s[o+1]=function $1e(e,t,n){if(null==n||""===n)return Ut;const i=[],r=_c(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}function tV(e,t){return t>=e.expandoStartIndex}function nV(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[Rr()],s=tV(e,n);sV(o,i)&&null===t&&!s&&(t=!1),t=function R1e(e,t,n,i){const r=function B2(e){const t=rt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=k0(n=sN(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=sN(r,e,t,n,i),null===o){let l=function F1e(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==bf(i))return e[yc(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=sN(null,e,t,l[1],i),l=k0(l,t.attrs,i),function P1e(e,t,n,i){e[yc(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else o=function L1e(e,t,n){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=k0(i,e[o].hostAttrs,n);return k0(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function C1e(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=yc(s),l=bf(s);e[i]=n;let c,u=!1;if(Array.isArray(n)?(c=n[1],(null===c||$p(n,c)>0)&&(u=!0)):c=n,r)if(0!==l){const f=yc(e[a+1]);e[i+1]=Fw(f,a),0!==f&&(e[f+1]=rN(e[f+1],i)),e[a+1]=function E1e(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=Fw(a,0),0!==a&&(e[a+1]=rN(e[a+1],i)),a=i;else e[i+1]=Fw(l,0),0===a?a=i:e[l+1]=rN(e[l+1],i),l=i;u&&(e[i+1]=iN(e[i+1])),YU(e,c,i,!0),YU(e,c,i,!1),function S1e(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&$p(o,t)>=0&&(n[i+1]=oN(n[i+1]))}(t,c,e,i,o),s=Fw(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function sN(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=k0(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function k0(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Uo(e,s,!!n||t[++o]))}return void 0===e?null:e}function B1e(e,t,n){const i=String(t);""!==i&&!i.includes(" ")&&Uo(e,i,n)}function rV(e,t,n,i,r,o,s,a){if(!(3&t.type))return;const l=e.data,u=l[a+1],c=function D1e(e){return 1==(1&e)}(u)?oV(l,t,n,r,bf(u),s):void 0;Pw(c)||(Pw(o)||function w1e(e){return 2==(2&e)}(u)&&(o=oV(l,null,n,r,a,s)),function H_e(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:ao.DashCase;null==r?e.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ao.Important),e.setStyle(n,i,r,o))}}(i,s,ew(Rr(),n),r,o))}function oV(e,t,n,i,r,o){const s=null===t;let a;for(;r>0;){const l=e[r],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=n[r+1];f===ot&&(f=d?Ut:void 0);let h=d?Z2(f,i):c===i?f:void 0;if(u&&!Pw(h)&&(h=Z2(l,i)),Pw(h)&&(a=h,s))return a;const p=e[r+1];r=s?yc(p):bf(p)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=Z2(l,i))}return a}function Pw(e){return void 0!==e}function sV(e,t){return 0!=(e.flags&(t?8:16))}function Y(e,t=""){const n=se(),i=Tt(),r=e+yn,o=i.firstCreatePass?Yp(i,r,1,t,null):i.data[r],s=n[r]=fM(n[ft],t);gw(i,n,s,o),nl(o,!1)}function pi(e){return Gi("",e,""),pi}function Gi(e,t,n){const i=se(),r=Xp(i,e,t,n);return r!==ot&&function mu(e,t,n){const i=ew(t,e);t7(e[ft],i,n)}(i,Rr(),r),Gi}function gV(e,t,n,i,r){da(Uo,ll,function Qp(e,t,n,i,r,o){const a=vf(e,fu(),n,r);return hu(2),a?t+it(n)+i+it(r)+o:ot}(se(),e,t,n,i,r),!0)}function Ho(e,t,n){const i=se();return gr(i,Op(),t)&&jo(Tt(),Nn(),i,e,t,i[ft],n,!0),Ho}const wf=void 0;var sve=["en",[["a","p"],["AM","PM"],wf],[["AM","PM"],wf,wf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wf,"{1} 'at' {0}",wf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ove(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let sg={};function Fr(e){const t=function ave(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=TV(t);if(n)return n;const i=t.split("-")[0];if(n=TV(i),n)return n;if("en"===i)return sve;throw new Z(701,!1)}function TV(e){return e in sg||(sg[e]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[e]),sg[e]}var Se=(()=>((Se=Se||{})[Se.LocaleId=0]="LocaleId",Se[Se.DayPeriodsFormat=1]="DayPeriodsFormat",Se[Se.DayPeriodsStandalone=2]="DayPeriodsStandalone",Se[Se.DaysFormat=3]="DaysFormat",Se[Se.DaysStandalone=4]="DaysStandalone",Se[Se.MonthsFormat=5]="MonthsFormat",Se[Se.MonthsStandalone=6]="MonthsStandalone",Se[Se.Eras=7]="Eras",Se[Se.FirstDayOfWeek=8]="FirstDayOfWeek",Se[Se.WeekendRange=9]="WeekendRange",Se[Se.DateFormat=10]="DateFormat",Se[Se.TimeFormat=11]="TimeFormat",Se[Se.DateTimeFormat=12]="DateTimeFormat",Se[Se.NumberSymbols=13]="NumberSymbols",Se[Se.NumberFormats=14]="NumberFormats",Se[Se.CurrencyCode=15]="CurrencyCode",Se[Se.CurrencySymbol=16]="CurrencySymbol",Se[Se.CurrencyName=17]="CurrencyName",Se[Se.Currencies=18]="Currencies",Se[Se.Directionality=19]="Directionality",Se[Se.PluralCase=20]="PluralCase",Se[Se.ExtraData=21]="ExtraData",Se))();const lve=["zero","one","two","few","many"],ag="en-US",Lw={marker:"element"},$w={marker:"ICU"};var Vn=(()=>((Vn=Vn||{})[Vn.SHIFT=2]="SHIFT",Vn[Vn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Vn[Vn.COMMENT=2]="COMMENT",Vn))();let xV=ag;function MV(e){(function vs(e,t){null==e&&Ht(t,e,null,"!=")})(e,"Expected localeId to be defined"),"string"==typeof e&&(xV=e.toLowerCase().replace(/_/g,"-"))}function NV(e,t,n){const i=t.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?u7(e,0,n):Hi(n[r])}function OV(e,t,n,i,r){const o=t.insertBeforeIndex;if(Array.isArray(o)){let s=i,a=null;if(3&t.type||(a=s,s=r),null!==s&&-1===t.componentOffset)for(let l=1;l<o.length;l++)_f(e,s,n[o[l]],a,!1)}}function kV(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const i=e[n];IV(i)||fve(i,t)&&null===hve(i)&&pve(i,t.index)}}function IV(e){return!(64&e.type)}function fve(e,t){return IV(t)||e.index>t.index}function hve(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function pve(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(d7(NV,OV),e.insertBeforeIndex=t)}function I0(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function _ve(e,t,n){const i=VM(e,n,64,null,null);return kV(t,i),i}function Bw(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function RV(e){return e>>>17}function FV(e){return(131070&e)>>>1}let R0=0,F0=0;function LV(e,t,n,i){const r=n[ft];let s,o=null;for(let a=0;a<t.length;a++){const l=t[a];if("string"==typeof l){const u=t[++a];null===n[u]&&(n[u]=fM(r,l))}else if("number"==typeof l)switch(1&l){case 0:const u=RV(l);let c,d;if(null===o&&(o=u,s=pw(r,i)),u===o?(c=i,d=s):(c=null,d=Hi(n[u])),null!==d){const g=FV(l);_f(r,d,n[g],c,!1);const _=I0(e,g);if(null!==_&&"object"==typeof _){const y=Bw(_,n);null!==y&&LV(e,_.create[y],n,n[_.anchorIdx])}}break;case 1:const h=t[++a],p=t[++a];KM(r,ew(l>>>1,n),null,null,h,p,null)}else switch(l){case $w:const u=t[++a],c=t[++a];null===n[c]&&hr(n[c]=N_e(r,u),n);break;case Lw:const d=t[++a],f=t[++a];null===n[f]&&hr(n[f]=hM(r,d,null),n)}}}function $V(e,t,n,i,r){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&r){let l="";for(let u=o+1;u<=o+a;u++){const c=n[u];if("string"==typeof c)l+=c;else if("number"==typeof c)if(c<0)l+=it(t[i-c]);else{const d=c>>>2;switch(3&c){case 1:const f=n[++u],h=n[++u],p=e.data[d];"string"==typeof p?KM(t[ft],t[d],null,p,f,l,h):jo(e,p,t,f,l,t[ft],h,!1);break;case 0:const g=t[d];null!==g&&t7(t[ft],g,l);break;case 2:Eve(e,I0(e,d),t,l);break;case 3:BV(e,I0(e,d),i,t)}}}}else{const l=n[o+1];if(l>0&&3==(3&l)){const c=I0(e,l>>>2);t[c.currentCaseLViewIndex]<0&&BV(e,c,i,t)}}o+=a}}function BV(e,t,n,i){let r=i[t.currentCaseLViewIndex];if(null!==r){let o=R0;r<0&&(r=i[t.currentCaseLViewIndex]=~r,o=-1),$V(e,i,t.update[r],n,o)}}function Eve(e,t,n,i){const r=function Dve(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const i=function uve(e,t){const n=function AV(e){return Fr(e)[Se.PluralCase]}(t)(parseInt(e,10)),i=lve[n];return void 0!==i?i:"other"}(t,function dve(){return xV}());n=e.cases.indexOf(i),-1===n&&"other"!==i&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,i);if(Bw(t,n)!==r&&(UV(e,t,n),n[t.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const s=n[t.anchorIdx];s&&LV(e,t.create[r],n,s)}}function UV(e,t,n){let i=Bw(t,n);if(null!==i){const r=t.remove[i];for(let o=0;o<r.length;o++){const s=r[o];if(s>0){const a=ew(s,n);null!==a&&yM(n[ft],a)}else UV(e,I0(e,~s),n)}}}function Cve(){const e=[];let n,i,t=-1;function o(a,l){t=0;const u=Bw(a,l);i=null!==u?a.remove[u]:Ut}function s(){if(t<i.length){const a=i[t++];return a>0?n[a]:(e.push(t,i),o(n[xe].data[~a],n),s())}return 0===e.length?null:(i=e.pop(),t=e.pop(),s())}return function r(a,l){for(n=l;e.length;)e.pop();return o(a.value,l),s}}const Uw=/\ufffd(\d+):?\d*\ufffd/gi,Ave=/\ufffd(\d+)\ufffd/,jV=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,P0="\ufffd",Tve=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,xve=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Mve=/\uE500/g;function HV(e,t,n,i,r,o,s){const a=C0(e,i,1,null);let l=a<<Vn.SHIFT,u=s0();t===u&&(u=null),null===u&&(l|=Vn.APPEND_EAGERLY),s&&(l|=Vn.COMMENT,function T_e(e){void 0===lM&&(lM=e())}(Cve)),r.push(l,null===o?"":o);const c=VM(e,a,s?32:1,null===o?"":o,null);kV(n,c);const d=c.index;return nl(c,!1),null!==u&&t!==u&&function mve(e,t){let n=e.insertBeforeIndex;null===n?(d7(NV,OV),n=e.insertBeforeIndex=[null,t]):(function pc(e,t,n){e!=t&&Ht(n,e,t,"==")}(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(u,d),c}function kve(e,t,n,i,r,o,s){const a=s.match(Uw),l=HV(e,t,n,o,i,a?null:s,!1);a&&L0(r,s,l.index,null,0,null)}function L0(e,t,n,i,r,o){const s=e.length,a=s+1;e.push(null,null);const l=s+2,u=t.split(Uw);let c=0;for(let d=0;d<u.length;d++){const f=u[d];if(1&d){const h=r+parseInt(f,10);e.push(-1-h),c|=zV(h)}else""!==f&&e.push(f)}return e.push(n<<2|(i?1:0)),i&&e.push(i,o),e[s]=c,e[a]=e.length-l,c}function zV(e){return 1<<Math.min(e,31)}function GV(e){let t,o,n="",i=0,r=!1;for(;null!==(t=Tve.exec(e));)r?t[0]===`${P0}/*${o}${P0}`&&(i=t.index,r=!1):(n+=e.substring(i,t.index+t[0].length),o=t[1],r=!0);return n+=e.slice(i),n}function WV(e,t,n,i,r,o){let s=0;const a={type:r.type,currentCaseLViewIndex:C0(e,t,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};(function Uve(e,t,n){e.push(zV(t.mainBinding),2,-1-t.mainBinding,n<<2|2)})(n,r,o),function gve(e,t,n){const i=e.data[t];null===i?e.data[t]=n:i.value=n}(e,o,a);const l=r.values;for(let u=0;u<l.length;u++){const c=l[u],d=[];for(let f=0;f<c.length;f++){const h=c[f];if("string"!=typeof h){const p=d.push(h)-1;c[f]=`\x3c!--\ufffd${p}\ufffd--\x3e`}}s=$ve(e,a,t,n,i,r.cases[u],c.join(""),d)|s}s&&function Vve(e,t,n){e.push(t,1,n<<2|3)}(n,s,o)}function Lve(e){const t=[],n=[];let i=1,r=0;const o=aN(e=e.replace(jV,function(s,a,l){return i="select"===l?0:1,r=parseInt(a.slice(1),10),""}));for(let s=0;s<o.length;){let a=o[s++].trim();1===i&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&t.push(a);const l=aN(o[s++]);t.length>n.length&&n.push(l)}return{type:i,mainBinding:r,cases:t,values:n}}function aN(e){if(!e)return[];let t=0;const n=[],i=[],r=/[{}]/g;let o;for(r.lastIndex=0;o=r.exec(e);){const a=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const l=e.substring(t,a);jV.test(l)?i.push(Lve(l)):i.push(l),t=a+1}}else{if(0==n.length){const l=e.substring(t,a);i.push(l),t=a+1}n.push("{")}}const s=e.substring(t);return i.push(s),i}function $ve(e,t,n,i,r,o,s,a){const l=[],u=[],c=[];t.cases.push(o),t.create.push(l),t.remove.push(u),t.update.push(c);const f=function w7(e){const t=new n0e(e);return function i0e(){try{return!!(new window.DOMParser).parseFromString(Vp(""),"text/html")}catch{return!1}}()?new t0e(t):t}(function m7(){return void 0!==wM?wM:typeof document<"u"?document:void 0}()).getInertBodyElement(s),h=function AM(e){return"content"in e&&function c0e(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}(f)||f;return h?qV(e,t,n,i,l,u,c,h,r,a,0):0}function qV(e,t,n,i,r,o,s,a,l,u,c){let d=0,f=a.firstChild;for(;f;){const h=C0(e,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const p=f,g=p.tagName.toLowerCase();if(CM.hasOwnProperty(g)){lN(r,Lw,g,l,h),e.data[h]=g;const v=p.attributes;for(let b=0;b<v.length;b++){const w=v.item(b),D=w.name.toLowerCase();w.value.match(Uw)?S7.hasOwnProperty(D)&&L0(s,w.value,h,w.name,0,SM[D]?DM:null):jve(r,h,w)}d=qV(e,t,n,i,r,o,s,f,h,u,c+1)|d,YV(o,h,c)}break;case Node.TEXT_NODE:const m=f.textContent||"",_=m.match(Uw);lN(r,null,_?"":m,l,h),YV(o,h,c),_&&(d=L0(s,m,h,null,0,null)|d);break;case Node.COMMENT_NODE:const y=Ave.exec(f.textContent||"");if(y){const b=u[parseInt(y[1],10)];lN(r,$w,"",l,h),WV(e,n,i,l,b,h),Bve(o,h,c)}}f=f.nextSibling}return d}function YV(e,t,n){0===n&&e.push(t)}function Bve(e,t,n){0===n&&(e.push(~t),e.push(t))}function lN(e,t,n,i,r){null!==t&&e.push(t),e.push(n,r,function yve(e,t,n){return e|t<<17|n<<1}(0,i,r))}function jve(e,t,n){e.push(t<<1|1,n.name,n.value)}function XV(e,t,n=-1){const i=Tt(),r=se(),o=yn+e,s=gc(i.consts,t),a=s0();i.firstCreatePass&&function Ove(e,t,n,i,r,o){const s=s0(),a=[],l=[],u=[[]];r=function Pve(e,t){if(function Fve(e){return-1===e}(t))return GV(e);{const n=e.indexOf(`:${t}${P0}`)+2+t.toString().length,i=e.search(new RegExp(`${P0}\\/\\*\\d+:${t}${P0}`));return GV(e.substring(n,i))}}(r,o);const c=function Nve(e){return e.replace(Mve," ")}(r).split(xve);for(let d=0;d<c.length;d++){let f=c[d];if(1&d){const h=47===f.charCodeAt(0),g=(f.charCodeAt(h?1:0),yn+Number.parseInt(f.substring(h?2:1)));if(h)u.shift(),nl(s0(),!1);else{const m=_ve(e,u[0],g);u.unshift([]),nl(m,!0)}}else{const h=aN(f);for(let p=0;p<h.length;p++){let g=h[p];if(1&p){const m=g;if("object"!=typeof m)throw new Error(`Unable to parse ICU expression in "${r}" message.`);WV(e,n,l,t,m,HV(e,s,u[0],n,a,"",!0).index)}else""!==g&&kve(e,s,u[0],a,l,n,g)}}}e.data[i]={create:a,update:l}}(i,null===a?0:a.index,r,o,s,n);const l=i.data[o],c=o7(i,a===r[dr]?null:a,r);(function wve(e,t,n,i){const r=e[ft];for(let o=0;o<t.length;o++){const s=t[o++],a=t[o],u=(s&Vn.APPEND_EAGERLY)===Vn.APPEND_EAGERLY,c=s>>>Vn.SHIFT;let d=e[c];null===d&&(d=e[c]=(s&Vn.COMMENT)===Vn.COMMENT?r.createComment(a):fM(r,a)),u&&null!==n&&_f(r,n,d,i,!1)}})(r,l.create,c,a&&8&a.type?r[a.index]:null),c9(!0)}function Wi(e,t,n){XV(e,t,n),function QV(){c9(!1)}()}function lg(e){return function vve(e){e&&(R0|=1<<Math.min(F0,31)),F0++}(gr(se(),Op(),e)),lg}function $0(e){!function bve(e,t,n){if(F0>0){const i=e.data[n];$V(e,t,Array.isArray(i)?i:i.update,fu()-F0-1,R0)}R0=0,F0=0}(Tt(),se(),e+yn)}function uN(e,t,n,i,r){if(e=Ye(e),Array.isArray(e))for(let o=0;o<e.length;o++)uN(e[o],t,n,i,r);else{const o=Tt(),s=se();let a=yf(e)?e:Ye(e.provide),l=L7(e);const u=zi(),c=1048575&u.providerIndexes,d=u.directiveStart,f=u.providerIndexes>>20;if(yf(e)||!e.multi){const h=new a0(l,r,L),p=dN(a,t,r?c:c+f,d);-1===p?(K2(lw(u,s),o,a),cN(o,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=dN(a,t,c+f,d),p=dN(a,t,c,c+f),m=p>=0&&n[p];if(r&&!m||!r&&!(h>=0&&n[h])){K2(lw(u,s),o,a);const _=function nbe(e,t,n,i,r){const o=new a0(e,n,L);return o.multi=[],o.index=t,o.componentProviders=0,JV(o,r,i&&!n),o}(r?tbe:ebe,n.length,r,i,l);!r&&m&&(n[p].providerFactory=_),cN(o,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(_),s.push(_)}else cN(o,e,h>-1?h:p,JV(n[r?p:h],l,!r&&i));!r&&i&&m&&n[p].componentProviders++}}}function cN(e,t,n,i){const r=yf(t),o=function b0e(e){return!!e.useClass}(t);if(r||o){const l=(o?Ye(t.useClass):t).prototype.ngOnDestroy;if(l){const u=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const c=u.indexOf(n);-1===c?u.push(n,[i,l]):u[c+1].push(i,l)}else u.push(n,l)}}}function JV(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function dN(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function ebe(e,t,n,i){return fN(this.multi,[])}function tbe(e,t,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=gf(n,n[xe],this.providerFactory.index,i);o=a.slice(0,s),fN(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],fN(r,o);return o}function fN(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Qt(e,t=[]){return n=>{n.providersResolver=(i,r)=>function Zve(e,t,n){const i=Tt();if(i.firstCreatePass){const r=la(e);uN(n,i.data,i.blueprint,r,!0),uN(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class ug{}class ZV{}class ej extends ug{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vU(this);const i=Lo(t);this._bootstrapComponents=gu(i.bootstrap),this._r3Injector=J7(t,n,[{provide:ug,useValue:this},{provide:E0,useValue:this.componentFactoryResolver}],cn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class hN extends ZV{constructor(t){super(),this.moduleType=t}create(t){return new ej(this.moduleType,t)}}class rbe extends ug{constructor(t,n,i){super(),this.componentFactoryResolver=new vU(this),this.instance=null;const r=new P7([...t,{provide:ug,useValue:this},{provide:E0,useValue:this.componentFactoryResolver}],n||Ew(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Vw(e,t,n=null){return new rbe(e,t,n).injector}let obe=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=k7(0,n.type),r=i.length>0?Vw([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=he({token:e,providedIn:"environment",factory:()=>new e(fe(Ds))}),e})();function gi(e){e.getStandaloneInjector=t=>t.get(obe).getOrCreateStandaloneInjector(e)}function cg(e,t,n,i){return aj(se(),Ir(),e,t,n,i)}function B0(e,t,n,i,r){return lj(se(),Ir(),e,t,n,i,r)}function gN(e,t,n,i,r,o){return function uj(e,t,n,i,r,o,s,a){const l=t+n;return function kw(e,t,n,i,r){const o=vf(e,t,n,i);return gr(e,t+2,r)||o}(e,l,r,o,s)?ol(e,l+3,a?i.call(a,r,o,s):i(r,o,s)):U0(e,l+3)}(se(),Ir(),e,t,n,i,r,o)}function U0(e,t){const n=e[t];return n===ot?void 0:n}function aj(e,t,n,i,r,o){const s=t+n;return gr(e,s,r)?ol(e,s+1,o?i.call(o,r):i(r)):U0(e,s+1)}function lj(e,t,n,i,r,o,s){const a=t+n;return vf(e,a,r,o)?ol(e,a+2,s?i.call(s,r,o):i(r,o)):U0(e,a+2)}function Ef(e,t){const n=Tt();let i;const r=e+yn;n.firstCreatePass?(i=function wbe(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=hf(i.type)),s=bs(L);try{const a=aw(!1),l=o();return aw(a),function m1e(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,se(),r,l),l}finally{bs(s)}}function mN(e,t,n){const i=e+yn,r=se(),o=Np(r,i);return j0(r,i)?aj(r,Ir(),t,o.transform,n,o):o.transform(n)}function V0(e,t,n,i){const r=e+yn,o=se(),s=Np(o,r);return j0(o,r)?lj(o,Ir(),t,s.transform,n,i,s):s.transform(n,i)}function j0(e,t){return e[xe].data[t].pure}function _N(e){return t=>{setTimeout(e,void 0,t)}}const ke=class Sbe extends ln{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=_N(o),r&&(r=_N(r)),s&&(s=_N(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof Vi&&t.add(a),a}};function Abe(){return this._results[Symbol.iterator]()}class yN{get changes(){return this._changes||(this._changes=new ke)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=yN.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Abe)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=function Es(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function qme(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dn=(()=>{class e{}return e.__NG_ELEMENT_ID__=Mbe,e})();const Tbe=dn,xbe=class extends Tbe{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tView,r=Cw(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[n0]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[tl];return null!==s&&(r[tl]=s.createEmbeddedView(i)),jM(i,r,t),new S0(r)}};function Mbe(){return jw(zi(),se())}function jw(e,t){return 4&e.type?new xbe(t,e,Hp(e,t)):null}let Ss=(()=>{class e{}return e.__NG_ELEMENT_ID__=Nbe,e})();function Nbe(){return pj(zi(),se())}const Obe=Ss,fj=class extends Obe{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Hp(this._hostTNode,this._hostLView)}get injector(){return new Ip(this._hostTNode,this._hostLView)}get parentInjector(){const t=Y2(this._hostTNode,this._hostLView);if(w9(t)){const n=sw(t,this._hostLView),i=ow(t);return new Ip(n[xe].data[i+8],n)}return new Ip(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=hj(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-kr}createEmbeddedView(t,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,r),s}createComponent(t,n,i,r,o){const s=t&&!function c0(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?t:new A0(Gt(t)),u=i||this.parentInjector;if(!o&&null==l.ngModule){const f=(s?u:this.parentInjector).get(Ds,null);f&&(o=f)}const c=l.create(u,r,void 0,o);return this.insert(c.hostView,a),c}insert(t,n){const i=t._lView,r=i[xe];if(function gme(e){return aa(e[$n])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=i[$n],f=new fj(d,d[dr],d[$n]);f.detach(f.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function F_e(e,t,n,i){const r=kr+i,o=n.length;i>0&&(n[r-1][sa]=t),i<o-kr?(t[sa]=n[r],I9(n,kr+i,t)):(n.push(t),t[sa]=null),t[$n]=n;const s=t[n0];null!==s&&n!==s&&function P_e(e,t){const n=e[Mp];t[fr]!==t[$n][$n][fr]&&(e[K6]=!0),null===n?e[Mp]=[t]:n.push(t)}(s,t);const a=t[tl];null!==a&&a.insertView(e),t[ct]|=64}(r,i,s,o);const a=_M(o,s),l=i[ft],u=pw(l,s[Qb]);return null!==u&&function k_e(e,t,n,i,r,o){i[du]=r,i[dr]=t,y0(e,i,n,1,r,o)}(r,s[dr],l,i,u,a),t.attachToViewContainerRef(),I9(vN(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=hj(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=pM(this._lContainer,n);i&&(cw(vN(this._lContainer),n),i7(i[xe],i))}detach(t){const n=this._adjustIndex(t,-1),i=pM(this._lContainer,n);return i&&null!=cw(vN(this._lContainer),n)?new S0(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function hj(e){return e[Jb]}function vN(e){return e[Jb]||(e[Jb]=[])}function pj(e,t){let n;const i=t[e.index];if(aa(i))n=i;else{let r;if(8&e.type)r=Hi(i);else{const o=t[ft];r=o.createComment("");const s=Bo(e,t);_f(o,pw(o,s),r,function U_e(e,t){return e.nextSibling(t)}(o,s),!1)}t[e.index]=n=pU(i,t,r,e),Aw(t,n)}return new fj(n,e,t)}class bN{constructor(t){this.queryList=t,this.matches=null}clone(){return new bN(this.queryList)}setDirty(){this.queryList.setDirty()}}class wN{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new wN(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==vj(t,n).matches&&this.queries[n].setDirty()}}class gj{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class EN{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new EN(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class DN{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new DN(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,n,kbe(n,o)),this.matchTNodeWithReadOption(t,n,uw(n,t,o,!1,!1))}else i===dn?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,uw(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ot||r===Ss||r===dn&&4&n.type)this.addMatch(n.index,-2);else{const o=uw(n,t,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function kbe(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function Rbe(e,t,n,i){return-1===n?function Ibe(e,t){return 11&e.type?Hp(e,t):4&e.type?jw(e,t):null}(t,e):-2===n?function Fbe(e,t,n){return n===Ot?Hp(t,e):n===dn?jw(t,e):n===Ss?pj(t,e):void 0}(e,t,i):gf(e,e[xe],n,t)}function mj(e,t,n,i){const r=t[tl].queries[i];if(null===r.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const u=s[l];a.push(u<0?null:Rbe(t,o[u],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function CN(e,t,n,i){const r=e.queries.getByIndex(n),o=r.matches;if(null!==o){const s=mj(e,t,r,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const u=o[a+1],c=t[-l];for(let d=kr;d<c.length;d++){const f=c[d];f[n0]===f[$n]&&CN(f[xe],f,u,i)}if(null!==c[Mp]){const d=c[Mp];for(let f=0;f<d.length;f++){const h=d[f];CN(h[xe],h,u,i)}}}}}return i}function yt(e){const t=se(),n=Tt(),i=d9();U2(i+1);const r=vj(n,i);if(e.dirty&&function pme(e){return 4==(4&e[ct])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?CN(n,t,i,[]):mj(n,t,r,i);e.reset(o,O0e),e.notifyOnChanges()}return!0}return!1}function fa(e,t,n){const i=Tt();i.firstCreatePass&&(yj(i,new gj(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),_j(i,se(),t)}function fn(e,t,n,i){const r=Tt();if(r.firstCreatePass){const o=zi();yj(r,new gj(t,n,i),o.index),function Lbe(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}_j(r,se(),n)}function vt(){return function Pbe(e,t){return e[tl].queries[t].queryList}(se(),d9())}function _j(e,t,n){const i=new yN(4==(4&n));uU(e,t,i,i.destroy),null===t[tl]&&(t[tl]=new wN),t[tl].queries.push(new bN(i))}function yj(e,t,n){null===e.queries&&(e.queries=new EN),e.queries.track(new DN(t,n))}function vj(e,t){return e.queries.getByIndex(t)}function Pr(e,t){return jw(e,t)}function zw(...e){}const Gw=new Ie("Application Initializer");let Ww=(()=>{class e{constructor(n){this.appInits=n,this.resolve=zw,this.reject=zw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(M0(o))n.push(o);else if(nN(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(fe(Gw,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const z0=new Ie("AppId",{providedIn:"root",factory:function Lj(){return`${NN()}${NN()}${NN()}`}});function NN(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $j=new Ie("Platform Initializer"),qw=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bj=new Ie("AnimationModuleType");let iwe=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const zo=new Ie("LocaleId",{providedIn:"root",factory:()=>tt(zo,Ke.Optional|Ke.SkipSelf)||function rwe(){return typeof $localize<"u"&&$localize.locale||ag}()});class swe{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Uj=(()=>{class e{compileModuleSync(n){return new hN(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=gu(Lo(n).declarations).reduce((s,a)=>{const l=Gt(a);return l&&s.push(new A0(l)),s},[]);return new swe(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const uwe=(()=>Promise.resolve(0))();function ON(e){typeof Zone>"u"?uwe.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Dt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ke(!1),this.onMicrotaskEmpty=new ke(!1),this.onStable=new ke(!1),this.onError=new ke(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function cwe(){let e=_n.requestAnimationFrame,t=_n.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function hwe(e){const t=()=>{!function fwe(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(_n,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,IN(e),e.isCheckStableRunning=!0,kN(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),IN(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return Hj(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),zj(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return Hj(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),zj(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,IN(e),kN(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dt.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(Dt.isInAngularZone())throw new Z(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,dwe,zw,zw);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const dwe={};function kN(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function IN(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Hj(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function zj(e){e._nesting--,kN(e)}class pwe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ke,this.onMicrotaskEmpty=new ke,this.onStable=new ke,this.onError=new ke}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const Gj=new Ie(""),Yw=new Ie("");let PN,RN=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,PN||(function gwe(e){PN=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dt.assertNotInAngularZone(),ON(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ON(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(fe(Dt),fe(FN),fe(Yw))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),FN=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return PN?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const yu=!1;let bc=null;const Wj=new Ie("AllowMultipleToken"),LN=new Ie("PlatformDestroyListeners"),qj=new Ie("appBootstrapListener");class Yj{constructor(t,n){this.name=t,this.token=n}}function Xj(e,t,n=[]){const i=`Platform: ${t}`,r=new Ie(i);return(o=[])=>{let s=$N();if(!s||s.injector.get(Wj,!1)){const a=[...n,...o,{provide:r,useValue:!0}];e?e(a):function ywe(e){if(bc&&!bc.get(Wj,!1))throw new Z(400,!1);bc=e;const t=e.get(Jj);(function Kj(e){const t=e.get($j,null);t&&t.forEach(n=>n())})(e)}(function Qj(e=[],t){return uo.create({name:t,providers:[{provide:NM,useValue:"platform"},{provide:LN,useValue:new Set([()=>bc=null])},...e]})}(a,i))}return function bwe(e){const t=$N();if(!t)throw new Z(401,!1);return t}()}}function $N(){return bc?.get(Jj)??null}let Jj=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function eH(e,t){let n;return n="noop"===e?new pwe:("zone.js"===e?void 0:e)||new Dt(t),n}(i?.ngZone,function Zj(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:Dt,useValue:r}];return r.run(()=>{const s=uo.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(Gp,null);if(!l)throw new Z(402,!1);return r.runOutsideAngular(()=>{const u=r.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{Kw(this._modules,a),u.unsubscribe()})}),function tH(e,t,n){try{const i=n();return M0(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(l,r,()=>{const u=a.injector.get(Ww);return u.runInitializers(),u.donePromise.then(()=>(MV(a.injector.get(zo,ag)||ag),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=nH({},i);return function mwe(e,t,n){const i=new hN(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(n){const i=n.injector.get(Df);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new Z(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(LN,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(fe(uo))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function nH(e,t){return Array.isArray(t)?t.reduce(nH,e):{...e,...t}}let Df=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new on(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new on(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),ON(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=F6(o,s.pipe(function Fge(e={}){const{connector:t=(()=>new ln),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,c=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return Ln((g,m)=>{u++,!d&&!c&&f();const _=l=l??t();m.add(()=>{u--,0===u&&!d&&!c&&(a=b2(p,r))}),_.subscribe(m),!s&&u>0&&(s=new K_({next:y=>_.next(y),error:y=>{d=!0,f(),a=b2(h,n,y),_.error(y)},complete:()=>{c=!0,f(),a=b2(h,i),_.complete()}}),ji(g).subscribe(s))})(o)}}()))}bootstrap(n,i){const r=n instanceof $7;if(!this._injector.get(Ww).done){!r&&function Sp(e){const t=Gt(e)||cr(e)||oo(e);return null!==t&&t.standalone}(n);throw new Z(405,yu)}let s;s=r?n:this._injector.get(E0).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function _we(e){return e.isBoundToModule}(s)?void 0:this._injector.get(ug),u=s.create(uo.NULL,[],i||s.selector,a),c=u.location.nativeElement,d=u.injector.get(Gj,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Kw(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Z(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Kw(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(qj,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Kw(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Z(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(fe(Dt),fe(Ds),fe(Gp))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Kw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let fo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ewe,e})();function Ewe(e){return function Dwe(e,t,n){if(o0(e)&&!n){const i=so(e.index,t);return new S0(i,i)}return 47&e.type?new S0(t[fr],t):null}(zi(),se(),16==(16&e))}class aH{constructor(){}supports(t){return Ow(t)}create(t){return new Mwe(t)}}const xwe=(e,t)=>t;class Mwe{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||xwe}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<uH(i,r,o)?n:i,a=uH(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const u=a-r,c=l-r;if(u!=c){for(let f=0;f<u;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;c<=p&&p<u&&(o[f]=h+1)}o[s.previousIndex]=c-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Ow(t))throw new Z(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function f1e(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new Nwe(n,i),o,r),t}_verifyReinsertion(t,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new lH),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lH),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Nwe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Owe{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class lH{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new Owe,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uH(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class cH{constructor(){}supports(t){return t instanceof Map||eN(t)}create(){return new kwe}}class kwe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||eN(t)))throw new Z(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new Iwe(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class Iwe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dH(){return new Jw([new aH])}let Jw=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||dH()),deps:[[e,new h0,new f0]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new Z(901,!1)}}return e.\u0275prov=he({token:e,providedIn:"root",factory:dH}),e})();function fH(){return new G0([new cH])}let G0=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||fH()),deps:[[e,new h0,new f0]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new Z(901,!1)}}return e.\u0275prov=he({token:e,providedIn:"root",factory:fH}),e})();const Pwe=Xj(null,"core",[]);let Lwe=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(fe(Df))},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();function hg(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function HN(e,t){const n=Gt(e),i=t.elementInjector||Ew();return new A0(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let zN=null;function ul(){return zN}class Uwe{}const hn=new Ie("DocumentToken");let GN=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return function Vwe(){return fe(hH)}()},providedIn:"platform"}),e})();const jwe=new Ie("Location Initialized");let hH=(()=>{class e extends GN{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ul().getBaseHref(this._doc)}onPopState(n){const i=ul().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=ul().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){pH()?this._history.pushState(n,i,r):this._location.hash=r}replaceState(n,i,r){pH()?this._history.replaceState(n,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:function(){return function Hwe(){return new hH(fe(hn))}()},providedIn:"platform"}),e})();function pH(){return!!window.history.pushState}function WN(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function gH(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function vu(e){return e&&"?"!==e[0]?"?"+e:e}let wc=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return tt(qN)},providedIn:"root"}),e})();const mH=new Ie("appBaseHref");let qN=(()=>{class e extends wc{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??tt(hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return WN(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+vu(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){const s=this.prepareExternalUrl(r+vu(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){const s=this.prepareExternalUrl(r+vu(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(fe(GN),fe(mH,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zwe=(()=>{class e extends wc{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=WN(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+vu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+vu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(fe(GN),fe(mH,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),YN=(()=>{class e{constructor(n){this._subject=new ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function qwe(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(gH(_H(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+vu(i))}normalize(n){return e.stripTrailingSlash(function Wwe(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,_H(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vu(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=vu,e.joinWithSlash=WN,e.stripTrailingSlash=gH,e.\u0275fac=function(n){return new(n||e)(fe(wc))},e.\u0275prov=he({token:e,factory:function(){return function Gwe(){return new YN(fe(wc))}()},providedIn:"root"}),e})();function _H(e){return e.replace(/\/index.html$/,"")}var ho=(()=>((ho=ho||{})[ho.Decimal=0]="Decimal",ho[ho.Percent=1]="Percent",ho[ho.Currency=2]="Currency",ho[ho.Scientific=3]="Scientific",ho))(),bn=(()=>((bn=bn||{})[bn.Format=0]="Format",bn[bn.Standalone=1]="Standalone",bn))(),st=(()=>((st=st||{})[st.Narrow=0]="Narrow",st[st.Abbreviated=1]="Abbreviated",st[st.Wide=2]="Wide",st[st.Short=3]="Short",st))(),On=(()=>((On=On||{})[On.Short=0]="Short",On[On.Medium=1]="Medium",On[On.Long=2]="Long",On[On.Full=3]="Full",On))(),qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Group=1]="Group",qe[qe.List=2]="List",qe[qe.PercentSign=3]="PercentSign",qe[qe.PlusSign=4]="PlusSign",qe[qe.MinusSign=5]="MinusSign",qe[qe.Exponential=6]="Exponential",qe[qe.SuperscriptingExponent=7]="SuperscriptingExponent",qe[qe.PerMille=8]="PerMille",qe[qe.Infinity=9]="Infinity",qe[qe.NaN=10]="NaN",qe[qe.TimeSeparator=11]="TimeSeparator",qe[qe.CurrencyDecimal=12]="CurrencyDecimal",qe[qe.CurrencyGroup=13]="CurrencyGroup",qe))();function vH(e,t,n){const i=Fr(e),o=Ts([i[Se.DayPeriodsFormat],i[Se.DayPeriodsStandalone]],t);return Ts(o,n)}function bH(e,t,n){const i=Fr(e),o=Ts([i[Se.DaysFormat],i[Se.DaysStandalone]],t);return Ts(o,n)}function KN(e,t,n){const i=Fr(e),o=Ts([i[Se.MonthsFormat],i[Se.MonthsStandalone]],t);return Ts(o,n)}function Zw(e,t){return Ts(Fr(e)[Se.DateFormat],t)}function eE(e,t){return Ts(Fr(e)[Se.TimeFormat],t)}function tE(e,t){return Ts(Fr(e)[Se.DateTimeFormat],t)}function As(e,t){const n=Fr(e),i=n[Se.NumberSymbols][t];if(typeof i>"u"){if(t===qe.CurrencyDecimal)return n[Se.NumberSymbols][qe.Decimal];if(t===qe.CurrencyGroup)return n[Se.NumberSymbols][qe.Group]}return i}function wH(e){if(!e[Se.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Se.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ts(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function QN(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const iEe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,W0={},rEe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mi=(()=>((mi=mi||{})[mi.Short=0]="Short",mi[mi.ShortGMT=1]="ShortGMT",mi[mi.Long=2]="Long",mi[mi.Extended=3]="Extended",mi))(),Qe=(()=>((Qe=Qe||{})[Qe.FullYear=0]="FullYear",Qe[Qe.Month=1]="Month",Qe[Qe.Date=2]="Date",Qe[Qe.Hours=3]="Hours",Qe[Qe.Minutes=4]="Minutes",Qe[Qe.Seconds=5]="Seconds",Qe[Qe.FractionalSeconds=6]="FractionalSeconds",Qe[Qe.Day=7]="Day",Qe))(),dt=(()=>((dt=dt||{})[dt.DayPeriods=0]="DayPeriods",dt[dt.Days=1]="Days",dt[dt.Months=2]="Months",dt[dt.Eras=3]="Eras",dt))();function EH(e,t,n,i){let r=function hEe(e){if(SH(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[r,o=1,s=1]=e.split("-").map(a=>+a);return nE(r,o-1,s)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(iEe))return function pEe(e){const t=new Date(0);let n=0,i=0;const r=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),u=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,l,u),t}(i)}const t=new Date(e);if(!SH(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=bu(n,t)||t;let a,s=[];for(;t;){if(a=rEe.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const c=s.pop();if(!c)break;t=c}}let l=r.getTimezoneOffset();i&&(l=CH(i,l),r=function fEe(e,t,n){const i=n?-1:1,r=e.getTimezoneOffset();return function dEe(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,i*(CH(t,r)-r))}(r,i,!0));let u="";return s.forEach(c=>{const d=function cEe(e){if(ZN[e])return ZN[e];let t;switch(e){case"G":case"GG":case"GGG":t=pn(dt.Eras,st.Abbreviated);break;case"GGGG":t=pn(dt.Eras,st.Wide);break;case"GGGGG":t=pn(dt.Eras,st.Narrow);break;case"y":t=si(Qe.FullYear,1,0,!1,!0);break;case"yy":t=si(Qe.FullYear,2,0,!0,!0);break;case"yyy":t=si(Qe.FullYear,3,0,!1,!0);break;case"yyyy":t=si(Qe.FullYear,4,0,!1,!0);break;case"Y":t=sE(1);break;case"YY":t=sE(2,!0);break;case"YYY":t=sE(3);break;case"YYYY":t=sE(4);break;case"M":case"L":t=si(Qe.Month,1,1);break;case"MM":case"LL":t=si(Qe.Month,2,1);break;case"MMM":t=pn(dt.Months,st.Abbreviated);break;case"MMMM":t=pn(dt.Months,st.Wide);break;case"MMMMM":t=pn(dt.Months,st.Narrow);break;case"LLL":t=pn(dt.Months,st.Abbreviated,bn.Standalone);break;case"LLLL":t=pn(dt.Months,st.Wide,bn.Standalone);break;case"LLLLL":t=pn(dt.Months,st.Narrow,bn.Standalone);break;case"w":t=JN(1);break;case"ww":t=JN(2);break;case"W":t=JN(1,!0);break;case"d":t=si(Qe.Date,1);break;case"dd":t=si(Qe.Date,2);break;case"c":case"cc":t=si(Qe.Day,1);break;case"ccc":t=pn(dt.Days,st.Abbreviated,bn.Standalone);break;case"cccc":t=pn(dt.Days,st.Wide,bn.Standalone);break;case"ccccc":t=pn(dt.Days,st.Narrow,bn.Standalone);break;case"cccccc":t=pn(dt.Days,st.Short,bn.Standalone);break;case"E":case"EE":case"EEE":t=pn(dt.Days,st.Abbreviated);break;case"EEEE":t=pn(dt.Days,st.Wide);break;case"EEEEE":t=pn(dt.Days,st.Narrow);break;case"EEEEEE":t=pn(dt.Days,st.Short);break;case"a":case"aa":case"aaa":t=pn(dt.DayPeriods,st.Abbreviated);break;case"aaaa":t=pn(dt.DayPeriods,st.Wide);break;case"aaaaa":t=pn(dt.DayPeriods,st.Narrow);break;case"b":case"bb":case"bbb":t=pn(dt.DayPeriods,st.Abbreviated,bn.Standalone,!0);break;case"bbbb":t=pn(dt.DayPeriods,st.Wide,bn.Standalone,!0);break;case"bbbbb":t=pn(dt.DayPeriods,st.Narrow,bn.Standalone,!0);break;case"B":case"BB":case"BBB":t=pn(dt.DayPeriods,st.Abbreviated,bn.Format,!0);break;case"BBBB":t=pn(dt.DayPeriods,st.Wide,bn.Format,!0);break;case"BBBBB":t=pn(dt.DayPeriods,st.Narrow,bn.Format,!0);break;case"h":t=si(Qe.Hours,1,-12);break;case"hh":t=si(Qe.Hours,2,-12);break;case"H":t=si(Qe.Hours,1);break;case"HH":t=si(Qe.Hours,2);break;case"m":t=si(Qe.Minutes,1);break;case"mm":t=si(Qe.Minutes,2);break;case"s":t=si(Qe.Seconds,1);break;case"ss":t=si(Qe.Seconds,2);break;case"S":t=si(Qe.FractionalSeconds,1);break;case"SS":t=si(Qe.FractionalSeconds,2);break;case"SSS":t=si(Qe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=rE(mi.Short);break;case"ZZZZZ":t=rE(mi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=rE(mi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=rE(mi.Long);break;default:return null}return ZN[e]=t,t}(c);u+=d?d(r,n,l):"''"===c?"'":c.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function nE(e,t,n){const i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function bu(e,t){const n=function Ywe(e){return Fr(e)[Se.LocaleId]}(e);if(W0[n]=W0[n]||{},W0[n][t])return W0[n][t];let i="";switch(t){case"shortDate":i=Zw(e,On.Short);break;case"mediumDate":i=Zw(e,On.Medium);break;case"longDate":i=Zw(e,On.Long);break;case"fullDate":i=Zw(e,On.Full);break;case"shortTime":i=eE(e,On.Short);break;case"mediumTime":i=eE(e,On.Medium);break;case"longTime":i=eE(e,On.Long);break;case"fullTime":i=eE(e,On.Full);break;case"short":const r=bu(e,"shortTime"),o=bu(e,"shortDate");i=iE(tE(e,On.Short),[r,o]);break;case"medium":const s=bu(e,"mediumTime"),a=bu(e,"mediumDate");i=iE(tE(e,On.Medium),[s,a]);break;case"long":const l=bu(e,"longTime"),u=bu(e,"longDate");i=iE(tE(e,On.Long),[l,u]);break;case"full":const c=bu(e,"fullTime"),d=bu(e,"fullDate");i=iE(tE(e,On.Full),[c,d])}return i&&(W0[n][t]=i),i}function iE(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return null!=t&&i in t?t[i]:n})),e}function pa(e,t,n="-",i,r){let o="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function si(e,t,n=0,i=!1,r=!1){return function(o,s){let a=function sEe(e,t){switch(e){case Qe.FullYear:return t.getFullYear();case Qe.Month:return t.getMonth();case Qe.Date:return t.getDate();case Qe.Hours:return t.getHours();case Qe.Minutes:return t.getMinutes();case Qe.Seconds:return t.getSeconds();case Qe.FractionalSeconds:return t.getMilliseconds();case Qe.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((n>0||a>-n)&&(a+=n),e===Qe.Hours)0===a&&-12===n&&(a=12);else if(e===Qe.FractionalSeconds)return function oEe(e,t){return pa(e,3).substring(0,t)}(a,t);const l=As(s,qe.MinusSign);return pa(a,t,l,i,r)}}function pn(e,t,n=bn.Format,i=!1){return function(r,o){return function aEe(e,t,n,i,r,o){switch(n){case dt.Months:return KN(t,r,i)[e.getMonth()];case dt.Days:return bH(t,r,i)[e.getDay()];case dt.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const u=function Jwe(e){const t=Fr(e);return wH(t),(t[Se.ExtraData][2]||[]).map(i=>"string"==typeof i?QN(i):[QN(i[0]),QN(i[1])])}(t),c=function Zwe(e,t,n){const i=Fr(e);wH(i);const o=Ts([i[Se.ExtraData][0],i[Se.ExtraData][1]],t)||[];return Ts(o,n)||[]}(t,r,i),d=u.findIndex(f=>{if(Array.isArray(f)){const[h,p]=f,g=s>=h.hours&&a>=h.minutes,m=s<p.hours||s===p.hours&&a<p.minutes;if(h.hours<p.hours){if(g&&m)return!0}else if(g||m)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(-1!==d)return c[d]}return vH(t,r,i)[s<12?0:1];case dt.Eras:return function Kwe(e,t){return Ts(Fr(e)[Se.Eras],t)}(t,i)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,o,e,t,n,i)}}function rE(e){return function(t,n,i){const r=-1*i,o=As(n,qe.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case mi.Short:return(r>=0?"+":"")+pa(s,2,o)+pa(Math.abs(r%60),2,o);case mi.ShortGMT:return"GMT"+(r>=0?"+":"")+pa(s,1,o);case mi.Long:return"GMT"+(r>=0?"+":"")+pa(s,2,o)+":"+pa(Math.abs(r%60),2,o);case mi.Extended:return 0===i?"Z":(r>=0?"+":"")+pa(s,2,o)+":"+pa(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}const lEe=0,oE=4;function DH(e){return nE(e.getFullYear(),e.getMonth(),e.getDate()+(oE-e.getDay()))}function JN(e,t=!1){return function(n,i){let r;if(t){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{const o=DH(n),s=function uEe(e){const t=nE(e,lEe,1).getDay();return nE(e,0,1+(t<=oE?oE:oE+7)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return pa(r,e,As(i,qe.MinusSign))}}function sE(e,t=!1){return function(n,i){return pa(DH(n).getFullYear(),e,As(i,qe.MinusSign),t)}}const ZN={};function CH(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function SH(e){return e instanceof Date&&!isNaN(e.valueOf())}const gEe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,AH=22,aE=".",q0="0",mEe=";",_Ee=",",eO="#";function iO(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}function MH(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}class xEe{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let po=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new xEe(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),IH(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{IH(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(L(Ss),L(dn),L(Jw))},e.\u0275dir=ve({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function IH(e,t){e.context.$implicit=t.item}let qi=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new NEe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){RH("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){RH("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(L(Ss),L(dn))},e.\u0275dir=ve({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class NEe{constructor(){this.$implicit=null,this.ngIf=null}}function RH(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${cn(t)}'.`)}let PH=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,o]=n.split("."),s=-1===r.indexOf("-")?void 0:ao.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(L(Ot),L(G0),L(pr))},e.\u0275dir=ve({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),wu=(()=>{class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(n.ngTemplateOutlet||n.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&n.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(n){return new(n||e)(L(Ss))},e.\u0275dir=ve({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Bn]}),e})();let $H=(()=>{class e{constructor(n){this._locale=n}transform(n,i,r){if(!function lO(e){return!(null==e||""===e||e!=e)}(n))return null;r=r||this._locale;try{return function bEe(e,t,n){return function tO(e,t,n,i,r,o,s=!1){let a="",l=!1;if(isFinite(e)){let u=function DEe(e){let i,r,o,s,a,t=Math.abs(e)+"",n=0;for((r=t.indexOf(aE))>-1&&(t=t.replace(aE,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===q0;o++);if(o===(a=t.length))i=[0],r=1;else{for(a--;t.charAt(a)===q0;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(t.charAt(o))}return r>AH&&(i=i.splice(0,AH-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}(e);s&&(u=function EEe(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(u));let c=t.minInt,d=t.minFrac,f=t.maxFrac;if(o){const y=o.match(gEe);if(null===y)throw new Error(`${o} is not a valid digit info`);const v=y[1],b=y[3],w=y[5];null!=v&&(c=iO(v)),null!=b&&(d=iO(b)),null!=w?f=iO(w):null!=b&&d>f&&(f=d)}!function CEe(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let i=e.digits,r=i.length-e.integerLen;const o=Math.min(Math.max(t,r),n);let s=o+e.integerLen,a=i[s];if(s>0){i.splice(Math.max(e.integerLen,s));for(let d=s;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),e.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let d=1;d<s;d++)i[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=0!==o;const u=t+e.integerLen,c=i.reduceRight(function(d,f,h,p){return p[h]=(f+=d)<10?f:f-10,l&&(0===p[h]&&h>=u?p.pop():l=!1),f>=10?1:0},0);c&&(i.unshift(c),e.integerLen++)}(u,d,f);let h=u.digits,p=u.integerLen;const g=u.exponent;let m=[];for(l=h.every(y=>!y);p<c;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?m=h.splice(p,h.length):(m=h,h=[0]);const _=[];for(h.length>=t.lgSize&&_.unshift(h.splice(-t.lgSize,h.length).join(""));h.length>t.gSize;)_.unshift(h.splice(-t.gSize,h.length).join(""));h.length&&_.unshift(h.join("")),a=_.join(As(n,i)),m.length&&(a+=As(n,r)+m.join("")),g&&(a+=As(n,qe.Exponential)+"+"+g)}else a=As(n,qe.Infinity);return a=e<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,function nO(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split(mEe),r=i[0],o=i[1],s=-1!==r.indexOf(aE)?r.split(aE):[r.substring(0,r.lastIndexOf(q0)+1),r.substring(r.lastIndexOf(q0)+1)],a=s[0],l=s[1]||"";n.posPre=a.substring(0,a.indexOf(eO));for(let c=0;c<l.length;c++){const d=l.charAt(c);d===q0?n.minFrac=n.maxFrac=c+1:d===eO?n.maxFrac=c+1:n.posSuf+=d}const u=a.split(_Ee);if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){const c=r.length-n.posPre.length-n.posSuf.length,d=o.indexOf(eO);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+c).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function XN(e,t){return Fr(e)[Se.NumberFormats][t]}(t,ho.Percent),As(t,qe.MinusSign)),t,qe.Group,qe.Decimal,n,!0).replace(new RegExp("%","g"),As(t,qe.PercentSign))}(function uO(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(n),r,i)}catch(o){throw function ga(e,t){return new Z(2100,!1)}()}}}return e.\u0275fac=function(n){return new(n||e)(L(zo,16))},e.\u0275pipe=ur({name:"percent",type:e,pure:!0,standalone:!0}),e})();let tDe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();const BH="browser";let Y0=(()=>{class e{}return e.\u0275prov=he({token:e,providedIn:"root",factory:()=>new sDe(fe(hn),window)}),e})();class sDe{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function aDe(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=UH(this.window.history)||UH(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function UH(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class VH{}class RDe extends Uwe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fO extends RDe{static makeCurrent(){!function Bwe(e){zN||(zN=e)}(new fO)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function FDe(){return X0=X0||document.querySelector("base"),X0?X0.getAttribute("href"):null}();return null==n?null:function PDe(e){cE=cE||document.createElement("a"),cE.setAttribute("href",e);const t=cE.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){X0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return MH(document.cookie,t)}}let cE,X0=null;const WH=new Ie("TRANSITION_ID"),$De=[{provide:Gw,useFactory:function LDe(e,t,n){return()=>{n.get(Ww).donePromise.then(()=>{const i=ul(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[WH,hn,uo],multi:!0}];let UDe=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const dE=new Ie("EventManagerPlugins");let fE=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(fe(dE),fe(Dt))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class qH{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=ul().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let YH=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,i){const r=this.usageCount;let o=r.get(n)??0;return o+=i,o>0?r.set(n,o):r.delete(n),o}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Q0=(()=>{class e extends YH{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.forEach(o=>o.remove()),i.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,i){const r=this.doc.createElement("style");r.textContent=i,n.appendChild(r);const o=this.styleRef.get(i);o?o.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const hO={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pO=/%COMP%/g,QH=new Ie("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function JH(e,t){return t.flat(100).map(n=>n.replace(pO,e))}function ZH(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let hE=(()=>{class e{constructor(n,i,r,o){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new gO(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(n,i);return r instanceof nz?r.applyToHost(n):r instanceof mO&&r.applyStyles(),r}getOrCreateRenderer(n,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case oa.Emulated:o=new nz(s,a,i,this.appId,l);break;case oa.ShadowDom:return new qDe(s,a,n,i);default:o=new mO(s,a,i,l)}o.onDestroy=()=>r.delete(i.id),r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(fe(fE),fe(Q0),fe(z0),fe(QH))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class gO{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(hO[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(tz(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(tz(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const o=hO[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=hO[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(ao.DashCase|ao.Important)?t.style.setProperty(n,i,r&ao.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&ao.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,ZH(i)):this.eventManager.addEventListener(t,n,ZH(i))}}function tz(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class qDe extends gO{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=JH(r.id,r.styles);for(const s of o){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mO extends gO{constructor(t,n,i,r,o=i.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=JH(o,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class nz extends mO{constructor(t,n,i,r,o){const s=r+"-"+i.id;super(t,n,i,o,s),this.contentAttr=function zDe(e){return"_ngcontent-%COMP%".replace(pO,e)}(s),this.hostAttr=function GDe(e){return"_nghost-%COMP%".replace(pO,e)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}let YDe=(()=>{class e extends qH{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const iz=["alt","control","meta","shift"],KDe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XDe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let QDe=(()=>{class e extends qH{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ul().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),iz.forEach(u=>{const c=i.indexOf(u);c>-1&&(i.splice(c,1),s+=u+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=KDe[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),iz.forEach(s=>{s!==r&&(0,XDe[s])(n)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const oz=[{provide:qw,useValue:BH},{provide:$j,useValue:function JDe(){fO.makeCurrent()},multi:!0},{provide:hn,useFactory:function eCe(){return function Y_e(e){wM=e}(document),document},deps:[]}],tCe=Xj(Pwe,"browser",oz),sz=new Ie(""),az=[{provide:Yw,useClass:class BDe{addToWindow(t){_n.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},_n.getAllAngularTestabilities=()=>t.getAllTestabilities(),_n.getAllAngularRootElements=()=>t.getAllRootElements(),_n.frameworkStabilizers||(_n.frameworkStabilizers=[]),_n.frameworkStabilizers.push(i=>{const r=_n.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?ul().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Gj,useClass:RN,deps:[Dt,FN,Yw]},{provide:RN,useClass:RN,deps:[Dt,FN,Yw]}],lz=[{provide:NM,useValue:"root"},{provide:Gp,useFactory:function ZDe(){return new Gp},deps:[]},{provide:dE,useClass:YDe,multi:!0,deps:[hn,Dt,qw]},{provide:dE,useClass:QDe,multi:!0,deps:[hn]},{provide:hE,useClass:hE,deps:[fE,Q0,z0,QH]},{provide:zp,useExisting:hE},{provide:YH,useExisting:Q0},{provide:Q0,useClass:Q0,deps:[hn]},{provide:fE,useClass:fE,deps:[dE,Dt]},{provide:VH,useClass:UDe,deps:[]},[]];let uz=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:z0,useValue:n.appId},{provide:WH,useExisting:z0},$De]}}}return e.\u0275fac=function(n){return new(n||e)(fe(sz,12))},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({providers:[...lz,...az],imports:[tDe,Lwe]}),e})(),yO=(()=>{class e{constructor(n){this._doc=n,this._dom=ul()}addTag(n,i=!1){return n?this._getOrCreateElement(n,i):null}addTags(n,i=!1){return n?n.reduce((r,o)=>(o&&r.push(this._getOrCreateElement(o,i)),r),[]):[]}getTag(n){return n&&this._doc.querySelector(`meta[${n}]`)||null}getTags(n){if(!n)return[];const i=this._doc.querySelectorAll(`meta[${n}]`);return i?[].slice.call(i):[]}updateTag(n,i){if(!n)return null;i=i||this._parseSelector(n);const r=this.getTag(i);return r?this._setMetaElementAttributes(n,r):this._getOrCreateElement(n,!0)}removeTag(n){this.removeTagElement(this.getTag(n))}removeTagElement(n){n&&this._dom.remove(n)}_getOrCreateElement(n,i=!1){if(!i){const s=this._parseSelector(n),a=this.getTags(s).filter(l=>this._containsAttributes(n,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(n,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(n,i){return Object.keys(n).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),n[r])),i}_parseSelector(n){const i=n.name?"name":"property";return`${i}="${n[i]}"`}_containsAttributes(n,i){return Object.keys(n).every(r=>i.getAttribute(this._getMetaKeyMap(r))===n[r])}_getMetaKeyMap(n){return iCe[n]||n}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:function(n){let i=null;return i=n?new n:function nCe(){return new yO(fe(hn))}(),i},providedIn:"root"}),e})();const iCe={httpEquiv:"http-equiv"};let pE=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:function(n){let i=null;return i=n?new n:function rCe(){return new pE(fe(hn))}(),i},providedIn:"root"}),e})();function Ve(...e){return ii(e,X_(e))}typeof window<"u"&&window;class xi extends ln{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const gE=lf(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:cCe}=Array,{getPrototypeOf:dCe,prototype:fCe,keys:hCe}=Object;function fz(e){if(1===e.length){const t=e[0];if(cCe(t))return{args:t,keys:null};if(function pCe(e){return e&&"object"==typeof e&&dCe(e)===fCe}(t)){const n=hCe(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}const{isArray:gCe}=Array;function bO(e){return Xe(t=>function mCe(e,t){return gCe(t)?e(...t):e(t)}(e,t))}function hz(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function mE(...e){const t=X_(e),n=Ub(e),{args:i,keys:r}=fz(e);if(0===i.length)return ii([],t);const o=new on(function _Ce(e,t,n=su){return i=>{pz(t,()=>{const{length:r}=e,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)pz(t,()=>{const u=ii(e[l],t);let c=!1;u.subscribe(un(i,d=>{o[l]=d,c||(c=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>hz(r,s):su));return n?o.pipe(bO(n)):o}function pz(e,t,n){e?au(n,e,t):t()}function J0(...e){return function yCe(){return Dp(1)}()(ii(e,X_(e)))}function gz(e){return new on(t=>{ji(e()).subscribe(t)})}function Z0(e,t){const n=wt(e)?e:()=>e,i=r=>r.error(n());return new on(t?r=>t.schedule(i,0,r):i)}function wO(){return Ln((e,t)=>{let n=null;e._refCount++;const i=un(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}class mz extends on{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_6(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vi;const n=this.getSubject();t.add(this.source.subscribe(un(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vi.EMPTY)}return t}refCount(){return wO()(this)}}function xs(e,t){return Ln((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(un(i,l=>{r?.unsubscribe();let u=0;const c=o++;ji(e(l,c)).subscribe(r=un(i,d=>i.next(t?t(l,d,c,u++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function ai(e){return e<=0?()=>ys:Ln((t,n)=>{let i=0;t.subscribe(un(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function _E(...e){const t=X_(e);return Ln((n,i)=>{(t?J0(e,n,t):J0(e,n)).subscribe(i)})}function Xn(e,t){return Ln((n,i)=>{let r=0;n.subscribe(un(i,o=>e.call(t,o,r++)&&i.next(o)))})}function yE(e){return Ln((t,n)=>{let i=!1;t.subscribe(un(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function _z(e=vCe){return Ln((t,n)=>{let i=!1;t.subscribe(un(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function vCe(){return new gE}function Dc(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Xn((r,o)=>e(r,o,i)):su,ai(1),n?yE(t):_z(()=>new gE))}function Cc(e,t){return wt(t)?di(e,t,1):di(e,1)}function Mi(e,t,n){const i=wt(e)||t||n?{next:e,error:t,complete:n}:e;return i?Ln((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(un(o,l=>{var u;null===(u=i.next)||void 0===u||u.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var u;a=!1,null===(u=i.error)||void 0===u||u.call(i,l),o.error(l)},()=>{var l,u;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(u=i.finalize)||void 0===u||u.call(i)}))}):su}function Sc(e){return Ln((t,n)=>{let o,i=null,r=!1;i=t.subscribe(un(n,void 0,void 0,s=>{o=ji(e(s,Sc(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function yz(e,t){return Ln(function bCe(e,t,n,i,r){return(o,s)=>{let a=n,l=t,u=0;o.subscribe(un(s,c=>{const d=u++;l=a?e(l,c,d):(a=!0,c),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(e,t,arguments.length>=2,!0))}function EO(e){return e<=0?()=>ys:Ln((t,n)=>{let i=[];t.subscribe(un(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function vz(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Xn((r,o)=>e(r,o,i)):su,EO(1),n?yE(t):_z(()=>new gE))}function DO(e){return Ln((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const at="primary",ey=Symbol("RouteTitle");class ECe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function pg(e){return new ECe(e)}function DCe(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function cl(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!wz(e[r],t[r]))return!1;return!0}function wz(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}return e===t}function Ez(e){return Array.prototype.concat.apply([],e)}function Dz(e){return e.length>0?e[e.length-1]:null}function Yi(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Ac(e){return nN(e)?e:M0(e)?ii(Promise.resolve(e)):Ve(e)}const vE=!1,SCe={exact:function Az(e,t,n){if(!Sf(e.segments,t.segments)||!bE(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!Az(e.children[i],t.children[i],n))return!1;return!0},subset:Tz},Cz={exact:function ACe(e,t){return cl(e,t)},subset:function TCe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>wz(e[n],t[n]))},ignored:()=>!0};function Sz(e,t,n){return SCe[n.paths](e.root,t.root,n.matrixParams)&&Cz[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Tz(e,t,n){return xz(e,t,t.segments,n)}function xz(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!Sf(r,n)||t.hasChildren()||!bE(r,n,i))}if(e.segments.length===n.length){if(!Sf(e.segments,n)||!bE(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!Tz(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(Sf(e.segments,r)&&bE(e.segments,r,i)&&e.children[at])&&xz(e.children[at],t,o,i)}}function bE(e,t,n){return t.every((i,r)=>Cz[n](e[r].parameters,i.parameters))}class Tc{constructor(t=new ht([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pg(this.queryParams)),this._queryParamMap}toString(){return NCe.serialize(this)}}class ht{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Yi(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wE(this)}}class ty{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=pg(this.parameters)),this._parameterMap}toString(){return Oz(this)}}function Sf(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}let ny=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return new CO},providedIn:"root"}),e})();class CO{parse(t){const n=new BCe(t);return new Tc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${iy(t.root,!0)}`,i=function ICe(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${EE(n)}=${EE(r)}`).join("&"):`${EE(n)}=${EE(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function OCe(e){return encodeURI(e)}(t.fragment)}`:""}`}}const NCe=new CO;function wE(e){return e.segments.map(t=>Oz(t)).join("/")}function iy(e,t){if(!e.hasChildren())return wE(e);if(t){const n=e.children[at]?iy(e.children[at],!1):"",i=[];return Yi(e.children,(r,o)=>{o!==at&&i.push(`${o}:${iy(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function MCe(e,t){let n=[];return Yi(e.children,(i,r)=>{r===at&&(n=n.concat(t(i,r)))}),Yi(e.children,(i,r)=>{r!==at&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===at?[iy(e.children[at],!1)]:[`${r}:${iy(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[at]?`${wE(e)}/${n[0]}`:`${wE(e)}/(${n.join("//")})`}}function Mz(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function EE(e){return Mz(e).replace(/%3B/gi,";")}function SO(e){return Mz(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function DE(e){return decodeURIComponent(e)}function Nz(e){return DE(e.replace(/\+/g,"%20"))}function Oz(e){return`${SO(e.path)}${function kCe(e){return Object.keys(e).map(t=>`;${SO(t)}=${SO(e[t])}`).join("")}(e.parameters)}`}const RCe=/^[^\/()?;=#]+/;function CE(e){const t=e.match(RCe);return t?t[0]:""}const FCe=/^[^=?&#]+/,LCe=/^[^&#]+/;class BCe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ht([],{}):new ht([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[at]=new ht(t,n)),i}parseSegment(){const t=CE(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Z(4009,vE);return this.capture(t),new ty(DE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=CE(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=CE(this.remaining);r&&(i=r,this.capture(i))}t[DE(n)]=DE(i)}parseQueryParam(t){const n=function PCe(e){const t=e.match(FCe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=function $Ce(e){const t=e.match(LCe);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=Nz(n),o=Nz(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=CE(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Z(4010,vE);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=at);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[at]:new ht([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Z(4011,vE)}}function AO(e){return e.segments.length>0?new ht([],{[at]:e}):e}function SE(e){const t={};for(const i of Object.keys(e.children)){const o=SE(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function UCe(e){if(1===e.numberOfChildren&&e.children[at]){const t=e.children[at];return new ht(e.segments.concat(t.segments),t.children)}return e}(new ht(e.segments,t))}function Af(e){return e instanceof Tc}const TO=!1;function VCe(e,t,n,i,r){if(0===n.length)return gg(t.root,t.root,t.root,i,r);const o=function Pz(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Fz(!0,0,e);let t=0,n=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Yi(o.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new Fz(n,t,i)}(n);return o.toRoot()?gg(t.root,t.root,new ht([],{}),i,r):function s(l){const u=function HCe(e,t,n,i){if(e.isAbsolute)return new mg(t.root,!0,0);if(-1===i)return new mg(n,n===t.root,0);return function Lz(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Z(4005,TO&&"Invalid number of '../'");r=i.segments.length}return new mg(i,!1,r-o)}(n,i+(ry(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,l),c=u.processChildren?_g(u.segmentGroup,u.index,o.commands):xO(u.segmentGroup,u.index,o.commands);return gg(t.root,u.segmentGroup,c,i,r)}(e.snapshot?._lastPathIndex)}function ry(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function oy(e){return"object"==typeof e&&null!=e&&e.outlets}function gg(e,t,n,i,r){let s,o={};i&&Yi(i,(l,u)=>{o[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`}),s=e===t?n:Rz(e,t,n);const a=AO(SE(s));return new Tc(a,o,r)}function Rz(e,t,n){const i={};return Yi(e.children,(r,o)=>{i[o]=r===t?n:Rz(r,t,n)}),new ht(e.segments,i)}class Fz{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&ry(i[0]))throw new Z(4003,TO&&"Root segment cannot have matrix parameters");const r=i.find(oy);if(r&&r!==Dz(i))throw new Z(4004,TO&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mg{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function xO(e,t,n){if(e||(e=new ht([],{})),0===e.segments.length&&e.hasChildren())return _g(e,t,n);const i=function GCe(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const s=e.segments[r],a=n[i];if(oy(a))break;const l=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!Bz(l,u,s))return o;i+=2}else{if(!Bz(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new ht(e.segments.slice(0,i.pathIndex),{});return o.children[at]=new ht(e.segments.slice(i.pathIndex),e.children),_g(o,0,r)}return i.match&&0===r.length?new ht(e.segments,{}):i.match&&!e.hasChildren()?MO(e,t,n):i.match?_g(e,0,r):MO(e,t,n)}function _g(e,t,n){if(0===n.length)return new ht(e.segments,{});{const i=function zCe(e){return oy(e[0])?e[0].outlets:{[at]:e}}(n),r={};if(!i[at]&&e.children[at]&&1===e.numberOfChildren&&0===e.children[at].segments.length){const o=_g(e.children[at],t,n);return new ht(e.segments,o.children)}return Yi(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=xO(e.children[s],t,o))}),Yi(e.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new ht(e.segments,r)}}function MO(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const o=n[r];if(oy(o)){const l=WCe(o.outlets);return new ht(i,l)}if(0===r&&ry(n[0])){i.push(new ty(e.segments[t].path,$z(n[0]))),r++;continue}const s=oy(o)?o.outlets[at]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&ry(a)?(i.push(new ty(s,$z(a))),r+=2):(i.push(new ty(s,{})),r++)}return new ht(i,{})}function WCe(e){const t={};return Yi(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=MO(new ht([],{}),0,n))}),t}function $z(e){const t={};return Yi(e,(n,i)=>t[i]=`${n}`),t}function Bz(e,t,n){return e==n.path&&cl(t,n.parameters)}const sy="imperative";class dl{constructor(t,n){this.id=t,this.url=n}}class NO extends dl{constructor(t,n,i="imperative",r=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xc extends dl{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class AE extends dl{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class TE extends dl{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=16}}class OO extends dl{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qCe extends dl{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YCe extends dl{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KCe extends dl{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XCe extends dl{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QCe extends dl{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JCe{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZCe{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eSe{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tSe{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nSe{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kO{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uz{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let oSe=(()=>{class e{createUrlTree(n,i,r,o,s,a){return VCe(n||i.root,r,o,s,a)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),aSe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(t){return oSe.\u0275fac(t)},providedIn:"root"}),e})();class Vz{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=IO(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=IO(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=RO(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return RO(t,this._root).map(n=>n.value)}}function IO(e,t){if(e===t.value)return t;for(const n of t.children){const i=IO(e,n);if(i)return i}return null}function RO(e,t){if(e===t.value)return[t];for(const n of t.children){const i=RO(e,n);if(i.length)return i.unshift(t),i}return[]}class Eu{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function yg(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class jz extends Vz{constructor(t,n){super(t),this.snapshot=n,FO(this,t)}toString(){return this.snapshot.toString()}}function Hz(e,t){const n=function lSe(e,t){const s=new xE([],{},{},"",{},at,t,null,e.root,-1,{});return new Gz("",new Eu(s,[]))}(e,t),i=new xi([new ty("",{})]),r=new xi({}),o=new xi({}),s=new xi({}),a=new xi(""),l=new fl(i,r,s,a,o,at,t,n.root);return l.snapshot=n.root,new jz(new Eu(l,[]),n)}class fl{constructor(t,n,i,r,o,s,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Xe(u=>u[ey]))??Ve(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Xe(t=>pg(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Xe(t=>pg(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zz(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function uSe(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class xE{get title(){return this.data?.[ey]}constructor(t,n,i,r,o,s,a,l,u,c,d){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gz extends Vz{constructor(t,n){super(n),this.url=t,FO(this,n)}toString(){return Wz(this._root)}}function FO(e,t){t.value._routerState=e,t.children.forEach(n=>FO(e,n))}function Wz(e){const t=e.children.length>0?` { ${e.children.map(Wz).join(", ")} } `:"";return`${e.value}${t}`}function PO(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,cl(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),cl(t.params,n.params)||e.params.next(n.params),function CCe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!cl(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),cl(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function LO(e,t){const n=cl(e.params,t.params)&&function xCe(e,t){return Sf(e,t)&&e.every((n,i)=>cl(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||LO(e.parent,t.parent))}function ay(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function dSe(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return ay(e,i,r);return ay(e,i)})}(e,t,n);return new Eu(i,r)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ay(e,a)),s}}const i=function fSe(e){return new fl(new xi(e.url),new xi(e.params),new xi(e.queryParams),new xi(e.fragment),new xi(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(o=>ay(e,o));return new Eu(i,r)}}const $O="ngNavigationCancelingError";function qz(e,t){const{redirectTo:n,navigationBehaviorOptions:i}=Af(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Yz(!1,0,t);return r.url=n,r.navigationBehaviorOptions=i,r}function Yz(e,t,n){const i=new Error("NavigationCancelingError: "+(e||""));return i[$O]=!0,i.cancellationCode=t,n&&(i.url=n),i}function Kz(e){return Xz(e)&&Af(e.url)}function Xz(e){return e&&e[$O]}class hSe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ly,this.attachRef=null}}let ly=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new hSe,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ME=!1;let BO=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new ke,this.deactivateEvents=new ke,this.attachEvents=new ke,this.detachEvents=new ke,this.parentContexts=tt(ly),this.location=tt(Ss),this.changeDetector=tt(fo),this.environmentInjector=tt(Ds)}ngOnChanges(n){if(n.name){const{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,ME);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,ME);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,ME);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Z(4013,ME);this._activatedRoute=n;const r=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new pSe(n,a,r.injector);if(i&&function gSe(e){return!!e.resolveComponentFactory}(i)){const u=i.resolveComponentFactory(s);this.activated=r.createComponent(u,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ve({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bn]}),e})();class pSe{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===fl?this.route:t===ly?this.childContexts:this.parent.get(t,n)}}let UO=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=kt({type:e,selectors:[["ng-component"]],standalone:!0,features:[gi],decls:1,vars:0,template:function(n,i){1&n&&Re(0,"router-outlet")},dependencies:[BO],encapsulation:2}),e})();function Qz(e,t){return e.providers&&!e._injector&&(e._injector=Vw(e.providers,t,`Route: ${e.path}`)),e._injector??t}function jO(e){const t=e.children&&e.children.map(jO),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==at&&(n.component=UO),n}function Ms(e){return e.outlet||at}function Jz(e,t){const n=e.filter(i=>Ms(i)===t);return n.push(...e.filter(i=>Ms(i)!==t)),n}function uy(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class bSe{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),PO(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=yg(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Yi(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=yg(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=yg(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=yg(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new kO(o.value.snapshot))}),t.children.length&&this.forwardEvent(new tSe(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(PO(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),PO(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=uy(r.snapshot),l=a?.get(E0)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class Zz{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class NE{constructor(t,n){this.component=t,this.route=n}}function wSe(e,t,n){const i=e._root;return cy(i,t?t._root:null,n,[i.value])}function vg(e,t){const n=Symbol(),i=t.get(e,n);return i===n?"function"!=typeof e||function jge(e){return null!==Hb(e)}(e)?t.get(e):e:i}function cy(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=yg(t);return e.children.forEach(s=>{(function DSe(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function CSe(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Sf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Sf(e.url,t.url)||!cl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LO(e,t)||!cl(e.queryParams,t.queryParams);default:return!LO(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Zz(i)):(o.data=s.data,o._resolvedData=s._resolvedData),cy(e,t,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new NE(a.outlet.component,s))}else s&&dy(t,a,r),r.canActivateChecks.push(new Zz(i)),cy(e,null,o.component?a?a.children:null:n,i,r)})(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Yi(o,(s,a)=>dy(s,n.getContext(a),r)),r}function dy(e,t,n){const i=yg(e),r=e.value;Yi(i,(o,s)=>{dy(o,r.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new NE(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function fy(e){return"function"==typeof e}function HO(e){return e instanceof gE||"EmptyError"===e?.name}const OE=Symbol("INITIAL_VALUE");function bg(){return xs(e=>mE(e.map(t=>t.pipe(ai(1),_E(OE)))).pipe(Xe(t=>{for(const n of t)if(!0!==n){if(n===OE)return OE;if(!1===n||n instanceof Tc)return n}return!0}),Xn(t=>t!==OE),ai(1)))}function eG(e){return function qpe(...e){return p6(e)}(Mi(t=>{if(Af(t))throw qz(0,t)}),Xe(t=>!0===t))}const zO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tG(e,t,n,i,r){const o=GO(e,t,n);return o.matched?function VSe(e,t,n,i){const r=t.canMatch;return r&&0!==r.length?Ve(r.map(s=>{const a=vg(s,e);return Ac(function NSe(e){return e&&fy(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(bg(),eG()):Ve(!0)}(i=Qz(t,i),t,n).pipe(Xe(s=>!0===s?o:{...zO})):Ve(o)}function GO(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...zO}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(t.matcher||DCe)(n,e,t);if(!r)return{...zO};const o={};Yi(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function kE(e,t,n,i){if(n.length>0&&function zSe(e,t,n){return n.some(i=>IE(e,t,i)&&Ms(i)!==at)}(e,n,i)){const o=new ht(t,function HSe(e,t,n,i){const r={};r[at]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Ms(o)!==at){const s=new ht([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,r[Ms(o)]=s}return r}(e,t,i,new ht(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function GSe(e,t,n){return n.some(i=>IE(e,t,i))}(e,n,i)){const o=new ht(e.segments,function jSe(e,t,n,i,r){const o={};for(const s of i)if(IE(e,n,s)&&!r[Ms(s)]){const a=new ht([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,o[Ms(s)]=a}return{...r,...o}}(e,t,n,i,e.children));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const r=new ht(e.segments,e.children);return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:n}}function IE(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function nG(e,t,n,i){return!!(Ms(e)===i||i!==at&&IE(t,n,e))&&("**"===e.path||GO(t,e,n).matched)}function iG(e,t,n){return 0===t.length&&!e.children[n]}const RE=!1;class FE{constructor(t){this.segmentGroup=t||null}}class rG{constructor(t){this.urlTree=t}}function hy(e){return Z0(new FE(e))}function oG(e){return Z0(new rG(e))}class KSe{constructor(t,n,i,r,o){this.injector=t,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=kE(this.urlTree.root,[],[],this.config).segmentGroup,n=new ht(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,at).pipe(Xe(o=>this.createUrlTree(SE(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sc(o=>{if(o instanceof rG)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof FE?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,at).pipe(Xe(r=>this.createUrlTree(SE(r),t.queryParams,t.fragment))).pipe(Sc(r=>{throw r instanceof FE?this.noMatchError(r):r}))}noMatchError(t){return new Z(4002,RE)}createUrlTree(t,n,i){const r=AO(t);return new Tc(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(Xe(o=>new ht([],o))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return ii(r).pipe(Cc(o=>{const s=i.children[o],a=Jz(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(Xe(l=>({segment:l,outlet:o})))}),yz((o,s)=>(o[s.outlet]=s.segment,o),{}),vz())}expandSegment(t,n,i,r,o,s){return ii(i).pipe(Cc(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,o,s).pipe(Sc(u=>{if(u instanceof FE)return Ve(null);throw u}))),Dc(a=>!!a),Sc((a,l)=>{if(HO(a))return iG(n,r,o)?Ve(new ht([],{})):hy(n);throw a}))}expandSegmentAgainstRoute(t,n,i,r,o,s,a){return nG(r,n,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s):hy(n):hy(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?oG(o):this.lineralizeSegments(i,o).pipe(di(s=>{const a=new ht(s,{});return this.expandSegment(t,a,n,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:c}=GO(n,r,o);if(!a)return hy(n);const d=this.applyRedirectCommands(l,r.redirectTo,c);return r.redirectTo.startsWith("/")?oG(d):this.lineralizeSegments(r,d).pipe(di(f=>this.expandSegment(t,n,i,f.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){return"**"===i.path?(t=Qz(i,t),i.loadChildren?(i._loadedRoutes?Ve({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe(Xe(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ht(r,{})))):Ve(new ht(r,{}))):tG(n,i,r,t).pipe(xs(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=i._injector??t,i,r).pipe(di(c=>{const d=c.injector??t,f=c.routes,{segmentGroup:h,slicedSegments:p}=kE(n,a,l,f),g=new ht(h.segments,h.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,f,g).pipe(Xe(v=>new ht(a,v)));if(0===f.length&&0===p.length)return Ve(new ht(a,{}));const m=Ms(i)===o;return this.expandSegment(d,g,f,p,m?at:o,!0).pipe(Xe(y=>new ht(a.concat(y.segments),y.children)))})):hy(n)))}getChildConfig(t,n,i){return n.children?Ve({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Ve({routes:n._loadedRoutes,injector:n._loadedInjector}):function USe(e,t,n,i){const r=t.canLoad;return void 0===r||0===r.length?Ve(!0):Ve(r.map(s=>{const a=vg(s,e);return Ac(function ASe(e){return e&&fy(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(bg(),eG())}(t,n,i).pipe(di(r=>r?this.configLoader.loadChildren(t,n).pipe(Mi(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function qSe(e){return Z0(Yz(RE,3))}())):Ve({routes:[],injector:t})}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ve(i);if(r.numberOfChildren>1||!r.children[at])return t.redirectTo,Z0(new Z(4e3,RE));r=r.children[at]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,r){const o=this.createSegmentGroup(t,n.root,i,r);return new Tc(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return Yi(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,r){const o=this.createSegments(t,n.segments,i,r);let s={};return Yi(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,i,r)}),new ht(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new Z(4001,RE);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}class QSe{}class eAe{constructor(t,n,i,r,o,s,a){this.injector=t,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=kE(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,at).pipe(Xe(n=>{if(null===n)return null;const i=new xE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Eu(i,n),o=new Gz(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,i=zz(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r)}processChildren(t,n,i){return ii(Object.keys(i.children)).pipe(Cc(r=>{const o=i.children[r],s=Jz(n,r);return this.processSegmentGroup(t,s,o,r)}),yz((r,o)=>r&&o?(r.push(...o),r):null),function wCe(e,t=!1){return Ln((n,i)=>{let r=0;n.subscribe(un(i,o=>{const s=e(o,r++);(s||t)&&i.next(o),!s&&i.complete()}))})}(r=>null!==r),yE(null),vz(),Xe(r=>{if(null===r)return null;const o=aG(r);return function tAe(e){e.sort((t,n)=>t.value.outlet===at?-1:n.value.outlet===at?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,i,r,o){return ii(n).pipe(Cc(s=>this.processSegmentAgainstRoute(s._injector??t,s,i,r,o)),Dc(s=>!!s),Sc(s=>{if(HO(s))return iG(i,r,o)?Ve([]):Ve(null);throw s}))}processSegmentAgainstRoute(t,n,i,r,o){if(n.redirectTo||!nG(n,i,r,o))return Ve(null);let s;if("**"===n.path){const a=r.length>0?Dz(r).parameters:{},l=uG(i)+r.length;s=Ve({snapshot:new xE(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cG(n),Ms(n),n.component??n._loadedComponent??null,n,lG(i),l,dG(n)),consumedSegments:[],remainingSegments:[]})}else s=tG(i,n,r,t).pipe(Xe(({matched:a,consumedSegments:l,remainingSegments:u,parameters:c})=>{if(!a)return null;const d=uG(i)+l.length;return{snapshot:new xE(l,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cG(n),Ms(n),n.component??n._loadedComponent??null,n,lG(i),d,dG(n)),consumedSegments:l,remainingSegments:u}}));return s.pipe(xs(a=>{if(null===a)return Ve(null);const{snapshot:l,consumedSegments:u,remainingSegments:c}=a;t=n._injector??t;const d=n._loadedInjector??t,f=function nAe(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:h,slicedSegments:p}=kE(i,u,c,f.filter(m=>void 0===m.redirectTo));if(0===p.length&&h.hasChildren())return this.processChildren(d,f,h).pipe(Xe(m=>null===m?null:[new Eu(l,m)]));if(0===f.length&&0===p.length)return Ve([new Eu(l,[])]);const g=Ms(n)===o;return this.processSegment(d,f,h,p,g?at:o).pipe(Xe(m=>null===m?null:[new Eu(l,m)]))}))}}function iAe(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function aG(e){const t=[],n=new Set;for(const i of e){if(!iAe(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=aG(i.children);t.push(new Eu(i.value,r))}return t.filter(i=>!n.has(i))}function lG(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function uG(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function cG(e){return e.data||{}}function dG(e){return e.resolve||{}}function sAe(e,t){return di(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Ve(n);let o=0;return ii(r).pipe(Cc(s=>function aAe(e,t,n,i){const r=e.routeConfig,o=e._resolve;return void 0!==r?.title&&!fG(r)&&(o[ey]=r.title),function lAe(e,t,n,i){const r=function uAe(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return Ve({});const o={};return ii(r).pipe(di(s=>function cAe(e,t,n,i){const r=uy(t)??i,o=vg(e,r);return Ac(o.resolve?o.resolve(t,n):r.runInContext(()=>o(t,n)))}(e[s],t,n,i).pipe(Dc(),Mi(a=>{o[s]=a}))),EO(1),function bz(e){return Xe(()=>e)}(o),Sc(s=>HO(s)?ys:Z0(s)))}(o,e,t,i).pipe(Xe(s=>(e._resolvedData=s,e.data=zz(e,n).resolve,r&&fG(r)&&(e.data[ey]=r.title),null)))}(s.route,i,e,t)),Mi(()=>o++),EO(1),di(s=>o===r.length?Ve(n):ys))})}function fG(e){return"string"==typeof e.title||null===e.title}function WO(e){return xs(t=>{const n=e(t);return n?ii(n).pipe(Xe(()=>t)):Ve(t)})}const wg=new Ie("ROUTES");let qO=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=tt(Uj)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ve(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Ac(n.loadComponent()).pipe(Xe(pG),Mi(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),DO(()=>{this.componentLoaders.delete(n)})),r=new mz(i,()=>new ln).pipe(wO());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,u,c=!1;Array.isArray(a)?u=a:(l=a.create(n).injector,u=Ez(l.get(wg,[],Ke.Self|Ke.Optional)));return{routes:u.map(jO),injector:l}}),DO(()=>{this.childrenLoaders.delete(i)})),s=new mz(o,()=>new ln).pipe(wO());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(n){return Ac(n()).pipe(Xe(pG),di(i=>i instanceof ZV||Array.isArray(i)?Ve(i):ii(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function pG(e){return function dAe(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let LE=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ln,this.configLoader=tt(qO),this.environmentInjector=tt(Ds),this.urlSerializer=tt(ny),this.rootContexts=tt(ly),this.navigationId=0,this.afterPreactivation=()=>Ve(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ZCe(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new JCe(r))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:i})}setupNavigations(n){return this.transitions=new xi({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sy,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xn(i=>0!==i.id),Xe(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),xs(i=>{let r=!1,o=!1;return Ve(i).pipe(Mi(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xs(s=>{const a=n.browserUrlTree.toString(),l=!n.navigated||s.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const c="";return this.events.next(new TE(s.id,n.serializeUrl(i.rawUrl),c,0)),n.rawUrlTree=s.rawUrl,s.resolve(null),ys}if(n.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return gG(s.source)&&(n.browserUrlTree=s.extractedUrl),Ve(s).pipe(xs(c=>{const d=this.transitions?.getValue();return this.events.next(new NO(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),d!==this.transitions?.getValue()?ys:Promise.resolve(c)}),function XSe(e,t,n,i){return xs(r=>function YSe(e,t,n,i,r){return new KSe(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe(Xe(o=>({...r,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Mi(c=>{this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects},i.urlAfterRedirects=c.urlAfterRedirects}),function oAe(e,t,n,i,r){return di(o=>function ZSe(e,t,n,i,r,o,s="emptyOnly"){return new eAe(e,t,n,i,r,s,o).recognize().pipe(xs(a=>null===a?function JSe(e){return new on(t=>t.error(e))}(new QSe):Ve(a)))}(e,t,n,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r).pipe(Xe(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Mi(c=>{if(i.targetSnapshot=c.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!c.extras.skipLocationChange){const f=n.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl);n.setBrowserUrl(f,c)}n.browserUrlTree=c.urlAfterRedirects}const d=new qCe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:c,extractedUrl:d,source:f,restoredState:h,extras:p}=s,g=new NO(c,this.urlSerializer.serialize(d),f,h);this.events.next(g);const m=Hz(d,this.rootComponentType).snapshot;return Ve(i={...s,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const c="";return this.events.next(new TE(s.id,n.serializeUrl(i.extractedUrl),c,1)),n.rawUrlTree=s.rawUrl,s.resolve(null),ys}}),Mi(s=>{const a=new YCe(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Xe(s=>i={...s,guards:wSe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function kSe(e,t){return di(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ve({...n,guardsResult:!0}):function ISe(e,t,n,i){return ii(e).pipe(di(r=>function BSe(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Ve(o.map(a=>{const l=uy(t)??r,u=vg(a,l);return Ac(function MSe(e){return e&&fy(e.canDeactivate)}(u)?u.canDeactivate(e,t,n,i):l.runInContext(()=>u(e,t,n,i))).pipe(Dc())})).pipe(bg()):Ve(!0)}(r.component,r.route,n,t,i)),Dc(r=>!0!==r,!0))}(s,i,r,e).pipe(di(a=>a&&function SSe(e){return"boolean"==typeof e}(a)?function RSe(e,t,n,i){return ii(t).pipe(Cc(r=>J0(function PSe(e,t){return null!==e&&t&&t(new eSe(e)),Ve(!0)}(r.route.parent,i),function FSe(e,t){return null!==e&&t&&t(new nSe(e)),Ve(!0)}(r.route,i),function $Se(e,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function ESe(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>gz(()=>Ve(s.guards.map(l=>{const u=uy(s.node)??n,c=vg(l,u);return Ac(function xSe(e){return e&&fy(e.canActivateChild)}(c)?c.canActivateChild(i,e):u.runInContext(()=>c(i,e))).pipe(Dc())})).pipe(bg())));return Ve(o).pipe(bg())}(e,r.path,n),function LSe(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Ve(!0);const r=i.map(o=>gz(()=>{const s=uy(t)??n,a=vg(o,s);return Ac(function TSe(e){return e&&fy(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(Dc())}));return Ve(r).pipe(bg())}(e,r.route,n))),Dc(r=>!0!==r,!0))}(i,o,e,t):Ve(a)),Xe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Mi(s=>{if(i.guardsResult=s.guardsResult,Af(s.guardsResult))throw qz(0,s.guardsResult);const a=new KCe(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Xn(s=>!!s.guardsResult||(n.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),WO(s=>{if(s.guards.canActivateChecks.length)return Ve(s).pipe(Mi(a=>{const l=new XCe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),xs(a=>{let l=!1;return Ve(a).pipe(sAe(n.paramsInheritanceStrategy,this.environmentInjector),Mi({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Mi(a=>{const l=new QCe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),WO(s=>{const a=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Mi(c=>{l.component=c}),Xe(()=>{})));for(const c of l.children)u.push(...a(c));return u};return mE(a(s.targetSnapshot.root)).pipe(yE(),ai(1))}),WO(()=>this.afterPreactivation()),Xe(s=>{const a=function cSe(e,t,n){const i=ay(e,t._root,n?n._root:void 0);return new jz(i,t)}(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return i={...s,targetRouterState:a}}),Mi(s=>{n.currentUrlTree=s.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),n.routerState=s.targetRouterState,"deferred"===n.urlUpdateStrategy&&(s.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,s),n.browserUrlTree=s.urlAfterRedirects)}),((e,t,n)=>Xe(i=>(new bSe(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s)),ai(1),Mi({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new xc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),DO(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Sc(s=>{if(o=!0,Xz(s)){Kz(s)||(n.navigated=!0,n.restoreHistory(i,!0));const a=new AE(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Kz(s)){const l=n.urlHandlingStrategy.merge(s.url,n.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||gG(i.source)};n.scheduleNavigation(l,sy,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{n.restoreHistory(i,!0);const a=new OO(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(n.errorHandler(s))}catch(l){i.reject(l)}}return ys}))}))}cancelNavigationTransition(n,i,r){const o=new AE(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function gG(e){return e!==sy}let mG=(()=>{class e{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===at);return i}getResolvedTitleForRoute(n){return n.data[ey]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return tt(fAe)},providedIn:"root"}),e})(),fAe=(()=>{class e extends mG{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(n){return new(n||e)(fe(pE))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hAe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return tt(gAe)},providedIn:"root"}),e})();class pAe{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let gAe=(()=>{class e extends pAe{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $E=new Ie("",{providedIn:"root",factory:()=>({})});let _Ae=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return tt(yAe)},providedIn:"root"}),e})(),yAe=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function vAe(e){throw e}function bAe(e,t,n){return t.parse("/")}const wAe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},EAe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mr=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=tt(iwe),this.isNgZoneEnabled=!1,this.options=tt($E,{optional:!0})||{},this.errorHandler=this.options.errorHandler||vAe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bAe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=tt(_Ae),this.routeReuseStrategy=tt(hAe),this.urlCreationStrategy=tt(aSe),this.titleStrategy=tt(mG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ez(tt(wg,{optional:!0})??[]),this.navigationTransitions=tt(LE),this.urlSerializer=tt(ny),this.location=tt(YN),this.isNgZoneEnabled=tt(Dt)instanceof Dt&&Dt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Tc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hz(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sy,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,i,n.state)},0)}))}navigateToSyncWithBrowser(n,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(n);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(jO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s;let c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...o};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}return null!==c&&(c=this.removeEmptyProps(c)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,n,c,u??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=Af(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,sy,null,i)}navigate(n,i={skipLocationChange:!1}){return function DAe(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Z(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...wAe}:!1===i?{...EAe}:i,Af(n))return Sz(this.currentUrlTree,n,r);const o=this.parseUrl(n);return Sz(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const o=n[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u,c;return s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,f)=>{a=d,l=f}),c="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:c,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",o)}}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),BE=(()=>{class e{constructor(n,i,r,o,s,a){this.router=n,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ln;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=n.events.subscribe(u=>{u instanceof xc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=hg(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=hg(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=hg(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function x7(e,t,n){return function m0e(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?T7:Vo}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,n,i):r.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(L(mr),L(fl),mc("tabindex"),L(pr),L(Ot),L(wc))},e.\u0275dir=ve({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,i){1&n&&Oe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&Et("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Bn]}),e})();class _G{}let AAe=(()=>{class e{constructor(n,i,r,o,s){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(n=>n instanceof xc),Cc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Vw(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ii(r).pipe(Dp())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):Ve(null);const o=r.pipe(di(s=>null===s?Ve(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return i.loadComponent&&!i._loadedComponent?ii([o,this.loader.loadComponent(i)]).pipe(Dp()):o})}}return e.\u0275fac=function(n){return new(n||e)(fe(mr),fe(Uj),fe(Ds),fe(_G),fe(qO))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const KO=new Ie("");let yG=(()=>{class e{constructor(n,i,r,o,s={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof NO?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof xc&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Uz&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uz(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function oU(){throw new Error("invalid")}()},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();var Go=(()=>((Go=Go||{})[Go.COMPLETE=0]="COMPLETE",Go[Go.FAILED=1]="FAILED",Go[Go.REDIRECTING=2]="REDIRECTING",Go))();const Eg=!1;function Mc(e,t){return{\u0275kind:e,\u0275providers:t}}const XO=new Ie("",{providedIn:"root",factory:()=>!1});function bG(){const e=tt(uo);return t=>{const n=e.get(Df);if(t!==n.components[0])return;const i=e.get(mr),r=e.get(wG);1===e.get(QO)&&i.initialNavigation(),e.get(EG,null,Ke.Optional)?.setUpPreloading(),e.get(KO,null,Ke.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const wG=new Ie(Eg?"bootstrap done indicator":"",{factory:()=>new ln}),QO=new Ie(Eg?"initial navigation":"",{providedIn:"root",factory:()=>1});function OAe(){let e=[];return e=Eg?[{provide:bw,multi:!0,useFactory:()=>{const t=tt(mr);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function iSe(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],Mc(1,e)}const EG=new Ie(Eg?"router preloader":"");function kAe(e){return Mc(0,[{provide:EG,useExisting:AAe},{provide:_G,useExisting:e}])}const py=!1,DG=new Ie(py?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),IAe=[YN,{provide:ny,useClass:CO},mr,ly,{provide:fl,useFactory:function vG(e){return e.routerState.root},deps:[mr]},qO,py?{provide:XO,useValue:!0}:[]];function RAe(){return new Yj("Router",mr)}let JO=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[IAe,py&&i?.enableTracing?OAe().\u0275providers:[],{provide:wg,multi:!0,useValue:n},{provide:DG,useFactory:$Ae,deps:[[mr,new f0,new h0]]},{provide:$E,useValue:i||{}},i?.useHash?{provide:wc,useClass:zwe}:{provide:wc,useClass:qN},{provide:KO,useFactory:()=>{const e=tt(Y0),t=tt(Dt),n=tt($E),i=tt(LE),r=tt(ny);return n.scrollOffset&&e.setOffset(n.scrollOffset),new yG(r,i,e,t,n)}},i?.preloadingStrategy?kAe(i.preloadingStrategy).\u0275providers:[],{provide:Yj,multi:!0,useFactory:RAe},i?.initialNavigation?BAe(i):[],[{provide:CG,useFactory:bG},{provide:qj,multi:!0,useExisting:CG}]]}}static forChild(n){return{ngModule:e,providers:[{provide:wg,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(fe(DG,8))},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[UO]}),e})();function $Ae(e){if(py&&e)throw new Z(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function BAe(e){return["disabled"===e.initialNavigation?Mc(3,[{provide:Gw,multi:!0,useFactory:()=>{const t=tt(mr);return()=>{t.setUpLocationChangeListener()}}},{provide:QO,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Mc(2,[{provide:QO,useValue:0},{provide:Gw,multi:!0,deps:[uo],useFactory:t=>{const n=t.get(jwe,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const r=t.get(mr),o=t.get(wG);(function TAe(e,t){e.events.pipe(Xn(n=>n instanceof xc||n instanceof AE||n instanceof OO||n instanceof TE),Xe(n=>n instanceof xc||n instanceof TE?Go.COMPLETE:n instanceof AE&&(0===n.code||1===n.code)?Go.REDIRECTING:Go.FAILED),Xn(n=>n!==Go.REDIRECTING),ai(1)).subscribe(()=>{t()})})(r,()=>{i(!0)}),t.get(LE).afterPreactivation=()=>(i(!0),o.closed?Ve(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const CG=new Ie(py?"Router Initializer":"");class SG{}class VAe{}const Du="*";function gy(e,t){return{type:7,name:e,definitions:t,options:{}}}function my(e,t=null){return{type:4,styles:t,timings:e}}function AG(e,t=null){return{type:2,steps:e,options:t}}function Ns(e){return{type:6,styles:e,offset:null}}function _y(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function TG(e){Promise.resolve().then(e)}class yy{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){TG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class xG{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const o=this.players.length;0==o?TG(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const ZO="!",jAe=JSON.parse('{"U":["assets/logos/abercrombieandfitch.jpg","assets/logos/adidas.png","assets/logos/Aditya.jpg","assets/logos/arvind.png","assets/logos/asics.png","assets/logos/asos.png","assets/logos/boohoo.jpg","assets/logos/buckle.svg","assets/logos/burberry.jpg","assets/logos/burlington.png","assets/logos/canada-goose.png","assets/logos/capri_holdings.png","assets/logos/esprit.png","assets/logos/fast-retail.png","assets/logos/footlocker.jpg","assets/logos/gap.png","assets/logos/havaianas.png","assets/logos/nike.png","assets/logos/vf.svg","assets/logos/zalando.png"]}'),HAe=JSON.parse('[{"id":0,"name":"All Companies"},{"id":5590,"name":"H&M","url":"https://wikirate.org/H_M","headquarters":"Sweden"},{"id":5505,"name":"Gap inc.","url":"https://wikirate.org/Gap_inc","headquarters":"California (United States)"},{"id":5301,"name":"Inditex","url":"https://wikirate.org/Inditex","headquarters":"Spain"},{"id":9269,"name":"Marks and Spencer Group plc","url":"https://wikirate.org/Marks_and_Spencer_Group_plc","headquarters":"United Kingdom"},{"id":7217,"name":"Adidas AG","url":"https://wikirate.org/Adidas_AG","headquarters":"Germany"},{"id":1829050,"name":"Asos","url":"https://wikirate.org/Asos","headquarters":"United Kingdom"},{"id":9139,"name":"Burberry Group plc","url":"https://wikirate.org/Burberry_Group_plc","headquarters":"United Kingdom"},{"id":8979,"name":"Louis Vuitton Malletier SA (LVMH)","url":"https://wikirate.org/Louis_Vuitton_Malletier_SA_LVMH","headquarters":"France"},{"id":5800,"name":"Nike Inc.","url":"https://wikirate.org/Nike_Inc","headquarters":"Oregon (United States)"},{"id":49386,"name":"Tapestry Inc","url":"https://wikirate.org/Tapestry_Inc","headquarters":"New York (United States)"},{"id":18109,"name":"Puma","url":"https://wikirate.org/Puma","headquarters":"Germany"},{"id":776737,"name":"Tiffany & Co.","url":"https://wikirate.org/Tiffany_Co","headquarters":"New York (United States)"},{"id":56584,"name":"Fast Retailing","url":"https://wikirate.org/Fast_Retailing","headquarters":"Japan"},{"id":61104,"name":"VF","url":"https://wikirate.org/VF","headquarters":"North Carolina (United States)"},{"id":61050,"name":"PVH","url":"https://wikirate.org/PVH","headquarters":"New York (United States)"},{"id":2608717,"name":"Zalando SE","url":"https://wikirate.org/Zalando_SE","headquarters":"Germany"},{"id":866194,"name":"Guess? Inc","url":"https://wikirate.org/Guess_Inc","headquarters":"California (United States)"},{"id":116498,"name":"Under Armour","url":"https://wikirate.org/Under_Armour","headquarters":"Maryland (United States)"},{"id":8362,"name":"Kering","url":"https://wikirate.org/Kering","headquarters":"France"},{"id":61065,"name":"Prada","url":"https://wikirate.org/Prada","headquarters":"Italy"},{"id":56597,"name":"L Brands","url":"https://wikirate.org/L_Brands","headquarters":"Ohio (United States)"},{"id":42714,"name":"Hugo Boss AG","url":"https://wikirate.org/Hugo_Boss_AG","headquarters":"Germany"},{"id":56618,"name":"Nordstrom","url":"https://wikirate.org/Nordstrom","headquarters":"Washington (United States)"},{"id":861862,"name":"Columbia Sportswear","url":"https://wikirate.org/Columbia_Sportswear","headquarters":"Oregon (United States)"},{"id":859389,"name":"Urban Outfitters","url":"https://wikirate.org/Urban_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":2265395,"name":"Ralph Lauren Corporation","url":"https://wikirate.org/Ralph_Lauren_Corporation","headquarters":"New York (United States)"},{"id":858415,"name":"Fossil Group, Inc.","url":"https://wikirate.org/Fossil_Group_Inc","headquarters":"Texas (United States)"},{"id":866417,"name":"Skechers USA Inc","url":"https://wikirate.org/Skechers_USA_Inc","headquarters":"California (United States)"},{"id":862441,"name":"American Eagle Outfitters","url":"https://wikirate.org/American_Eagle_Outfitters","headquarters":"Pennsylvania (United States)"},{"id":60982,"name":"Hanesbrands","url":"https://wikirate.org/Hanesbrands","headquarters":"North Carolina (United States)"},{"id":945115,"name":"Lojas Renner S.A.","url":"https://wikirate.org/Lojas_Renner_S_A","headquarters":"Brazil"},{"id":58500,"name":"Foot Locker Inc.","url":"https://wikirate.org/Foot_Locker_Inc","headquarters":"New York (United States)"},{"id":957395,"name":"TJX","url":"https://wikirate.org/TJX","headquarters":"Massachusetts (United States)"},{"id":776749,"name":"G-III Apparel Group, LTD.","url":"https://wikirate.org/G_III_Apparel_Group_LTD","headquarters":"New York (United States)"},{"id":866117,"name":"Deckers Outdoor Corporation","url":"https://wikirate.org/Deckers_Outdoor_Corporation","headquarters":"California (United States)"},{"id":57653,"name":"Ross Stores","url":"https://wikirate.org/Ross_Stores","headquarters":"California (United States)"},{"id":861719,"name":"Wolverine World Wide","url":"https://wikirate.org/Wolverine_World_Wide","headquarters":"Michigan (United States)"},{"id":865187,"name":"Caleres Inc","url":"https://wikirate.org/Caleres_Inc","headquarters":"Missouri (United States)"},{"id":49209,"name":"Next","url":"https://wikirate.org/Next","headquarters":"United Kingdom"},{"id":866341,"name":"Oxford Industries Inc","url":"https://wikirate.org/Oxford_Industries_Inc","headquarters":"Georgia (United States)"},{"id":2274181,"name":"Genesco Inc.","url":"https://wikirate.org/Genesco_Inc","headquarters":"Tennessee (United States)"},{"id":2632311,"name":"Chico\'s FAS Inc","url":"https://wikirate.org/Chico_s_FAS_Inc","headquarters":"Florida (United States)"},{"id":61176,"name":"Macy\'s","url":"https://wikirate.org/Macy_s","headquarters":"Ohio (United States)"},{"id":792992,"name":"Moncler","url":"https://wikirate.org/Moncler","headquarters":"Italy"},{"id":2241782,"name":"DSW Inc.","url":"https://wikirate.org/DSW_Inc","headquarters":"Ohio (United States)"},{"id":60914,"name":"Abercrombie & Fitch","url":"https://wikirate.org/Abercrombie_Fitch","headquarters":"New York (United States)"},{"id":57485,"name":"Luxottica Group SpA","url":"https://wikirate.org/Luxottica_Group_SpA","headquarters":"Italy"},{"id":2632233,"name":"Ascena Retail Group Inc","url":"https://wikirate.org/Ascena_Retail_Group_Inc","headquarters":"New Jersey (United States)"},{"id":776665,"name":"Dillard\'s, Inc.","url":"https://wikirate.org/Dillard_s_Inc","headquarters":"Arkansas (United States)"},{"id":50638,"name":"Dick\'s Sporting Goods","url":"https://wikirate.org/Dick_s_Sporting_Goods","headquarters":"Pennsylvania (United States)"},{"id":2605005,"name":"Carter\'s Inc","url":"https://wikirate.org/Carter_s_Inc","headquarters":"Georgia (United States)"},{"id":2632164,"name":"Express Inc","url":"https://wikirate.org/Express_Inc","headquarters":"Ohio (United States)"},{"id":2979682,"name":"Vera Bradley Inc.","url":"https://wikirate.org/Vera_Bradley_Inc","headquarters":"Indiana (United States)"},{"id":170564,"name":"Asics Corporation","url":"https://wikirate.org/Asics_Corporation","headquarters":"Japan"},{"id":116138,"name":"Gildan Activewear Inc.","url":"https://wikirate.org/Gildan_Activewear_Inc","headquarters":"Canada"},{"id":2632287,"name":"Burlington Stores Inc","url":"https://wikirate.org/Burlington_Stores_Inc","headquarters":"New Jersey (United States)"},{"id":2980808,"name":"Buckle Inc","url":"https://wikirate.org/Buckle_Inc","headquarters":"Nebraska (United States)"},{"id":1825510,"name":"lululemon athletica","url":"https://wikirate.org/lululemon_athletica","headquarters":"Quebec (Canada)"},{"id":2632400,"name":"Francesca\'s","url":"https://wikirate.org/Francesca_s","headquarters":"Texas (United States)"},{"id":9127,"name":"Esprit Holdings Limited","url":"https://wikirate.org/Esprit_Holdings_Limited","headquarters":"Hong Kong"},{"id":3052157,"name":"Cato Corp","url":"https://wikirate.org/Cato_Corp","headquarters":"North Carolina (United States)"},{"id":48305,"name":"Christian Dior","url":"https://wikirate.org/Christian_Dior","headquarters":"France"},{"id":2931751,"name":"Arvind Limited","url":"https://wikirate.org/Arvind_Limited","headquarters":"India"},{"id":3081310,"name":"Mulberry Group Plc","url":"https://wikirate.org/Mulberry_Group_Plc","headquarters":"United Kingdom"},{"id":3151635,"name":"Ted Baker","url":"https://wikirate.org/Ted_Baker","headquarters":"United Kingdom"},{"id":3152073,"name":"Capri Holdings Ltd (formerly Michael Kors)","url":"https://wikirate.org/Capri_Holdings_Ltd_formerly_Michael_Kors","headquarters":"United Kingdom"},{"id":48284,"name":"Hermes International","url":"https://wikirate.org/Hermes_International","headquarters":"France"},{"id":2608722,"name":"Salvatore Ferragamo SpA","url":"https://wikirate.org/Salvatore_Ferragamo_SpA","headquarters":"Italy"},{"id":56413,"name":"Richemont","url":"https://wikirate.org/Richemont","headquarters":"Switzerland"},{"id":3075761,"name":"Boot Barn Holdings Inc.","url":"https://wikirate.org/Boot_Barn_Holdings_Inc","headquarters":"California (United States)"},{"id":2624117,"name":"Geox SpA","url":"https://wikirate.org/Geox_SpA","headquarters":"Italy"},{"id":3098198,"name":"Hudson\'s Bay Company","url":"https://wikirate.org/Hudson_s_Bay_Company","headquarters":"Ontario, Canada"},{"id":57272,"name":"Swatch Group","url":"https://wikirate.org/Swatch_Group","headquarters":"Switzerland"},{"id":3624592,"name":"JD Sports Fashion plc","url":"https://wikirate.org/JD_Sports_Fashion_plc","headquarters":"United Kingdom"},{"id":44618,"name":"Sports Direct","url":"https://wikirate.org/Sports_Direct","headquarters":"United Kingdom"},{"id":3624482,"name":"Superdry plc","url":"https://wikirate.org/Superdry_plc","headquarters":"United Kingdom"},{"id":2632436,"name":"Children\'s Place Inc","url":"https://wikirate.org/Children_s_Place_Inc","headquarters":"New Jersey (United States)"},{"id":2623713,"name":"YOOX NET-A-PORTER Group SpA","url":"https://wikirate.org/YOOX_NET_A_PORTER_Group_SpA","headquarters":"Italy"},{"id":3624475,"name":"Brunello Cucinelli","url":"https://wikirate.org/Brunello_Cucinelli","headquarters":"Italy"},{"id":1173485,"name":"Li-Ning","url":"https://wikirate.org/Li_Ning","headquarters":"Beijing (China)"},{"id":3624461,"name":"TOD\'S","url":"https://wikirate.org/TOD_S","headquarters":"Italy"},{"id":3624440,"name":"Boohoo.com","url":"https://wikirate.org/Boohoo_com","headquarters":"United Kingdom"},{"id":3624468,"name":"Alpargatas - Havaianas","url":"https://wikirate.org/Alpargatas_Havaianas","headquarters":"Brazil"},{"id":3624718,"name":"Gerry Weber","url":"https://wikirate.org/Gerry_Weber","headquarters":"Germany"},{"id":3624454,"name":"Grendene","url":"https://wikirate.org/Grendene","headquarters":"Brazil"},{"id":48991,"name":"Chow Tai Fook","url":"https://wikirate.org/Chow_Tai_Fook","headquarters":"Hong Kong"},{"id":3624510,"name":"Cia Hering","url":"https://wikirate.org/Cia_Hering","headquarters":"Brazil"},{"id":3624496,"name":"United Arrows","url":"https://wikirate.org/United_Arrows","headquarters":"Japan"},{"id":3624517,"name":"Van de Velde","url":"https://wikirate.org/Van_de_Velde","headquarters":"Belgium"},{"id":2631100,"name":"Vipshop Holdings","url":"https://wikirate.org/Vipshop_Holdings","headquarters":"Guangdong (China)"},{"id":51397,"name":"JC Penney","url":"https://wikirate.org/JC_Penney","headquarters":"Texas (United States)"},{"id":3624433,"name":"Lao Feng Xiang Jewelry","url":"https://wikirate.org/Lao_Feng_Xiang_Jewelry","headquarters":"China"},{"id":3624447,"name":"Steve Madden","url":"https://wikirate.org/Steve_Madden","headquarters":"New York (United States)"},{"id":5294114,"name":"Onward Holdings","url":"https://wikirate.org/Onward_Holdings","headquarters":"Japan"},{"id":3624503,"name":"Metersbonwe","url":"https://wikirate.org/Metersbonwe","headquarters":"Shanghai (China)"},{"id":3624489,"name":"Aditya Birla Fashion & Retail Ltd","url":"https://wikirate.org/Aditya_Birla_Fashion_Retail_Ltd","headquarters":"India"},{"id":3624425,"name":"Semir","url":"https://wikirate.org/Semir","headquarters":"China"},{"id":5294189,"name":"Bosideng International Holdings Limited","url":"https://wikirate.org/Bosideng_International_Holdings_Limited","headquarters":"Shanghai (China)"},{"id":5408890,"name":"Canada Goose","url":"https://wikirate.org/Canada_Goose","headquarters":"Ontario, Canada"},{"id":5424735,"name":"Anta Sports Products","url":"https://wikirate.org/Anta_Sports_Products","headquarters":"Fujian (China)"}]');let Dg=(()=>{const t=class{constructor(){this.companies=HAe,this.exploreMore=new ke(!1)}getCompany(i){return this.companies.find(o=>o.id===i)}getCompanies(){return this.companies.slice().sort((i,r)=>this.compare(i,r))}compare(i,r){return"All Companies"==i.name?-1:"All Companies"==r.name?1:i.name.localeCompare(r.name)}setExploreMore(){this.exploreMore.emit(!0),setTimeout(()=>{this.unsetExploreMore()},3e3)}unsetExploreMore(){this.exploreMore.emit(!1)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=he({token:t,factory:t.\u0275fac}),e})();const zAe=["addListener","removeListener"],GAe=["addEventListener","removeEventListener"],WAe=["on","off"];function Ki(e,t,n,i){if(wt(n)&&(i=n,n=void 0),i)return Ki(e,t,n).pipe(bO(i));const[r,o]=function KAe(e){return wt(e.addEventListener)&&wt(e.removeEventListener)}(e)?GAe.map(s=>a=>e[s](t,a,n)):function qAe(e){return wt(e.addListener)&&wt(e.removeListener)}(e)?zAe.map(MG(e,t)):function YAe(e){return wt(e.on)&&wt(e.off)}(e)?WAe.map(MG(e,t)):[];if(!r&&y2(e))return di(s=>Ki(s,t,n))(ji(e));if(!r)throw new TypeError("Invalid event target");return new on(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function MG(e,t){return n=>i=>e[n](t,i)}class XAe extends Vi{constructor(t,n){super()}schedule(t,n=0){return this}}const UE={setInterval(e,t,...n){const{delegate:i}=UE;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=UE;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},NG={now:()=>(NG.delegate||Date).now(),delegate:void 0};class vy{constructor(t,n=vy.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}}vy.now=NG.now;const ZAe=new class JAe extends vy{constructor(t,n=vy.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}(class QAe extends XAe{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return UE.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&UE.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,_s(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}});function ek(e=0,t,n=ZAe){let i=-1;return null!=t&&(O6(t)?n=t:i=t),new on(r=>{let o=function eTe(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}const{isArray:tTe}=Array;function kG(e){return 1===e.length&&tTe(e[0])?e[0]:e}const RG=new on(Ep);function VE(...e){const t=Ub(e),n=kG(e);return n.length?new on(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)ji(n[s]).subscribe(un(i,a=>{if(r[s].push(a),r.every(l=>l.length)){const l=r.map(u=>u.shift());i.next(t?t(...l):l),r.some((u,c)=>!u.length&&o[c])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):ys}function jn(e){return Ln((t,n)=>{ji(e).subscribe(un(n,()=>n.complete(),Ep)),!n.closed&&t.subscribe(n)})}function tk(e,t=su){return e=e??rTe,Ln((n,i)=>{let r,o=!0;n.subscribe(un(i,s=>{const a=t(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}function rTe(e,t){return e===t}function nk(...e){const t=Ub(e);return Ln((n,i)=>{const r=e.length,o=new Array(r);let s=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)ji(e[l]).subscribe(un(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(su))&&(s=null))},Ep));n.subscribe(un(i,l=>{if(a){const u=[l,...o];i.next(t?t(...u):u)}}))})}let PG=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(L(pr),L(Ot))},e.\u0275dir=ve({type:e}),e})(),Tf=(()=>{class e extends PG{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275dir=ve({type:e,features:[Wt]}),e})();const go=new Ie("NgValueAccessor"),cTe={provide:go,useExisting:et(()=>ik),multi:!0},fTe=new Ie("CompositionEventMode");let ik=(()=>{class e extends PG{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dTe(){const e=ul()?ul().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(L(pr),L(Ot),L(fTe,8))},e.\u0275dir=ve({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&Oe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Qt([cTe]),Wt]}),e})();const hTe=!1,Xi=new Ie("NgValidators"),Oc=new Ie("NgAsyncValidators");function qG(e){return null!=e}function YG(e){const t=M0(e)?ii(e):e;if(hTe&&!nN(t)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof e&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new Z(-1101,n)}return t}function KG(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function XG(e,t){return t.map(n=>n(e))}function QG(e){return e.map(t=>function gTe(e){return!e.validate}(t)?t:n=>t.validate(n))}function rk(e){return null!=e?function JG(e){if(!e)return null;const t=e.filter(qG);return 0==t.length?null:function(n){return KG(XG(n,t))}}(QG(e)):null}function ok(e){return null!=e?function ZG(e){if(!e)return null;const t=e.filter(qG);return 0==t.length?null:function(n){return function lTe(...e){const t=Ub(e),{args:n,keys:i}=fz(e),r=new on(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,u=s;for(let c=0;c<s;c++){let d=!1;ji(n[c]).subscribe(un(o,f=>{d||(d=!0,u--),a[c]=f},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(i?hz(i,a):a),o.complete())}))}});return t?r.pipe(bO(t)):r}(XG(n,t).map(YG)).pipe(Xe(KG))}}(QG(e)):null}function eW(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function sk(e){return e?Array.isArray(e)?e:[e]:[]}function HE(e,t){return Array.isArray(e)?e.includes(t):e===t}function iW(e,t){const n=sk(t);return sk(e).forEach(r=>{HE(n,r)||n.push(r)}),n}function rW(e,t){return sk(t).filter(n=>!HE(e,n))}class oW{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=rk(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ok(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class $r extends oW{get formDirective(){return null}get path(){return null}}class kc extends oW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sW{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Cg=(()=>{class e extends sW{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(L(kc,2))},e.\u0275dir=ve({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Je("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Wt]}),e})();const by="VALID",GE="INVALID",Sg="PENDING",wy="DISABLED";function WE(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class cW{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===by}get invalid(){return this.status===GE}get pending(){return this.status==Sg}get disabled(){return this.status===wy}get enabled(){return this.status!==wy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(iW(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iW(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rW(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rW(t,this._rawAsyncValidators))}hasValidator(t){return HE(this._rawValidators,t)}hasAsyncValidator(t){return HE(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Sg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=wy,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=by,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===by||this.status===Sg)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wy:by}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Sg,this._hasOwnPendingAsyncValidator=!0;const n=YG(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?wy:this.errors?GE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sg)?Sg:this._anyControlsHaveStatus(GE)?GE:by}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){WE(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function DTe(e){return Array.isArray(e)?rk(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function CTe(e){return Array.isArray(e)?ok(e):e||null}(this._rawAsyncValidators)}}const Ag=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>qE}),qE="always";function Ey(e,t,n=qE){(function hk(e,t){const n=function tW(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(eW(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=function nW(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(eW(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();XE(t._rawValidators,r),XE(t._rawAsyncValidators,r)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function TTe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&dW(e,t)})}(e,t),function MTe(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function xTe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&dW(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function ATe(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function XE(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function dW(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function pW(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function gW(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const mW=class extends cW{constructor(t=null,n,i){super(function ck(e){return(WE(e)?e.validators:e)||null}(n),function dk(e,t){return(WE(t)?t.asyncValidators:e)||null}(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=gW(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){pW(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){pW(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){gW(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},LTe={provide:kc,useExisting:et(()=>xf)},vW=(()=>Promise.resolve())();let xf=(()=>{class e extends kc{constructor(n,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new mW,this._registered=!1,this.update=new ke,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function mk(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===ik?n=o:function kTe(e){return Object.getPrototypeOf(e.constructor)===Tf}(o)?i=o:r=o}),r||i||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function gk(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ey(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){vW.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,r=0!==i&&hg(i);vW.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function YE(e,t){return[...t.path,e]}(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(L($r,9),L(Xi,10),L(Oc,10),L(go,10),L(fo,8),L(Ag,8))},e.\u0275dir=ve({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qt([LTe]),Wt,Bn]}),e})(),wW=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();const YTe={provide:go,useExisting:et(()=>Ic),multi:!0};function xW(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Ic=(()=>{class e extends Tf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const r=xW(this._getOptionId(n),n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){const i=function KTe(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i):n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275dir=ve({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,i){1&n&&Oe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qt([YTe]),Wt]}),e})(),Tg=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(xW(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(L(Ot),L(pr),L(Ic,9))},e.\u0275dir=ve({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const XTe={provide:go,useExisting:et(()=>wk),multi:!0};function MW(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let wk=(()=>{class e extends Tf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let i;if(this.value=n,Array.isArray(n)){const r=n.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const u=this._getOptionValue(s[a].value);r.push(u)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,n(r)}}_registerOption(n){const i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){const i=function QTe(e){return e.split(":")[0]}(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275dir=ve({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,i){1&n&&Oe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qt([XTe]),Wt]}),e})(),xg=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(MW(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(MW(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(L(Ot),L(pr),L(wk,9))},e.\u0275dir=ve({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),sxe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[wW]}),e})(),lxe=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ag,useValue:n.callSetDisabledState??qE}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[sxe]}),e})();var uxe={left:"right",right:"left",bottom:"top",top:"bottom"};function JE(e){return e.replace(/left|right|bottom|top/g,function(t){return uxe[t]})}function hl(e){return e.split("-")[0]}var cxe={start:"end",end:"start"};function BW(e){return e.replace(/start|end/g,function(t){return cxe[t]})}var Br="top",Wo="bottom",qo="right",Ur="left",ZE="auto",Mg=[Br,Wo,qo,Ur],Nf="start",Ng="end",UW="clippingParents",Dk="viewport",Og="popper",VW="reference",Ck=Mg.reduce(function(e,t){return e.concat([t+"-"+Nf,t+"-"+Ng])},[]),Sk=[].concat(Mg,[ZE]).reduce(function(e,t){return e.concat([t,t+"-"+Nf,t+"-"+Ng])},[]),jW="beforeRead",HW="read",zW="afterRead",GW="beforeMain",WW="main",qW="afterMain",YW="beforeWrite",KW="write",XW="afterWrite",QW=[jW,HW,zW,GW,WW,qW,YW,KW,XW];function Yo(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Of(e){return e instanceof Yo(e).Element||e instanceof Element}function Os(e){return e instanceof Yo(e).HTMLElement||e instanceof HTMLElement}function Ak(e){return!(typeof ShadowRoot>"u")&&(e instanceof Yo(e).ShadowRoot||e instanceof ShadowRoot)}function Rc(e){return((Of(e)?e.ownerDocument:e.document)||window.document).documentElement}var kf=Math.max,eD=Math.min,kg=Math.round;function Tk(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function JW(){return!/^((?!chrome|android).)*safari/i.test(Tk())}function Ig(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&Os(e)&&(r=e.offsetWidth>0&&kg(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&kg(i.height)/e.offsetHeight||1);var a=(Of(e)?Yo(e):window).visualViewport,l=!JW()&&n,u=(i.left+(l&&a?a.offsetLeft:0))/r,c=(i.top+(l&&a?a.offsetTop:0))/o,d=i.width/r,f=i.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function xk(e){var t=Yo(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Mk(e){return Ig(Rc(e)).left+xk(e).scrollLeft}function Cu(e){return Yo(e).getComputedStyle(e)}function pl(e){return e?(e.nodeName||"").toLowerCase():null}function tD(e){return"html"===pl(e)?e:e.assignedSlot||e.parentNode||(Ak(e)?e.host:null)||Rc(e)}function Nk(e){var t=Cu(e);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function ZW(e){return["html","body","#document"].indexOf(pl(e))>=0?e.ownerDocument.body:Os(e)&&Nk(e)?e:ZW(tD(e))}function Cy(e,t){var n;void 0===t&&(t=[]);var i=ZW(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=Yo(i),s=r?[o].concat(o.visualViewport||[],Nk(i)?i:[]):i,a=t.concat(s);return r?a:a.concat(Cy(tD(s)))}function hxe(e){return["table","td","th"].indexOf(pl(e))>=0}function eq(e){return Os(e)&&"fixed"!==Cu(e).position?e.offsetParent:null}function Sy(e){for(var t=Yo(e),n=eq(e);n&&hxe(n)&&"static"===Cu(n).position;)n=eq(n);return n&&("html"===pl(n)||"body"===pl(n)&&"static"===Cu(n).position)?t:n||function pxe(e){var t=/firefox/i.test(Tk());if(/Trident/i.test(Tk())&&Os(e)&&"fixed"===Cu(e).position)return null;var r=tD(e);for(Ak(r)&&(r=r.host);Os(r)&&["html","body"].indexOf(pl(r))<0;){var o=Cu(r);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return r;r=r.parentNode}return null}(e)||t}function tq(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ak(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ok(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function nq(e,t,n){return t===Dk?Ok(function dxe(e,t){var n=Yo(e),i=Rc(e),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var u=JW();(u||!u&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+Mk(e),y:l}}(e,n)):Of(t)?function gxe(e,t){var n=Ig(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Ok(function fxe(e){var t,n=Rc(e),i=xk(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=kf(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=kf(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Mk(e),l=-i.scrollTop;return"rtl"===Cu(r||n).direction&&(a+=kf(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(Rc(e)))}function Rg(e){return e.split("-")[1]}function kk(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function iq(e){var l,t=e.reference,n=e.element,i=e.placement,r=i?hl(i):null,o=i?Rg(i):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2;switch(r){case Br:l={x:s,y:t.y-n.height};break;case Wo:l={x:s,y:t.y+t.height};break;case qo:l={x:t.x+t.width,y:a};break;case Ur:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=r?kk(r):null;if(null!=u){var c="y"===u?"height":"width";switch(o){case Nf:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Ng:l[u]=l[u]+(t[c]/2-n[c]/2)}}return l}function oq(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function sq(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}function Fg(e,t){void 0===t&&(t={});var i=t.placement,r=void 0===i?e.placement:i,o=t.strategy,s=void 0===o?e.strategy:o,a=t.boundary,l=void 0===a?UW:a,u=t.rootBoundary,c=void 0===u?Dk:u,d=t.elementContext,f=void 0===d?Og:d,h=t.altBoundary,p=void 0!==h&&h,g=t.padding,m=void 0===g?0:g,_=oq("number"!=typeof m?m:sq(m,Mg)),v=e.rects.popper,b=e.elements[p?f===Og?VW:Og:f],w=function _xe(e,t,n,i){var r="clippingParents"===t?function mxe(e){var t=Cy(tD(e)),i=["absolute","fixed"].indexOf(Cu(e).position)>=0&&Os(e)?Sy(e):e;return Of(i)?t.filter(function(r){return Of(r)&&tq(r,i)&&"body"!==pl(r)}):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o.reduce(function(l,u){var c=nq(e,u,i);return l.top=kf(c.top,l.top),l.right=eD(c.right,l.right),l.bottom=eD(c.bottom,l.bottom),l.left=kf(c.left,l.left),l},nq(e,o[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Of(b)?b:b.contextElement||Rc(e.elements.popper),l,c,s),D=Ig(e.elements.reference),E=iq({reference:D,element:v,strategy:"absolute",placement:r}),S=Ok(Object.assign({},v,E)),M=f===Og?S:D,k={top:w.top-M.top+_.top,bottom:M.bottom-w.bottom+_.bottom,left:w.left-M.left+_.left,right:M.right-w.right+_.right},R=e.modifiersData.offset;if(f===Og&&R){var F=R[r];Object.keys(k).forEach(function(P){var A=[qo,Wo].indexOf(P)>=0?1:-1,C=[Br,Wo].indexOf(P)>=0?"y":"x";k[P]+=F[C]*A})}return k}const Ik={name:"flip",enabled:!0,phase:"main",fn:function bxe(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,g=n.allowedAutoPlacements,m=t.options.placement,_=hl(m),v=l||(_!==m&&p?function vxe(e){if(hl(e)===ZE)return[];var t=JE(e);return[BW(e),t,BW(t)]}(m):[JE(m)]),b=[m].concat(v).reduce(function(j,z){return j.concat(hl(z)===ZE?function yxe(e,t){void 0===t&&(t={});var r=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=void 0===l?Sk:l,c=Rg(t.placement),d=c?a?Ck:Ck.filter(function(p){return Rg(p)===c}):Mg,f=d.filter(function(p){return u.indexOf(p)>=0});0===f.length&&(f=d);var h=f.reduce(function(p,g){return p[g]=Fg(e,{placement:g,boundary:r,rootBoundary:o,padding:s})[hl(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}(t,{placement:z,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:g}):z)},[]),w=t.rects.reference,D=t.rects.popper,E=new Map,S=!0,M=b[0],k=0;k<b.length;k++){var R=b[k],F=hl(R),P=Rg(R)===Nf,A=[Br,Wo].indexOf(F)>=0,C=A?"width":"height",T=Fg(t,{placement:R,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),O=A?P?qo:Ur:P?Wo:Br;w[C]>D[C]&&(O=JE(O));var x=JE(O),N=[];if(o&&N.push(T[F]<=0),a&&N.push(T[O]<=0,T[x]<=0),N.every(function(j){return j})){M=R,S=!1;break}E.set(R,N)}if(S)for(var U=function(z){var re=b.find(function(K){var ce=E.get(K);if(ce)return ce.slice(0,z).every(function(W){return W})});if(re)return M=re,"break"},V=p?3:1;V>0&&"break"!==U(V);V--);t.placement!==M&&(t.modifiersData[i]._skip=!0,t.placement=M,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ay(e,t,n){return kf(e,eD(t,n))}function Rk(e){var t=Ig(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}const Fk={name:"preventOverflow",enabled:!0,phase:"main",fn:function Dxe(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,f=n.tether,h=void 0===f||f,p=n.tetherOffset,g=void 0===p?0:p,m=Fg(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),_=hl(t.placement),y=Rg(t.placement),v=!y,b=kk(_),w=function wxe(e){return"x"===e?"y":"x"}(b),D=t.modifiersData.popperOffsets,E=t.rects.reference,S=t.rects.popper,M="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,k="number"==typeof M?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(D){if(o){var P,A="y"===b?Br:Ur,C="y"===b?Wo:qo,T="y"===b?"height":"width",O=D[b],x=O+m[A],N=O-m[C],I=h?-S[T]/2:0,U=y===Nf?E[T]:S[T],V=y===Nf?-S[T]:-E[T],H=t.elements.arrow,j=h&&H?Rk(H):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},re=z[A],K=z[C],ce=Ay(0,E[T],j[T]),W=v?E[T]/2-I-ce-re-k.mainAxis:U-ce-re-k.mainAxis,ne=v?-E[T]/2+I+ce+K+k.mainAxis:V+ce+K+k.mainAxis,ie=t.elements.arrow&&Sy(t.elements.arrow),be=null!=(P=R?.[b])?P:0,We=O+ne-be,Me=Ay(h?eD(x,O+W-be-(ie?"y"===b?ie.clientTop||0:ie.clientLeft||0:0)):x,O,h?kf(N,We):N);D[b]=Me,F[b]=Me-O}if(a){var Le,mn=D[w],Pn="y"===w?"height":"width",ni=mn+m["x"===b?Br:Ur],vp=mn-m["x"===b?Wo:qo],Or=-1!==[Br,Ur].indexOf(_),Za=null!=(Le=R?.[w])?Le:0,Ob=Or?ni:mn-E[Pn]-S[Pn]-Za+k.altAxis,kb=Or?mn+E[Pn]+S[Pn]-Za-k.altAxis:vp,Ib=h&&Or?function Exe(e,t,n){var i=Ay(e,t,n);return i>n?n:i}(Ob,mn,kb):Ay(h?Ob:ni,mn,h?kb:vp);D[w]=Ib,F[w]=Ib-mn}t.modifiersData[i]=F}},requiresIfExists:["offset"]};const Pk={name:"arrow",enabled:!0,phase:"main",fn:function Sxe(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=hl(n.placement),l=kk(a),c=[Ur,qo].indexOf(a)>=0?"height":"width";if(o&&s){var d=function(t,n){return oq("number"!=typeof(t="function"==typeof t?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:sq(t,Mg))}(r.padding,n),f=Rk(o),h="y"===l?Br:Ur,p="y"===l?Wo:qo,g=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],_=Sy(o),y=_?"y"===l?_.clientHeight||0:_.clientWidth||0:0,D=y/2-f[c]/2+(g/2-m/2),E=Ay(d[h],D,y-f[c]-d[p]);n.modifiersData[i]=((t={})[l]=E,t.centerOffset=E-D,t)}},effect:function Axe(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=t.elements.popper.querySelector(r))||tq(t.elements.popper,r)&&(t.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Nxe(e,t,n){void 0===n&&(n=!1);var i=Os(t),r=Os(t)&&function Mxe(e){var t=e.getBoundingClientRect(),n=kg(t.width)/e.offsetWidth||1,i=kg(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),o=Rc(t),s=Ig(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==pl(t)||Nk(o))&&(a=function xxe(e){return e!==Yo(e)&&Os(e)?function Txe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(e):xk(e)}(t)),Os(t)?((l=Ig(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Mk(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Oxe(e){var t=new Map,n=new Set,i=[];function r(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),i.push(o)}return e.forEach(function(o){t.set(o.name,o)}),e.forEach(function(o){n.has(o.name)||r(o)}),i}function Ixe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var aq={placement:"bottom",modifiers:[],strategy:"absolute"};function lq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function nD(e){void 0===e&&(e={});var n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?aq:r;return function(a,l,u){void 0===u&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},aq,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(_){var y="function"==typeof _?_(c.options):_;g(),c.options=Object.assign({},o,c.options,y),c.scrollParents={reference:Of(a)?Cy(a):a.contextElement?Cy(a.contextElement):[],popper:Cy(l)};var v=function kxe(e){var t=Oxe(e);return QW.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}(function Rxe(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(b){return b.enabled}),function p(){c.orderedModifiers.forEach(function(m){var y=m.options,b=m.effect;if("function"==typeof b){var w=b({state:c,name:m.name,instance:h,options:void 0===y?{}:y});d.push(w||function(){})}})}(),h.update()},forceUpdate:function(){if(!f){var _=c.elements,y=_.reference,v=_.popper;if(lq(y,v)){c.rects={reference:Nxe(y,Sy(v),"fixed"===c.options.strategy),popper:Rk(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var b=0;b<c.orderedModifiers.length;b++)if(!0!==c.reset){var w=c.orderedModifiers[b],D=w.fn,E=w.options;"function"==typeof D&&(c=D({state:c,options:void 0===E?{}:E,name:w.name,instance:h})||c)}else c.reset=!1,b=-1}}},update:Ixe(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){g(),f=!0}};if(!lq(a,l))return h;function g(){d.forEach(function(m){return m()}),d=[]}return h.setOptions(u).then(function(m){!f&&u.onFirstUpdate&&u.onFirstUpdate(m)}),h}}var Fxe=nD(),iD={passive:!0};const Lk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Pxe(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=Yo(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,iD)}),a&&l.addEventListener("resize",n.update,iD),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,iD)}),a&&l.removeEventListener("resize",n.update,iD)}},data:{}},$k={name:"popperOffsets",enabled:!0,phase:"read",fn:function Lxe(e){var t=e.state;t.modifiersData[e.name]=iq({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var $xe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uq(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=s.x,h=void 0===f?0:f,p=s.y,g=void 0===p?0:p,m="function"==typeof c?c({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var _=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),v=Ur,b=Br,w=window;if(u){var D=Sy(n),E="clientHeight",S="clientWidth";D===Yo(n)&&"static"!==Cu(D=Rc(n)).position&&"absolute"===a&&(E="scrollHeight",S="scrollWidth"),(r===Br||(r===Ur||r===qo)&&o===Ng)&&(b=Wo,g-=(d&&D===w&&w.visualViewport?w.visualViewport.height:D[E])-i.height,g*=l?1:-1),r!==Ur&&(r!==Br&&r!==Wo||o!==Ng)||(v=qo,h-=(d&&D===w&&w.visualViewport?w.visualViewport.width:D[S])-i.width,h*=l?1:-1)}var P,R=Object.assign({position:a},u&&$xe),F=!0===c?function Bxe(e,t){var i=e.y,r=t.devicePixelRatio||1;return{x:kg(e.x*r)/r||0,y:kg(i*r)/r||0}}({x:h,y:g},Yo(n)):{x:h,y:g};return h=F.x,g=F.y,Object.assign({},R,l?((P={})[b]=y?"0":"",P[v]=_?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",P):((t={})[b]=y?g+"px":"",t[v]=_?h+"px":"",t.transform="",t))}const Bk={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Uxe(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,u={placement:hl(t.placement),variation:Rg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,uq(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,uq(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Uk={name:"applyStyles",enabled:!0,phase:"write",fn:function Vxe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},o=t.elements[n];!Os(o)||!pl(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(s){var a=r[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function jxe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],o=t.attributes[i]||{},a=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]).reduce(function(l,u){return l[u]="",l},{});!Os(r)||!pl(r)||(Object.assign(r.style,a),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]};var cq=nD({defaultModifiers:[Lk,$k,Bk,Uk]});const Vk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Gxe(e){var t=e.state,i=e.name,r=e.options.offset,o=void 0===r?[0,0]:r,s=Sk.reduce(function(c,d){return c[d]=function zxe(e,t,n){var i=hl(e),r=[Ur,Br].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ur,qo].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(d,t.rects,o),c},{}),a=s[t.placement],u=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=a.x,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=s}};function Wxe(e,t){}function qxe(e,t){if(1&e&&($(0,"button",3),Y(1),ge(2,Wxe,0,0,"ng-template",4),B()),2&e){const n=t.$implicit;X("ngbPanelToggle",n),q(1),Gi(" ",n.title," "),q(1),X("ngTemplateOutlet",null==n.titleTpl?null:n.titleTpl.templateRef)}}function Yxe(e,t){}function Kxe(e,t){}function Xxe(e,t){if(1&e){const n=vn();$(0,"div",8),Oe("ngbRef",function(r){return It(n),Rt(_e().$implicit.panelDiv=r)}),$(1,"div",9),ge(2,Kxe,0,0,"ng-template",4),B()()}if(2&e){const n=_e().$implicit;sl("id",n.id),Et("aria-labelledby",n.id+"-header"),q(2),X("ngTemplateOutlet",(null==n.contentTpl?null:n.contentTpl.templateRef)||null)}}const Qxe=function(e,t){return{$implicit:e,opened:t}};function Jxe(e,t){if(1&e&&($(0,"div")(1,"div",5),ge(2,Yxe,0,0,"ng-template",6),B(),ge(3,Xxe,3,3,"div",7),B()),2&e){const n=t.$implicit,i=_e(),r=co(1);vc("accordion-item "+(n.cardClass||"")),q(1),vc("accordion-header "+(n.type?"bg-"+n.type:i.type?"bg-"+i.type:"")),_u("id","",n.id,"-header"),q(1),X("ngTemplateOutlet",(null==n.headerTpl?null:n.headerTpl.templateRef)||r)("ngTemplateOutletContext",B0(8,Qxe,n,n.isOpen)),q(1),X("ngIf",!i.destroyOnHide||n.isOpen||n.transitionRunning)}}function Zxe(e,t){if(1&e){const n=vn();$(0,"button",1),Oe("click",function(){return It(n),Rt(_e().close())}),B()}}const rD=["*"];function e2e(e,t){if(1&e){const n=vn();$(0,"button",6),Oe("click",function(){const o=It(n).$implicit,s=_e();return s.focus(),Rt(s.select(o.id,s.NgbSlideEventSource.INDICATOR))}),B()}if(2&e){const n=t.$implicit,i=_e();Je("active",n.id===i.activeId),Et("aria-labelledby","slide-"+n.id)("aria-controls","slide-"+n.id)("aria-selected",n.id===i.activeId)}}function t2e(e,t){}function n2e(e,t){if(1&e&&($(0,"div",7)(1,"span",8),Wi(2,9),B(),ge(3,t2e,0,0,"ng-template",10),B()),2&e){const n=t.$implicit,i=t.index,r=t.count;X("id","slide-"+n.id),q(2),lg(i+1)(r),$0(2),q(1),X("ngTemplateOutlet",n.tplRef)}}function i2e(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){return It(n),Rt(_e().arrowLeft())}),Re(1,"span",12),$(2,"span",8),Wi(3,13),B()()}}function r2e(e,t){if(1&e){const n=vn();$(0,"button",14),Oe("click",function(){return It(n),Rt(_e().arrowRight())}),Re(1,"span",15),$(2,"span",8),Wi(3,16),B()()}}const o2e=["ngbDatepickerDayView",""],s2e=["month"],a2e=["year"];function l2e(e,t){if(1&e&&($(0,"option",5),Y(1),B()),2&e){const n=t.$implicit,i=_e();X("value",n),Et("aria-label",i.i18n.getMonthFullName(n,i.date.year)),q(1),pi(i.i18n.getMonthShortName(n,i.date.year))}}function u2e(e,t){if(1&e&&($(0,"option",5),Y(1),B()),2&e){const n=t.$implicit,i=_e();X("value",n),q(1),pi(i.i18n.getYearNumerals(n))}}function c2e(e,t){if(1&e){const n=vn();$(0,"ngb-datepicker-navigation-select",7),Oe("select",function(r){return It(n),Rt(_e().select.emit(r))}),B()}if(2&e){const n=_e();X("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function d2e(e,t){1&e&&Re(0,"div",0)}function f2e(e,t){1&e&&Re(0,"div",0)}function h2e(e,t){if(1&e&&(ge(0,d2e,1,0,"div",9),$(1,"div",10),Y(2),B(),ge(3,f2e,1,0,"div",9)),2&e){const n=t.$implicit,i=t.index,r=_e(2);X("ngIf",i>0),q(2),Gi(" ",r.i18n.getMonthLabel(n.firstDate)," "),q(1),X("ngIf",i!==r.months.length-1)}}function p2e(e,t){1&e&&ge(0,h2e,4,3,"ng-template",8),2&e&&X("ngForOf",_e().months)}function g2e(e,t){if(1&e&&($(0,"div",5),Y(1),B()),2&e){const n=_e(2);q(1),pi(n.i18n.getWeekLabel())}}function m2e(e,t){if(1&e&&($(0,"div",6),Y(1),B()),2&e){const n=t.$implicit;q(1),pi(n)}}function _2e(e,t){if(1&e&&($(0,"div",2),ge(1,g2e,2,1,"div",3),ge(2,m2e,2,1,"div",4),B()),2&e){const n=_e();q(1),X("ngIf",n.datepicker.showWeekNumbers),q(1),X("ngForOf",n.viewModel.weekdays)}}function y2e(e,t){if(1&e&&($(0,"div",11),Y(1),B()),2&e){const n=_e(2).$implicit,i=_e();q(1),pi(i.i18n.getWeekNumerals(n.number))}}function v2e(e,t){}function b2e(e,t){if(1&e&&ge(0,v2e,0,0,"ng-template",14),2&e){const n=_e().$implicit;X("ngTemplateOutlet",_e(3).datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function w2e(e,t){if(1&e){const n=vn();$(0,"div",12),Oe("click",function(r){const s=It(n).$implicit;return _e(3).doSelect(s),Rt(r.preventDefault())}),ge(1,b2e,1,2,"ng-template",13),B()}if(2&e){const n=t.$implicit;Je("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),X("tabindex",n.tabindex),Et("aria-label",n.ariaLabel),q(1),X("ngIf",!n.hidden)}}function E2e(e,t){if(1&e&&($(0,"div",8),ge(1,y2e,2,1,"div",9),ge(2,w2e,2,9,"div",10),B()),2&e){const n=_e().$implicit,i=_e();q(1),X("ngIf",i.datepicker.showWeekNumbers),q(1),X("ngForOf",n.days)}}function D2e(e,t){1&e&&ge(0,E2e,3,2,"div",7),2&e&&X("ngIf",!t.$implicit.collapsed)}const C2e=["defaultDayTemplate"],S2e=["content"];function A2e(e,t){if(1&e&&Re(0,"div",8),2&e){const i=t.currentMonth,r=t.selected,o=t.disabled,s=t.focused;X("date",t.date)("currentMonth",i)("selected",r)("disabled",o)("focused",s)}}function T2e(e,t){if(1&e&&($(0,"div",13),Y(1),B()),2&e){const n=_e().$implicit,i=_e(2);q(1),Gi(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function x2e(e,t){if(1&e&&($(0,"div",10),ge(1,T2e,2,1,"div",11),Re(2,"ngb-datepicker-month",12),B()),2&e){const n=t.$implicit,i=_e(2);q(1),X("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),q(1),X("month",n.firstDate)}}function M2e(e,t){1&e&&ge(0,x2e,3,2,"div",9),2&e&&X("ngForOf",_e().model.months)}function N2e(e,t){if(1&e){const n=vn();$(0,"ngb-datepicker-navigation",14),Oe("navigate",function(r){return It(n),Rt(_e().onNavigateEvent(r))})("select",function(r){return It(n),Rt(_e().onNavigateDateSelect(r))}),B()}if(2&e){const n=_e();X("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect","select"===n.model.navigation)("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function O2e(e,t){}function k2e(e,t){}const dq=function(e){return{$implicit:e}},I2e=["dialog"],R2e=["ngbNavOutlet",""];function F2e(e,t){}function P2e(e,t){if(1&e&&($(0,"div",2),ge(1,F2e,0,0,"ng-template",3),B()),2&e){const n=_e().$implicit,i=_e();X("item",n)("nav",i.nav)("role",i.paneRole),q(1),X("ngTemplateOutlet",(null==n.contentTpl?null:n.contentTpl.templateRef)||null)("ngTemplateOutletContext",cg(5,dq,n.active||i.isPanelTransitioning(n)))}}function L2e(e,t){if(1&e&&ge(0,P2e,2,7,"div",1),2&e){const n=t.$implicit,i=_e();X("ngIf",n.isPanelInDom()||i.isPanelTransitioning(n))}}function $2e(e,t){1&e&&($(0,"span",9),Wi(1,10),B())}function B2e(e,t){1&e&&($(0,"span",9),Wi(1,11),B())}function U2e(e,t){1&e&&($(0,"span",9),Wi(1,12),B())}function V2e(e,t){1&e&&($(0,"span",9),Wi(1,13),B())}function j2e(e,t){1&e&&Y(0,"...")}function H2e(e,t){1&e&&Y(0),2&e&&pi(t.$implicit)}function z2e(e,t){}const G2e=function(e){return{disabled:!0,currentPage:e}};function W2e(e,t){if(1&e&&($(0,"a",18),ge(1,z2e,0,0,"ng-template",8),B()),2&e){const n=_e(2).$implicit,i=_e(),r=co(9);q(1),X("ngTemplateOutlet",(null==i.tplEllipsis?null:i.tplEllipsis.templateRef)||r)("ngTemplateOutletContext",cg(2,G2e,n))}}function q2e(e,t){}const Y2e=function(e,t,n){return{disabled:e,$implicit:t,currentPage:n}};function K2e(e,t){if(1&e){const n=vn();$(0,"a",19),Oe("click",function(r){It(n);const o=_e().$implicit;return _e(2).selectPage(o),Rt(r.preventDefault())}),ge(1,q2e,0,0,"ng-template",8),B()}if(2&e){const n=_e().$implicit,i=_e(),r=i.disabled,o=i.$implicit,s=_e(),a=co(11);Et("tabindex",r?"-1":null)("aria-disabled",r?"true":null),q(1),X("ngTemplateOutlet",(null==s.tplNumber?null:s.tplNumber.templateRef)||a)("ngTemplateOutletContext",gN(4,Y2e,r,n,o))}}function X2e(e,t){if(1&e&&($(0,"li",15),ge(1,W2e,2,4,"a",16),ge(2,K2e,2,8,"a",17),B()),2&e){const n=t.$implicit,i=_e(),r=i.$implicit,o=i.disabled,s=_e();Je("active",n===r)("disabled",s.isEllipsis(n)||o),Et("aria-current",n===r?"page":null),q(1),X("ngIf",s.isEllipsis(n)),q(1),X("ngIf",!s.isEllipsis(n))}}function Q2e(e,t){1&e&&ge(0,X2e,3,7,"li",14),2&e&&X("ngForOf",t.pages)}function J2e(e,t){}const jk=function(e,t){return{disabled:e,currentPage:t}};function Z2e(e,t){if(1&e){const n=vn();$(0,"li",15)(1,"a",20),Oe("click",function(r){return It(n),_e().selectPage(1),Rt(r.preventDefault())}),ge(2,J2e,0,0,"ng-template",8),B()()}if(2&e){const n=_e(),i=co(1);Je("disabled",n.previousDisabled()),q(1),Et("tabindex",n.previousDisabled()?"-1":null)("aria-disabled",n.previousDisabled()?"true":null),q(1),X("ngTemplateOutlet",(null==n.tplFirst?null:n.tplFirst.templateRef)||i)("ngTemplateOutletContext",B0(6,jk,n.previousDisabled(),n.page))}}function eMe(e,t){}const tMe=function(e){return{disabled:e}};function nMe(e,t){if(1&e){const n=vn();$(0,"li",15)(1,"a",21),Oe("click",function(r){It(n);const o=_e();return o.selectPage(o.page-1),Rt(r.preventDefault())}),ge(2,eMe,0,0,"ng-template",8),B()()}if(2&e){const n=_e(),i=co(3);Je("disabled",n.previousDisabled()),q(1),Et("tabindex",n.previousDisabled()?"-1":null)("aria-disabled",n.previousDisabled()?"true":null),q(1),X("ngTemplateOutlet",(null==n.tplPrevious?null:n.tplPrevious.templateRef)||i)("ngTemplateOutletContext",cg(6,tMe,n.previousDisabled()))}}function iMe(e,t){}function rMe(e,t){}function oMe(e,t){if(1&e){const n=vn();$(0,"li",15)(1,"a",22),Oe("click",function(r){It(n);const o=_e();return o.selectPage(o.page+1),Rt(r.preventDefault())}),ge(2,rMe,0,0,"ng-template",8),B()()}if(2&e){const n=_e(),i=co(5);Je("disabled",n.nextDisabled()),q(1),Et("tabindex",n.nextDisabled()?"-1":null)("aria-disabled",n.nextDisabled()?"true":null),q(1),X("ngTemplateOutlet",(null==n.tplNext?null:n.tplNext.templateRef)||i)("ngTemplateOutletContext",B0(6,jk,n.nextDisabled(),n.page))}}function sMe(e,t){}function aMe(e,t){if(1&e){const n=vn();$(0,"li",15)(1,"a",23),Oe("click",function(r){It(n);const o=_e();return o.selectPage(o.pageCount),Rt(r.preventDefault())}),ge(2,sMe,0,0,"ng-template",8),B()()}if(2&e){const n=_e(),i=co(7);Je("disabled",n.nextDisabled()),q(1),Et("tabindex",n.nextDisabled()?"-1":null)("aria-disabled",n.nextDisabled()?"true":null),q(1),X("ngTemplateOutlet",(null==n.tplLast?null:n.tplLast.templateRef)||i)("ngTemplateOutletContext",B0(6,jk,n.nextDisabled(),n.page))}}const lMe=function(e,t,n){return{$implicit:e,pages:t,disabled:n}};function dMe(e,t){if(1&e&&($(0,"span"),Wi(1,1),Ef(2,"percent"),B()),2&e){const n=_e();q(2),lg(mN(2,1,n.getValue()/n.max)),$0(1)}}function fMe(e,t){1&e&&Y(0),2&e&&pi(100===t.fill?"\u2605":"\u2606")}function hMe(e,t){}function pMe(e,t){if(1&e){const n=vn();$(0,"span",2),Y(1),B(),$(2,"span",3),Oe("mouseenter",function(){const o=It(n).index;return Rt(_e().enter(o+1))})("click",function(){const o=It(n).index;return Rt(_e().handleClick(o+1))}),ge(3,hMe,0,0,"ng-template",4),B()}if(2&e){const n=t.index,i=_e(),r=co(1);q(1),Gi("(",n<i.nextRate?"*":" ",")"),q(1),og("cursor",i.isInteractive()?"pointer":"default"),q(1),X("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[n])}}function gMe(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e();return Rt(r.changeHour(r.hourStep))}),Re(1,"span",12),$(2,"span",13),Wi(3,14),B()()}if(2&e){const n=_e();Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function mMe(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e();return Rt(r.changeHour(-r.hourStep))}),Re(1,"span",15),$(2,"span",13),Wi(3,16),B()()}if(2&e){const n=_e();Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function _Me(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e();return Rt(r.changeMinute(r.minuteStep))}),Re(1,"span",12),$(2,"span",13),Wi(3,17),B()()}if(2&e){const n=_e();Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function yMe(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e();return Rt(r.changeMinute(-r.minuteStep))}),Re(1,"span",15),$(2,"span",13),Wi(3,18),B()()}if(2&e){const n=_e();Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function vMe(e,t){1&e&&($(0,"div",5),Y(1,":"),B())}function bMe(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e(2);return Rt(r.changeSecond(r.secondStep))}),Re(1,"span",12),$(2,"span",13),Wi(3,21),B()()}if(2&e){const n=_e(2);Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function wMe(e,t){if(1&e){const n=vn();$(0,"button",11),Oe("click",function(){It(n);const r=_e(2);return Rt(r.changeSecond(-r.secondStep))}),Re(1,"span",15),$(2,"span",13),Wi(3,22),B()()}if(2&e){const n=_e(2);Je("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),X("disabled",n.disabled)}}function EMe(e,t){if(1&e){const n=vn();$(0,"div",19),ge(1,bMe,4,7,"button",3),$(2,"input",20),Oe("change",function(r){return It(n),Rt(_e().updateSecond(r.target.value))})("blur",function(){return It(n),Rt(_e().handleBlur())})("input",function(r){return It(n),Rt(_e().formatInput(r.target))})("keydown.ArrowUp",function(r){It(n);const o=_e();return o.changeSecond(o.secondStep),Rt(r.preventDefault())})("keydown.ArrowDown",function(r){It(n);const o=_e();return o.changeSecond(-o.secondStep),Rt(r.preventDefault())}),B(),ge(3,wMe,4,7,"button",3),B()}if(2&e){const n=_e();q(1),X("ngIf",n.spinners),q(1),Je("form-control-sm",n.isSmallSize)("form-control-lg",n.isLargeSize),X("value",n.formatMinSec(null==n.model?null:n.model.second))("readOnly",n.readonlyInputs)("disabled",n.disabled),q(1),X("ngIf",n.spinners)}}function DMe(e,t){1&e&&Re(0,"div",5)}function CMe(e,t){if(1&e&&(Iw(0),Wi(1,27),Rw()),2&e){const n=_e(2);q(1),lg(n.i18n.getAfternoonPeriod()),$0(1)}}function SMe(e,t){1&e&&Wi(0,28),2&e&&(lg(_e(2).i18n.getMorningPeriod()),$0(0))}function AMe(e,t){if(1&e){const n=vn();$(0,"div",23)(1,"button",24),Oe("click",function(){return It(n),Rt(_e().toggleMeridian())}),ge(2,CMe,2,1,"ng-container",25),ge(3,SMe,1,1,"ng-template",null,26,Pr),B()()}if(2&e){const n=co(4),i=_e();q(1),Je("btn-sm",i.isSmallSize)("btn-lg",i.isLargeSize)("disabled",i.disabled),X("disabled",i.disabled),q(1),X("ngIf",i.model&&i.model.hour>=12)("ngIfElse",n)}}function TMe(e,t){if(1&e&&($(0,"strong",3),Y(1),B()),2&e){const n=_e();q(1),pi(n.header)}}function xMe(e,t){}function MMe(e,t){if(1&e){const n=vn();$(0,"div",4),ge(1,xMe,0,0,"ng-template",5),$(2,"button",6),Oe("click",function(){return It(n),Rt(_e().hide())}),B()()}if(2&e){const n=_e(),i=co(1);q(1),X("ngTemplateOutlet",n.contentHeaderTpl||i)}}function NMe(e,t){if(1&e&&($(0,"span"),Y(1),B()),2&e){const n=_e().$implicit;vc(_e().highlightClass),q(1),pi(n)}}function OMe(e,t){1&e&&Y(0),2&e&&pi(_e().$implicit)}function kMe(e,t){if(1&e&&(ge(0,NMe,2,3,"span",1),ge(1,OMe,1,1,"ng-template",null,2,Pr)),2&e){const n=t.odd,i=co(2);X("ngIf",n)("ngIfElse",i)}}function Qi(e){return parseInt(`${e}`,10)}function fq(e){return null!=e?`${e}`:""}function oD(e,t,n=0){return Math.max(Math.min(e,t),n)}function Pg(e){return"string"==typeof e}function Hn(e){return!isNaN(Qi(e))}function kn(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function If(e){return null!=e}function Lg(e){return Hn(e)?`0${e}`.slice(-2):""}function pq(e,t){return e&&e.className&&e.className.split&&e.className.split(/\s+/).indexOf(t)>=0}function $g(e){return(e||document.body).getBoundingClientRect()}function gq(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const mq={animation:!0,transitionTimerDelayMs:5},BMe=()=>{},{transitionTimerDelayMs:UMe}=mq,Ty=new Map,_i=(e,t,n,i)=>{let r=i.context||{};const o=Ty.get(t);if(o)switch(i.runningTransition){case"continue":return ys;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Ty.delete(t)}const s=n(t,i.animation,r)||BMe;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>s()),Ve(void 0).pipe(function LMe(e){return t=>new on(n=>t.subscribe({next:s=>e.run(()=>n.next(s)),error:s=>e.run(()=>n.error(s)),complete:()=>e.run(()=>n.complete())}))}(e));const a=new ln,l=new ln,u=a.pipe(function iTe(...e){return t=>J0(t,Ve(...e))}(!0));Ty.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const c=function $Me(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const d=Ki(t,"transitionend").pipe(jn(u),Xn(({target:h})=>h===t));(function IG(...e){return 1===(e=kG(e)).length?ji(e[0]):new on(function nTe(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(ji(e[i]).subscribe(un(t,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}t.next(r)})))}}(e))})(ek(c+UMe).pipe(jn(u)),d,l).pipe(jn(u)).subscribe(()=>{Ty.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()},Hk=(e,t,n)=>{let{direction:i,maxSize:r,dimension:o}=n;const{classList:s}=e;function a(){s.add("collapse"),"show"===i?s.add("show"):s.remove("show")}if(t)return r||(r=function jMe(e,t){if(typeof navigator>"u")return"0px";const{classList:n}=e,i=n.contains("show");i||n.add("show"),e.style[t]="";const r=e.getBoundingClientRect()[t]+"px";return i||n.remove("show"),r}(e,o),n.maxSize=r,e.style[o]="show"!==i?r:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),$g(e),s.add("collapsing")),e.style[o]="show"===i?r:"0px",()=>{a(),s.remove("collapsing"),e.style[o]=""};a()};let Rf=(()=>{class e{constructor(){this.animation=mq.animation}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_q=(()=>{class e{constructor(n){this._ngbConfig=n,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(fe(Rf))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),HMe=0,zk=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),e})(),yq=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),e})(),vq=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),e})(),Gk=(()=>{class e{constructor(){this.disabled=!1,this.id="ngb-panel-"+HMe++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new ke,this.hidden=new ke}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ve({type:e,selectors:[["ngb-panel"]],contentQueries:function(n,i,r){if(1&n&&(fn(r,yq,4),fn(r,zk,4),fn(r,vq,4)),2&n){let o;yt(o=vt())&&(i.titleTpls=o),yt(o=vt())&&(i.headerTpls=o),yt(o=vt())&&(i.contentTpls=o)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),e})(),zMe=(()=>{class e{constructor(n){this._El=n,this.ngbRef=new ke}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return e.\u0275fac=function(n){return new(n||e)(L(Ot))},e.\u0275dir=ve({type:e,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),e})(),bq=(()=>{class e{constructor(n,i){this.accordion=n,this.panel=i}set ngbPanelToggle(n){n&&(this.panel=n)}}return e.\u0275fac=function(n){return new(n||e)(L(et(()=>Wk)),L(Gk,9))},e.\u0275dir=ve({type:e,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(n,i){1&n&&Oe("click",function(){return i.accordion.toggle(i.panel.id)}),2&n&&(Ho("disabled",i.panel.disabled),Et("aria-expanded",i.panel.isOpen)("aria-controls",i.panel.id),Je("collapsed",!i.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),e})(),Wk=(()=>{class e{constructor(n,i,r){this._ngZone=i,this._changeDetector=r,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new ke,this.shown=new ke,this.hidden=new ke,this.animation=n.animation,this.type=n.type,this.closeOtherPanels=n.closeOthers}isExpanded(n){return this.activeIds.indexOf(n)>-1}expand(n){this._changeOpenState(this._findPanelById(n),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(n=>this._changeOpenState(n,!0))}collapse(n){this._changeOpenState(this._findPanelById(n),!1)}collapseAll(){this.panels.forEach(n=>{this._changeOpenState(n,!1)})}toggle(n){const i=this._findPanelById(n);i&&this._changeOpenState(i,!i.isOpen)}ngAfterContentChecked(){Pg(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(n=>{n.isOpen=!n.disabled&&this.activeIds.indexOf(n.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(ai(1)).subscribe(()=>{this.panels.forEach(n=>{const i=n.panelDiv;i?n.initClassDone||(n.initClassDone=!0,_i(this._ngZone,i,Hk,{animation:!1,runningTransition:"continue",context:{direction:n.isOpen?"show":"hide",dimension:"height"}})):n.initClassDone=!1})})}_changeOpenState(n,i){if(null!=n&&!n.disabled&&n.isOpen!==i){let r=!1;this.panelChange.emit({panelId:n.id,nextState:i,preventDefault:()=>{r=!0}}),r||(n.isOpen=i,n.transitionRunning=!0,i&&this.closeOtherPanels&&this._closeOthers(n.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(n,i=!0){this.panels.forEach(r=>{r.id!==n&&r.isOpen&&(r.isOpen=!1,r.transitionRunning=i)})}_findPanelById(n){return this.panels.find(i=>i.id===n)||null}_updateActiveIds(){this.activeIds=this.panels.filter(n=>n.isOpen&&!n.disabled).map(n=>n.id)}_runTransitions(n){this._changeDetector.detectChanges(),this.panels.forEach(i=>{i.transitionRunning&&_i(this._ngZone,i.panelDiv,Hk,{animation:n,runningTransition:"stop",context:{direction:i.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{i.transitionRunning=!1;const{id:o}=i;i.isOpen?(i.shown.emit(),this.shown.emit(o)):(i.hidden.emit(),this.hidden.emit(o))})})}}return e.\u0275fac=function(n){return new(n||e)(L(_q),L(Dt),L(fo))},e.\u0275cmp=kt({type:e,selectors:[["ngb-accordion"]],contentQueries:function(n,i,r){if(1&n&&fn(r,Gk,4),2&n){let o;yt(o=vt())&&(i.panels=o)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(n,i){2&n&&Et("aria-multiselectable",!i.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[gi],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(n,i){1&n&&(ge(0,qxe,3,3,"ng-template",0,1,Pr),ge(2,Jxe,4,11,"ng-template",2)),2&n&&(q(2),X("ngForOf",i.panels))},dependencies:[po,wu,bq,zMe,zk,qi],encapsulation:2}),e})(),Cq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[Wk]}),e})();const XMe=({classList:e})=>{e.remove("show")};let QMe=(()=>{class e{constructor(n){this._ngbConfig=n,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(fe(Rf))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),JMe=(()=>{class e{constructor(n,i,r,o){this._renderer=i,this._element=r,this._zone=o,this.closed=new ke,this.dismissible=n.dismissible,this.type=n.type,this.animation=n.animation}close(){const n=_i(this._zone,this._element.nativeElement,XMe,{animation:this.animation,runningTransition:"continue"});return n.subscribe(()=>this.closed.emit()),n}ngOnChanges(n){const i=n.type;i&&!i.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${i.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${i.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return e.\u0275fac=function(n){return new(n||e)(L(QMe),L(pr),L(Ot),L(Dt))},e.\u0275cmp=kt({type:e,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(n,i){2&n&&Je("fade",i.animation)("alert-dismissible",i.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[Bn,gi],ngContentSelectors:rD,decls:2,vars:1,consts:function(){let t;return t=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",t,3,"click",4,"ngIf"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(n,i){1&n&&(N0(),O0(0),ge(1,Zxe,1,0,"button",0)),2&n&&(q(1),X("ngIf",i.dismissible))},dependencies:[qi],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),e})(),Sq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[JMe]}),e})();var Fc=(()=>{return(e=Fc||(Fc={})).START="start",e.END="end",Fc;var e})();const Aq=({classList:e})=>e.contains("carousel-item-start")||e.contains("carousel-item-end"),xy=e=>{e.remove("carousel-item-start"),e.remove("carousel-item-end")},sD=e=>{xy(e),e.remove("carousel-item-prev"),e.remove("carousel-item-next")},ZMe=(e,t,{direction:n})=>{const{classList:i}=e;return t?(Aq(e)?xy(i):(i.add("carousel-item-"+(n===Fc.START?"next":"prev")),$g(e),i.add("carousel-item-"+n)),()=>{sD(i),i.add("active")}):(xy(i),sD(i),void i.add("active"))},eNe=(e,t,{direction:n})=>{const{classList:i}=e;return t?(Aq(e)?xy(i):i.add("carousel-item-"+n),()=>{sD(i),i.remove("active")}):(xy(i),sD(i),void i.remove("active"))};let tNe=(()=>{class e{constructor(n){this._ngbConfig=n,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(fe(Rf))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nNe=0,iNe=(()=>{class e{constructor(n){this.tplRef=n,this.id="ngb-slide-"+nNe++,this.slid=new ke}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),e})(),rNe=(()=>{class e{constructor(n,i,r,o,s){this._platformId=i,this._ngZone=r,this._cd=o,this._container=s,this.NgbSlideEventSource=Pf,this._destroy$=new ln,this._interval$=new xi(0),this._mouseHover$=new xi(!1),this._focused$=new xi(!1),this._pauseOnHover$=new xi(!1),this._pauseOnFocus$=new xi(!1),this._pause$=new xi(!1),this._wrap$=new xi(!1),this.slide=new ke,this.slid=new ke,this._transitionIds=null,this.animation=n.animation,this.interval=n.interval,this.wrap=n.wrap,this.keyboard=n.keyboard,this.pauseOnHover=n.pauseOnHover,this.pauseOnFocus=n.pauseOnFocus,this.showNavigationArrows=n.showNavigationArrows,this.showNavigationIndicators=n.showNavigationIndicators}set interval(n){this._interval$.next(n)}get interval(){return this._interval$.value}set wrap(n){this._wrap$.next(n)}get wrap(){return this._wrap$.value}set pauseOnHover(n){this._pauseOnHover$.next(n)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(n){this._pauseOnFocus$.next(n)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(n){this._mouseHover$.next(n)}get mouseHover(){return this._mouseHover$.value}set focused(n){this._focused$.next(n)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Pf.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Pf.ARROW_RIGHT)}ngAfterContentInit(){(function oDe(e){return e===BH})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const n=mE([this.slide.pipe(Xe(i=>i.current),_E(this.activeId)),this._wrap$,this.slides.changes.pipe(_E(null))]).pipe(Xe(([i,r])=>{const o=this.slides.toArray(),s=this._getSlideIdxById(i);return r?o.length>1:s<o.length-1}),tk());mE([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,n]).pipe(Xe(([i,r,o,s,a,l,u])=>i||r&&o||s&&a||!u?0:l),tk(),xs(i=>i>0?ek(i,i):RG),jn(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Pf.TIMER)))}),this.slides.changes.pipe(jn(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(n=>(e=>{Ty.get(e)?.complete()})(this._getSlideElement(n))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(ai(1)).subscribe(()=>{for(const{id:n}of this.slides){const i=this._getSlideElement(n);n===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let n=this._getSlideById(this.activeId);this.activeId=n?n.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const n=this._getSlideElement(this.activeId);n&&n.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(n,i){this._cycleToSelected(n,this._getSlideEventDirection(this.activeId,n),i)}prev(n){this._cycleToSelected(this._getPrevSlide(this.activeId),Fc.END,n)}next(n){this._cycleToSelected(this._getNextSlide(this.activeId),Fc.START,n)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(n,i,r){const o=this._transitionIds;if(o&&(o[0]!==n||o[1]!==this.activeId))return;let s=this._getSlideById(n);if(s&&s.id!==this.activeId){this._transitionIds=[this.activeId,n],this.slide.emit({prev:this.activeId,current:s.id,direction:i,paused:this._pause$.value,source:r});const a={animation:this.animation,runningTransition:"stop",context:{direction:i}},l=[],u=this._getSlideById(this.activeId);if(u){const h=_i(this._ngZone,this._getSlideElement(u.id),eNe,a);h.subscribe(()=>{u.slid.emit({isShown:!1,direction:i,source:r})}),l.push(h)}const c=this.activeId;this.activeId=s.id;const d=this._getSlideById(this.activeId),f=_i(this._ngZone,this._getSlideElement(s.id),ZMe,a);f.subscribe(()=>{d?.slid.emit({isShown:!0,direction:i,source:r})}),l.push(f),VE(...l).pipe(ai(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:c,current:s.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(n,i){return this._getSlideIdxById(n)>this._getSlideIdxById(i)?Fc.END:Fc.START}_getSlideById(n){return this.slides.find(i=>i.id===n)||null}_getSlideIdxById(n){const i=this._getSlideById(n);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(n){const i=this.slides.toArray(),r=this._getSlideIdxById(n);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(n){const i=this.slides.toArray(),r=this._getSlideIdxById(n);return 0===r?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(n){return this._container.nativeElement.querySelector(`#slide-${n}`)}}return e.\u0275fac=function(n){return new(n||e)(L(tNe),L(qw),L(Dt),L(fo),L(Ot))},e.\u0275cmp=kt({type:e,selectors:[["ngb-carousel"]],contentQueries:function(n,i,r){if(1&n&&fn(r,iNe,4),2&n){let o;yt(o=vt())&&(i.slides=o)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(n,i){1&n&&Oe("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&n&&(Et("aria-activedescendant","slide-"+i.activeId),og("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[gi],decls:6,vars:6,consts:function(){let t,n,i;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,n=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],n,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(n,i){1&n&&($(0,"div",0),ge(1,e2e,1,5,"button",1),B(),$(2,"div",2),ge(3,n2e,4,4,"div",3),B(),ge(4,i2e,4,0,"button",4),ge(5,r2e,4,0,"button",5)),2&n&&(Je("visually-hidden",!i.showNavigationIndicators),q(1),X("ngForOf",i.slides),q(2),X("ngForOf",i.slides),q(1),X("ngIf",i.showNavigationArrows),q(1),X("ngIf",i.showNavigationArrows))},dependencies:[po,wu,qi],encapsulation:2,changeDetection:0}),e})();var Pf=(()=>{return(e=Pf||(Pf={})).TIMER="timer",e.ARROW_LEFT="arrowLeft",e.ARROW_RIGHT="arrowRight",e.INDICATOR="indicator",Pf;var e})();let Tq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[rNe]}),e})(),xq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();class yi{constructor(t,n,i){this.year=kn(t)?t:null,this.month=kn(n)?n:null,this.day=kn(i)?i:null}static from(t){return t instanceof yi?t:t?new yi(t.year,t.month,t.day):null}equals(t){return null!=t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function Bg(e,t){return!function oNe(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}(e,t)}function Mq(e,t){return!(!e&&!t||e&&t&&e.year===t.year&&e.month===t.month)}function aD(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e||null}function Yk(e,t){const{minDate:n,maxDate:i,disabled:r,markDisabled:o}=t;return!(null==e||r||o&&o(e,{year:e.year,month:e.month})||n&&e.before(n)||i&&e.after(i))}function Nq(e){return new yi(e.getFullYear(),e.getMonth()+1,e.getDate())}function lD(e){const t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}let uD=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return function pNe(){return new gNe}()},providedIn:"root"}),e})(),gNe=(()=>{class e extends uD{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(n,i="d",r=1){let o=lD(n),s=!0,a=o.getMonth();switch(i){case"y":o.setFullYear(o.getFullYear()+r);break;case"m":a+=r,o.setMonth(a),a%=12,a<0&&(a+=12);break;case"d":o.setDate(o.getDate()+r),s=!1;break;default:return n}return s&&o.getMonth()!==a&&o.setDate(0),Nq(o)}getPrev(n,i="d",r=1){return this.getNext(n,i,-r)}getWeekday(n){let r=lD(n).getDay();return 0===r?7:r}getWeekNumber(n,i){7===i&&(i=0);const s=lD(n[(11-i)%7]);s.setDate(s.getDate()+4-(s.getDay()||7));const a=s.getTime();return s.setMonth(0),s.setDate(1),Math.floor(Math.round((a-s.getTime())/864e5)/7)+1}getToday(){return Nq(new Date)}isValid(n){if(!(n&&kn(n.year)&&kn(n.month)&&kn(n.day)&&0!==n.year))return!1;const i=lD(n);return!isNaN(i.getTime())&&i.getFullYear()===n.year&&i.getMonth()+1===n.month&&i.getDate()===n.day}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Lf=(()=>{class e{getMonthLabel(n){return`${this.getMonthFullName(n.month,n.year)} ${this.getYearNumerals(n.year)}`}getDayNumerals(n){return`${n.day}`}getWeekNumerals(n){return`${n}`}getYearNumerals(n){return`${n}`}getWeekLabel(){return""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(n){let i=null;return i=n?new n:function mNe(e){return new _Ne(e)}(fe(zo)),i},providedIn:"root"}),e})(),_Ne=(()=>{class e extends Lf{constructor(n){super(),this._locale=n,this._monthsShort=KN(n,bn.Standalone,st.Abbreviated),this._monthsFull=KN(n,bn.Standalone,st.Wide)}getWeekdayLabel(n,i){const r=bH(this._locale,bn.Standalone,void 0===i?st.Short:i);return r.map((s,a)=>r[(a+1)%7])[n-1]||""}getMonthShortName(n){return this._monthsShort[n-1]||""}getMonthFullName(n){return this._monthsFull[n-1]||""}getDayAriaLabel(n){return EH(new Date(n.year,n.month-1,n.day),"fullDate",this._locale)}}return e.\u0275fac=function(n){return new(n||e)(fe(zo))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Kk=(()=>{class e{constructor(n,i){this._calendar=n,this._i18n=i,this._VALIDATORS={dayTemplateData:r=>{if(this._state.dayTemplateData!==r)return{dayTemplateData:r}},displayMonths:r=>{if(kn(r=Qi(r))&&r>0&&this._state.displayMonths!==r)return{displayMonths:r}},disabled:r=>{if(this._state.disabled!==r)return{disabled:r}},firstDayOfWeek:r=>{if(kn(r=Qi(r))&&r>=0&&this._state.firstDayOfWeek!==r)return{firstDayOfWeek:r}},focusVisible:r=>{if(this._state.focusVisible!==r&&!this._state.disabled)return{focusVisible:r}},markDisabled:r=>{if(this._state.markDisabled!==r)return{markDisabled:r}},maxDate:r=>{const o=this.toValidDate(r,null);if(Bg(this._state.maxDate,o))return{maxDate:o}},minDate:r=>{const o=this.toValidDate(r,null);if(Bg(this._state.minDate,o))return{minDate:o}},navigation:r=>{if(this._state.navigation!==r)return{navigation:r}},outsideDays:r=>{if(this._state.outsideDays!==r)return{outsideDays:r}},weekdays:r=>{const o=!0===r||!1===r?st.Short:r,s=!0!==r&&!1!==r||r;if(this._state.weekdayWidth!==o||this._state.weekdaysVisible!==s)return{weekdayWidth:o,weekdaysVisible:s}}},this._model$=new ln,this._dateSelect$=new ln,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:st.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(Xn(n=>n.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Xn(n=>null!==n))}set(n){let i=Object.keys(n).map(r=>this._VALIDATORS[r](n[r])).reduce((r,o)=>({...r,...o}),{});Object.keys(i).length>0&&this._nextState(i)}focus(n){const i=this.toValidDate(n,null);null!=i&&!this._state.disabled&&Bg(this._state.focusDate,i)&&this._nextState({focusDate:n})}focusSelect(){Yk(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(n){const i=this.toValidDate(n,this._calendar.getToday());null!=i&&!this._state.disabled&&(!this._state.firstDate||Mq(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(n,i={}){const r=this.toValidDate(n,null);null!=r&&!this._state.disabled&&(Bg(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),i.emitEvent&&Yk(r,this._state)&&this._dateSelect$.next(r))}toValidDate(n,i){const r=yi.from(n);return void 0===i&&(i=this._calendar.getToday()),this._calendar.isValid(r)?r:i}getMonth(n){for(let i of this._state.months)if(n.month===i.number&&n.year===i.year)return i;throw new Error(`month ${n.month} of year ${n.year} not found`)}_nextState(n){const i=this._updateState(n);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(n){const{months:i,displayMonths:r,selectedDate:o,focusDate:s,focusVisible:a,disabled:l,outsideDays:u}=n;n.months.forEach(c=>{c.weeks.forEach(d=>{d.days.forEach(f=>{s&&(f.context.focused=s.equals(f.date)&&a),f.tabindex=!l&&s&&f.date.equals(s)&&s.month===c.number?0:-1,!0===l&&(f.context.disabled=!0),void 0!==o&&(f.context.selected=null!==o&&o.equals(f.date)),c.number!==f.date.month&&(f.hidden="hidden"===u||"collapsed"===u||r>1&&f.date.after(i[0].firstDate)&&f.date.before(i[r-1].lastDate))})})})}_updateState(n){const i=Object.assign({},this._state,n);let r=i.firstDate;if(("minDate"in n||"maxDate"in n)&&(function sNe(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}(i.minDate,i.maxDate),i.focusDate=aD(i.focusDate,i.minDate,i.maxDate),i.firstDate=aD(i.firstDate,i.minDate,i.maxDate),r=i.focusDate),"disabled"in n&&(i.focusVisible=!1),"selectedDate"in n&&0===this._state.months.length&&(r=i.selectedDate),"focusVisible"in n||"focusDate"in n&&(i.focusDate=aD(i.focusDate,i.minDate,i.maxDate),r=i.focusDate,0!==i.months.length&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in n&&(i.firstDate=aD(i.firstDate,i.minDate,i.maxDate),r=i.firstDate),r){const s=function dNe(e,t,n,i,r){const{displayMonths:o,months:s}=n,a=s.splice(0,s.length);return Array.from({length:o},(u,c)=>{const d=Object.assign(e.getNext(t,"m",c),{day:1});if(s[c]=null,!r){const f=a.findIndex(h=>h.firstDate.equals(d));-1!==f&&(s[c]=a.splice(f,1)[0])}return d}).forEach((u,c)=>{null===s[c]&&(s[c]=function fNe(e,t,n,i,r={}){const{dayTemplateData:o,minDate:s,maxDate:a,firstDayOfWeek:l,markDisabled:u,outsideDays:c,weekdayWidth:d,weekdaysVisible:f}=n,h=e.getToday();r.firstDate=null,r.lastDate=null,r.number=t.month,r.year=t.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],t=function hNe(e,t,n){const i=e.getDaysPerWeek(),r=new yi(t.year,t.month,1),o=e.getWeekday(r)%i;return e.getPrev(r,"d",(i+o-n)%i)}(e,t,l),f||(r.weekdays.length=0);for(let p=0;p<e.getWeeksPerMonth();p++){let g=r.weeks[p];g||(g=r.weeks[p]={number:0,days:[],collapsed:!0});const m=g.days;for(let _=0;_<e.getDaysPerWeek();_++){0===p&&f&&(r.weekdays[_]=i.getWeekdayLabel(e.getWeekday(t),d));const y=new yi(t.year,t.month,t.day),v=e.getNext(y),b=i.getDayAriaLabel(y);let w=!!(s&&y.before(s)||a&&y.after(a));!w&&u&&(w=u(y,{month:r.number,year:r.year}));let D=y.equals(h),E=o?o(y,{month:r.number,year:r.year}):void 0;null===r.firstDate&&y.month===r.number&&(r.firstDate=y),y.month===r.number&&v.month!==r.number&&(r.lastDate=y);let S=m[_];S||(S=m[_]={}),S.date=y,S.context=Object.assign(S.context||{},{$implicit:y,date:y,data:E,currentMonth:r.number,currentYear:r.year,disabled:w,focused:!1,selected:!1,today:D}),S.tabindex=-1,S.ariaLabel=b,S.hidden=!1,t=v}g.number=e.getWeekNumber(m.map(_=>_.date),l),g.collapsed="collapsed"===c&&m[0].date.month!==r.number&&m[m.length-1].date.month!==r.number}return r}(e,u,n,i,a.shift()||{}))}),s}(this._calendar,r,i,this._i18n,"dayTemplateData"in n||"firstDayOfWeek"in n||"markDisabled"in n||"minDate"in n||"maxDate"in n||"disabled"in n||"outsideDays"in n||"weekdaysVisible"in n);i.months=s,i.firstDate=s[0].firstDate,i.lastDate=s[s.length-1].lastDate,"selectedDate"in n&&!Yk(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in n&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=r);const a=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,l=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in n||"maxDate"in n||0===i.selectBoxes.years.length||a)&&(i.selectBoxes.years=function lNe(e,t,n){if(!e)return[];const i=t?Math.max(t.year,e.year-500):e.year-10,o=(n?Math.min(n.year,e.year+500):e.year+10)-i+1,s=Array(o);for(let a=0;a<o;a++)s[a]=i+a;return s}(i.firstDate,i.minDate,i.maxDate)),("minDate"in n||"maxDate"in n||0===i.selectBoxes.months.length||a)&&(i.selectBoxes.months=function aNe(e,t,n,i){if(!t)return[];let r=e.getMonths(t.year);if(n&&t.year===n.year){const o=r.findIndex(s=>s===n.month);r=r.slice(o)}if(i&&t.year===i.year){const o=r.findIndex(s=>s===i.month);r=r.slice(0,o+1)}return r}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},("arrows"===i.navigation||"select"===i.navigation)&&(l||a||"minDate"in n||"maxDate"in n||"disabled"in n)&&(i.prevDisabled=i.disabled||function cNe(e,t,n){const i=Object.assign(e.getPrev(t,"m"),{day:1});return null!=n&&(i.year===n.year&&i.month<n.month||i.year<n.year&&1===n.month)}(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||function uNe(e,t,n){const i=Object.assign(e.getNext(t,"m"),{day:1});return null!=n&&i.after(n)}(this._calendar,i.lastDate,i.maxDate))}return i}}return e.\u0275fac=function(n){return new(n||e)(fe(uD),fe(Lf))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();var Ug=(()=>{return(e=Ug||(Ug={}))[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",Ug;var e})();let yNe=(()=>{class e{constructor(n){this.i18n=n}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return e.\u0275fac=function(n){return new(n||e)(L(Lf))},e.\u0275cmp=kt({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(n,i){2&n&&Je("bg-primary",i.selected)("text-white",i.selected)("text-muted",i.isMuted())("outside",i.isMuted())("active",i.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[gi],attrs:o2e,decls:1,vars:1,template:function(n,i){1&n&&Y(0),2&n&&pi(i.i18n.getDayNumerals(i.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),e})(),vNe=(()=>{class e{constructor(n,i){this.i18n=n,this._renderer=i,this.select=new ke,this._month=-1,this._year=-1}changeMonth(n){this.select.emit(new yi(this.date.year,Qi(n),1))}changeYear(n){this.select.emit(new yi(Qi(n),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return e.\u0275fac=function(n){return new(n||e)(L(Lf),L(pr))},e.\u0275cmp=kt({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(n,i){if(1&n&&(fa(s2e,7,Ot),fa(a2e,7,Ot)),2&n){let r;yt(r=vt())&&(i.monthSelect=r.first),yt(r=vt())&&(i.yearSelect=r.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[gi],decls:6,vars:4,consts:function(){let t,n,i,r;return t=$localize`:@@ngb.datepicker.select-month:Select month`,n=$localize`:@@ngb.datepicker.select-month:Select month`,i=$localize`:@@ngb.datepicker.select-year:Select year`,r=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",t,"title",n,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",i,"title",r,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(n,i){1&n&&($(0,"select",0,1),Oe("change",function(o){return i.changeMonth(o.target.value)}),ge(2,l2e,2,3,"option",2),B(),$(3,"select",3,4),Oe("change",function(o){return i.changeYear(o.target.value)}),ge(5,u2e,2,2,"option",2),B()),2&n&&(X("disabled",i.disabled),q(2),X("ngForOf",i.months),q(1),X("disabled",i.disabled),q(2),X("ngForOf",i.years))},dependencies:[po],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),e})(),bNe=(()=>{class e{constructor(n){this.i18n=n,this.navigation=Ug,this.months=[],this.navigate=new ke,this.select=new ke}onClickPrev(n){n.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(n){n.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return e.\u0275fac=function(n){return new(n||e)(L(Lf))},e.\u0275cmp=kt({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[gi],decls:8,vars:4,consts:function(){let t,n,i,r;return t=$localize`:@@ngb.datepicker.previous-month:Previous month`,n=$localize`:@@ngb.datepicker.previous-month:Previous month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,r=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",t,"title",n,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",i,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(n,i){1&n&&($(0,"div",0)(1,"button",1),Oe("click",function(o){return i.onClickPrev(o)}),Re(2,"span",2),B()(),ge(3,c2e,1,4,"ngb-datepicker-navigation-select",3),ge(4,p2e,1,1,null,4),$(5,"div",5)(6,"button",6),Oe("click",function(o){return i.onClickNext(o)}),Re(7,"span",2),B()()),2&n&&(q(1),X("disabled",i.prevDisabled),q(2),X("ngIf",i.showSelect),q(1),X("ngIf",!i.showSelect),q(2),X("disabled",i.nextDisabled))},dependencies:[qi,po,vNe],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),e})();var Ct=(()=>{return(e=Ct||(Ct={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",Ct;var e})();let wNe=(()=>{class e{processKey(n,i){const{state:r,calendar:o}=i;switch(n.which){case Ct.PageUp:i.focusDate(o.getPrev(r.focusedDate,n.shiftKey?"y":"m",1));break;case Ct.PageDown:i.focusDate(o.getNext(r.focusedDate,n.shiftKey?"y":"m",1));break;case Ct.End:i.focusDate(n.shiftKey?r.maxDate:r.lastDate);break;case Ct.Home:i.focusDate(n.shiftKey?r.minDate:r.firstDate);break;case Ct.ArrowLeft:i.focusDate(o.getPrev(r.focusedDate,"d",1));break;case Ct.ArrowUp:i.focusDate(o.getPrev(r.focusedDate,"d",o.getDaysPerWeek()));break;case Ct.ArrowRight:i.focusDate(o.getNext(r.focusedDate,"d",1));break;case Ct.ArrowDown:i.focusDate(o.getNext(r.focusedDate,"d",o.getDaysPerWeek()));break;case Ct.Enter:case Ct.Space:i.focusSelect();break;default:return}n.preventDefault(),n.stopPropagation()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Xk=(()=>{class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=st.Short}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Qk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return function ENe(){return new DNe}()},providedIn:"root"}),e})(),DNe=(()=>{class e extends Qk{fromModel(n){return n&&kn(n.year)&&kn(n.month)&&kn(n.day)?{year:n.year,month:n.month,day:n.day}:null}toModel(n){return n&&kn(n.year)&&kn(n.month)&&kn(n.day)?{year:n.year,month:n.month,day:n.day}:null}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Oq=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),e})(),Jk=(()=>{class e{constructor(n,i,r,o){this.i18n=n,this.datepicker=i,this._keyboardService=r,this._service=o}set month(n){this.viewModel=this._service.getMonth(n)}onKeyDown(n){this._keyboardService.processKey(n,this.datepicker)}doSelect(n){!n.context.disabled&&!n.hidden&&this.datepicker.onDateSelect(n.date)}}return e.\u0275fac=function(n){return new(n||e)(L(Lf),L(et(()=>cD)),L(wNe),L(Kk))},e.\u0275cmp=kt({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(n,i){1&n&&Oe("keydown",function(o){return i.onKeyDown(o)})},inputs:{month:"month"},standalone:!0,features:[gi],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){1&n&&(ge(0,_2e,3,2,"div",0),ge(1,D2e,1,1,"ng-template",1)),2&n&&(X("ngIf",i.viewModel.weekdays.length>0),q(1),X("ngForOf",i.viewModel.weeks))},dependencies:[qi,po,wu],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),e})(),cD=(()=>{class e{constructor(n,i,r,o,s,a,l,u){this._service=n,this._calendar=i,this._i18n=r,this._elementRef=a,this._ngbDateAdapter=l,this._ngZone=u,this.injector=tt(uo),this._controlValue=null,this._destroyed$=new ln,this._publicState={},this.navigate=new ke,this.dateSelect=new ke,this.onChange=c=>{},this.onTouched=()=>{},["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(c=>this[c]=o[c]),n.dateSelect$.pipe(jn(this._destroyed$)).subscribe(c=>{this.dateSelect.emit(c)}),n.model$.pipe(jn(this._destroyed$)).subscribe(c=>{const d=c.firstDate,f=this.model?this.model.firstDate:null;this._publicState={maxDate:c.maxDate,minDate:c.minDate,firstDate:c.firstDate,lastDate:c.lastDate,focusedDate:c.focusDate,months:c.months.map(_=>_.firstDate)};let h=!1;if(!d.equals(f)&&(this.navigate.emit({current:f?{year:f.year,month:f.month}:null,next:{year:d.year,month:d.month},preventDefault:()=>h=!0}),h&&null!==f))return void this._service.open(f);const p=c.selectedDate,g=c.focusDate,m=this.model?this.model.focusDate:null;this.model=c,Bg(p,this._controlValue)&&(this._controlValue=p,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(p))),Bg(g,m)&&m&&c.focusVisible&&this.focus(),s.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(n){this._service.focus(yi.from(n))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{const n=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');n&&n.focus()})}navigateTo(n){this._service.open(yi.from(n?n.day?n:{...n,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const n=Ki(this._contentEl.nativeElement,"focusin"),i=Ki(this._contentEl.nativeElement,"focusout"),{nativeElement:r}=this._elementRef;F6(n,i).pipe(Xn(({target:o,relatedTarget:s})=>!(pq(o,"ngb-dp-day")&&pq(s,"ngb-dp-day")&&r.contains(o)&&r.contains(s))),jn(this._destroyed$)).subscribe(({type:o})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===o})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const n={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>n[i]=this[i]),this._service.set(n),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(n){const i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in n).forEach(r=>i[r]=this[r]),this._service.set(i),"startDate"in n){const{currentValue:r,previousValue:o}=n.startDate;Mq(o,r)&&this.navigateTo(this.startDate)}}onDateSelect(n){this._service.focus(n),this._service.select(n,{emitEvent:!0})}onNavigateDateSelect(n){this._service.open(n)}onNavigateEvent(n){switch(n){case Ug.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Ug.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this._service.set({disabled:n})}writeValue(n){this._controlValue=yi.from(this._ngbDateAdapter.fromModel(n)),this._service.select(this._controlValue)}}return e.\u0275fac=function(n){return new(n||e)(L(Kk),L(uD),L(Lf),L(Xk),L(fo),L(Ot),L(Qk),L(Dt))},e.\u0275cmp=kt({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(n,i,r){if(1&n&&fn(r,Oq,7),2&n){let o;yt(o=vt())&&(i.contentTemplateFromContent=o.first)}},viewQuery:function(n,i){if(1&n&&(fa(C2e,7),fa(S2e,7)),2&n){let r;yt(r=vt())&&(i._defaultDayTemplate=r.first),yt(r=vt())&&(i._contentEl=r.first)}},hostVars:2,hostBindings:function(n,i){2&n&&Je("disabled",i.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[Qt([{provide:go,useExisting:et(()=>e),multi:!0},Kk]),Bn,gi],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(n,i){if(1&n&&(ge(0,A2e,1,5,"ng-template",null,0,Pr),ge(2,M2e,1,1,"ng-template",null,1,Pr),$(4,"div",2),ge(5,N2e,1,7,"ngb-datepicker-navigation",3),B(),$(6,"div",4,5),ge(8,O2e,0,0,"ng-template",6),B(),ge(9,k2e,0,0,"ng-template",7)),2&n){const r=co(3);q(5),X("ngIf","none"!==i.navigation),q(1),Je("ngb-dp-months",!i.contentTemplate),q(2),X("ngTemplateOutlet",i.contentTemplate||(null==i.contentTemplateFromContent?null:i.contentTemplateFromContent.templateRef)||r)("ngTemplateOutletContext",cg(7,dq,i))("ngTemplateOutletInjector",i.injector),q(1),X("ngTemplateOutlet",i.footerTemplate)}},dependencies:[qi,po,wu,yNe,Jk,bNe],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),e})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Rq=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Fq(e){const t=Array.from(e.querySelectorAll(Rq)).filter(n=>-1!==n.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Yq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[cD,Jk]}),e})(),Qq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();class Uf{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}}let YNe=(()=>{class e{constructor(n,i){this._el=n,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{_i(this._zone,this._el.nativeElement,(n,i)=>{i&&$g(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return _i(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(n){return new(n||e)(L(Ot),L(Dt))},e.\u0275cmp=kt({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){2&n&&(vc("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Je("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[gi],decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();class Jq{update(t){}close(t){}dismiss(t){}}const KNe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],XNe=["animation","backdropClass"];class QNe{constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ln,this._dismissed=new ln,this._hidden=new ln,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}_applyWindowOptions(t,n){KNe.forEach(i=>{If(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){XNe.forEach(i=>{If(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(jn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(jn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function hq(e){return e&&e.then}(n)?!1!==n&&this._dismiss(t):n.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ve(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),VE(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Oy=(()=>{return(e=Oy||(Oy={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",Oy;var e})();let JNe=(()=>{class e{constructor(n,i,r){this._document=n,this._elRef=i,this._zone=r,this._closed$=new ln,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ke,this.shown=new ln,this.hidden=new ln}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Pg(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=VE(_i(this._zone,n,()=>n.classList.remove("show"),i),_i(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const n={animation:this.animation,runningTransition:"continue"};VE(_i(this._zone,this._elRef.nativeElement,(o,s)=>{s&&$g(o),o.classList.add("show")},n),_i(this._zone,this._dialogEl.nativeElement,()=>{},n)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{Ki(n,"keydown").pipe(jn(this._closed$),Xn(r=>r.which===Ct.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Oy.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ki(this._dialogEl.nativeElement,"mousedown").pipe(jn(this._closed$),Mi(()=>i=!1),xs(()=>Ki(n,"mouseup").pipe(jn(this._closed$),ai(1))),Xn(({target:r})=>n===r)).subscribe(()=>{i=!0}),Ki(n,"click").pipe(jn(this._closed$)).subscribe(({target:r})=>{n===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Oy.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const i=n.querySelector("[ngbAutofocus]"),r=Fq(n)[0];(i||r||n).focus()}}_restoreFocus(){const n=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&n.contains(i)?i:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&_i(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(n){return new(n||e)(L(hn),L(Ot),L(Dt))},e.\u0275cmp=kt({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(1&n&&fa(I2e,7),2&n){let r;yt(r=vt())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){2&n&&(Et("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),vc("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Je("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[gi],ngContentSelectors:rD,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,i){1&n&&(N0(),$(0,"div",0,1)(2,"div",2),O0(3),B()()),2&n&&vc("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),ZNe=(()=>{class e{constructor(n){this._document=n}hide(){const n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(n>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=s),r.overflow=o}}}return e.\u0275fac=function(n){return new(n||e)(fe(hn))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eOe=(()=>{class e{constructor(n,i,r,o,s,a,l){this._applicationRef=n,this._injector=i,this._environmentInjector=r,this._document=o,this._scrollBar=s,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new ln,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new ke,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const u=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{e.runOutsideAngular(()=>{const r=Ki(t,"focusin").pipe(jn(n),Xe(o=>o.target));Ki(t,"keydown").pipe(jn(n),Xn(o=>o.which===Ct.Tab),nk(r)).subscribe(([o,s])=>{const[a,l]=Fq(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&Ki(t,"click").pipe(jn(n),nk(r),Xe(o=>o[1])).subscribe(o=>o.focus())})})(this._ngZone,u.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(u.location.nativeElement)}})}_restoreScrollBar(){const n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){const o=r.container instanceof HTMLElement?r.container:If(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new Jq,l=(n=r.injector||n).get(Ds,null)||this._environmentInjector,u=this._getContentRef(n,l,i,a,r);let c=!1!==r.backdrop?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,u.nodes),f=new QNe(d,u,c,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.hidden.pipe(ai(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=h=>{f.close(h)},a.dismiss=h=>{f.dismiss(h)},a.update=h=>{f.update(h)},f.update(r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),c&&c.instance&&c.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=HN(YNe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=HN(JNe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_getContentRef(n,i,r,o,s){return r?r instanceof dn?this._createFromTemplateRef(r,o):Pg(r)?this._createFromString(r):this._createFromComponent(n,i,r,o,s):new Uf([])}_createFromTemplateRef(n,i){const o=n.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Uf([o.rootNodes],o)}_createFromString(n){const i=this._document.createTextNode(`${n}`);return new Uf([[i]])}_createFromComponent(n,i,r,o,s){const l=HN(r,{environmentInjector:i,elementInjector:uo.create({providers:[{provide:Jq,useValue:o}],parent:n})}),u=l.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Uf([[u]],l.hostView,l)}_setAriaHidden(n){const i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const i=()=>{const r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(n){return new(n||e)(fe(Df),fe(uo),fe(Ds),fe(hn),fe(ZNe),fe(zp),fe(Dt))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tOe=(()=>{class e{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(fe(Rf))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Zq=(()=>{class e{constructor(n,i,r){this._injector=n,this._modalStack=i,this._config=r}open(n,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(n){return new(n||e)(fe(uo),fe(eOe),fe(tOe))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({providers:[Zq]}),e})();const aOe=({classList:e})=>(e.remove("show"),()=>e.remove("active")),lOe=(e,t)=>{t&&$g(e),e.classList.add("show")};let nI=(()=>{class e{constructor(n){this.elRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(Ot))},e.\u0275dir=ve({type:e,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(n,i){2&n&&(Ho("id",i.item.panelDomId),Et("role",i.role?i.role:i.nav.roles?"tabpanel":void 0)("aria-labelledby",i.item.domId),Je("fade",i.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),e})(),iY=(()=>{class e{constructor(n,i){this._cd=n,this._ngZone=i,this._activePane=null}isPanelTransitioning(n){return this._activePane?.item===n}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(jn(this.nav.destroy$),_E(this._activePane?.item||null),tk(),function aTe(e){return Xn((t,n)=>e<=n)}(1)).subscribe(n=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?_i(this._ngZone,this._activePane.elRef.nativeElement,aOe,i).subscribe(()=>{const r=this._activePane?.item;this._activePane=this._getPaneForItem(n),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),_i(this._ngZone,this._activePane.elRef.nativeElement,lOe,i).subscribe(()=>{n&&(n.shown.emit(),this.nav.shown.emit(n.id))})),r&&(r.hidden.emit(),this.nav.hidden.emit(r.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(n){return this._panes&&this._panes.find(i=>i.item===n)||null}_getActivePane(){return this._panes&&this._panes.find(n=>n.item.active)||null}}return e.\u0275fac=function(n){return new(n||e)(L(fo),L(Dt))},e.\u0275cmp=kt({type:e,selectors:[["","ngbNavOutlet",""]],viewQuery:function(n,i){if(1&n&&fa(nI,5),2&n){let r;yt(r=vt())&&(i._panes=r)}},hostVars:2,hostBindings:function(n,i){2&n&&Je("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[gi],attrs:R2e,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){1&n&&ge(0,L2e,1,1,"ng-template",0),2&n&&X("ngForOf",i.nav.items)},dependencies:[nI,po,qi,wu],encapsulation:2,changeDetection:0}),e})(),rY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[iY]}),e})(),uOe=(()=>{class e{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),oY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),e})(),sY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),e})(),aY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),e})(),lY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),e})(),uY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),e})(),cY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),e})(),dY=(()=>{class e{constructor(n){this.templateRef=n}}return e.\u0275fac=function(n){return new(n||e)(L(dn))},e.\u0275dir=ve({type:e,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),e})(),fY=(()=>{class e{constructor(n){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new ke(!0),this.disabled=n.disabled,this.boundaryLinks=n.boundaryLinks,this.directionLinks=n.directionLinks,this.ellipses=n.ellipses,this.maxSize=n.maxSize,this.pageSize=n.pageSize,this.rotate=n.rotate,this.size=n.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(n){this._updatePages(n)}ngOnChanges(n){this._updatePages(this.page)}isEllipsis(n){return-1===n}_applyEllipses(n,i){this.ellipses&&(n>0&&(n>2?this.pages.unshift(-1):2===n&&this.pages.unshift(2),this.pages.unshift(1)),i<this.pageCount&&(i<this.pageCount-2?this.pages.push(-1):i===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let n=0,i=this.pageCount,r=Math.floor(this.maxSize/2);return this.page<=r?i=this.maxSize:this.pageCount-this.page<r?n=this.pageCount-this.maxSize:(n=this.page-r-1,i=this.page+(this.maxSize%2==0?r-1:r)),[n,i]}_applyPagination(){let i=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[i,i+this.maxSize]}_setPageInRange(n){const i=this.page;this.page=oD(n,this.pageCount,1),this.page!==i&&Hn(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(n){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Hn(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let i=1;i<=this.pageCount;i++)this.pages.push(i);if(this._setPageInRange(n),this.maxSize>0&&this.pageCount>this.maxSize){let i=0,r=this.pageCount;[i,r]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(i,r),this._applyEllipses(i,r)}}}return e.\u0275fac=function(n){return new(n||e)(L(uOe))},e.\u0275cmp=kt({type:e,selectors:[["ngb-pagination"]],contentQueries:function(n,i,r){if(1&n&&(fn(r,oY,5),fn(r,sY,5),fn(r,aY,5),fn(r,lY,5),fn(r,uY,5),fn(r,cY,5),fn(r,dY,5)),2&n){let o;yt(o=vt())&&(i.tplEllipsis=o.first),yt(o=vt())&&(i.tplFirst=o.first),yt(o=vt())&&(i.tplLast=o.first),yt(o=vt())&&(i.tplNext=o.first),yt(o=vt())&&(i.tplNumber=o.first),yt(o=vt())&&(i.tplPrevious=o.first),yt(o=vt())&&(i.tplPages=o.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[Bn,gi],decls:20,vars:12,consts:function(){let t,n,i,r,o,s,a,l;return t=$localize`:@@ngb.pagination.first:`,n=$localize`:@@ngb.pagination.previous:`,i=$localize`:@@ngb.pagination.next:`,r=$localize`:@@ngb.pagination.last:`,o=$localize`:@@ngb.pagination.first-aria:First`,s=$localize`:@@ngb.pagination.previous-aria:Previous`,a=$localize`:@@ngb.pagination.next-aria:Next`,l=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],t,n,i,r,["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",o,"href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",a,"href","",1,"page-link",3,"click"],["aria-label",l,"href","",1,"page-link",3,"click"]]},template:function(n,i){if(1&n&&(ge(0,$2e,2,0,"ng-template",null,0,Pr),ge(2,B2e,2,0,"ng-template",null,1,Pr),ge(4,U2e,2,0,"ng-template",null,2,Pr),ge(6,V2e,2,0,"ng-template",null,3,Pr),ge(8,j2e,1,0,"ng-template",null,4,Pr),ge(10,H2e,1,1,"ng-template",null,5,Pr),ge(12,Q2e,1,1,"ng-template",null,6,Pr),$(14,"ul"),ge(15,Z2e,3,9,"li",7),ge(16,nMe,3,8,"li",7),ge(17,iMe,0,0,"ng-template",8),ge(18,oMe,3,9,"li",7),ge(19,aMe,3,9,"li",7),B()),2&n){const r=co(13);q(14),vc("pagination"+(i.size?" pagination-"+i.size:"")),q(1),X("ngIf",i.boundaryLinks),q(1),X("ngIf",i.directionLinks),q(1),X("ngTemplateOutlet",(null==i.tplPages?null:i.tplPages.templateRef)||r)("ngTemplateOutletContext",gN(8,lMe,i.page,i.pages,i.disabled)),q(1),X("ngIf",i.directionLinks),q(1),X("ngIf",i.boundaryLinks)}},dependencies:[qi,po,wu],encapsulation:2,changeDetection:0}),e})(),hY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[fY]}),e})(),gY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})(),gOe=(()=>{class e{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mOe=(()=>{class e{constructor(n){this.value=0,this.max=n.max,this.animated=n.animated,this.ariaLabel=n.ariaLabel,this.striped=n.striped,this.textType=n.textType,this.type=n.type,this.showValue=n.showValue,this.height=n.height}set max(n){this._max=!Hn(n)||n<=0?100:n}get max(){return this._max}getValue(){return oD(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return e.\u0275fac=function(n){return new(n||e)(L(gOe))},e.\u0275cmp=kt({type:e,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(n,i){2&n&&(Et("aria-valuenow",i.getValue())("aria-valuemax",i.max)("aria-label",i.ariaLabel),og("height",i.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[gi],ngContentSelectors:rD,decls:3,vars:11,consts:function(){let t;return t=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],t]},template:function(n,i){1&n&&(N0(),$(0,"div"),ge(1,dMe,3,3,"span",0),O0(2),B()),2&n&&(gV("progress-bar",i.type?i.textType?" bg-"+i.type:" text-bg-"+i.type:"","",i.textType?" text-"+i.textType:"",""),og("width",i.getPercentValue(),"%"),Je("progress-bar-animated",i.animated)("progress-bar-striped",i.striped),q(1),X("ngIf",i.showValue))},dependencies:[qi,$H],encapsulation:2,changeDetection:0}),e})(),mY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[mOe]}),e})(),_Oe=(()=>{class e{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yOe=(()=>{class e{constructor(n,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new ke,this.leave=new ke,this.rateChange=new ke(!0),this.onChange=r=>{},this.onTouched=()=>{},this.max=n.max,this.readonly=n.readonly,this.tabindex=n.tabindex}ariaValueText(n,i){return`${n} out of ${i}`}isInteractive(){return!this.readonly&&!this.disabled}enter(n){this.isInteractive()&&this._updateState(n),this.hover.emit(n)}handleBlur(){this.onTouched()}handleClick(n){this.isInteractive()&&this.update(this.resettable&&this.rate===n?0:n)}handleKeyDown(n){switch(n.which){case Ct.ArrowDown:case Ct.ArrowLeft:this.update(this.rate-1);break;case Ct.ArrowUp:case Ct.ArrowRight:this.update(this.rate+1);break;case Ct.Home:this.update(0);break;case Ct.End:this.update(this.max);break;default:return}n.preventDefault()}ngOnChanges(n){n.rate&&this.update(this.rate),n.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(n){this.disabled=n}update(n,i=!0){const r=oD(n,this.max,0);this.isInteractive()&&this.rate!==r&&(this.rate=r,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(n){this.update(n,!1),this._changeDetectorRef.markForCheck()}_updateState(n){this.nextRate=n,this.contexts.forEach((i,r)=>i.fill=Math.round(100*oD(n-r,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(n,i)=>({fill:0,index:i}))}}return e.\u0275fac=function(n){return new(n||e)(L(_Oe),L(fo))},e.\u0275cmp=kt({type:e,selectors:[["ngb-rating"]],contentQueries:function(n,i,r){if(1&n&&fn(r,dn,5),2&n){let o;yt(o=vt())&&(i.starTemplateFromContent=o.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(n,i){1&n&&Oe("blur",function(){return i.handleBlur()})("keydown",function(o){return i.handleKeyDown(o)})("mouseleave",function(){return i.reset()}),2&n&&(Ho("tabindex",i.disabled?-1:i.tabindex),Et("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText(i.nextRate,i.max))("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[Qt([{provide:go,useExisting:et(()=>e),multi:!0}]),Bn,gi],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){1&n&&(ge(0,fMe,1,1,"ng-template",null,0,Pr),ge(2,pMe,4,5,"ng-template",1)),2&n&&(q(2),X("ngForOf",i.contexts))},dependencies:[po,wu],encapsulation:2,changeDetection:0}),e})(),_Y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[yOe]}),e})();class yY{constructor(t,n,i){this.hour=Qi(t),this.minute=Qi(n),this.second=Qi(i)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=Hn(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){Hn(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){Hn(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return Hn(this.hour)&&Hn(this.minute)&&(!t||Hn(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let vOe=(()=>{class e{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return function bOe(){return new wOe}()},providedIn:"root"}),e})(),wOe=(()=>{class e extends vY{fromModel(n){return n&&kn(n.hour)&&kn(n.minute)?{hour:n.hour,minute:n.minute,second:kn(n.second)?n.second:null}:null}toModel(n){return n&&kn(n.hour)&&kn(n.minute)?{hour:n.hour,minute:n.minute,second:kn(n.second)?n.second:null}:null}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Un(e)))(i||e)}}(),e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),bY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(n){let i=null;return i=n?new n:function EOe(e){return new DOe(e)}(fe(zo)),i},providedIn:"root"}),e})(),DOe=(()=>{class e extends bY{constructor(n){super(),this._periods=vH(n,bn.Standalone,st.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return e.\u0275fac=function(n){return new(n||e)(fe(zo))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const COe=/[^0-9]/g;let SOe=(()=>{class e{constructor(n,i,r,o){this._config=n,this._ngbTimeAdapter=i,this._cd=r,this.i18n=o,this.onChange=s=>{},this.onTouched=()=>{},this.meridian=n.meridian,this.spinners=n.spinners,this.seconds=n.seconds,this.hourStep=n.hourStep,this.minuteStep=n.minuteStep,this.secondStep=n.secondStep,this.disabled=n.disabled,this.readonlyInputs=n.readonlyInputs,this.size=n.size}set hourStep(n){this._hourStep=kn(n)?n:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(n){this._minuteStep=kn(n)?n:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(n){this._secondStep=kn(n)?n:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(n){const i=this._ngbTimeAdapter.fromModel(n);this.model=i?new yY(i.hour,i.minute,i.second):new yY,!this.seconds&&(!i||!Hn(i.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}changeHour(n){this.model?.changeHour(n),this.propagateModelChange()}changeMinute(n){this.model?.changeMinute(n),this.propagateModelChange()}changeSecond(n){this.model?.changeSecond(n),this.propagateModelChange()}updateHour(n){const i=!!this.model&&this.model.hour>=12,r=Qi(n);this.model?.updateHour(this.meridian&&(i&&r<12||!i&&12===r)?r+12:r),this.propagateModelChange()}updateMinute(n){this.model?.updateMinute(Qi(n)),this.propagateModelChange()}updateSecond(n){this.model?.updateSecond(Qi(n)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(n){n.value=n.value.replace(COe,"")}formatHour(n){return Hn(n)?Lg(this.meridian?n%12==0?12:n%12:n%24):Lg(NaN)}formatMinSec(n){return Lg(Hn(n)?n:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(n){n.seconds&&!this.seconds&&this.model&&!Hn(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(n=!0){n&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return e.\u0275fac=function(n){return new(n||e)(L(vOe),L(vY),L(fo),L(bY))},e.\u0275cmp=kt({type:e,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[Qt([{provide:go,useExisting:et(()=>e),multi:!0}]),Bn,gi],decls:16,vars:25,consts:function(){let t,n,i,r,o,s,a,l,u,c,d,f,h,p;return t=$localize`:@@ngb.timepicker.HH:HH`,n=$localize`:@@ngb.timepicker.hours:Hours`,i=$localize`:@@ngb.timepicker.MM:MM`,r=$localize`:@@ngb.timepicker.minutes:Minutes`,o=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,s=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,a=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,l=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,u=$localize`:@@ngb.timepicker.SS:SS`,c=$localize`:@@ngb.timepicker.seconds:Seconds`,d=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,f=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,h=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,p=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",t,"aria-label",n,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",i,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],o,[1,"chevron","ngb-tp-chevron","bottom"],s,a,l,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",u,"aria-label",c,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],d,f,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],h,p]},template:function(n,i){1&n&&($(0,"fieldset",0)(1,"div",1)(2,"div",2),ge(3,gMe,4,7,"button",3),$(4,"input",4),Oe("change",function(o){return i.updateHour(o.target.value)})("blur",function(){return i.handleBlur()})("input",function(o){return i.formatInput(o.target)})("keydown.ArrowUp",function(o){return i.changeHour(i.hourStep),o.preventDefault()})("keydown.ArrowDown",function(o){return i.changeHour(-i.hourStep),o.preventDefault()}),B(),ge(5,mMe,4,7,"button",3),B(),$(6,"div",5),Y(7,":"),B(),$(8,"div",6),ge(9,_Me,4,7,"button",3),$(10,"input",7),Oe("change",function(o){return i.updateMinute(o.target.value)})("blur",function(){return i.handleBlur()})("input",function(o){return i.formatInput(o.target)})("keydown.ArrowUp",function(o){return i.changeMinute(i.minuteStep),o.preventDefault()})("keydown.ArrowDown",function(o){return i.changeMinute(-i.minuteStep),o.preventDefault()}),B(),ge(11,yMe,4,7,"button",3),B(),ge(12,vMe,2,0,"div",8),ge(13,EMe,4,9,"div",9),ge(14,DMe,1,0,"div",8),ge(15,AMe,5,9,"div",10),B()()),2&n&&(Je("disabled",i.disabled),X("disabled",i.disabled),q(3),X("ngIf",i.spinners),q(1),Je("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),X("value",i.formatHour(null==i.model?null:i.model.hour))("readOnly",i.readonlyInputs)("disabled",i.disabled),q(1),X("ngIf",i.spinners),q(4),X("ngIf",i.spinners),q(1),Je("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),X("value",i.formatMinSec(null==i.model?null:i.model.minute))("readOnly",i.readonlyInputs)("disabled",i.disabled),q(1),X("ngIf",i.spinners),q(1),X("ngIf",i.seconds),q(1),X("ngIf",i.seconds),q(1),X("ngIf",i.meridian),q(1),X("ngIf",i.meridian))},dependencies:[qi],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),e})(),wY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[SOe]}),e})();const AOe=(e,t)=>{const{classList:n}=e;if(t)return n.add("fade"),$g(e),n.add("show","showing"),()=>{n.remove("showing")};n.add("show")},TOe=({classList:e})=>(e.add("showing"),()=>{e.remove("show","showing")});let xOe=(()=>{class e{constructor(n){this._ngbConfig=n,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(fe(Rf))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),MOe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ve({type:e,selectors:[["","ngbToastHeader",""]],standalone:!0}),e})(),NOe=(()=>{class e{constructor(n,i,r,o){this.ariaLive=n,this._zone=r,this._element=o,this.contentHeaderTpl=null,this.shown=new ke,this.hidden=new ke,null==this.ariaLive&&(this.ariaLive=i.ariaLive),this.delay=i.delay,this.autohide=i.autohide,this.animation=i.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(n){"autohide"in n&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const n=_i(this._zone,this._element.nativeElement,TOe,{animation:this.animation,runningTransition:"stop"});return n.subscribe(()=>{this.hidden.emit()}),n}show(){const n=_i(this._zone,this._element.nativeElement,AOe,{animation:this.animation,runningTransition:"continue"});return n.subscribe(()=>{this.shown.emit()}),n}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return e.\u0275fac=function(n){return new(n||e)(mc("aria-live"),L(xOe),L(Dt),L(Ot))},e.\u0275cmp=kt({type:e,selectors:[["ngb-toast"]],contentQueries:function(n,i,r){if(1&n&&fn(r,MOe,7,dn),2&n){let o;yt(o=vt())&&(i.contentHeaderTpl=o.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(n,i){2&n&&(Et("aria-live",i.ariaLive),Je("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[Bn,gi],ngContentSelectors:rD,decls:5,vars:1,consts:function(){let t;return t=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(n,i){1&n&&(N0(),ge(0,TMe,2,1,"ng-template",null,0,Pr),ge(2,MMe,3,1,"ng-template",1),$(3,"div",2),O0(4),B()),2&n&&(q(2),X("ngIf",i.contentHeaderTpl||i.header))},dependencies:[qi,wu],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),e})(),EY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[NOe]}),e})(),DY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})(),OOe=(()=>{class e{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(n){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const i=fq(this.result),r=Array.isArray(this.term)?this.term:[this.term],o=u=>this.accentSensitive?u:gq(u),s=r.map(u=>function FMe(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(o(fq(u)))).filter(u=>u),a=this.accentSensitive?i:gq(i),l=s.length?a.split(new RegExp(`(${s.join("|")})`,"gmi")):[i];if(this.accentSensitive)this.parts=l;else{let u=0;this.parts=l.map(c=>i.substring(u,u+=c.length))}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=kt({type:e,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[Bn,gi],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(n,i){1&n&&ge(0,kMe,3,2,"ng-template",0),2&n&&X("ngForOf",i.parts)},dependencies:[qi,po],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),e})();new Ie("live announcer delay",{providedIn:"root",factory:function kOe(){return 100}});let CY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[OOe]}),e})(),SY=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({}),e})();const IOe=[Cq,Sq,Tq,xq,Yq,Qq,eY,rY,SY,hY,gY,mY,_Y,wY,EY,DY,CY];let ROe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({imports:[IOe,Cq,Sq,Tq,xq,Yq,Qq,eY,rY,SY,hY,gY,mY,_Y,wY,EY,DY,CY]}),e})(),FOe=(()=>{const t=class{constructor(i,r,o){this.apparelService=i,this.modalService=r,this.viewportScroller=o,this.logos=jAe.U,this.selectedLogos=[]}ngOnInit(){this.selectedLogos=[];for(var i=0;i<=5;i++){let r="";do{r=this.logos[this.getRandomInt(20)]}while(this.selectedLogos.includes(r));this.selectedLogos.push(r)}}open(i){this.modalService.open(i)}onExploreMore(){this.apparelService.setExploreMore()}getRandomInt(i){return Math.floor(Math.random()*i)}onClick(i){this.viewportScroller.scrollToAnchor(i)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(Dg),L(Zq),L(Y0))},t.\u0275cmp=kt({type:t,selectors:[["intro"]],decls:32,vars:10,consts:[[1,"intro","wikirate-box"],[1,"wikirate-container"],[1,"row","mt-5","mb-3"],[1,"col-md-8","nopadding"],[1,"showcase-main-title","call-to-action-title"],[1,"highlight-text"],[1,"main-text"],[1,"col-md-4"],[1,"row"],[1,"scroll",3,"click"],[1,"bi","bi-chevron-down"],[1,"ml-2"],[1,"animation","d-none","d-md-block"],[1,"logo-1","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-img",3,"src"],[1,"logo-2","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"],[1,"logo-3","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-4","d-block","corporate-logo-xl","rounded-circle","p-3","bg-white","shadow-lg","ml-auto"],[1,"logo-5","d-block","corporate-logo-xl","bg-white","rounded-circle","shadow-lg","p-3","ms-auto"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),Y(6,"Apparel 100"),B(),Re(7,"br"),Y(8," an ESG data and supply chain transparency showcase "),B(),Re(9,"br"),$(10,"div",6)(11,"p"),Y(12,"Discover what we do and don't know about the top 100 apparel companies through interactive maps and infographics. "),B(),$(13,"p"),Y(14,"WikiRate's biggest data showcase unearths; who the top 100 are, how much we know about their environmental, social and governance performance, and where their suppliers are located."),B()()(),Re(15,"div",7),B(),$(16,"div",8)(17,"a",9),Oe("click",function(){return o.onClick("market-cap-map")}),Re(18,"i",10),$(19,"span",11),Y(20,"Scroll down"),B()()()()(),$(21,"div",12)(22,"div",13),Re(23,"img",14),B(),$(24,"div",15),Re(25,"img",14),B(),$(26,"div",16),Re(27,"img",14),B(),$(28,"div",17),Re(29,"img",14),B(),$(30,"div",18),Re(31,"img",14),B()()),2&r&&(q(22),X("@slide-in",void 0),q(1),sl("src",o.selectedLogos[0],Vo),q(1),X("@slide-in-delay-sm",void 0),q(1),sl("src",o.selectedLogos[1],Vo),q(1),X("@slide-in-delay-md",void 0),q(1),sl("src",o.selectedLogos[2],Vo),q(1),X("@slide-in-delay-lg",void 0),q(1),sl("src",o.selectedLogos[3],Vo),q(1),X("@slide-in-delay-xl",void 0),q(1),sl("src",o.selectedLogos[4],Vo))},styles:[".intro[_ngcontent-%COMP%]{min-height:450px;display:flex;align-items:center}h1.showcase-main-title[_ngcontent-%COMP%]{font-style:normal;font-weight:400!important;font-size:2.6rem;line-height:135%;color:#484c9d;max-width:600px}.main-text[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:1.25rem;color:#34343b;line-height:155%;margin-bottom:30px;max-width:600px}.corporate-logo-xl[_ngcontent-%COMP%]{height:5.25rem;width:5.25rem;position:relative}.corporate-logo-sm[_ngcontent-%COMP%]{height:4.25rem;width:4.25rem;position:relative}.logo-1[_ngcontent-%COMP%]{position:absolute;left:85%;right:15%;top:7em}.logo-2[_ngcontent-%COMP%]{position:absolute;left:65%;right:35%;top:17em}.logo-3[_ngcontent-%COMP%]{position:absolute;left:93%;right:7%;top:23em}.logo-4[_ngcontent-%COMP%]{position:absolute;left:80%;right:20%;top:30em}.logo-5[_ngcontent-%COMP%]{position:absolute;left:64%;right:36%;top:39em}a.scroll[_ngcontent-%COMP%]{color:#f7733d;cursor:pointer;text-decoration:inherit}"],data:{animation:[gy("slide-in",[_y(":enter",[Ns({opacity:0,transform:"translateY(50px)"}),my("600ms 50ms",Ns({opacity:1,transform:"translateY(0)"}))])]),gy("slide-in-delay-sm",[_y(":enter",[Ns({opacity:0,transform:"translateY(50px)"}),my("600ms 150ms",Ns({opacity:1,transform:"translateY(0)"}))])]),gy("slide-in-delay-md",[_y(":enter",[Ns({opacity:0,transform:"translateY(50px)"}),my("600ms 250ms",Ns({opacity:1,transform:"translateY(0)"}))])]),gy("slide-in-delay-lg",[_y(":enter",[Ns({opacity:0,transform:"translateY(50px)"}),my("600ms 350ms",Ns({opacity:1,transform:"translateY(0)"}))])]),gy("slide-in-delay-xl",[_y(":enter",[Ns({opacity:0,transform:"translateY(50px)"}),my("600ms 450ms",Ns({opacity:1,transform:"translateY(0)"}))])])]}}),e})();function AY(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(i,r)}function vi(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function s(l){AY(o,i,r,s,a,"next",l)}function a(l){AY(o,i,r,s,a,"throw",l)}s(void 0)})}}var POe=_t(564),iI=_t.n(POe);function mo(e,t,n){return e.fields=t||[],e.fname=n,e}function zn(e){return null==e?null:e.fname}function _r(e){return null==e?null:e.fields}function TY(e){return 1===e.length?LOe(e[0]):$Oe(e)}const LOe=e=>function(t){return t[e]},$Oe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ee(e){throw Error(e)}function gl(e){const t=[],n=e.length;let s,a,l,i=null,r=0,o="";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(e+="",s=a=0;a<n;++a)if(l=e[a],"\\"===l)o+=e.substring(s,a++),s=a;else if(l===i)u(),i=null,r=-1;else{if(i)continue;s===r&&'"'===l||s===r&&"'"===l?(s=a+1,i=l):"."!==l||r?"["===l?(a>s&&u(),r=s=a+1):"]"===l&&(r||ee("Access path missing open bracket: "+e),r>0&&u(),r=0,s=a+1):a>s?u():s=a+1}return r&&ee("Access path missing closing bracket: "+e),i&&ee("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function ks(e,t,n){const i=gl(e);return e=1===i.length?i[0]:e,mo((n&&n.get||TY)(i),[e],t||e)}const Iy=ks("id"),yr=mo(e=>e,[],"identity"),Pc=mo(()=>0,[],"zero"),Hg=mo(()=>1,[],"one"),Is=mo(()=>!0,[],"true"),Lc=mo(()=>!1,[],"false");function BOe(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const xY=0,rI=1,oI=2,MY=3,NY=4;function sI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BOe,i=e||xY;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=rI&&n(t||"error","ERROR",arguments),this},warn(){return i>=oI&&n(t||"warn","WARN",arguments),this},info(){return i>=MY&&n(t||"log","INFO",arguments),this},debug(){return i>=NY&&n(t||"log","DEBUG",arguments),this}}}var te=Array.isArray;function Ee(e){return e===Object(e)}const OY=e=>"__proto__"!==e;function zg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)"signals"===o?i.signals=UOe(i.signals,r.signals):Gg(i,o,r[o],"legend"===o?{layout:1}:"style"===o||null);return i},{})}function Gg(e,t,n,i){if(!OY(t))return;let r,o;if(Ee(n)&&!te(n))for(r in o=Ee(e[t])?e[t]:e[t]={},n)i&&(!0===i||i[r])?Gg(o,r,n[r]):OY(r)&&(o[r]=n[r]);else e[t]=n}function UOe(e,t){if(null==e)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function St(e){return e[e.length-1]}function vr(e){return null==e||""===e?null:+e}const kY=e=>t=>e*Math.exp(t),IY=e=>t=>Math.log(e*t),RY=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),FY=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,yD=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function vD(e,t,n,i){const r=n(e[0]),o=n(St(e)),s=(o-r)*t;return[i(r-s),i(o-s)]}function PY(e,t){return vD(e,t,vr,yr)}function LY(e,t){var n=Math.sign(e[0]);return vD(e,t,IY(n),kY(n))}function $Y(e,t,n){return vD(e,t,yD(n),yD(1/n))}function BY(e,t,n){return vD(e,t,RY(n),FY(n))}function bD(e,t,n,i,r){const o=i(e[0]),s=i(St(e)),a=null!=t?i(t):(o+s)/2;return[r(a+(o-a)*n),r(a+(s-a)*n)]}function aI(e,t,n){return bD(e,t,n,vr,yr)}function lI(e,t,n){const i=Math.sign(e[0]);return bD(e,t,n,IY(i),kY(i))}function wD(e,t,n,i){return bD(e,t,n,yD(i),yD(1/i))}function uI(e,t,n,i){return bD(e,t,n,RY(i),FY(i))}function UY(e){return 1+~~(new Date(e).getMonth()/3)}function VY(e){return 1+~~(new Date(e).getUTCMonth()/3)}function De(e){return null!=e?te(e)?e:[e]:[]}function jY(e,t,n){let o,i=e[0],r=e[1];return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function lt(e){return"function"==typeof e}const VOe="descending";function cI(e,t,n){n=n||{},t=De(t)||[];const i=[],r=[],o={},s=n.comparator||jOe;return De(e).forEach((a,l)=>{null!=a&&(i.push(t[l]===VOe?-1:1),r.push(a=lt(a)?a:ks(a,null,n)),(_r(a)||[]).forEach(u=>o[u]=1))}),0===r.length?null:mo(s(r,i),Object.keys(o))}const ED=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),jOe=(e,t)=>1===e.length?HOe(e[0],t[0]):zOe(e,t,e.length),HOe=(e,t)=>function(n,i){return ED(e(n),e(i))*t},zOe=(e,t,n)=>(t.push(0),function(i,r){let o,s=0,a=-1;for(;0===s&&++a<n;)o=e[a],s=ED(o(i),o(r));return s*t[a]});function br(e){return lt(e)?e:()=>e}function dI(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function ut(e){for(let t,n,i=1,r=arguments.length;i<r;++i)for(n in t=arguments[i],t)e[n]=t[n];return e}function ml(e,t){let i,r,o,s,n=0;if(e&&(i=e.length))if(null==t){for(r=e[n];n<i&&(null==r||r!=r);r=e[++n]);for(o=s=r;n<i;++n)r=e[n],null!=r&&(r<o&&(o=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(null==r||r!=r);r=t(e[++n]));for(o=s=r;n<i;++n)r=t(e[n]),null!=r&&(r<o&&(o=r),r>s&&(s=r))}return[o,s]}function HY(e,t){const n=e.length;let r,o,s,a,l,i=-1;if(null==t){for(;++i<n;)if(o=e[i],null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=e[i],null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=t(e[i],i,e),null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}return[a,l]}const GOe=Object.prototype.hasOwnProperty;function Ae(e,t){return GOe.call(e,t)}const DD={};function Wg(e){let n,t={};function i(o){return Ae(t,o)&&t[o]!==DD}const r={size:0,empty:0,object:t,has:i,get:o=>i(o)?t[o]:void 0,set(o,s){return i(o)||(++r.size,t[o]===DD&&--r.empty),t[o]=s,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=DD),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==DD&&(!n||!n(l))&&(o[a]=l,++s)}r.size=s,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function zY(e,t,n,i,r,o){if(!n&&0!==n)return o;const s=+n;let u,a=e[0],l=St(e);l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?i:c<=s?r:o}function ye(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ut(i,n)}function qg(e,t,n,i){let s,r=t[0],o=t[t.length-1];return r>o&&(s=r,r=o,o=s),i=void 0===i||i,((n=void 0===n||n)?r<=e:r<e)&&(i?e<=o:e<o)}function $c(e){return"boolean"==typeof e}function Bc(e){return"[object Date]"===Object.prototype.toString.call(e)}function GY(e){return e&&lt(e[Symbol.iterator])}function Ft(e){return"number"==typeof e}function WY(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function Ce(e){return"string"==typeof e}function fI(e,t,n){e&&(e=t?De(e).map(a=>a.replace(/\\(.)/g,"$1")):De(e));const i=e&&e.length,r=n&&n.get||TY,o=a=>r(t?[a]:gl(a));let s;if(i)if(1===i){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}else s=function(){return""};return mo(s,e,"key")}function qY(e,t){const n=e[0],i=St(e),r=+t;return r?1===r?i:n+r*(i-n):n}const WOe=1e4;function YY(e){let t,n,i;e=+e||WOe;const r=()=>{t={},n={},i=0},o=(s,a)=>(++i>e&&(n=t,t={},i=1),t[s]=a);return r(),{clear:r,has:s=>Ae(t,s)||Ae(n,s),get:s=>Ae(t,s)?t[s]:Ae(n,s)?o(s,n[s]):void 0,set:(s,a)=>Ae(t,s)?t[s]=a:o(s,a)}}function KY(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const s=i||new t.constructor(r+o);let a=0,l=0,u=0;for(;a<r&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<r;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function Ry(e,t){let n="";for(;--t>=0;)n+=e;return n}function XY(e,t,n,i){const r=n||" ",o=e+"",s=t-o.length;return s<=0?o:"left"===i?Ry(r,s)+o:"center"===i?Ry(r,~~(s/2))+o+Ry(r,Math.ceil(s/2)):o+Ry(r,s)}function Fy(e){return e&&St(e)-e[0]||0}function me(e){return te(e)?"["+e.map(me)+"]":Ee(e)||Ce(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function hI(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const qOe=e=>Ft(e)||Bc(e)?e:Date.parse(e);function pI(e,t){return t=t||qOe,null==e||""===e?null:t(e)}function gI(e){return null==e||""===e?null:e+""}function _a(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function QY(e,t,n,i){const r=i??"\u2026",o=e+"",s=o.length,a=Math.max(0,t-r.length);return s<=t?o:"left"===n?r+o.slice(s-a):"center"===n?o.slice(0,Math.ceil(a/2))+r+o.slice(s-~~(a/2)):o.slice(0,a)+r}function Uc(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var JY={},mI={},_I=34,Py=10,yI=13;function ZY(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function eK(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function _o(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function QOe(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(d,f){var _,h=[],p=d.length,g=0,m=0,y=p<=0,v=!1;function b(){if(y)return mI;if(v)return v=!1,JY;var D,S,E=g;if(d.charCodeAt(E)===_I){for(;g++<p&&d.charCodeAt(g)!==_I||d.charCodeAt(++g)===_I;);return(D=g)>=p?y=!0:(S=d.charCodeAt(g++))===Py?v=!0:S===yI&&(v=!0,d.charCodeAt(g)===Py&&++g),d.slice(E+1,D-1).replace(/""/g,'"')}for(;g<p;){if((S=d.charCodeAt(D=g++))===Py)v=!0;else if(S===yI)v=!0,d.charCodeAt(g)===Py&&++g;else if(S!==n)continue;return d.slice(E,D)}return y=!0,d.slice(E,p)}for(d.charCodeAt(p-1)===Py&&--p,d.charCodeAt(p-1)===yI&&--p;(_=b())!==mI;){for(var w=[];_!==JY&&_!==mI;)w.push(_),_=b();f&&null==(w=f(w,m++))||h.push(w)}return h}function o(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function u(d){return d.map(c).join(e)}function c(d){return null==d?"":d instanceof Date?function XOe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function KOe(e){return e<0?"-"+_o(-e,6):e>9999?"+"+_o(e,6):_o(e,4)}(e.getUTCFullYear())+"-"+_o(e.getUTCMonth()+1,2)+"-"+_o(e.getUTCDate(),2)+(r?"T"+_o(t,2)+":"+_o(n,2)+":"+_o(i,2)+"."+_o(r,3)+"Z":i?"T"+_o(t,2)+":"+_o(n,2)+":"+_o(i,2)+"Z":n||t?"T"+_o(t,2)+":"+_o(n,2)+"Z":"")}(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:function i(d,f){var h,p,g=r(d,function(m,_){if(h)return h(m,_-1);p=m,h=f?function YOe(e,t){var n=ZY(e);return function(i,r){return t(n(i),r,e)}}(m,f):ZY(m)});return g.columns=p||[],g},parseRows:r,format:function s(d,f){return null==f&&(f=eK(d)),[f.map(c).join(e)].concat(o(d,f)).join("\n")},formatBody:function a(d,f){return null==f&&(f=eK(d)),o(d,f).join("\n")},formatRows:function l(d){return d.map(u).join("\n")},formatRow:u,formatValue:c}}function ZOe(e){return e}function tke(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(n){return tK(e,n)})}:tK(e,t)}function tK(e,t){var n=t.id,i=t.bbox,r=null==t.properties?{}:t.properties,o=nK(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function nK(e,t){var n=function eke(e){if(null==e)return ZOe;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*i+o,d[1]=(n+=a[1])*r+s;u<c;)d[u]=a[u],++u;return d}}(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var f=i[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&function JOe(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(d,p)}function o(c){return n(c)}function s(c){for(var d=[],f=0,h=c.length;f<h;++f)r(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=s(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}return function u(c){var f,d=c.type;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=o(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(o);break;case"LineString":f=s(c.arcs);break;case"MultiLineString":f=c.arcs.map(s);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}(t)}function nke(e,t){var n={},i={},r={},o=[],s=-1;function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),o.push(f)}}return t.forEach(function(u,c){var f,d=e.arcs[u<0?~u:u];d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++s],t[s]=u,t[c]=f)}),t.forEach(function(u){var h,p,c=function a(u){var f,c=e.arcs[u<0?~u:u],d=c[0];return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}(u),d=c[0],f=c[1];if(h=r[d])if(delete r[h.end],h.push(u),h.end=f,p=i[f]){delete i[p.start];var g=p===h?h:h.concat(p);i[g.start=h.start]=r[g.end=p.end]=g}else i[h.start]=r[h.end]=h;else if(h=i[f])if(delete i[h.start],h.unshift(u),h.start=d,p=r[d]){delete r[p.end];var m=p===h?h:p.concat(h);i[m.start=p.start]=r[m.end=h.end]=m}else i[h.start]=r[h.end]=h;else i[(h=[u]).start=d]=r[h.end=f]=h}),l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function ike(e){return nK(e,rke.apply(this,arguments))}function rke(e,t,n){var i,r,o;if(arguments.length>1)i=function oke(e,t,n){var o,i=[],r=[];function s(d){var f=d<0?~d:d;(r[f]||(r[f]=[])).push({i:d,g:o})}function a(d){d.forEach(s)}function l(d){d.forEach(a)}return function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":!function u(d){d.forEach(l)}(d.arcs)}}(t),r.forEach(null==n?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}(0,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:nke(e,i)}}const ske=Math.sqrt(50),ake=Math.sqrt(10),lke=Math.sqrt(2);function CD(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=ske?10:o>=ake?5:o>=lke?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?CD(e,t,2*n):[a,l,u]}function vI(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const i=t<e,[r,o,s]=i?CD(t,e,n):CD(e,t,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(r+u)/-s;else for(let u=0;u<a;++u)l[u]=(r+u)*s;return l}function bI(e,t,n){return CD(e=+e,t=+t,n=+n)[2]}function Vc(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?bI(t,e,n):bI(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}var sK,uke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vf(e){if(!(t=uke.exec(e)))throw new Error("invalid format: "+e);var t;return new wI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function wI(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function SD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Yg(e){return(e=SD(Math.abs(e)))?e[1]:NaN}function iK(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Yg(t)/3)))-Yg(Math.abs(e)))}function rK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yg(t)-Yg(e))+1}function oK(e){return Math.max(0,-Yg(Math.abs(e)))}function aK(e,t){var n=SD(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Vf.prototype=wI.prototype,wI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const lK={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function cke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>aK(100*e,t),r:aK,s:function pke(e,t){var n=SD(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(sK=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+SD(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uK(e){return e}var AD,TD,EI,cK=Array.prototype.map,dK=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function fK(e){var t=void 0===e.grouping||void 0===e.thousands?uK:function dke(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}(cK.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?uK:function fke(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}(cK.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function u(d){var f=(d=Vf(d)).fill,h=d.align,p=d.sign,g=d.symbol,m=d.zero,_=d.width,y=d.comma,v=d.precision,b=d.trim,w=d.type;"n"===w?(y=!0,w="g"):lK[w]||(void 0===v&&(v=12),b=!0,w="g"),(m||"0"===f&&"="===h)&&(m=!0,f="0",h="=");var D="$"===g?n:"#"===g&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E="$"===g?i:/[%p]/.test(w)?s:"",S=lK[w],M=/[defgprs%]/.test(w);function k(R){var A,C,T,F=D,P=E;if("c"===w)P=S(R)+P,R="";else{var O=(R=+R)<0||1/R<0;if(R=isNaN(R)?l:S(Math.abs(R),v),b&&(R=function hke(e){e:for(var r,t=e.length,n=1,i=-1;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":0===i&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(r+1):e}(R)),O&&0==+R&&"+"!==p&&(O=!1),F=(O?"("===p?p:a:"-"===p||"("===p?"":p)+F,P=("s"===w?dK[8+sK/3]:"")+P+(O&&"("===p?")":""),M)for(A=-1,C=R.length;++A<C;)if(48>(T=R.charCodeAt(A))||T>57){P=(46===T?r+R.slice(A+1):R.slice(A))+P,R=R.slice(0,A);break}}y&&!m&&(R=t(R,1/0));var x=F.length+R.length+P.length,N=x<_?new Array(_-x+1).join(f):"";switch(y&&m&&(R=t(N+R,N.length?_-P.length:1/0),N=""),h){case"<":R=F+R+P+N;break;case"=":R=F+N+R+P;break;case"^":R=N.slice(0,x=N.length>>1)+F+R+P+N.slice(x);break;default:R=N+F+R+P}return o(R)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return d+""},k}return{format:u,formatPrefix:function c(d,f){var h=u(((d=Vf(d)).type="f",d)),p=3*Math.max(-8,Math.min(8,Math.floor(Yg(f)/3))),g=Math.pow(10,-p),m=dK[8+p/3];return function(_){return h(g*_)+m}}}}!function gke(e){AD=fK(e),TD=AD.format,EI=AD.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const DI=new Date,CI=new Date;function bi(e,t,n,i){function r(o){return e(o=0===arguments.length?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(t(o=new Date(+o),null==s?1:Math.floor(s)),o),r.range=(o,s,a)=>{const l=[];if(o=r.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;let u;do{l.push(u=new Date(+o)),t(o,a),e(o)}while(u<o&&o<s);return l},r.filter=o=>bi(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(r.count=(o,s)=>(DI.setTime(+o),CI.setTime(+s),e(DI),e(CI),Math.floor(n(DI,CI))),r.every=o=>(o=Math.floor(o),isFinite(o)&&o>0?o>1?r.filter(i?s=>i(s)%o==0:s=>r.count(0,s)%o==0):r:null)),r}const Su=1e3,Rs=60*Su,Au=60*Rs,Tu=24*Au,SI=7*Tu,hK=30*Tu,AI=365*Tu,xu=bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rs)/Tu,e=>e.getDate()-1),jc=bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tu,e=>e.getUTCDate()-1),pK=bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tu,e=>Math.floor(e/Tu));function jf(e){return bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+7*n)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Rs)/SI)}const Kg=jf(0),xD=jf(1),Xg=(jf(2),jf(3),jf(4));function Hf(e){return bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+7*n)},(t,n)=>(n-t)/SI)}jf(5),jf(6);const Qg=Hf(0),MD=Hf(1),Jg=(Hf(2),Hf(3),Hf(4)),_l=(Hf(5),Hf(6),bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));_l.every=e=>isFinite(e=Math.floor(e))&&e>0?bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;const yl=bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yl.every=e=>isFinite(e=Math.floor(e))&&e>0?bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;const Ly=bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth()),$y=bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),ND=bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Su-e.getMinutes()*Rs)},(e,t)=>{e.setTime(+e+t*Au)},(e,t)=>(t-e)/Au,e=>e.getHours()),OD=bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Au)},(e,t)=>(t-e)/Au,e=>e.getUTCHours()),kD=bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Su)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getMinutes()),ID=bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getUTCMinutes()),Mu=bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Su)},(e,t)=>(t-e)/Su,e=>e.getUTCSeconds()),Zg=bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function Nu(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cke(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function em(e){let t,n,i;function r(a,l,u=0,c=a.length){if(u<c){if(0!==t(l,l))return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}return 2!==e.length?(t=Nu,n=(a,l)=>Nu(e(a),l),i=(a,l)=>e(a)-l):(t=e===Nu||e===Cke?e:Ske,n=e,i=e),{left:r,center:function s(a,l,u=0,c=a.length){const d=r(a,l,u,c-1);return d>u&&i(a[d-1],l)>-i(a[d],l)?d-1:d},right:function o(a,l,u=0,c=a.length){if(u<c){if(0!==t(l,l))return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}}}function Ske(){return 0}Zg.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zg:null);const Ji="year",yo="quarter",wr="month",wi="week",vo="date",Er="day",vl="dayofyear",Ko="hours",Xo="minutes",Fs="seconds",ya="milliseconds",TI=[Ji,yo,wr,wi,vo,Er,vl,Ko,Xo,Fs,ya],xI=TI.reduce((e,t,n)=>(e[t]=1+n,e),{});function MI(e){const t=De(e).slice(),n={};return t.length||ee("Missing time unit."),t.forEach(r=>{Ae(xI,r)?n[r]=1:ee(`Invalid time unit: ${r}.`)}),(n[wi]||n[Er]?1:0)+(n[yo]||n[wr]||n[vo]?1:0)+(n[vl]?1:0)>1&&ee(`Incompatible time units: ${e}`),t.sort((r,o)=>xI[r]-xI[o]),t}const Ake={[Ji]:"%Y ",[yo]:"Q%q ",[wr]:"%b ",[vo]:"%d ",[wi]:"W%U ",[Er]:"%a ",[vl]:"%j ",[Ko]:"%H:00",[Xo]:"00:%M",[Fs]:":%S",[ya]:".%L",[`${Ji}-${wr}`]:"%Y-%m ",[`${Ji}-${wr}-${vo}`]:"%Y-%m-%d ",[`${Ko}-${Xo}`]:"%H:%M"};function gK(e,t){const n=ut({},Ake,t),i=MI(e),r=i.length;let a,l,o="",s=0;for(s=0;s<r;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),null!=n[l]){o+=n[l],s=a;break}return o.trim()}const zf=new Date;function NI(e){return zf.setFullYear(e),zf.setMonth(0),zf.setDate(1),zf.setHours(0,0,0,0),zf}function mK(e){return yK(new Date(e))}function _K(e){return OI(new Date(e))}function yK(e){return xu.count(NI(e.getFullYear())-1,e)}function OI(e){return Kg.count(NI(e.getFullYear())-1,e)}function kI(e){return NI(e).getDay()}function Tke(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,i,r,o,s);return a.setFullYear(e),a}return new Date(e,t,n,i,r,o,s)}function vK(e){return wK(new Date(e))}function bK(e){return II(new Date(e))}function wK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jc.count(t-1,e)}function II(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Qg.count(t-1,e)}function RI(e){return zf.setTime(Date.UTC(e,0,1)),zf.getUTCDay()}function xke(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,i,r,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,i,r,o,s))}function EK(e,t,n,i,r){const o=t||1,s=St(e),a=(_,y,v)=>function Mke(e,t,n,i){const r=n<=1?e:i?(o,s)=>i+n*Math.floor((e(o,s)-i)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(r(o,s),s):r}(n[v=v||_],i[v],_===s&&o,y),l=new Date,u=_a(e),c=u[Ji]?a(Ji):br(2012),d=u[wr]?a(wr):u[yo]?a(yo):Pc,f=u[wi]&&u[Er]?a(Er,1,wi+Er):u[wi]?a(wi,1):u[Er]?a(Er,1):u[vo]?a(vo,1):u[vl]?a(vl,1):Hg,h=u[Ko]?a(Ko):Pc,p=u[Xo]?a(Xo):Pc,g=u[Fs]?a(Fs):Pc,m=u[ya]?a(ya):Pc;return function(_){l.setTime(+_);const y=c(l);return r(y,d(l),f(l,y),h(l),p(l),g(l),m(l))}}function tm(e,t,n){return t+7*e-(n+6)%7}const Nke={[Ji]:e=>e.getFullYear(),[yo]:e=>Math.floor(e.getMonth()/3),[wr]:e=>e.getMonth(),[vo]:e=>e.getDate(),[Ko]:e=>e.getHours(),[Xo]:e=>e.getMinutes(),[Fs]:e=>e.getSeconds(),[ya]:e=>e.getMilliseconds(),[vl]:e=>yK(e),[wi]:e=>OI(e),[wi+Er]:(e,t)=>tm(OI(e),e.getDay(),kI(t)),[Er]:(e,t)=>tm(1,e.getDay(),kI(t))},Oke={[yo]:e=>3*e,[wi]:(e,t)=>tm(e,0,kI(t))};function DK(e,t){return EK(e,t||1,Nke,Oke,Tke)}const kke={[Ji]:e=>e.getUTCFullYear(),[yo]:e=>Math.floor(e.getUTCMonth()/3),[wr]:e=>e.getUTCMonth(),[vo]:e=>e.getUTCDate(),[Ko]:e=>e.getUTCHours(),[Xo]:e=>e.getUTCMinutes(),[Fs]:e=>e.getUTCSeconds(),[ya]:e=>e.getUTCMilliseconds(),[vl]:e=>wK(e),[wi]:e=>II(e),[Er]:(e,t)=>tm(1,e.getUTCDay(),RI(t)),[wi+Er]:(e,t)=>tm(II(e),e.getUTCDay(),RI(t))},Ike={[yo]:e=>3*e,[wi]:(e,t)=>tm(e,0,RI(t))};function CK(e,t){return EK(e,t||1,kke,Ike,xke)}const Rke={[Ji]:_l,[yo]:Ly.every(3),[wr]:Ly,[wi]:Kg,[vo]:xu,[Er]:xu,[vl]:xu,[Ko]:ND,[Xo]:kD,[Fs]:Mu,[ya]:Zg},Fke={[Ji]:yl,[yo]:$y.every(3),[wr]:$y,[wi]:Qg,[vo]:jc,[Er]:jc,[vl]:jc,[Ko]:OD,[Xo]:ID,[Fs]:Mu,[ya]:Zg};function nm(e){return Rke[e]}function im(e){return Fke[e]}function SK(e,t,n){return e?e.offset(t,n):void 0}function AK(e,t,n){return SK(nm(e),t,n)}function TK(e,t,n){return SK(im(e),t,n)}function xK(e,t,n,i){return e?e.range(t,n,i):void 0}function MK(e,t,n,i){return xK(nm(e),t,n,i)}function NK(e,t,n,i){return xK(im(e),t,n,i)}const Uy=6e4,Vy=60*Uy,RD=24*Vy,OK=30*RD,FI=365*RD,kK=[Ji,wr,vo,Ko,Xo,Fs,ya],jy=kK.slice(0,-1),Hy=jy.slice(0,-1),zy=Hy.slice(0,-1),Lke=zy.slice(0,-1),IK=[Ji,wr],RK=[Ji],Gy=[[jy,1,1e3],[jy,5,5e3],[jy,15,15e3],[jy,30,3e4],[Hy,1,Uy],[Hy,5,5*Uy],[Hy,15,15*Uy],[Hy,30,30*Uy],[zy,1,Vy],[zy,3,3*Vy],[zy,6,6*Vy],[zy,12,12*Vy],[Lke,1,RD],[[Ji,wi],1,6048e5],[IK,1,OK],[IK,3,3*OK],[RK,1,FI]];function FK(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Fy(t))/n;let o,s,r=em(a=>a[2]).right(Gy,i);return r===Gy.length?(o=RK,s=Vc(t[0]/FI,t[1]/FI,n)):r?(r=Gy[i/Gy[r-1][2]<Gy[r][2]/i?r-1:r],o=r[0],s=r[1]):(o=kK,s=Math.max(Vc(t[0],t[1],n),1)),{units:o,step:s}}function PI(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LI(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wy(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function PK(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=qy(r),c=Yy(r),d=qy(o),f=Yy(o),h=qy(s),p=Yy(s),g=qy(a),m=Yy(a),_=qy(l),y=Yy(l),v={a:function O(W){return s[W.getDay()]},A:function x(W){return o[W.getDay()]},b:function N(W){return l[W.getMonth()]},B:function I(W){return a[W.getMonth()]},c:null,d:jK,e:jK,f:aIe,g:_Ie,G:vIe,H:rIe,I:oIe,j:sIe,L:HK,m:lIe,M:uIe,p:function U(W){return r[+(W.getHours()>=12)]},q:function V(W){return 1+~~(W.getMonth()/3)},Q:KK,s:XK,S:cIe,u:dIe,U:fIe,V:hIe,w:pIe,W:gIe,x:null,X:null,y:mIe,Y:yIe,Z:bIe,"%":YK},b={a:function H(W){return s[W.getUTCDay()]},A:function j(W){return o[W.getUTCDay()]},b:function z(W){return l[W.getUTCMonth()]},B:function re(W){return a[W.getUTCMonth()]},c:null,d:GK,e:GK,f:CIe,g:RIe,G:PIe,H:wIe,I:EIe,j:DIe,L:WK,m:SIe,M:AIe,p:function K(W){return r[+(W.getUTCHours()>=12)]},q:function ce(W){return 1+~~(W.getUTCMonth()/3)},Q:KK,s:XK,S:TIe,u:xIe,U:MIe,V:NIe,w:OIe,W:kIe,x:null,X:null,y:IIe,Y:FIe,Z:LIe,"%":YK},w={a:function k(W,ne,ie){var G=h.exec(ne.slice(ie));return G?(W.w=p.get(G[0].toLowerCase()),ie+G[0].length):-1},A:function R(W,ne,ie){var G=d.exec(ne.slice(ie));return G?(W.w=f.get(G[0].toLowerCase()),ie+G[0].length):-1},b:function F(W,ne,ie){var G=_.exec(ne.slice(ie));return G?(W.m=y.get(G[0].toLowerCase()),ie+G[0].length):-1},B:function P(W,ne,ie){var G=g.exec(ne.slice(ie));return G?(W.m=m.get(G[0].toLowerCase()),ie+G[0].length):-1},c:function A(W,ne,ie){return S(W,t,ne,ie)},d:UK,e:UK,f:eIe,g:BK,G:$K,H:VK,I:VK,j:Xke,L:Zke,m:Kke,M:Qke,p:function M(W,ne,ie){var G=u.exec(ne.slice(ie));return G?(W.p=c.get(G[0].toLowerCase()),ie+G[0].length):-1},q:Yke,Q:nIe,s:iIe,S:Jke,u:Hke,U:zke,V:Gke,w:jke,W:Wke,x:function C(W,ne,ie){return S(W,n,ne,ie)},X:function T(W,ne,ie){return S(W,i,ne,ie)},y:BK,Y:$K,Z:qke,"%":tIe};function D(W,ne){return function(ie){var Me,Le,Nt,G=[],be=-1,Te=0,We=W.length;for(ie instanceof Date||(ie=new Date(+ie));++be<We;)37===W.charCodeAt(be)&&(G.push(W.slice(Te,be)),null!=(Le=LK[Me=W.charAt(++be)])?Me=W.charAt(++be):Le="e"===Me?" ":"0",(Nt=ne[Me])&&(Me=Nt(ie,Le)),G.push(Me),Te=be+1);return G.push(W.slice(Te,be)),G.join("")}}function E(W,ne){return function(ie){var Te,We,G=Wy(1900,void 0,1);if(S(G,W,ie+="",0)!=ie.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(1e3*G.s+("L"in G?G.L:0));if(ne&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+12*G.p),void 0===G.m&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(We=(Te=LI(Wy(G.y,0,1))).getUTCDay(),Te=We>4||0===We?MD.ceil(Te):MD(Te),Te=jc.offset(Te,7*(G.V-1)),G.y=Te.getUTCFullYear(),G.m=Te.getUTCMonth(),G.d=Te.getUTCDate()+(G.w+6)%7):(We=(Te=PI(Wy(G.y,0,1))).getDay(),Te=We>4||0===We?xD.ceil(Te):xD(Te),Te=xu.offset(Te,7*(G.V-1)),G.y=Te.getFullYear(),G.m=Te.getMonth(),G.d=Te.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),We="Z"in G?LI(Wy(G.y,0,1)).getUTCDay():PI(Wy(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+7*G.W-(We+5)%7:G.w+7*G.U-(We+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,LI(G)):PI(G)}}function S(W,ne,ie,G){for(var Me,Le,be=0,Te=ne.length,We=ie.length;be<Te;){if(G>=We)return-1;if(37===(Me=ne.charCodeAt(be++))){if(Me=ne.charAt(be++),!(Le=w[Me in LK?ne.charAt(be++):Me])||(G=Le(W,ie,G))<0)return-1}else if(Me!=ie.charCodeAt(G++))return-1}return G}return v.x=D(n,v),v.X=D(i,v),v.c=D(t,v),b.x=D(n,b),b.X=D(i,b),b.c=D(t,b),{format:function(W){var ne=D(W+="",v);return ne.toString=function(){return W},ne},parse:function(W){var ne=E(W+="",!1);return ne.toString=function(){return W},ne},utcFormat:function(W){var ne=D(W+="",b);return ne.toString=function(){return W},ne},utcParse:function(W){var ne=E(W+="",!0);return ne.toString=function(){return W},ne}}}var rm,$I,QK,BI,JK,LK={"-":"",_:" ",0:"0"},Ni=/^\s*\d+/,Bke=/^%/,Uke=/[\\^$*+?|[\]().{}]/g;function Pt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function Vke(e){return e.replace(Uke,"\\$&")}function qy(e){return new RegExp("^(?:"+e.map(Vke).join("|")+")","i")}function Yy(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function jke(e,t,n){var i=Ni.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Hke(e,t,n){var i=Ni.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function zke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Gke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Wke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function $K(e,t,n){var i=Ni.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function BK(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function qke(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Yke(e,t,n){var i=Ni.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Kke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function UK(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Xke(e,t,n){var i=Ni.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function VK(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Qke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Jke(e,t,n){var i=Ni.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Zke(e,t,n){var i=Ni.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function eIe(e,t,n){var i=Ni.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function tIe(e,t,n){var i=Bke.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function nIe(e,t,n){var i=Ni.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function iIe(e,t,n){var i=Ni.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function jK(e,t){return Pt(e.getDate(),t,2)}function rIe(e,t){return Pt(e.getHours(),t,2)}function oIe(e,t){return Pt(e.getHours()%12||12,t,2)}function sIe(e,t){return Pt(1+xu.count(_l(e),e),t,3)}function HK(e,t){return Pt(e.getMilliseconds(),t,3)}function aIe(e,t){return HK(e,t)+"000"}function lIe(e,t){return Pt(e.getMonth()+1,t,2)}function uIe(e,t){return Pt(e.getMinutes(),t,2)}function cIe(e,t){return Pt(e.getSeconds(),t,2)}function dIe(e){var t=e.getDay();return 0===t?7:t}function fIe(e,t){return Pt(Kg.count(_l(e)-1,e),t,2)}function zK(e){var t=e.getDay();return t>=4||0===t?Xg(e):Xg.ceil(e)}function hIe(e,t){return e=zK(e),Pt(Xg.count(_l(e),e)+(4===_l(e).getDay()),t,2)}function pIe(e){return e.getDay()}function gIe(e,t){return Pt(xD.count(_l(e)-1,e),t,2)}function mIe(e,t){return Pt(e.getFullYear()%100,t,2)}function _Ie(e,t){return Pt((e=zK(e)).getFullYear()%100,t,2)}function yIe(e,t){return Pt(e.getFullYear()%1e4,t,4)}function vIe(e,t){var n=e.getDay();return Pt((e=n>=4||0===n?Xg(e):Xg.ceil(e)).getFullYear()%1e4,t,4)}function bIe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pt(t/60|0,"0",2)+Pt(t%60,"0",2)}function GK(e,t){return Pt(e.getUTCDate(),t,2)}function wIe(e,t){return Pt(e.getUTCHours(),t,2)}function EIe(e,t){return Pt(e.getUTCHours()%12||12,t,2)}function DIe(e,t){return Pt(1+jc.count(yl(e),e),t,3)}function WK(e,t){return Pt(e.getUTCMilliseconds(),t,3)}function CIe(e,t){return WK(e,t)+"000"}function SIe(e,t){return Pt(e.getUTCMonth()+1,t,2)}function AIe(e,t){return Pt(e.getUTCMinutes(),t,2)}function TIe(e,t){return Pt(e.getUTCSeconds(),t,2)}function xIe(e){var t=e.getUTCDay();return 0===t?7:t}function MIe(e,t){return Pt(Qg.count(yl(e)-1,e),t,2)}function qK(e){var t=e.getUTCDay();return t>=4||0===t?Jg(e):Jg.ceil(e)}function NIe(e,t){return e=qK(e),Pt(Jg.count(yl(e),e)+(4===yl(e).getUTCDay()),t,2)}function OIe(e){return e.getUTCDay()}function kIe(e,t){return Pt(MD.count(yl(e)-1,e),t,2)}function IIe(e,t){return Pt(e.getUTCFullYear()%100,t,2)}function RIe(e,t){return Pt((e=qK(e)).getUTCFullYear()%100,t,2)}function FIe(e,t){return Pt(e.getUTCFullYear()%1e4,t,4)}function PIe(e,t){var n=e.getUTCDay();return Pt((e=n>=4||0===n?Jg(e):Jg.ceil(e)).getUTCFullYear()%1e4,t,4)}function LIe(){return"+0000"}function YK(){return"%"}function KK(e){return+e}function XK(e){return Math.floor(+e/1e3)}function Ky(e){const t={};return n=>t[n]||(t[n]=e(n))}function ZK(e){const t=Ky(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Vf(i||",");if(null==r.precision){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1}return function BIe(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=function UIe(e,t){let i,n=e.lastIndexOf("e");if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}(i,r);const s=o<i.length?i.slice(o):"";for(;--o>r;)if("0"!==i[o]){++o;break}return i.slice(0,o)+s}}(t(r),t(".1f")(1)[1])}return t(r)},formatSpan(i,r,o,s){s=Vf(s??",f");const a=Vc(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(null==s.precision)switch(s.type){case"s":return isNaN(u=iK(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":isNaN(u=rK(a,l))||(s.precision=u-("e"===s.type));break;case"f":case"%":isNaN(u=oK(a))||(s.precision=u-2*("%"===s.type))}return t(s)}}}let UI,VI;function eX(){return UI=ZK({format:TD,formatPrefix:EI})}function tX(e){return ZK(fK(e))}function FD(e){return arguments.length?UI=tX(e):UI}function nX(e,t,n){Ee(n=n||{})||ee(`Invalid time multi-format specifier: ${n}`);const i=t(Fs),r=t(Xo),o=t(Ko),s=t(vo),a=t(wi),l=t(wr),u=t(yo),c=t(Ji),d=e(n[ya]||".%L"),f=e(n[Fs]||":%S"),h=e(n[Xo]||"%I:%M"),p=e(n[Ko]||"%I %p"),g=e(n[vo]||n[Er]||"%a %d"),m=e(n[wi]||"%b %d"),_=e(n[wr]||"%B"),y=e(n[yo]||"%B"),v=e(n[Ji]||"%Y");return b=>(i(b)<b?d:r(b)<b?f:o(b)<b?h:s(b)<b?p:l(b)<b?a(b)<b?g:m:c(b)<b?u(b)<b?_:y:v)(b)}function iX(e){const t=Ky(e.format),n=Ky(e.utcFormat);return{timeFormat:i=>Ce(i)?t(i):nX(t,nm,i),utcFormat:i=>Ce(i)?n(i):nX(n,im,i),timeParse:Ky(e.parse),utcParse:Ky(e.utcParse)}}function rX(){return VI=iX({format:$I,parse:QK,utcFormat:BI,utcParse:JK})}function oX(e){return iX(PK(e))}function Xy(e){return arguments.length?VI=oX(e):VI}!function $Ie(e){rm=PK(e),$I=rm.format,QK=rm.parse,BI=rm.utcFormat,JK=rm.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),eX(),rX();const jI=(e,t)=>ut({},e,t);function sX(e,t){const n=e?tX(e):FD(),i=t?oX(t):Xy();return jI(n,i)}function HI(e,t){const n=arguments.length;return n&&2!==n&&ee("defaultLocale expects either zero or two arguments."),n?jI(FD(e),Xy(t)):jI(FD(),Xy())}function VIe(){return eX(),rX(),HI()}const jIe=/^(data:|([A-Za-z]+:)?\/\/)/,HIe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,zIe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,aX="file://";function WIe(e,t){return zI.apply(this,arguments)}function zI(){return(zI=vi(function*(e,t){const n=yield this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)})).apply(this,arguments)}function qIe(e,t){return GI.apply(this,arguments)}function GI(){return(GI=vi(function*(e,t){t=ut({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,s;const a=HIe.test(e.replace(zIe,""));(null==e||"string"!=typeof e||!a)&&ee("Sanitize failure, invalid URI: "+me(e));const l=jIe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(r=e.startsWith(aX))||"file"===t.mode||"http"!==t.mode&&!l&&n,r?e=e.slice(aX.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i})).apply(this,arguments)}function YIe(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):KIe}function KIe(){return WI.apply(this,arguments)}function WI(){return(WI=vi(function*(){ee("No file system access.")})).apply(this,arguments)}function XIe(e){return e?function(){var t=vi(function*(n,i){const r=ut({},this.options.http,i),o=i&&i.response,s=yield e(n,r);return s.ok?lt(s[o])?s[o]():s.text():ee(s.status+""+s.statusText)});return function(n,i){return t.apply(this,arguments)}}():QIe}function QIe(){return qI.apply(this,arguments)}function qI(){return(qI=vi(function*(){ee("No HTTP fetch method available.")})).apply(this,arguments)}const JIe=e=>null!=e&&e==e,lX=e=>!(Number.isNaN(+e)||e instanceof Date),YI={boolean:hI,integer:vr,number:vr,date:pI,string:gI,unknown:yr},PD=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>lX(e)&&Number.isInteger(+e),lX,e=>!Number.isNaN(Date.parse(e))],nRe=["boolean","integer","number","date"];function uX(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=PD.length,r=PD.map((o,s)=>s+1);for(let a,l,o=0,s=0;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<i;++a)if(r[a]&&JIe(l)&&!PD[a](l)&&(r[a]=0,++s,s===PD.length))return"string";return nRe[r.reduce((o,s)=>0===o?s:o,0)-1]}function cX(e,t){return t.reduce((n,i)=>(n[i]=uX(e,i),n),{})}function dX(e){const t=function(n,i){const r={delimiter:e};return KI(n,i?ut(i,r):r)};return t.responseType="text",t}function KI(e,t){return t.header&&(e=t.header.map(me).join(t.delimiter)+"\n"+e),QOe(t.delimiter).parse(e+"")}function XI(e,t){const n=t&&t.property?ks(t.property):yr;return Ee(e)&&!function iRe(e){return!("function"!=typeof Buffer||!lt(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function rRe(e,t){return!te(e)&&GY(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}KI.responseType="text",XI.responseType="json";const oRe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function fX(e,t){let n,i,r,o;return e=XI(e,t),t&&t.feature?(n=tke,r=t.feature):t&&t.mesh?(n=ike,r=t.mesh,o=oRe[t.filter]):ee("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):ee("Invalid TopoJSON object: "+r),i&&i.features||[i]}fX.responseType="json";const LD={dsv:KI,csv:dX(","),tsv:dX("\t"),json:XI,topojson:fX};function QI(e,t){return arguments.length>1?(LD[e]=t,this):Ae(LD,e)?LD[e]:null}function hX(e){const t=QI(e);return t&&t.responseType||"text"}function pX(e,t,n,i){const r=QI((t=t||{}).type||"json");return r||ee("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function sRe(e,t,n,i){if(!e.length)return;const r=Xy();n=n||r.timeParse,i=i||r.utcParse;let s,a,l,u,c,d,o=e.columns||Object.keys(e[0]);"auto"===t&&(t=cX(e,o)),o=Object.keys(t);const f=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],("'"===m[0]&&"'"===m[m.length-1]||'"'===m[0]&&'"'===m[m.length-1])&&(m=m.slice(1,-1)),("utc"===g[0]?i:n)(m);if(!YI[p])throw Error("Illegal format pattern: "+h+":"+p);return YI[p]});for(l=0,c=e.length,d=o.length;l<c;++l)for(s=e[l],u=0;u<d;++u)a=o[u],s[a]=f[u](s[a])}(e,t.parse,n,i),Ae(e,"columns")&&delete e.columns,e}const $D=function GIe(e,t){return n=>({options:n||{},sanitize:qIe,load:WIe,fileAccess:!!t,file:YIe(t),http:XIe(e)})}(typeof fetch<"u"&&fetch,null);function BD(e){const t=e||yr,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}function UD(e,t){return JI.apply(this,arguments)}function JI(){return(JI=vi(function*(e,t){try{yield t(e)}catch(n){e.error(n)}})).apply(this,arguments)}const gX=Symbol("vega_id");let aRe=1;function VD(e){return!(!e||!Be(e))}function Be(e){return e[gX]}function mX(e,t){return e[gX]=t,e}function Vt(e){const t=e===Object(e)?e:{data:e};return Be(t)?t:mX(t,aRe++)}function ZI(e){return jD(e,Vt({}))}function jD(e,t){for(const n in e)t[n]=e[n];return t}function _X(e,t){return mX(t,Be(e))}function Gf(e,t){return e?t?(n,i)=>e(n,i)||Be(t(n))-Be(t(i)):(n,i)=>e(n,i)||Be(n)-Be(i):null}function yX(e){return e&&e.constructor===Wf}function Wf(){const e=[],t=[],n=[],i=[],r=[];let o=null,s=!1;return{constructor:Wf,insert(a){const l=De(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=lt(a)?i:t,u=De(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:br(u)};return lt(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return lt(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,g,m;for(d=0,f=l.length;d<f;++d)u[Be(l[d])]=1;for(d=0,f=t.length;d<f;++d)g=t[d],u[Be(g)]=-1;for(d=0,f=i.length;d<f;++d)p=i[d],l.forEach(y=>{p(y)&&(u[Be(y)]=-1)});for(d=0,f=e.length;d<f;++d)g=e[d],m=Be(g),u[m]?u[m]=1:a.add.push(Vt(e[d]));for(d=0,f=l.length;d<f;++d)g=l[d],u[Be(g)]<0&&a.rem.push(g);function _(y,v,b){b?y[v]=b(y):a.encode=v,s||(c[Be(y)]=y)}for(d=0,f=n.length;d<f;++d)h=n[d],g=h.tuple,p=h.field,m=u[Be(g)],m>0&&(_(g,p,h.value),a.modifies(p));for(d=0,f=r.length;d<f;++d)h=r[d],p=h.filter,l.forEach(y=>{p(y)&&u[Be(y)]>0&&_(y,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||i.length?l.filter(y=>u[Be(y)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||null==o&&(t.length||i.length))&&a.clean(!0),a}}}const HD="_:mod:_";function zD(){Object.defineProperty(this,HD,{writable:!0,value:{}})}zD.prototype={set(e,t,n,i){const r=this,o=r[e],s=r[HD];return null!=t&&t>=0?(o[t]!==n||i)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||i)&&(r[e]=n,s[e]=te(n)?1+n.length:-1),r},modified(e,t){const n=this[HD];if(!arguments.length){for(const i in n)if(n[i])return!0;return!1}if(te(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[HD]={},this}};let lRe=0;const cRe=new zD;function an(e,t,n,i){this.id=++lRe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function vX(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}an.prototype={targets(){return this._targets||(this._targets=BD(Iy))},set(e){return this.value!==e?(this.value=e,1):0},skip:vX(1),modified:vX(2),parameters(e,t,n){t=!1!==t;const i=this._argval=this._argval||new zD,r=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(d,f,h)=>{h instanceof an?(h!==this&&(t&&h.targets().add(this),o.push(h)),r.push({op:h,name:d,index:f})):i.set(d,f,h)};for(s in e)if(a=e[s],"pulse"===s)De(a).forEach(d=>{d instanceof an?d!==this&&(d.targets().add(this),o.push(d)):ee("Pulse parameters must be operator instances.")}),this.source=a;else if(te(a))for(i.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||cRe,n=this._argops;let i,r,o,s;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],o=i.op,s=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,s);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let gRe=0;function GD(e,t,n){this.id=++gRe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Hc(e,t,n){return new GD(e,t,n)}function eR(){return(eR=vi(function*(e,t){const n=this;let r,i=0;try{r=yield n.loader().load(e,{context:"dataflow",response:hX(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}})).apply(this,arguments)}function tR(){return(tR=vi(function*(e,t,n){const i=this,r=i._pending||function wRe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(i);r.requests+=1;const o=yield i.request(t,n);return i.pulse(e,i.changeset().remove(Is).insert(o.data||[])),r.done(),o})).apply(this,arguments)}GD.prototype={_filter:Is,_apply:yr,targets(){return this._targets||(this._targets=BD(Iy))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Hc(e);return this.targets().add(t),t},apply(e){const t=Hc(null,e);return this.targets().add(t),t},merge(){const e=Hc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Hc();return this.targets().add(Hc(null,null,dI(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Hc(null,null,()=>n=!0)),t.targets().add(Hc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Is,this._targets=null}};const ERe={skip:!0};function CRe(e,t,n,i,r,o){const s=ut({},o,ERe);let a,l;lt(n)||(n=br(n)),void 0===i?a=u=>e.touch(n(u)):lt(i)?(l=new an(null,i,r,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;yX(d)?e.pulse(c,d,o):e.update(c,d,s)}):a=u=>e.update(n(u),i,s),t.apply(a)}function SRe(e,t,n,i,r,o){if(void 0===i)t.targets().add(n);else{const s=o||{},a=new an(null,function ARe(e,t){return t=lt(t)?t:br(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}(n,i),r,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}const WD={};function Gc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function nR(e,t){const n=[];return Uc(e,t,i=>n.push(i)),n}function CX(e,t){const n={};return e.visit(t,i=>{n[Be(i)]=1}),i=>n[Be(i)]?null:i}function qD(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}function iR(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=r.fields||(r.fields={});for(const l in s.fields)a[l]=1}s.changed(r.ADD)&&(o|=r.ADD),s.changed(r.REM)&&(o|=r.REM),s.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}function rR(){return(rR=vi(function*(e,t,n){const i=this,r=[];if(i._pulse)return SX(i);if(i._pending&&(yield i._pending),t&&(yield UD(i,t)),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new Gc(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=BD(Iy);let a,l,u,s=0;try{for(;i._heap.size()>0;)a=i._heap.pop(),a.rank===a.qrank?(l=a.run(i._getPulse(a,e)),l.then?l=yield l:l.async&&(r.push(l.async),l=WD),l!==WD&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++s):i._enqueue(a,!0)}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,f)=>f.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)yield UD(i,c[d].callback)}return n&&(yield UD(i,n)),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(f){i.error(f)}})})),i})).apply(this,arguments)}function oR(){return(oR=vi(function*(e,t,n){for(;this._running;)yield this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running})).apply(this,arguments)}function SX(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Gc.prototype={StopPropagation:WD,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new Gc(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Gc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,CX(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return te(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?te(e)?e.some(i=>n[i]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=qD(n.addF,t)),2&e&&(n.remF=qD(n.remF,t)),4&e&&(n.modF=qD(n.modF,t)),16&e&&(n.srcF=qD(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=nR(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=nR(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=nR(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(16&e)return Uc(n.source,n.srcF,i),n;1&e&&Uc(n.add,n.addF,i),2&e&&Uc(n.rem,n.remF,i),4&e&&Uc(n.mod,n.modF,i);const r=n.source;if(8&e&&r){const o=n.add.length+n.mod.length;o===r.length||Uc(r,o?CX(n,5):n.srcF,i)}return n}},ye(iR,Gc,{fork(e){const t=new Gc(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?te(e)?e.some(i=>n[i]):n[e]:0},filter(){ee("MultiPulse does not support filtering.")},materialize(){ee("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});const sR={skip:!1,force:!1};function AX(e,t,n,i){let r,o;const s=e[n];for(;n>t&&(o=n-1>>1,r=e[o],i(s,r)<0);)e[n]=r,n=o;return e[n]=s}function sm(){this.logger(sI()),this.logLevel(rI),this._clock=0,this._rank=0,this._locale=HI();try{this._loader=$D()}catch{}this._touched=BD(Iy),this._input={},this._pulse=null,this._heap=function URe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),AX(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,function VRe(e,t,n){const i=t,r=e.length,o=e[t];let a,s=1+(t<<1);for(;s<r;)a=s+1,a<r&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,AX(e,i,t,n)}(t,0,e)):i=n,i}}}((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Jy(e){return function(){return this._log[e].apply(this,arguments)}}function Q(e,t){an.call(this,e,null,t)}sm.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Jy("error"),warn:Jy("warn"),info:Jy("info"),debug:Jy("debug"),logLevel:Jy("level"),cleanThreshold:1e4,add:function hRe(e,t,n,i){let o,r=1;return e instanceof an?o=e:e&&e.prototype instanceof an?o=new e:lt(e)?o=new an(null,e):(r=0,o=new an(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o},connect:function pRe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank)return void this.rerank(e)},rank:function TRe(e){e.rank=++this._rank},rerank:function xRe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ee("Cycle detected in dataflow graph.")},pulse:function BRe(e,t,n){this.touch(e,n||sR);const i=new Gc(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this},touch:function LRe(e,t){const n=t||sR;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function $Re(e,t,n){const i=n||sR;return(e.set(t)||i.force)&&this.touch(e,i),this},changeset:Wf,ingest:function yRe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function _Re(e,t){const n=this.locale();return pX(e,t,n.timeParse,n.utcParse)},preload:function bRe(e,t,n){return tR.apply(this,arguments)},request:function vRe(e,t){return eR.apply(this,arguments)},events:function mRe(e,t,n,i){const r=this,o=Hc(n,i),s=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let a;a="string"==typeof e&&typeof document<"u"?document.querySelectorAll(e):De(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o},on:function DRe(e,t,n,i,r){return(e instanceof an?SRe:CRe)(this,e,t,n,i,r),this},evaluate:function NRe(e,t,n){return rR.apply(this,arguments)},run:function kRe(e,t,n){return this._pulse?SX(this):(this.evaluate(e,t,n),this)},runAsync:function ORe(e,t,n){return oR.apply(this,arguments)},runAfter:function IRe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}},_enqueue:function RRe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function FRe(e,t){const n=e.source,i=this._clock;return n&&te(n)?new iR(this,i,n.map(r=>r.pulse),t):this._input[e.id]||function PRe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==WD&&(e.source=t.source),e)}(this._pulse,n&&n.pulse)}},ye(Q,an,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const am={};function TX(e){const t=xX(e);return t&&t.Definition||null}function xX(e){return e=e&&e.toLowerCase(),Ae(am,e)?am[e]:null}function qf(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function aR(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function YD(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function NX(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=void 0===r?YD:function MX(e=Nu){if(e===Nu)return YD;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1);NX(e,t,Math.max(n,Math.floor(t-u*d/l+f)),Math.min(i,Math.floor(t+(l-u)*d/l+f)),r)}const o=e[t];let s=n,a=i;for(Zy(e,n,t),r(e[i],o)>0&&Zy(e,n,i);s<a;){for(Zy(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[n],o)?Zy(e,n,a):(++a,Zy(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Zy(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function OX(e){return null===e?NaN:+e}function lR(e,t,n){if(e=Float64Array.from(function*jRe(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),(i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return aR(e);if(t>=1)return qf(e);var i,r=(i-1)*t,o=Math.floor(r),s=qf(NX(e,o).subarray(0,o+1));return s+(aR(e.subarray(o+1))-s)*(r-o)}}function kX(e,t,n=OX){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(r-o)}}function IX(e,t){return lR(e,.5,t)}function*RX(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function uR(e,t,n){const i=Float64Array.from(RX(e,n));return i.sort(Nu),t.map(r=>kX(i,r))}function cR(e,t){return uR(e,[.25,.5,.75],t)}function dR(e,t){const n=e.length,i=function zRe(e,t){const n=function HRe(e,t){let i,n=0,r=0,o=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r))}if(n>1)return o/(n-1)}(e,t);return n&&Math.sqrt(n)}(e,t),r=cR(e,t);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function FX(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a,l,u,c,d,f,o=e.extent[0],s=e.extent[1];const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/i)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=r.length;d<f;++d)c=a/r[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const g=Math.pow(n,-(c>=0?0:1+~~(-c/i))-1);return(e.nice||void 0===e.nice)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ps=Math.random;function GRe(e){Ps=e}function PX(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(RX(e,i)),o=r.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=r[~~(Ps()*o)];c[u]=a/o}return c.sort(Nu),[lR(c,n/2),lR(c,1-n/2)]}function LX(e,t,n,i){i=i||(f=>f);const r=e.length,o=new Float64Array(r);let d,s=0,a=1,l=i(e[0]),u=l,c=l+t;for(;a<r;++a){if(d=i(e[a]),d>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?function WRe(e,t){const n=e.length;let o,s,i=0,r=1;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(s=r+(i+o-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=o}return e}(o,t+t/4):o}function qRe(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function YRe(e,t){let n,i,r;null==t&&(t=e,e=0);const o={min(s){return arguments.length?(n=s||0,r=i-n,o):n},max(s){return arguments.length?(i=s||0,r=i-n,o):i},sample:()=>n+Math.floor(r*Ps()),pdf:s=>s===Math.floor(s)&&s>=n&&s<i?1/r:0,cdf(s){const a=Math.floor(s);return a<n?0:a>=i?1:(a-n+1)/r},icdf:s=>s>=0&&s<=1?n-1+Math.floor(s*r):NaN};return o.min(e).max(t)}const $X=Math.sqrt(2*Math.PI),KRe=Math.SQRT2;let e1=NaN;function KD(e,t){e=e||0,t=t??1;let r,o,n=0,i=0;if(e1==e1)n=e1,e1=NaN;else{do{n=2*Ps()-1,i=2*Ps()-1,r=n*n+i*i}while(0===r||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,e1=i*o}return e+n*t}function fR(e,t,n){const i=(e-(t||0))/(n=n??1);return Math.exp(-.5*i*i)/(n*$X)}function XD(e,t,n){const i=(e-(t=t||0))/(n=n??1),r=Math.abs(i);let o;if(r>37)o=0;else{const s=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,o=s*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,o/=a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function QD(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*KRe*function XRe(e){let n,t=-Math.log((1-e)*(1+e));return t<6.25?(t-=3.125,n=-364441206401782e-35,n=n*t-16850591381820166e-35,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=n*t-1333171662854621e-31,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=n*t-4054566272975207e-29,n=n*t-8151934197605472e-29,n=26335093153082323e-28+n*t,n=n*t-12975133253453532e-27,n=n*t-5415412054294628e-26,n=1.0512122733215323e-9+n*t,n=n*t-4.112633980346984e-9,n=n*t-2.9070369957882005e-8,n=4.2347877827932404e-7+n*t,n=n*t-13654692000834679e-22,n=n*t-13882523362786469e-21,n=.00018673420803405714+n*t,n=n*t-.000740702534166267,n=n*t-.006033670871430149,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*t,n=n*t-2.7517406297064545e-7,n=1.8239629214389228e-8+n*t,n=15027403968909828e-22+n*t,n=n*t-4013867526981546e-21,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=n*t-47318229009055734e-21,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=n*t-.0003550375203628475,n=.0009532893797373805+n*t,n=n*t-.0016882755560235047,n=.002491442096107851+n*t,n=n*t-.003751208507569241,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=n*t-2.555641816996525e-10,n=1.5076572693500548e-9+n*t,n=n*t-3.789465440126737e-9,n=7.61570120807834e-9+n*t,n=n*t-1.496002662714924e-8,n=2.914795345090108e-8+n*t,n=n*t-6.771199775845234e-8,n=2.2900482228026655e-7+n*t,n=n*t-9.9298272942317e-7,n=4526062597223154e-21+n*t,n=n*t-1968177810553167e-20,n=7599527703001776e-20+n*t,n=n*t-.00021503011930044477,n=n*t-.00013871931833623122,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}(2*e-1)}function hR(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>KD(n,i),pdf:o=>fR(o,n,i),cdf:o=>XD(o,n,i),icdf:o=>QD(o,n,i)};return r.mean(e).stdev(t)}function pR(e,t){const n=hR();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(!(t=o)&&e&&(t=dR(e)),r):t},sample:()=>e[~~(Ps()*i)]+t*n.sample(),pdf(o){let s=0,a=0;for(;a<i;++a)s+=n.pdf((o-e[a])/t);return s/t/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=n.cdf((o-e[a])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function gR(e,t){return e=e||0,t=t??1,Math.exp(e+KD()*t)}function mR(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*$X*e)}function _R(e,t,n){return XD(Math.log(e),t,n)}function yR(e,t,n){return Math.exp(QD(e,t,n))}function BX(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>gR(n,i),pdf:o=>mR(o,n,i),cdf:o=>_R(o,n,i),icdf:o=>yR(o,n,i)};return r.mean(e).stdev(t)}function UX(e,t){let i,n=0;const o={weights(s){return arguments.length?(i=function r(s){const a=[];let u,l=0;for(u=0;u<n;++u)l+=a[u]=null==s[u]?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ps();let a=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function vR(e,t){return null==t&&(t=e??1,e=0),e+(t-e)*Ps()}function bR(e,t,n){return null==n&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function wR(e,t,n){return null==n&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ER(e,t,n){return null==n&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function VX(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>vR(n,i),pdf:o=>bR(o,n,i),cdf:o=>wR(o,n,i),icdf:o=>ER(o,n,i)};return null==t&&(t=e??1,e=0),r.min(e).max(t)}function DR(e,t,n){let i=0,r=0;for(const o of e){const s=n(o);null==t(o)||null==s||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function t1(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function JD(e,t,n,i){e=e.filter(h=>{let p=t(h),g=n(h);return null!=p&&(p=+p)>=p&&null!=g&&(g=+g)>=g}),i&&e.sort((h,p)=>t(h)-t(p));const r=e.length,o=new Float64Array(r),s=new Float64Array(r);let c,d,f,a=0,l=0,u=0;for(f of e)o[a]=c=+t(f),s[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<r;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function n1(e,t,n,i){let o,s,r=-1;for(const a of e)o=t(a),s=n(a),null!=o&&(o=+o)>=o&&null!=s&&(s=+s)>=s&&i(o,s,++r)}function lm(e,t,n,i,r){let o=0,s=0;return n1(e,t,n,(a,l)=>{const u=l-r(a),c=l-i;o+=u*u,s+=c*c}),1-o/s}function CR(e,t,n){let i=0,r=0,o=0,s=0,a=0;n1(e,t,n,(c,d)=>{++a,i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=t1(i,r,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:lm(e,t,n,r,u)}}function jX(e,t,n){let i=0,r=0,o=0,s=0,a=0;n1(e,t,n,(c,d)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(d-r)/a,o+=(c*d-o)/a,s+=(c*c-s)/a});const l=t1(i,r,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:lm(e,t,n,r,u)}}function HX(e,t,n){const[i,r,o,s]=JD(e,t,n);let f,h,p,a=0,l=0,u=0,c=0,d=0;n1(e,t,n,(y,v)=>{f=i[d++],h=Math.log(v),p=f*v,a+=(v*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[g,m]=t1(l/s,a/s,u/s,c/s),_=y=>Math.exp(g+m*(y-o));return{coef:[Math.exp(g-m*o),m],predict:_,rSquared:lm(e,t,n,s,_)}}function zX(e,t,n){let i=0,r=0,o=0,s=0,a=0,l=0;n1(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,i+=(h-i)/l,r+=(p-r)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(f-a)/l});const u=t1(i,r,o,s),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:lm(e,t,n,a,c)}}function SR(e,t,n){const[i,r,o,s]=JD(e,t,n),a=i.length;let h,p,g,m,l=0,u=0,c=0,d=0,f=0;for(h=0;h<a;)p=i[h],g=r[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,d+=(p*g-d)/h,f+=(m*g-f)/h;const _=c-l*l,y=l*_-u*u,v=(f*l-d*u)/y,b=(d*_-f*u)/y,w=-v*l,D=E=>v*(E-=o)*E+b*E+w+s;return{coef:[w-b*o+v*o*o+s,b-2*v*o,v],predict:D,rSquared:lm(e,t,n,s,D)}}function GX(e,t,n,i){if(0===i)return DR(e,t,n);if(1===i)return CR(e,t,n);if(2===i)return SR(e,t,n);const[r,o,s,a]=JD(e,t,n),l=r.length,u=[],c=[],d=i+1;let f,h,p,g,m;for(f=0;f<d;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f)*o[p];for(u.push(g),m=new Float64Array(d),h=0;h<d;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f+h);m[h]=g}c.push(m)}c.push(u);const _=function JRe(e){const t=e.length-1,n=[];let i,r,o,s,a;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(o=i;o<t+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(a=0,o=r+1;o<t;++o)a+=e[o][r]*n[o];n[r]=(e[t][r]-a)/e[r][r]}return n}(c),y=v=>{let b=a+_[0]+_[1]*(v-=s)+_[2]*v*v;for(f=3;f<d;++f)b+=_[f]*Math.pow(v,f);return b};return{coef:QRe(d,_,-s,a),predict:y,rSquared:lm(e,t,n,a,y)}}function QRe(e,t,n,i){const r=Array(e);let o,s,a,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,r[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,r[o-s]+=a*Math.pow(n,s)*l;return r[0]+=i,r}const WX=2,qX=1e-12;function YX(e,t,n,i){const[r,o,s,a]=JD(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=WX;){const p=[0,u-1];for(let m=0;m<l;++m){const _=r[m],y=p[0],v=p[1];let w=0,D=0,E=0,S=0,M=0;const k=1/Math.abs(r[_-r[y]>r[v]-_?y:v]-_||1);for(let P=y;P<=v;++P){const A=r[P],C=o[P],T=ZRe(Math.abs(_-A)*k)*f[P],O=A*T;w+=T,D+=O,E+=C*T,S+=C*O,M+=A*O}const[R,F]=t1(D/w,E/w,S/w,M/w);c[m]=R+F*_,d[m]=Math.abs(o[m]-c[m]),eFe(r,m+1,p)}if(h===WX)break;const g=IX(d);if(Math.abs(g)<qX)break;for(let _,y,m=0;m<l;++m)_=d[m]/(6*g),f[m]=_>=1?qX:(y=1-_*_)*y}return function tFe(e,t,n,i){const r=e.length,o=[];let u,s=0,a=0,l=[];for(;s<r;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=i,l=[u,t[s]],o.push(l));return l[1]+=i,o}(r,c,s,a)}function ZRe(e){return(e=1-e*e*e)*e*e}function eFe(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}const nFe=.5*Math.PI/180;function ZD(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/i,u=[r(o)],c=[];if(n===i){for(let g=1;g<i;++g)u.push(r(o+g/n*a));return u.push(r(s)),u}c.push(r(s));for(let g=n;--g>0;)c.push(r(o+g/n*a));let d=u[0],f=c[c.length-1];const h=1/a,p=function iFe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const s=t[o][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}(d[1],c);for(;f;){const g=r((d[0]+f[0])/2);g[0]-d[0]>=l&&rFe(d,g,f,h,p)>nFe?c.push(g):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function rFe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-s)}function Qo(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}function AR(e){return e&&e.length?1===e.length?e[0]:function sFe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}(e):function(){return""}}function KX(e,t,n){return n||e+(t?"_"+t:"")}const TR=()=>{},aFe={init:TR,add:TR,rem:TR,idx:0},i1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},r1=Object.keys(i1).filter(e=>"__count__"!==e);function XX(e,t,n){return i1[e](n,t)}function QX(e,t){return e.idx-t.idx}function cFe(){this.valid=0,this.missing=0,this._ops.forEach(e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param))}function dFe(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function fFe(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function hFe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function JX(e,t){const n=t||yr,i=function uFe(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=i1[r]())})};return e.forEach(n),Object.values(t).sort(QX)}(e),r=e.slice().sort(QX);function o(s){this._ops=i,this._out=r,this.cell=s,this.init()}return o.prototype.init=cFe,o.prototype.add=dFe,o.prototype.rem=fFe,o.prototype.set=hFe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function xR(e){this._key=e?ks(e):Be,this.reset()}[...r1,"__count__"].forEach(e=>{i1[e]=function lFe(e,t){return(n,i)=>ut({name:e,aggregate_param:i,out:n||e},aFe,t)}(e,i1[e])});const Zi=xR.prototype;function Wc(e){Q.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function MR(e){Q.call(this,null,e)}function ZX(e,t,n){const i=e;let r=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>r.length,data:(l,u)=>(a&&(r=r.filter(c=>!s[i(c)]),s={},a=0),u&&l&&r.sort(l),o.length&&(r=l?KY(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function NR(e){Q.call(this,[],e)}function eQ(e){an.call(this,null,gFe,e)}function gFe(e){return this.value&&!e.modified()?this.value:cI(e.fields,e.orders)}function OR(e){Q.call(this,null,e)}function kR(e){Q.call(this,null,e)}Zi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Zi.add=function(e){this._add.push(e)},Zi.rem=function(e){this._rem.push(e)},Zi.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),s={};let a,l,u;for(a=0;a<r;++a)s[n(t[a])]=1;for(a=0,l=0;a<i;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o},Zi.distinct=function(e){const t=this.values(),n={};let o,i=t.length,r=0;for(;--i>=0;)o=e(t[i])+"",Ae(n,o)||(n[o]=1,++r);return r},Zi.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=HY(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Zi.argmin=function(e){return this.extent(e)[0]||{}},Zi.argmax=function(e){return this.extent(e)[1]||{}},Zi.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},Zi.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},Zi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=cR(this.values(),e),this._get=e),this._q},Zi.q1=function(e){return this.quartile(e)[0]},Zi.q2=function(e){return this.quartile(e)[1]},Zi.q3=function(e){return this.quartile(e)[2]},Zi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=PX(this.values(),1e3,.05,e),this._get=e),this._ci},Zi.ci0=function(e){return this.ci(e)[0]},Zi.ci1=function(e){return this.ci(e)[1]},Wc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:r1},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},ye(Wc,Q,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t),function s(a,l,u){const c=n[u],d=i[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<r?s(h,l,u):t[h]||e.cell(h,l)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(y){const v=De(_r(y)),b=v.length;let D,w=0;for(;w<b;++w)i[D=v[w]]||(i[D]=1,t.push(D))}this._dims=De(e.groupby),this._dnames=this._dims.map(y=>{const v=zn(y);return r(y),n.push(v),v}),this.cellkey=e.key?e.key:AR(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,f,h,p,g,m,_;for(u!==s.length&&ee("Unmatched number of fields and aggregate ops."),_=0;_<u;++_)d=o[_],f=s[_],h=a[_]||null,null==d&&"count"!==f&&ee("Null aggregate field specified."),g=zn(d),m=KX(f,g,l[_]),n.push(m),"count"!==f?(p=c[g],p||(r(d),p=c[g]=[],p.field=d,this._measures.push(p)),"count"!==f&&(this._countOnly=!1),p.push(XX(f,h,m))):this._counts.push(m);return this._measures=this._measures.map(y=>JX(y,y.field)),Object.create(null)},cellkey:AR(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new xR),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let s=0;s<r;++s)o[n[s]]=i[s](e);return t?_X(t.tuple,o):Vt(o)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&s.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(0===l.num&&r?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}}),MR.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},ye(MR,Q,{transform(e,t){const n=!1!==e.interval,i=this._bins(e),r=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return u=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(_r(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[a]=d,c[l]=null==d?null:r+o*(1+(d-r)/o)}:c=>c[a]=i(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=FX(e),i=n.step;let s,a,r=n.start,o=r+Math.ceil((n.stop-r)/i)*i;null!=(s=e.anchor)&&(a=s-(r+i*Math.floor((s-r)/i)),r+=a,o+=a);const l=function(u){let c=vr(t(u));return null==c?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(1e-14+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=mo(l,_r(t),e.name||"bin_"+zn(t))}}),NR.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ye(NR,Q,{transform(e,t){const n=t.fork(t.ALL),i=ZX(Be,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Gf(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),ye(eQ,an),OR.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},ye(OR,Q,{transform(e,t){const n=d=>f=>{for(var p,h=function mFe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(a(f),e.case,o)||[],g=0,m=h.length;g<m;++g)s.test(p=h[g])||d(p)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=Vt({}),l[r]=a,l[o]=u,s.add.push(l)):0===u?(l&&s.rem.push(l),n[a]=null,i[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}}),kR.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ye(kR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=function _Fe(e,t,n,i){for(var l,u,r=[],o={},s=e.length,a=0;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],i(o)&&(r.push(Vt(o)),(o={})[t]=u);return r}(a,r,o,e.filter||Is)):n.mod=a,n.source=this.value,n.modifies(i)}});const tQ={kde:pR,mixture:UX,normal:hR,lognormal:BX,uniform:VX},yFe="distributions",nQ="function",vFe="field";function iQ(e,t){const n=e[nQ];Ae(tQ,n)||ee("Unknown distribution function: "+n);const i=tQ[n]();for(const r in e)r===vFe?i.data((e.from||t()).map(e[r])):r===yFe?i[r](e[r].map(o=>iQ(o,t))):typeof i[r]===nQ&&i[r](e[r]);return i}function IR(e){Q.call(this,null,e)}const rQ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function oQ(e,t){return e?e.map((n,i)=>t[i]||zn(n)):null}function RR(e,t,n){const i=[],r=d=>d(l);let o,s,a,l,u,c;if(null==t)i.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}function FR(e){Q.call(this,null,e)}function aQ(e){an.call(this,null,DFe,e),this.modified(!0)}function DFe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:mo(n=>t(n,e),_r(t),zn(t))}function PR(e){Q.call(this,[void 0,void 0],e)}function LR(e,t){an.call(this,e),this.parent=t,this.count=0}function eC(e){Q.call(this,{},e),this._keys=Wg();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}function lQ(e){an.call(this,null,CFe,e)}function CFe(e){return this.value&&!e.modified()?this.value:te(e.name)?De(e.name).map(t=>ks(t)):ks(e.name,e.as)}function $R(e){Q.call(this,Wg(),e)}function BR(e){Q.call(this,[],e)}function UR(e){Q.call(this,[],e)}function VR(e){Q.call(this,null,e)}function uQ(e){Q.call(this,[],e)}IR.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rQ.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rQ},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},ye(IR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=iQ(e.distribution,function wFe(e){return()=>e.materialize(e.SOURCE).source}(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&ee("Invalid density method: "+s),!e.extent&&!i.data&&ee("Missing density extent parameter."),s=i[s];const a=e.as||["value","density"],u=ZD(s,e.extent||ml(i.data()),r,o).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],Vt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),FR.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},ye(FR,Q,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,i=RR(t.source,e.groupby,yr),r=e.smooth||!1,o=e.field,s=e.step||((e,t)=>Fy(ml(e,t))/30)(n,o),a=Gf((p,g)=>o(p)-o(g)),l=e.as||"bin",u=i.length;let h,c=1/0,d=-1/0,f=0;for(;f<u;++f){const p=i[f].sort(a);h=-1;for(const g of LX(p,s,r,o))g<c&&(c=g),g>d&&(d=g),p[++h][l]=g}return this.value={start:c,stop:d,step:s},t.reflow(!0).modifies(l)}}),ye(aQ,an),PR.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ye(PR,Q,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],s=n[1];if((r||null==o)&&(o=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,a=>{const l=vr(i(a));null!=l&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=zn(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}}),ye(LR,an,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),ye(eC,Q,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s,a,o=Ae(r,e)&&r[e];return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new LR(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&null!=t[r];++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Be(l),c=o.get(u);void 0!==c&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(Be(l),u),a(u).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Be(l),c=o.get(u),d=i(l);c===d?a(d).mod(l):(o.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Be(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Be(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),ye(lQ,an),$R.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ye($R,Q,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,s=r.rem,a=r.mod,l=e.expr;let u=!0;function c(d){const f=Be(d),h=l(d,e),p=i.get(f);h&&p?(i.delete(f),o.push(d)):h||p?u&&h&&!p&&a.push(d):(i.set(f,1),s.push(d))}return t.visit(t.REM,d=>{const f=Be(d);i.has(f)?i.delete(f):s.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(Be(d),1)}),t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}}),BR.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},ye(BR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=oQ(i,e.as||[]),o=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=i.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let d,f,h,c=0;for(;c<u;++c){for(f=ZI(a),d=0;d<s;++d)f[r[d]]=null==(h=l[d][c])?null:h;o&&(f[o]=c),n.add.push(f)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}}),UR.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ye(UR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(zn),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let d,c=0;c<l;++c)d=ZI(u),d[s]=r[c],d[a]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}}),VR.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ye(VR,Q,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,s=>s[i]=n(s,e))}}),ye(uQ,Q,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s,a,l,r=this.value,o=e.size-r.length;if(o>0){for(s=[];--o>=0;)s.push(l=Vt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-o);return n.source=this.value=r,n}});const tC={value:"value",median:IX,mean:function oFe(e,t){let n=0,i=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n},min:aR,max:qf},SFe=[];function jR(e){Q.call(this,[],e)}function HR(e){Wc.call(this,e)}function zR(e){Q.call(this,null,e)}function cQ(e){an.call(this,null,MFe,e)}function MFe(e){return this.value&&!e.modified()?this.value:fI(e.fields,e.flat)}function dQ(e){Q.call(this,[],e),this._pending=null}function GR(e,t,n){n.forEach(Vt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function WR(e){Q.call(this,{},e)}function fQ(e){an.call(this,null,OFe,e)}function OFe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let o,s,i=1/0,r=-1/0;for(o=0;o<n;++o)s=t[o],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function hQ(e){an.call(this,null,kFe,e)}function kFe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function pQ(e){Q.call(this,null,e)}function qR(e){Wc.call(this,e)}function gQ(e){eC.call(this,e)}function YR(e){Q.call(this,null,e)}function mQ(e){Q.call(this,null,e)}function KR(e){Q.call(this,null,e)}function _Q(e){Q.call(this,null,e)}function XR(e){Q.call(this,[],e),this.count=0}function QR(e){Q.call(this,null,e)}function yQ(e){Q.call(this,null,e),this.modified(!0)}function JR(e){Q.call(this,null,e)}jR.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ye(jR,Q,{transform(e,t){var f,h,p,g,m,_,y,v,b,w,n=t.fork(t.ALL),i=function AFe(e){var n,t=e.method||tC.value;if(null!=tC[t])return t===tC.value?(n=void 0!==e.value?e.value:0,()=>n):tC[t];ee("Unrecognized imputation method: "+t)}(e),r=function TFe(e){const t=e.field;return n=>n?t(n):NaN}(e),o=zn(e.field),s=zn(e.key),a=(e.groupby||[]).map(zn),l=function xFe(e,t,n,i){var u,c,d,f,h,p,g,m,r=_=>_(m),o=[],s=i?i.slice():[],a={},l={};for(s.forEach((_,y)=>a[_]=y+1),f=0,g=e.length;f<g;++f)p=n(m=e[f]),h=a[p]||(a[p]=s.push(p)),(d=l[c=(u=t?t.map(r):SFe)+""])||(d=l[c]=[],o.push(d),d.values=u),d[h-1]=m;return o.domain=s,o}(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length;for(m=0,v=l.length;m<v;++m)for(p=(f=l[m]).values,h=NaN,y=0;y<d;++y)if(null==f[y]){for(g=l.domain[y],w={_impute:!0},_=0,b=p.length;_<b;++_)w[a[_]]=p[_];w[s]=g,w[o]=Number.isNaN(h)?h=i(f,r):h,u.push(Vt(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}}),HR.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:r1},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},ye(HR,Wc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{ut(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),zR.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},ye(zR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=RR(i,e.groupby,e.field),o=(e.groupby||[]).map(zn),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==a&&"cdf"!==a&&ee("Invalid density method: "+a),"shared"===e.resolve&&(c||(c=ml(i,e.field)),d=f=e.steps||f),r.forEach(h=>{const p=pR(h,s)[a],g=e.counts?h.length:1;ZD(p,c||ml(h),d,f).forEach(_=>{const y={};for(let v=0;v<o.length;++v)y[o[v]]=h.dims[v];y[l[0]]=_[0],y[l[1]]=_[1]*g,u.push(Vt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),ye(cQ,an),ye(dQ,Q,{transform(e,t){const n=t.dataflow;return this._pending?GR(this,t,this._pending):function NFe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?GR(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=De(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>GR(this,t,De(i.data)))}}),WR.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ye(WR,Q,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=null==e.default?null:e.default,s=e.modified(),a=n.length;let d,f,h,l=s?t.SOURCE:t.ADD,u=t,c=e.as;return r?(f=r.length,a>1&&!c&&ee('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&ee('The "as" parameter has too few output field names.'),c=c||r.map(zn),d=function(p){for(var _,y,g=0,m=0;g<a;++g)if(null==(y=i.get(n[g](p))))for(_=0;_<f;++_,++m)p[c[m]]=o;else for(_=0;_<f;++_,++m)p[c[m]]=r[_](y)}):(c||ee("Missing output field names."),d=function(p){for(var m,g=0;g<a;++g)m=i.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}}),ye(fQ,an),ye(hQ,an),ye(pQ,Q,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),qR.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:r1,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},ye(qR,Wc,{_transform:Wc.prototype.transform,transform(e,t){return this._transform(function IFe(e,t){const n=e.field,i=e.value,r=("count"===e.op?"__count__":e.op)||"sum",o=_r(n).concat(_r(i)),s=function FFe(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const s=e(o);i[s]||(i[s]=1,r.push(s))}),r.sort(ED),t?r.slice(0,t):r}(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(a=>function RFe(e,t,n,i){return mo(r=>t(r)===e?n(r):NaN,i,e+"")}(a,n,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}(e,t),t)}}),ye(gQ,eC,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(Be(o),n,t,o);return(e.modified("field")||i&&t.modified(_r(i)))&&ee("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const s=r(o);i(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=r(o);i(o).forEach(a=>s.add(Vt(a)))}),t.visit(t.REM,o=>{const s=r(o);i(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}}),YR.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ye(YR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=oQ(e.fields,e.as||[]),o=i?(a,l)=>function PFe(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}(a,l,i,r):jD;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Be(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,Vt({}));s[Be(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Be(a)]))}),n}}),ye(mQ,Q,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),KR.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},ye(KR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const o=RR(t.materialize(t.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(zn),a=[],l=e.step||.01,u=e.probs||Qo(l/2,1-1e-14,l),c=u.length;return o.forEach(d=>{const f=uR(d,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=d.dims[g];p[i[0]]=u[h],p[i[1]]=f[h],a.push(Vt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),ye(_Q,Q,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=Be(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=ZI(r);i[Be(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[Be(r)];for(const s in r)o[s]=r[s],n.modifies(s);n.mod.push(o)})),n}}),XR.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ye(XR,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[Be(d)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let d,f;s.length<r?s.push(c):(f=~~((a+1)*Ps()),f<s.length&&f>=l&&(d=s[f],o[Be(d)]&&n.rem.push(d),s[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Be(c);o[d]&&(o[d]=-1,n.rem.push(c)),--a}),s=s.filter(c=>-1!==o[Be(c)])),(t.rem.length||i)&&s.length<r&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[Be(c)]||u(c)}),l=-1),i&&s.length>r){const c=s.length-r;for(let d=0;d<c;++d)o[Be(s[d])]=-1,n.rem.push(s[d]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Be(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[Be(c)])),this.count=a,this.value=n.source=s,n}}),QR.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ye(QR,Q,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Qo(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,Vt(o)}),n.add=t.add.concat(this.value),n}}),ye(yQ,Q,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const vQ=["unit0","unit1"];function bQ(e){Q.call(this,Wg(),e)}function wQ(e){Q.call(this,null,e)}JR.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TI,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vQ}]},ye(JR,Q,{transform(e,t){const n=e.field,i=!1!==e.interval,r="utc"===e.timezone,o=this._floor(e,t),s=(r?im:nm)(o.unit).offset,a=e.as||vQ,l=a[0],u=a[1],c=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(_r(n)))&&(h=(t=t.reflow(!0)).SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const g=n(p);let m,_;null==g?(p[l]=null,i&&(p[u]=null)):(p[l]=m=_=o(g),i&&(p[u]=_=s(m,c)),m<d&&(d=m),_>f&&(f=_))}),o.start=d,o.stop=f,t.modifies(i?a:l)},_floor(e,t){const n="utc"===e.timezone,{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:FK({extent:e.extent||ml(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=MI(i),s=this.value||{},a=(n?CK:DK)(o,r);return a.unit=St(o),a.units=o,a.step=r,a.start=s.start,a.stop=s.stop,this.value=a}}),ye(bQ,Q,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=a=>r.set(i(a),a);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>r.delete(i(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}}),ye(wQ,Q,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Gf(e.sort)):t.source).map(e.field))}});const o1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=o1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||ee("ntile num must be greater than zero.");const n=o1.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||ee("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return null!=i?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=function BFe(e,t,n){for(let i=t.length;n<i;++n)if(null!=e(t[n]))return n;return-1}(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}},UFe=Object.keys(o1);function EQ(e){const t=De(e.ops),n=De(e.fields),i=De(e.params),r=De(e.aggregate_params),o=De(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){De(_r(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],_=i[g],y=r[g]||null,v=zn(m),b=KX(p,v,o[g]);if(h(m),s.push(b),Ae(o1,p))a.push(function $Fe(e,t,n,i){const r=o1[e](t,n);return{init:r.init||Pc,update:function(o,s){s[i]=r.next(o)}}}(p,m,_,b));else{if(null==m&&"count"!==p&&ee("Null aggregate field specified."),"count"===p)return void c.push(b);f=!1;let w=u[v];w||(w=u[v]=[],w.field=m,d.push(w)),w.push(XX(p,y,b))}}),(c.length||d.length)&&(this.cell=function VFe(e,t,n){e=e.map(l=>JX(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),s=0;s<r;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new xR;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)o[l].init()},i}(d,c,f)),this.inputs=Object.keys(l)}const DQ=EQ.prototype;function ZR(e){Q.call(this,{},e),this._mlen=0,this._mods=[]}function jFe(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(n),l=a.length,u=o?em(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||br(-1)};t.init();for(let d=0;d<l;++d)HFe(c,s,d,l),o&&zFe(c,u),t.update(c,a[d])}function HFe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function zFe(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,s=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<s&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}function nC(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function iC(e){this._context=e}function qc(){}function CQ(e){this._context=e}function SQ(e){this._context=e}function AQ(e,t){this._basis=new iC(e),this._beta=t}DQ.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},DQ.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<o;++s)i[s].update(e,t)},ZR.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:UFe.concat(r1)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},ye(ZR,Q,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Gf(e.sort),r=AR(e.groupby),o=a=>this.group(r(a));let s=this.state;(!s||n)&&(s=this.state=new EQ(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)jFe(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=ZX(Be),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),iC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},CQ.prototype={areaStart:qc,areaEnd:qc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},SQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:nC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},AQ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var l,i=e[0],r=t[0],o=e[n]-i,s=t[n]-r,a=-1;++a<=n;)this._basis.point(this._beta*e[a]+(1-this._beta)*(i+(l=a/n)*o),this._beta*t[a]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const YFe=function e(t){function n(i){return 1===t?new iC(i):new AQ(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function rC(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function eF(e,t){this._context=e,this._k=(1-t)/6}eF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rC(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:rC(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KFe=function e(t){function n(i){return new eF(i,t)}return n.tension=function(i){return e(+i)},n}(0);function tF(e,t){this._context=e,this._k=(1-t)/6}tF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rC(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XFe=function e(t){function n(i){return new tF(i,t)}return n.tension=function(i){return e(+i)},n}(0);function nF(e,t){this._context=e,this._k=(1-t)/6}nF.prototype={areaStart:qc,areaEnd:qc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rC(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QFe=function e(t){function n(i){return new nF(i,t)}return n.tension=function(i){return e(+i)},n}(0),TQ=Math.abs,Dr=Math.atan2,ku=Math.cos,JFe=Math.max,um=Math.min,bo=Math.sin,wn=Math.sqrt,Cr=1e-12,Yc=Math.PI,oC=Yc/2,s1=2*Yc;function xQ(e){return e>=1?oC:e<=-1?-oC:Math.asin(e)}function iF(e,t,n){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Cr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Cr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function MQ(e,t){this._context=e,this._alpha=t}MQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:iF(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ePe=function e(t){function n(i){return t?new MQ(i,t):new eF(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function NQ(e,t){this._context=e,this._alpha=t}NQ.prototype={areaStart:qc,areaEnd:qc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iF(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tPe=function e(t){function n(i){return t?new NQ(i,t):new nF(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function OQ(e,t){this._context=e,this._alpha=t}OQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iF(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nPe=function e(t){function n(i){return t?new OQ(i,t):new tF(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function kQ(e){this._context=e}function rF(e){return new kQ(e)}function IQ(e){this._context=e}function RQ(e){return e<0?-1:1}function FQ(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(RQ(o)+RQ(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function PQ(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function oF(e,t,n){var i=e._x0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,e._y0+a*t,o-a,s-a*n,o,s)}function sC(e){this._context=e}function LQ(e){this._context=new $Q(e)}function $Q(e){this._context=e}function BQ(e){this._context=e}function UQ(e){var t,i,n=e.length-1,r=new Array(n),o=new Array(n),s=new Array(n);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o[t]-=i=r[t]/o[t-1],s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function aC(e,t){this._context=e,this._t=t}function qt(e){return function(){return e}}kQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},IQ.prototype={areaStart:qc,areaEnd:qc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},sC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oF(this,this._t0,PQ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oF(this,PQ(this,n=FQ(this,e,t)),n);break;default:oF(this,this._t0,n=FQ(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(LQ.prototype=Object.create(sC.prototype)).point=function(e,t){sC.prototype.point.call(this,t,e)},$Q.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},BQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=UQ(e),r=UQ(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},aC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const sF=Math.PI,aF=2*sF,Yf=1e-6,cPe=aF-Yf;function VQ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class lC{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?VQ:function dPe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VQ;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-t,u=r-n,c=s-t,d=a-n,f=c*c+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Yf)if(Math.abs(d*l-u*c)>Yf&&o){let h=i-s,p=r-a,g=l*l+u*u,m=h*h+p*p,_=Math.sqrt(g),y=Math.sqrt(f),v=o*Math.tan((sF-Math.acos((g+f-m)/(2*_*y)))/2),b=v/y,w=v/_;Math.abs(b-1)>Yf&&this._append`L${t+b*c},${n+b*d}`,this._append`A${o},${o},0,0,${+(d*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}else this._append`L${this._x1=t},${this._y1=n}`}arc(t,n,i,r,o,s){if(t=+t,n=+n,s=!!s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),u=t+a,c=n+l,d=1^s,f=s?r-o:o-r;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Yf||Math.abs(this._y1-c)>Yf)&&this._append`L${u},${c}`,i&&(f<0&&(f=f%aF+aF),f>cPe?this._append`A${i},${i},0,1,${d},${t-a},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:f>Yf&&this._append`A${i},${i},0,${+(f>=sF)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function uC(){return new lC}function cC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new lC(t)}function fPe(e){return e.innerRadius}function hPe(e){return e.outerRadius}function pPe(e){return e.startAngle}function gPe(e){return e.endAngle}function mPe(e){return e&&e.padAngle}function dC(e,t,n,i,r,o,s){var a=e-n,l=t-i,u=(s?o:-o)/wn(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,g=i+d,m=(f+p)/2,_=(h+g)/2,y=p-f,v=g-h,b=y*y+v*v,w=r-o,D=f*g-p*h,E=(v<0?-1:1)*wn(JFe(0,w*w*b-D*D)),S=(D*v-y*E)/b,M=(-D*y-v*E)/b,k=(D*v+y*E)/b,R=(-D*y+v*E)/b,F=S-m,P=M-_,A=k-m,C=R-_;return F*F+P*P>A*A+C*C&&(S=k,M=R),{cx:S,cy:M,x01:-c,y01:-d,x11:S*(r/w-1),y11:M*(r/w-1)}}function jQ(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function HQ(e){return e[0]}function zQ(e){return e[1]}function GQ(e,t){var n=qt(!0),i=null,r=rF,o=null,s=cC(a);function a(l){var u,d,h,c=(l=jQ(l)).length,f=!1;for(null==i&&(o=r(h=s())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,u,l),+t(d,u,l));if(h)return o=null,h+""||null}return e="function"==typeof e?e:void 0===e?HQ:qt(e),t="function"==typeof t?t:void 0===t?zQ:qt(t),a.x=function(l){return arguments.length?(e="function"==typeof l?l:qt(+l),a):e},a.y=function(l){return arguments.length?(t="function"==typeof l?l:qt(+l),a):t},a.defined=function(l){return arguments.length?(n="function"==typeof l?l:qt(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,null!=i&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(null==l?i=o=null:o=r(i=l),a):i},a}function WQ(e,t,n){var i=null,r=qt(!0),o=null,s=rF,a=null,l=cC(u);function u(d){var f,h,p,m,y,g=(d=jQ(d)).length,_=!1,v=new Array(g),b=new Array(g);for(null==o&&(a=s(y=l())),f=0;f<=g;++f){if(!(f<g&&r(m=d[f],f,d))===_)if(_=!_)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(v[p],b[p]);a.lineEnd(),a.areaEnd()}_&&(v[f]=+e(m,f,d),b[f]=+t(m,f,d),a.point(i?+i(m,f,d):v[f],n?+n(m,f,d):b[f]))}if(y)return a=null,y+""||null}function c(){return GQ().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?HQ:qt(+e),t="function"==typeof t?t:qt(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?zQ:qt(+n),u.x=function(d){return arguments.length?(e="function"==typeof d?d:qt(+d),i=null,u):e},u.x0=function(d){return arguments.length?(e="function"==typeof d?d:qt(+d),u):e},u.x1=function(d){return arguments.length?(i=null==d?null:"function"==typeof d?d:qt(+d),u):i},u.y=function(d){return arguments.length?(t="function"==typeof d?d:qt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t="function"==typeof d?d:qt(+d),u):t},u.y1=function(d){return arguments.length?(n=null==d?null:"function"==typeof d?d:qt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(d){return arguments.length?(r="function"==typeof d?d:qt(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,null!=o&&(a=s(o)),u):s},u.context=function(d){return arguments.length?(null==d?o=a=null:a=s(o=d),u):o},u}uC.prototype=lC.prototype,wn(3);const lF={draw(e,t){const n=wn(t/Yc);e.moveTo(n,0),e.arc(0,0,n,0,s1)}};wn(1/3),bo(Yc/10),bo(7*Yc/10);function Kc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}bo(s1/10),ku(s1/10),wn(3),wn(3),wn(3),wn(12);const KQ=em(Nu),fC=KQ.right,UPe=KQ.left,a1=(em(OX),fC);function cm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function l1(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xc(){}var dm=1/.7,fm="\\s*([+-]?\\d+)\\s*",u1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VPe=/^#([0-9a-f]{3,8})$/,jPe=new RegExp(`^rgb\\(${fm},${fm},${fm}\\)$`),HPe=new RegExp(`^rgb\\(${wl},${wl},${wl}\\)$`),zPe=new RegExp(`^rgba\\(${fm},${fm},${fm},${u1}\\)$`),GPe=new RegExp(`^rgba\\(${wl},${wl},${wl},${u1}\\)$`),WPe=new RegExp(`^hsl\\(${u1},${wl},${wl}\\)$`),qPe=new RegExp(`^hsla\\(${u1},${wl},${wl},${u1}\\)$`),XQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function QQ(){return this.rgb().formatHex()}function JQ(){return this.rgb().formatRgb()}function c1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VPe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ZQ(t):3===n?new Oi(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?hC(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?hC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jPe.exec(e))?new Oi(t[1],t[2],t[3],1):(t=HPe.exec(e))?new Oi(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=zPe.exec(e))?hC(t[1],t[2],t[3],t[4]):(t=GPe.exec(e))?hC(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=WPe.exec(e))?nJ(t[1],t[2]/100,t[3]/100,1):(t=qPe.exec(e))?nJ(t[1],t[2]/100,t[3]/100,t[4]):XQ.hasOwnProperty(e)?ZQ(XQ[e]):"transparent"===e?new Oi(NaN,NaN,NaN,0):null}function ZQ(e){return new Oi(e>>16&255,e>>8&255,255&e,1)}function hC(e,t,n,i){return i<=0&&(e=t=n=NaN),new Oi(e,t,n,i)}function dF(e){return e instanceof Xc||(e=c1(e)),e?new Oi((e=e.rgb()).r,e.g,e.b,e.opacity):new Oi}function Qc(e,t,n,i){return 1===arguments.length?dF(e):new Oi(e,t,n,i??1)}function Oi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function eJ(){return`#${Qf(this.r)}${Qf(this.g)}${Qf(this.b)}`}function tJ(){const e=pC(this.opacity);return`${1===e?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${1===e?")":`, ${e})`}`}function pC(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qf(e){return((e=Xf(e))<16?"0":"")+e.toString(16)}function nJ(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new va(e,t,n,i)}function iJ(e){if(e instanceof va)return new va(e.h,e.s,e.l,e.opacity);if(e instanceof Xc||(e=c1(e)),!e)return new va;if(e instanceof va)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new va(s,a,l,e.opacity)}function gC(e,t,n,i){return 1===arguments.length?iJ(e):new va(e,t,n,i??1)}function va(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function rJ(e){return(e=(e||0)%360)<0?e+360:e}function mC(e){return Math.max(0,Math.min(1,e||0))}function fF(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function oJ(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function sJ(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1];return oJ((n-i/t)*t,i>0?e[i-1]:2*r-o,r,o,i<t-1?e[i+2]:2*o-r)}}function aJ(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t);return oJ((n-i/t)*t,e[(i+t-1)%t],e[i%t],e[(i+1)%t],e[(i+2)%t])}}cm(Xc,c1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QQ,formatHex:QQ,formatHex8:function YPe(){return this.rgb().formatHex8()},formatHsl:function KPe(){return iJ(this).formatHsl()},formatRgb:JQ,toString:JQ}),cm(Oi,Qc,l1(Xc,{brighter(e){return e=null==e?dm:Math.pow(dm,e),new Oi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Oi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oi(Xf(this.r),Xf(this.g),Xf(this.b),pC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eJ,formatHex:eJ,formatHex8:function XPe(){return`#${Qf(this.r)}${Qf(this.g)}${Qf(this.b)}${Qf(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:tJ,toString:tJ})),cm(va,gC,l1(Xc,{brighter(e){return e=null==e?dm:Math.pow(dm,e),new va(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new va(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Oi(fF(e>=240?e-240:e+120,r,i),fF(e,r,i),fF(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new va(rJ(this.h),mC(this.s),mC(this.l),pC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pC(this.opacity);return`${1===e?"hsl(":"hsla("}${rJ(this.h)}, ${100*mC(this.s)}%, ${100*mC(this.l)}%${1===e?")":`, ${e})`}`}}));const _C=e=>()=>e;function lJ(e,t){return function(n){return e+n*t}}function yC(e,t){var n=t-e;return n?lJ(e,n>180||n<-180?n-360*Math.round(n/360):n):_C(isNaN(e)?t:e)}function ki(e,t){var n=t-e;return n?lJ(e,n):_C(isNaN(e)?t:e)}const hF=function e(t){var n=function JPe(e){return 1==(e=+e)?ki:function(t,n){return n-t?function QPe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):_C(isNaN(t)?n:t)}}(t);function i(r,o){var s=n((r=Qc(r)).r,(o=Qc(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=ki(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function uJ(e){return function(t){var s,a,n=t.length,i=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=Qc(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var ZPe=uJ(sJ),eLe=uJ(aJ);function pF(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function cJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tLe(e,t){return(cJ(t)?pF:dJ)(e,t)}function dJ(e,t){var s,n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n);for(s=0;s<i;++s)r[s]=Jc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function fJ(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ba(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hJ(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=Jc(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var gF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mF=new RegExp(gF.source,"g");function pJ(e,t){var i,r,o,n=gF.lastIndex=mF.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(i=gF.exec(e))&&(r=mF.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:ba(i,r)})),n=mF.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function iLe(e){return function(t){return e(t)+""}}(l[0].x):function nLe(e){return function(){return e}}(t):(t=l.length,function(u){for(var d,c=0;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Jc(e,t){var i,n=typeof t;return null==t||"boolean"===n?_C(t):("number"===n?ba:"string"===n?(i=c1(t))?(t=i,hF):pJ:t instanceof c1?hF:t instanceof Date?fJ:cJ(t)?pF:Array.isArray(t)?dJ:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?hJ:ba)(e,t)}function d1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _F(e){return+e}var gJ=[0,1];function wo(e){return e}function yF(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function rLe(e){return function(){return e}}(isNaN(t)?NaN:.5)}function sLe(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=yF(r,i),o=n(s,o)):(i=yF(i,r),o=n(o,s)),function(a){return o(i(a))}}function aLe(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=yF(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=a1(e,a,1,i)-1;return o[l](r[l](a))}}function f1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vC(){var i,r,o,a,l,u,e=gJ,t=gJ,n=Jc,s=wo;function c(){var f=Math.min(e.length,t.length);return s!==wo&&(s=function oLe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}(e[0],e[f-1])),a=f>2?aLe:sLe,l=u=null,d}function d(f){return null==f||isNaN(f=+f)?o:(l||(l=a(e.map(i),t,n)))(i(s(f)))}return d.invert=function(f){return s(r((u||(u=a(t,e.map(i),ba)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,_F),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=d1,c()},d.clamp=function(f){return arguments.length?(s=!!f||wo,c()):s!==wo},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return i=f,r=h,c()}}function mJ(){return vC()(wo,wo)}function El(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Zc(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function _J(e,t,n,i){var o,r=Vc(e,t,n);switch((i=Vf(i??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==i.precision&&!isNaN(o=iK(r,s))&&(i.precision=o),EI(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(o=rK(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(o=oK(r))&&(i.precision=o-2*("%"===i.type))}return TD(i)}function Jf(e){var t=e.domain;return e.ticks=function(n){var i=t();return vI(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return _J(r[0],r[r.length-1],n??10,i)},e.nice=function(n){null==n&&(n=10);var l,u,i=t(),r=0,o=i.length-1,s=i[r],a=i[o],c=10;for(a<s&&(u=s,s=a,a=u,u=r,r=o,o=u);c-- >0;){if((u=bI(s,a,n))===l)return i[r]=s,i[o]=a,t(i);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else{if(!(u<0))break;s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u}l=u}return e},e}function bJ(e,t){var s,n=0,i=(e=e.slice()).length-1,r=e[n],o=e[i];return o<r&&(s=n,n=i,i=s,s=r,r=o,o=s),e[n]=t.floor(r),e[i]=t.ceil(o),e}function wJ(e){return Math.log(e)}function EJ(e){return Math.exp(e)}function lLe(e){return-Math.log(-e)}function uLe(e){return-Math.exp(-e)}function cLe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function DJ(e){return(t,n)=>-e(-t,n)}function vF(e){const t=e(wJ,EJ),n=t.domain;let r,o,i=10;function s(){return r=function fLe(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),o=function dLe(e){return 10===e?cLe:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=DJ(r),o=DJ(o),e(lLe,uLe)):e(wJ,EJ),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let p,g,f=r(u),h=r(c);const m=null==a?10:+a;let _=[];if(!(i%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<i;++p)if(g=f<0?p/o(-f):p*o(f),!(g<u)){if(g>c)break;_.push(g)}}else for(;f<=h;++f)for(p=i-1;p>=1;--p)if(g=f>0?p/o(-f):p*o(f),!(g<u)){if(g>c)break;_.push(g)}2*_.length<m&&(_=vI(u,c,m))}else _=vI(f,h,Math.min(h-f,m)).map(o);return d?_.reverse():_},t.tickFormat=(a,l)=>{if(null==a&&(a=10),null==l&&(l=10===i?"s":","),"function"!=typeof l&&(!(i%1)&&null==(l=Vf(l)).precision&&(l.trim=!0),l=TD(l)),a===1/0)return l;const u=Math.max(1,i*a/t.ticks().length);return c=>{let d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=()=>n(bJ(n(),{floor:a=>o(Math.floor(r(a))),ceil:a=>o(Math.ceil(r(a)))})),t}function SJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hLe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pLe(e){return e<0?-e*e:e*e}function bF(e){var t=e(wo,wo),n=1;return t.exponent=function(r){return arguments.length?(n=+r,function i(){return 1===n?e(wo,wo):.5===n?e(hLe,pLe):e(SJ(n),SJ(1/n))}()):n},Jf(t)}function wF(){var e=bF(vC());return e.copy=function(){return f1(e,wF()).exponent(e.exponent())},El.apply(e,arguments),e}function AJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function TJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function EF(e){var t=1,n=e(AJ(t),TJ(t));return n.constant=function(i){return arguments.length?e(AJ(t=+i),TJ(t)):t},Jf(n)}function MJ(e,t,n,i,r,o){const s=[[Mu,1,Su],[Mu,5,5*Su],[Mu,15,15*Su],[Mu,30,30*Su],[o,1,Rs],[o,5,5*Rs],[o,15,15*Rs],[o,30,30*Rs],[r,1,Au],[r,3,3*Au],[r,6,6*Au],[r,12,12*Au],[i,1,Tu],[i,2,2*Tu],[n,1,SI],[t,1,hK],[t,3,3*hK],[e,1,AI]];function l(u,c,d){const f=Math.abs(c-u)/d,h=em(([,,m])=>m).right(s,f);if(h===s.length)return e.every(Vc(u/AI,c/AI,d));if(0===h)return Zg.every(Math.max(Vc(u,c,d),1));const[p,g]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return p.every(g)}return[function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&"function"==typeof d.range?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p},l]}const[mLe,_Le]=MJ(yl,$y,Qg,pK,OD,ID),[yLe,vLe]=MJ(_l,Ly,Kg,xu,ND,kD);function bLe(e){return new Date(e)}function wLe(e){return e instanceof Date?+e:+new Date(+e)}function DF(e,t,n,i,r,o,s,a,l,u){var c=mJ(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),_=u("%a %d"),y=u("%b %d"),v=u("%B"),b=u("%Y");function w(D){return(l(D)<D?h:a(D)<D?p:s(D)<D?g:o(D)<D?m:i(D)<D?r(D)<D?_:y:n(D)<D?v:b)(D)}return c.invert=function(D){return new Date(d(D))},c.domain=function(D){return arguments.length?f(Array.from(D,wLe)):f().map(bLe)},c.ticks=function(D){var E=f();return e(E[0],E[E.length-1],D??10)},c.tickFormat=function(D,E){return null==E?w:u(E)},c.nice=function(D){var E=f();return(!D||"function"!=typeof D.range)&&(D=t(E[0],E[E.length-1],D??10)),D?f(bJ(E,D)):c},c.copy=function(){return f1(c,DF(e,t,n,i,r,o,s,a,l,u))},c}function bC(){var n,i,r,o,l,e=0,t=1,s=wo,a=!1;function u(d){return null==d||isNaN(d=+d)?l:s(0===r?.5:(d=(o(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,s=d(h,p),u):[s(0),s(1)]}}return u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s},u.range=c(Jc),u.rangeRound=c(d1),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function ed(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function CF(){var e=Jf(bC()(wo));return e.copy=function(){return ed(e,CF())},Zc.apply(e,arguments)}function SF(){var e=bF(bC());return e.copy=function(){return ed(e,SF()).exponent(e.exponent())},Zc.apply(e,arguments)}function AF(e,t){void 0===t&&(t=e,e=Jc);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function wC(){var r,o,s,a,l,c,f,e=0,t=.5,n=1,i=1,u=wo,d=!1;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+c(g))-o)*(i*g<i*o?a:l),u(d?Math.max(0,Math.min(1,g)):g))}function p(g){return function(m){var _,y,v;return arguments.length?([_,y,v]=m,u=AF(g,[_,y,v]),h):[u(0),u(.5),u(1)]}}return h.domain=function(g){return arguments.length?([e,t,n]=g,r=c(e=+e),o=c(t=+t),s=c(n=+n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(u=g,h):u},h.range=p(Jc),h.rangeRound=p(d1),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return c=g,r=g(e),o=g(t),s=g(n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h}}function TF(){var e=bF(wC());return e.copy=function(){return ed(e,TF()).exponent(e.exponent())},Zc.apply(e,arguments)}class $J extends Map{constructor(t,n=VJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(xF(this,t))}has(t){return super.has(xF(this,t))}set(t,n){return super.set(BJ(this,t),n)}delete(t){return super.delete(UJ(this,t))}}class EC extends Set{constructor(t,n=VJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const i of t)this.add(i)}has(t){return super.has(xF(this,t))}add(t){return super.add(BJ(this,t))}delete(t){return super.delete(UJ(this,t))}}function xF({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function BJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function UJ({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function VJ(e){return null!==e&&"object"==typeof e?e.valueOf():e}const MF=Symbol("implicit");function NF(){var e=new $J,t=[],n=[],i=MF;function r(o){let s=e.get(o);if(void 0===s){if(i!==MF)return i;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new $J;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return NF(t,n).unknown(i)},El.apply(r,arguments),r}function ALe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function TLe(e,t){var n=yC(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}var DC,jJ=180/Math.PI,OF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HJ(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*jJ,skewX:Math.atan(l)*jJ,scaleX:s,scaleY:a}}function zJ(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),function o(u,c,d,f,h,p){if(u!==d||c!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:ba(u,d)},{i:g-2,x:ba(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}(u.translateX,u.translateY,c.translateX,c.translateY,d,f),function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:ba(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}(u.rotate,c.rotate,d,f),function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:ba(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}(u.skewX,c.skewX,d,f),function l(u,c,d,f,h,p){if(u!==d||c!==f){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:ba(u,d)},{i:g-2,x:ba(c,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m,p=-1,g=f.length;++p<g;)d[(m=f[p]).i]=m.x(h);return d.join("")}}}var NLe=zJ(function xLe(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?OF:HJ(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),OLe=zJ(function MLe(e){return null!=e&&(DC||(DC=document.createElementNS("http://www.w3.org/2000/svg","g")),DC.setAttribute("transform",e),e=DC.transform.baseVal.consolidate())?HJ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):OF},", ",")",")"),kLe=1e-12;function GJ(e){return((e=Math.exp(e))+1/e)/2}const FLe=function e(t,n,i){function r(o,s){var m,_,a=o[0],l=o[1],u=o[2],f=s[2],h=s[0]-a,p=s[1]-l,g=h*h+p*p;if(g<kLe)_=Math.log(f/u)/t,m=function(E){return[a+E*h,l+E*p,u*Math.exp(t*E*_)]};else{var y=Math.sqrt(g),v=(f*f-u*u+i*g)/(2*u*n*y),b=(f*f-u*u-i*g)/(2*f*n*y),w=Math.log(Math.sqrt(v*v+1)-v),D=Math.log(Math.sqrt(b*b+1)-b);_=(D-w)/t,m=function(E){var S=E*_,M=GJ(w),k=u/(n*y)*(M*function RLe(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*S+w)-function ILe(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+k*h,l+k*p,u*M/GJ(t*S+w)]}}return m.duration=1e3*_*t/Math.SQRT2,m}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s;return e(s,a,a*a)},r}(Math.SQRT2,2,4);function WJ(e){return function(t,n){var i=e((t=gC(t)).h,(n=gC(n)).h),r=ki(t.s,n.s),o=ki(t.l,n.l),s=ki(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=o(a),t.opacity=s(a),t+""}}}const PLe=WJ(yC);var LLe=WJ(ki);const qJ=Math.PI/180,YJ=180/Math.PI,KJ=.96422,XJ=1,QJ=.82521,JJ=4/29,hm=6/29,ZJ=3*hm*hm,$Le=hm*hm*hm;function eZ(e){if(e instanceof wa)return new wa(e.l,e.a,e.b,e.opacity);if(e instanceof Dl)return nZ(e);e instanceof Oi||(e=dF(e));var o,s,t=FF(e.r),n=FF(e.g),i=FF(e.b),r=kF((.2225045*t+.7168786*n+.0606169*i)/XJ);return t===n&&n===i?o=s=r:(o=kF((.4360747*t+.3850649*n+.1430804*i)/KJ),s=kF((.0139322*t+.0971045*n+.7141733*i)/QJ)),new wa(116*r-16,500*(o-r),200*(r-s),e.opacity)}function SC(e,t,n,i){return 1===arguments.length?eZ(e):new wa(e,t,n,i??1)}function wa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function kF(e){return e>$Le?Math.pow(e,1/3):e/ZJ+JJ}function IF(e){return e>hm?e*e*e:ZJ*(e-JJ)}function RF(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function FF(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function AC(e,t,n,i){return 1===arguments.length?function tZ(e){if(e instanceof Dl)return new Dl(e.h,e.c,e.l,e.opacity);if(e instanceof wa||(e=eZ(e)),0===e.a&&0===e.b)return new Dl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*YJ;return new Dl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Dl(e,t,n,i??1)}function Dl(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function nZ(e){if(isNaN(e.h))return new wa(e.l,0,0,e.opacity);var t=e.h*qJ;return new wa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function BLe(e,t){var n=ki((e=SC(e)).l,(t=SC(t)).l),i=ki(e.a,t.a),r=ki(e.b,t.b),o=ki(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=o(s),e+""}}function iZ(e){return function(t,n){var i=e((t=AC(t)).h,(n=AC(n)).h),r=ki(t.c,n.c),o=ki(t.l,n.l),s=ki(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=o(a),t.opacity=s(a),t+""}}}cm(wa,SC,l1(Xc,{brighter(e){return new wa(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new wa(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Oi(RF(3.1338561*(t=KJ*IF(t))-1.6168667*(e=XJ*IF(e))-.4906146*(n=QJ*IF(n))),RF(-.9787684*t+1.9161415*e+.033454*n),RF(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),cm(Dl,AC,l1(Xc,{brighter(e){return new Dl(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new Dl(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return nZ(this).rgb()}}));const ULe=iZ(yC);var VLe=iZ(ki),PF=1.78277,LF=-.29227,TC=-.90649,h1=1.97294,oZ=h1*TC,sZ=h1*PF,aZ=PF*LF- -.14861*TC;function $F(e,t,n,i){return 1===arguments.length?function jLe(e){if(e instanceof Zf)return new Zf(e.h,e.s,e.l,e.opacity);e instanceof Oi||(e=dF(e));var n=e.g/255,i=e.b/255,r=(aZ*i+oZ*(e.r/255)-sZ*n)/(aZ+oZ-sZ),o=i-r,s=(h1*(n-r)-LF*o)/TC,a=Math.sqrt(s*s+o*o)/(h1*r*(1-r)),l=a?Math.atan2(s,o)*YJ-120:NaN;return new Zf(l<0?l+360:l,a,r,e.opacity)}(e):new Zf(e,t,n,i??1)}function Zf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function lZ(e){return function t(n){function i(r,o){var s=e((r=$F(r)).h,(o=$F(o)).h),a=ki(r.s,o.s),l=ki(r.l,o.l),u=ki(r.opacity,o.opacity);return function(c){return r.h=s(c),r.s=a(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return n=+n,i.gamma=t,i}(1)}cm(Zf,$F,l1(Xc,{brighter(e){return e=null==e?dm:Math.pow(dm,e),new Zf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Zf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*qJ,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Oi(255*(t+n*(-.14861*i+PF*r)),255*(t+n*(LF*i+TC*r)),255*(t+n*(h1*i)),this.opacity)}}));const HLe=lZ(yC);var zLe=lZ(ki);function GLe(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function Cl(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}const WLe=Cl("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),qLe=Cl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),YLe=Cl("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),KLe=Cl("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),XLe=Cl("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),QLe=Cl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),JLe=Cl("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ZLe=Cl("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),e3e=Cl("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),t3e=Cl("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function BF(e,t,n){const i=e-t+2*n;return e?i>0?i:1:0}const pm="linear",Iu="log",p1="pow",g1="sqrt",xC="symlog",eh="time",th="utc",Sl="sequential",gm="diverging",mm="quantile",MC="quantize",NC="threshold",UF="ordinal",VF="point",jF="bin-ordinal",Ei="continuous",m1="discrete",_1="discretizing",Bs="interpolating",HF="temporal";function zF(){const e=NF().unknown(void 0),t=e.domain,n=e.range;let r,o,i=[0,1],s=!1,a=0,l=0,u=.5;function c(){const d=t().length,f=i[1]<i[0],h=i[1-f],p=BF(d,a,l);let g=i[f-0];r=(h-g)/(p||1),s&&(r=Math.floor(r)),g+=(h-g-r*(d-a))*u,o=r*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Qo(d).map(_=>g+r*_);return n(f?m.reverse():m)}return delete e.unknown,e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,c()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(null==d[0]||null==d[1])return;const f=i[1]<i[0],h=f?n().reverse():n(),p=h.length-1;let _,y,v,g=+d[0],m=+d[1];return g!=g||m!=m||(m<g&&(v=g,g=m,m=v),m<h[0]||g>i[1-f])?void 0:(_=Math.max(0,fC(h,g)-1),y=g===m?_:fC(h,m)-1,g-h[_]>o+1e-10&&++_,f&&(v=_,_=p-y,y=p-v),_>y?void 0:t().slice(_,y+1))},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return zF().domain(t()).range(i).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function cZ(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return cZ(t())},e}var s3e=Array.prototype.map;const l3e=Array.prototype.slice,OC=new Map,fZ=Symbol("vega_scale");function hZ(e){return e[fZ]=!0,e}function Lt(e,t,n){return arguments.length>1?(OC.set(e,function c3e(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?function i3e(e){return function(t){let r,n=t[0],i=t[1];return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}(o):o.invertExtent?function r3e(e){return function(t){const n=e.range();let s,a,l,u,i=t[0],r=t[1],o=-1;for(r<i&&(a=i,i=r,r=a),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[s]),[void 0===i[0]?i[1]:i[0],void 0===r[1]?r[0]:r[1]]}}(o):void 0),o.type=e,hZ(o)};return i.metadata=_a(De(n)),i}(e,t,n)),this):pZ(e)?OC.get(e):void 0}function pZ(e){return OC.has(e)}function nh(e,t){const n=OC.get(e);return n&&n.metadata[t]}function GF(e){return nh(e,Ei)}function _m(e){return nh(e,m1)}function WF(e){return nh(e,_1)}function gZ(e){return nh(e,Iu)}function mZ(e){return nh(e,Bs)}function _Z(e){return nh(e,mm)}Lt("identity",function vJ(e){var t;function n(i){return null==i||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,_F),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return vJ(e).unknown(t)},e=arguments.length?Array.from(e,_F):[0,1],Jf(n)}),Lt(pm,function yJ(){var e=mJ();return e.copy=function(){return f1(e,yJ())},El.apply(e,arguments),Jf(e)},Ei),Lt(Iu,function CJ(){const e=vF(vC()).domain([1,10]);return e.copy=()=>f1(e,CJ()).base(e.base()),El.apply(e,arguments),e},[Ei,Iu]),Lt(p1,wF,Ei),Lt(g1,function gLe(){return wF.apply(null,arguments).exponent(.5)},Ei),Lt(xC,function xJ(){var e=EF(vC());return e.copy=function(){return f1(e,xJ()).constant(e.constant())},El.apply(e,arguments)},Ei),Lt(eh,function ELe(){return El.apply(DF(yLe,vLe,_l,Ly,Kg,xu,ND,kD,Mu,$I).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[Ei,HF]),Lt(th,function DLe(){return El.apply(DF(mLe,_Le,yl,$y,Qg,jc,OD,ID,Mu,BI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Ei,HF]),Lt(Sl,CF,[Ei,Bs]),Lt(`${Sl}-${pm}`,CF,[Ei,Bs]),Lt(`${Sl}-${Iu}`,function NJ(){var e=vF(bC()).domain([1,10]);return e.copy=function(){return ed(e,NJ()).base(e.base())},Zc.apply(e,arguments)},[Ei,Bs,Iu]),Lt(`${Sl}-${p1}`,SF,[Ei,Bs]),Lt(`${Sl}-${g1}`,function CLe(){return SF.apply(null,arguments).exponent(.5)},[Ei,Bs]),Lt(`${Sl}-${xC}`,function OJ(){var e=EF(bC());return e.copy=function(){return ed(e,OJ()).constant(e.constant())},Zc.apply(e,arguments)},[Ei,Bs]),Lt(`${gm}-${pm}`,function kJ(){var e=Jf(wC()(wo));return e.copy=function(){return ed(e,kJ())},Zc.apply(e,arguments)},[Ei,Bs]),Lt(`${gm}-${Iu}`,function IJ(){var e=vF(wC()).domain([.1,1,10]);return e.copy=function(){return ed(e,IJ()).base(e.base())},Zc.apply(e,arguments)},[Ei,Bs,Iu]),Lt(`${gm}-${p1}`,TF,[Ei,Bs]),Lt(`${gm}-${g1}`,function SLe(){return TF.apply(null,arguments).exponent(.5)},[Ei,Bs]),Lt(`${gm}-${xC}`,function RJ(){var e=EF(wC());return e.copy=function(){return ed(e,RJ()).constant(e.constant())},Zc.apply(e,arguments)},[Ei,Bs]),Lt(mm,function FJ(){var i,e=[],t=[],n=[];function r(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=kX(e,s/a);return o}function o(s){return null==s||isNaN(s=+s)?i:t[a1(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)null!=a&&!isNaN(a=+a)&&e.push(a);return e.sort(Nu),r()},o.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return FJ().domain(e).range(t).unknown(i)},El.apply(o,arguments)},[_1,mm]),Lt(MC,function PJ(){var o,e=0,t=1,n=1,i=[.5],r=[0,1];function s(l){return null!=l&&l<=l?r[a1(i,l,0,n)]:o}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},s.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return PJ().domain([e,t]).range(r).unknown(o)},El.apply(Jf(s),arguments)},_1),Lt(NC,function LJ(){var n,e=[.5],t=[0,1],i=1;function r(o){return null!=o&&o<=o?t[a1(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return LJ().domain(e).range(t).unknown(n)},El.apply(r,arguments)},_1),Lt(jF,function dZ(){let e=[],t=[];function n(i){return null==i||i!=i?void 0:t[(a1(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=function a3e(e){return s3e.call(e,vr)}(i),n):e.slice()},n.range=function(i){return arguments.length?(t=l3e.call(i),n):t.slice()},n.tickFormat=function(i,r){return _J(e[0],St(e),i??10,r)},n.copy=function(){return dZ().domain(n.domain()).range(n.range())},n},[m1,_1]),Lt(UF,NF,m1),Lt("band",zF,m1),Lt(VF,function o3e(){return cZ(zF().paddingInner(1))},m1);const f3e=["clamp","base","constant","exponent"];function yZ(e,t){const n=t[0],i=St(t)-n;return function(r){return e(n+r*i)}}function kC(e,t,n){return AF(qF(t||"rgb",n),e)}function vZ(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function bZ(e,t,n){const i=n-t;let r,o,s;return i&&Number.isFinite(i)?(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),s=Lt(o)().domain([t,n]).range([0,1]),f3e.forEach(a=>e[a]?s[a](e[a]()):0),s):br(.5)}function qF(e,t){const n=ra[function h3e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function wZ(e){if(te(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}function EZ(e,t){for(const n in e)YF(n,t(e[n]))}const DZ={};function YF(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(DZ[e]=t,this):DZ[e]}EZ({accent:WLe,category10:qLe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:YLe,observable10:KLe,paired:XLe,pastel1:QLe,pastel2:JLe,set1:ZLe,set2:e3e,set3:t3e,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},wZ),EZ({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>kC(wZ(e)));const IC="symbol",m3e="discrete",y3e=e=>te(e)?e.map(t=>String(t)):String(e),v3e=(e,t)=>e[1]-t[1],b3e=(e,t)=>t[1]-e[1];function KF(e,t,n){let i;return Ft(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(Fy(e.domain())/n||1)+1))),Ee(t)&&(i=t.step,t=t.interval),Ce(t)&&(t=e.type===eh?nm(t):e.type==th?im(t):ee("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function CZ(e,t,n){let i=e.range(),r=i[0],o=St(i),s=v3e;if(r>o&&(i=o,o=r,r=i,s=b3e),r=Math.floor(r),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],St(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function XF(e,t){return e.bins?CZ(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function SZ(e,t,n,i,r,o){const s=t.type;let a=y3e;if(s===eh||r===eh)a=e.timeFormat(i);else if(s===th||r===th)a=e.utcFormat(i);else if(gZ(s)){const l=e.formatFloat(i);if(o||t.bins)a=l;else{const u=AZ(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=e.format(i));return a}function AZ(e,t,n){const i=XF(e,t),r=e.base(),o=Math.log(r),s=Math.max(1,r*t/i.length),a=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=s};return n?i.filter(a):a}const QF={[mm]:"quantiles",[MC]:"thresholds",[NC]:"domain"},TZ={[mm]:"quantiles",[MC]:"domain"};function xZ(e,t){return e.bins?function D3e(e){const t=e.slice(0,-1);return t.max=St(e),t}(e.bins):e.type===Iu?AZ(e,t,!0):QF[e.type]?function E3e(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[QF[e.type]]()):XF(e,t)}const C3e=e=>QF[e.type]||e.bins;function MZ(e,t,n,i,r,o,s){const a=TZ[t.type]&&o!==eh&&o!==th?function w3e(e,t,n){const i=t[TZ[t.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,n)}(e,t,r):SZ(e,t,n,r,o,s);return i===IC&&C3e(t)?S3e(a):i===m3e?A3e(a):T3e(a)}const S3e=e=>(t,n,i)=>{const r=NZ(i[n+1],NZ(i.max,1/0)),o=OZ(t,e),s=OZ(r,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},NZ=(e,t)=>e??t,A3e=e=>(t,n)=>n?e(t):null,T3e=e=>t=>e(t),OZ=(e,t)=>Number.isFinite(e)?t(e):null;function kZ(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=function M3e(e,t,n,i){const r=i||t.type;return Ce(n)&&function d3e(e){return nh(e,HF)}(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||r!==eh?n||r!==th?MZ(e,t,5,null,n,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(WF(t.type)){const o=xZ(t).slice(1).map(r),s=o.length;return`${s} boundar${1===s?"y":"ies"}: ${o.join(", ")}`}if(_m(t.type)){const o=t.domain(),s=o.length;return`${s} value${1===s?"":"s"}: ${s>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ")}`}{const o=t.domain();return`values from ${r(o[0])} to ${r(St(o))}`}}let IZ=0;const RC="p_";function JF(e){return e&&e.gradient}function RZ(e,t,n){const i=e.gradient;let r=e.id,o="radial"===i?RC:"";return r||(r=e.id="gradient_"+IZ++,"radial"===i?(e.x1=Al(e.x1,.5),e.y1=Al(e.y1,.5),e.r1=Al(e.r1,0),e.x2=Al(e.x2,.5),e.y2=Al(e.y2,.5),e.r2=Al(e.r2,.5),o=RC):(e.x1=Al(e.x1,0),e.y1=Al(e.y1,0),e.x2=Al(e.x2,1),e.y2=Al(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function Al(e,t){return e??t}function FZ(e,t){var i,n=[];return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const PZ={basis:{curve:function GFe(e){return new iC(e)}},"basis-closed":{curve:function WFe(e){return new CQ(e)}},"basis-open":{curve:function qFe(e){return new SQ(e)}},bundle:{curve:YFe,tension:"beta",value:.85},cardinal:{curve:KFe,tension:"tension",value:0},"cardinal-open":{curve:XFe,tension:"tension",value:0},"cardinal-closed":{curve:QFe,tension:"tension",value:0},"catmull-rom":{curve:ePe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:tPe,tension:"alpha",value:.5},"catmull-rom-open":{curve:nPe,tension:"alpha",value:.5},linear:{curve:rF},"linear-closed":{curve:function iPe(e){return new IQ(e)}},monotone:{horizontal:function oPe(e){return new LQ(e)},vertical:function rPe(e){return new sC(e)}},natural:{curve:function sPe(e){return new BQ(e)}},step:{curve:function aPe(e){return new aC(e,.5)}},"step-after":{curve:function uPe(e){return new aC(e,1)}},"step-before":{curve:function lPe(e){return new aC(e,0)}}};function ZF(e,t,n){var i=Ae(PZ,e)&&PZ[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&null!=n&&(r=r[i.tension](n))),r}const O3e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},k3e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,I3e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,R3e=/^((\s+,?\s*)|(,\s*))/,F3e=/^[01]/;function ym(e){const t=[];return(e.match(k3e)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=O3e[o],a=function P3e(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const s="a"!==e||3!==o&&4!==o?I3e:F3e,a=n.slice(r).match(s);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const l=n.slice(r).match(R3e);null!==l&&(r+=l[0].length)}return i}(o,s,i.slice(1).trim()),l=a.length;if(l<s||l&&l%s!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...a.slice(0,s)]),l!==s){"m"===o&&(r="M"===r?"L":"l");for(let u=s;u<l;u+=s)t.push([r,...a.slice(u,u+s)])}}),t}const td=Math.PI/180,L3e=1e-14,ih=Math.PI/2,Tl=2*Math.PI,vm=Math.sqrt(3)/2;var eP={},tP={},LZ=[].join;function B3e(e){const t=LZ.call(e);if(tP[t])return tP[t];var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,d=-l*a,f=l*s,h=u*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(o),_=Math.sin(o),y=.5*(o-r),v=Math.sin(.5*y),b=8/3*v*v/Math.sin(y),w=n+p-b*g,D=i+g+b*p,E=n+m,S=i+_,M=E+b*_,k=S-b*m;return tP[t]=[c*w+d*D,f*w+h*D,c*M+d*k,f*M+h*k,c*E+d*S,f*E+h*S]}const Us=["l",0,0,0,0,0,0,0];function U3e(e,t,n){const i=Us[0]=e[0];if("a"===i||"A"===i)Us[1]=t*e[1],Us[2]=n*e[2],Us[3]=e[3],Us[4]=e[4],Us[5]=e[5],Us[6]=t*e[6],Us[7]=n*e[7];else if("h"===i||"H"===i)Us[1]=t*e[1];else if("v"===i||"V"===i)Us[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Us[r]=(r%2==1?t:n)*e[r];return Us}function y1(e,t,n,i,r,o){var s,f,h,p,g,a=null,l=0,u=0,c=0,d=0,m=0,_=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),e.beginPath&&e.beginPath();for(var y=0,v=t.length;y<v;++y){switch(s=t[y],(1!==r||1!==o)&&(s=U3e(s,r,o)),s[0]){case"l":e.lineTo((l+=s[1])+n,(u+=s[2])+i);break;case"L":e.lineTo((l=s[1])+n,(u=s[2])+i);break;case"h":e.lineTo((l+=s[1])+n,u+i);break;case"H":e.lineTo((l=s[1])+n,u+i);break;case"v":e.lineTo(l+n,(u+=s[1])+i);break;case"V":e.lineTo(l+n,(u=s[1])+i);break;case"m":m=l+=s[1],_=u+=s[2],e.moveTo(l+n,u+i);break;case"M":m=l=s[1],_=u=s[2],e.moveTo(l+n,u+i);break;case"c":e.bezierCurveTo(l+s[1]+n,u+s[2]+i,(c=l+s[3])+n,(d=u+s[4])+i,(f=l+s[5])+n,(h=u+s[6])+i),l=f,u=h;break;case"C":e.bezierCurveTo(s[1]+n,s[2]+i,(c=s[3])+n,(d=s[4])+i,(l=s[5])+n,(u=s[6])+i);break;case"s":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,l+s[1]+n,u+s[2]+i,(f=l+s[3])+n,(h=u+s[4])+i),c=l+s[1],d=u+s[2],l=f,u=h;break;case"S":e.bezierCurveTo((c=2*l-c)+n,(d=2*u-d)+i,s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"q":e.quadraticCurveTo((c=l+s[1])+n,(d=u+s[2])+i,(f=l+s[3])+n,(h=u+s[4])+i),l=f,u=h;break;case"Q":e.quadraticCurveTo(s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,u=h,c=s[1],d=s[2];break;case"t":f=l+s[1],h=u+s[2],null===a[0].match(/[QqTt]/)?(c=l,d=u):"t"===a[0]?(c=2*l-p,d=2*u-g):"q"===a[0]&&(c=2*l-c,d=2*u-d),p=c,g=d,e.quadraticCurveTo(c+n,d+i,f+n,h+i),c=(l=f)+s[1],d=(u=h)+s[2];break;case"T":e.quadraticCurveTo((c=2*l-c)+n,(d=2*u-d)+i,(f=s[1])+n,(h=s[2])+i),l=f,u=h;break;case"a":$Z(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+i]),l+=s[6],u+=s[7];break;case"A":$Z(e,l+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=_,e.closePath()}a=s}}function $Z(e,t,n,i){const r=function $3e(e,t,n,i,r,o,s,a,l){const u=LZ.call(arguments);if(eP[u])return eP[u];const c=s*td,d=Math.sin(c),f=Math.cos(c),h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let g=h*h/((n=Math.abs(n))*n)+p*p/((i=Math.abs(i))*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=f/n,_=d/n,y=-d/i,v=f/i,b=m*a+_*l,w=y*a+v*l,D=m*e+_*t,E=y*e+v*t;let M=1/((D-b)*(D-b)+(E-w)*(E-w))-.25;M<0&&(M=0);let k=Math.sqrt(M);o==r&&(k=-k);const R=.5*(b+D)-k*(E-w),F=.5*(w+E)+k*(D-b),P=Math.atan2(w-F,b-R);let C=Math.atan2(E-F,D-R)-P;C<0&&1===o?C+=Tl:C>0&&0===o&&(C-=Tl);const T=Math.ceil(Math.abs(C/(ih+.001))),O=[];for(let x=0;x<T;++x)O[x]=[R,F,P+x*C/T,P+(x+1)*C/T,n,i,d,f];return eP[u]=O}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const s=B3e(r[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const BZ=.5773502691896257,UZ={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Tl)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n,r=i-n*BZ,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n,r=i-n*BZ;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vm*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function VZ(e){return Ae(UZ,e)?UZ[e]:function V3e(e){if(!Ae(nP,e)){const t=ym(e);nP[e]={draw:function(n,i){y1(n,t,0,0,Math.sqrt(i)/2)}}}return nP[e]}(e)}var nP={};const nd=.448084975506;function j3e(e){return e.x}function H3e(e){return e.y}function z3e(e){return e.width}function G3e(e){return e.height}function Ru(e){return"function"==typeof e?e:()=>+e}function FC(e,t,n){return Math.max(t,Math.min(e,n))}function jZ(){var e=j3e,t=H3e,n=z3e,i=G3e,r=Ru(0),o=r,s=r,a=r,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),g=f??+t.call(this,c),m=+n.call(this,c),_=+i.call(this,c),y=Math.min(m,_)/2,v=FC(+r.call(this,c),0,y),b=FC(+o.call(this,c),0,y),w=FC(+s.call(this,c),0,y),D=FC(+a.call(this,c),0,y);if(l||(l=h=uC()),v<=0&&b<=0&&w<=0&&D<=0)l.rect(p,g,m,_);else{var E=p+m,S=g+_;l.moveTo(p+v,g),l.lineTo(E-b,g),l.bezierCurveTo(E-nd*b,g,E,g+nd*b,E,g+b),l.lineTo(E,S-D),l.bezierCurveTo(E,S-nd*D,E-nd*D,S,E-D,S),l.lineTo(p+w,S),l.bezierCurveTo(p+nd*w,S,p,S-nd*w,p,S-w),l.lineTo(p,g+v),l.bezierCurveTo(p,g+nd*v,p+nd*v,g,p+v,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Ru(c),u):e},u.y=function(c){return arguments.length?(t=Ru(c),u):t},u.width=function(c){return arguments.length?(n=Ru(c),u):n},u.height=function(c){return arguments.length?(i=Ru(c),u):i},u.cornerRadius=function(c,d,f,h){return arguments.length?(r=Ru(c),o=null!=d?Ru(d):r,a=null!=f?Ru(f):r,s=null!=h?Ru(h):o,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function HZ(){var e,t,n,i,o,s,a,l,r=null;function u(d,f,h){const p=h/2;if(o){var g=a-f,m=d-s;if(g||m){var _=Math.hypot(g,m),y=(g/=_)*l,v=(m/=_)*l,b=Math.atan2(m,g);r.moveTo(s-y,a-v),r.lineTo(d-g*p,f-m*p),r.arc(d,f,p,b-Math.PI,b),r.lineTo(s+y,a+v),r.arc(s,a,l,b,b+Math.PI)}else r.arc(d,f,p,0,Tl);r.closePath()}else o=1;s=d,a=f,l=p}function c(d){var f,p,m,h=d.length,g=!1;for(null==r&&(r=m=uC()),f=0;f<=h;++f)!(f<h&&i(p=d[f],f,d))===g&&(g=!g)&&(o=0),g&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(m)return r=null,m+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(r=null==d?null:d,c):r},c}function v1(e,t){return e??t}const b1=e=>e.x||0,w1=e=>e.y||0,PC=e=>!1!==e.defined,u$e=function yPe(){var e=fPe,t=hPe,n=qt(0),i=null,r=pPe,o=gPe,s=mPe,a=null,l=cC(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=r.apply(this,arguments)-oC,g=o.apply(this,arguments)-oC,m=TQ(g-p),_=g>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),h>Cr)if(m>s1-Cr)a.moveTo(h*ku(p),h*bo(p)),a.arc(0,0,h,p,g,!_),f>Cr&&(a.moveTo(f*ku(g),f*bo(g)),a.arc(0,0,f,g,p,_));else{var P,A,y=p,v=g,b=p,w=g,D=m,E=m,S=s.apply(this,arguments)/2,M=S>Cr&&(i?+i.apply(this,arguments):wn(f*f+h*h)),k=um(TQ(h-f)/2,+n.apply(this,arguments)),R=k,F=k;if(M>Cr){var C=xQ(M/f*bo(S)),T=xQ(M/h*bo(S));(D-=2*C)>Cr?(b+=C*=_?1:-1,w-=C):(D=0,b=w=(p+g)/2),(E-=2*T)>Cr?(y+=T*=_?1:-1,v-=T):(E=0,y=v=(p+g)/2)}var O=h*ku(y),x=h*bo(y),N=f*ku(w),I=f*bo(w);if(k>Cr){var z,U=h*ku(v),V=h*bo(v),H=f*ku(b),j=f*bo(b);if(m<Yc)if(z=function _Pe(e,t,n,i,r,o,s,a){var l=n-e,u=i-t,c=s-r,d=a-o,f=d*l-c*u;if(!(f*f<Cr))return[e+(f=(c*(t-o)-d*(e-r))/f)*l,t+f*u]}(O,x,H,j,U,V,N,I)){var re=O-z[0],K=x-z[1],ce=U-z[0],W=V-z[1],ne=1/bo(function ZFe(e){return e>1?0:e<-1?Yc:Math.acos(e)}((re*ce+K*W)/(wn(re*re+K*K)*wn(ce*ce+W*W)))/2),ie=wn(z[0]*z[0]+z[1]*z[1]);R=um(k,(f-ie)/(ne-1)),F=um(k,(h-ie)/(ne+1))}else R=F=0}E>Cr?F>Cr?(P=dC(H,j,O,x,h,F,_),A=dC(U,V,N,I,h,F,_),a.moveTo(P.cx+P.x01,P.cy+P.y01),F<k?a.arc(P.cx,P.cy,F,Dr(P.y01,P.x01),Dr(A.y01,A.x01),!_):(a.arc(P.cx,P.cy,F,Dr(P.y01,P.x01),Dr(P.y11,P.x11),!_),a.arc(0,0,h,Dr(P.cy+P.y11,P.cx+P.x11),Dr(A.cy+A.y11,A.cx+A.x11),!_),a.arc(A.cx,A.cy,F,Dr(A.y11,A.x11),Dr(A.y01,A.x01),!_))):(a.moveTo(O,x),a.arc(0,0,h,y,v,!_)):a.moveTo(O,x),f>Cr&&D>Cr?R>Cr?(P=dC(N,I,U,V,f,-R,_),A=dC(O,x,H,j,f,-R,_),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,Dr(P.y01,P.x01),Dr(A.y01,A.x01),!_):(a.arc(P.cx,P.cy,R,Dr(P.y01,P.x01),Dr(P.y11,P.x11),!_),a.arc(0,0,f,Dr(P.cy+P.y11,P.cx+P.x11),Dr(A.cy+A.y11,A.cx+A.x11),_),a.arc(A.cx,A.cy,R,Dr(A.y11,A.x11),Dr(A.y01,A.x01),!_))):a.arc(0,0,f,w,b,_):a.lineTo(N,I)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Yc/2;return[ku(d)*c,bo(d)*c]},u.innerRadius=function(c){return arguments.length?(e="function"==typeof c?c:qt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t="function"==typeof c?c:qt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n="function"==typeof c?c:qt(+c),u):n},u.padRadius=function(c){return arguments.length?(i=null==c?null:"function"==typeof c?c:qt(+c),u):i},u.startAngle=function(c){return arguments.length?(r="function"==typeof c?c:qt(+c),u):r},u.endAngle=function(c){return arguments.length?(o="function"==typeof c?c:qt(+c),u):o},u.padAngle=function(c){return arguments.length?(s="function"==typeof c?c:qt(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),c$e=WQ().x(b1).y1(w1).y0(e=>(e.y||0)+(e.height||0)).defined(PC),d$e=WQ().y(w1).x1(b1).x0(e=>(e.x||0)+(e.width||0)).defined(PC),f$e=GQ().x(b1).y(w1).defined(PC),h$e=jZ().x(b1).y(w1).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>v1(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>v1(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>v1(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>v1(e.cornerRadiusBottomLeft,e.cornerRadius)||0),p$e=function $Pe(e,t){let n=null,i=cC(r);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return e="function"==typeof e?e:qt(e||lF),t="function"==typeof t?t:qt(void 0===t?64:+t),r.type=function(o){return arguments.length?(e="function"==typeof o?o:qt(o),r):e},r.size=function(o){return arguments.length?(t="function"==typeof o?o:qt(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}().type(e=>VZ(e.shape||"circle")).size(e=>v1(e.size,64)),g$e=HZ().x(b1).y(w1).defined(PC).size(e=>e.size||1);function iP(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bm(e,t,n,i){return h$e.context(e)(t,n,i)}var zZ=1;function GZ(){zZ=1}function rP(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+zZ++),s=r.clipping[o]||(r.clipping[o]={id:o});return lt(i)?s.path=i(null):iP(n)?s.path=bm(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function li(e){this.clear(),e&&this.union(e)}function LC(e){this.mark=e,this.bounds=this.bounds||new li}function $C(e){LC.call(this,e),this.items=this.items||[]}li.prototype={clone(){return new li(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*s+u,l*i+a*s+c,a*o-l*r+u,l*o+a*r+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},ye($C,LC);class WZ{constructor(t){this._pending=0,this._loader=t||$D()}pending(){return this._pending}sanitizeURL(t){const n=this;return qZ(n),n._loader.sanitize(t,{context:"href"}).then(i=>(E1(n),i)).catch(()=>(E1(n),null))}loadImage(t){const n=this,i=typeof Image<"u"?Image:null;return qZ(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const o=r.href;if(!o||!i)throw{url:o};const s=new i,a=Ae(r,"crossOrigin")?r.crossOrigin:"anonymous";return null!=a&&(s.crossOrigin=a),s.onload=()=>E1(n),s.onerror=()=>E1(n),s.src=o,s}).catch(r=>(E1(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{!function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}(!1)})}}function qZ(e){e._pending+=1}function E1(e){e._pending-=1}function Fu(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const i=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(i+(n?function E$e(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,i):0))}return e}const D$e=Tl-1e-8;let BC,UC,VC,rh,oP,jC,sP,aP;const id=(e,t)=>BC.add(e,t),HC=(e,t)=>id(UC=e,VC=t),YZ=e=>id(e,BC.y1),KZ=e=>id(BC.x1,e),oh=(e,t)=>oP*e+sP*t,sh=(e,t)=>jC*e+aP*t,lP=(e,t)=>id(oh(e,t),sh(e,t)),uP=(e,t)=>HC(oh(e,t),sh(e,t));function D1(e,t){return BC=e,t?(rh=t*td,oP=aP=Math.cos(rh),jC=Math.sin(rh),sP=-jC):(oP=aP=1,rh=jC=sP=0),C$e}const C$e={beginPath(){},closePath(){},moveTo:uP,lineTo:uP,rect(e,t,n,i){rh?(lP(e+n,t),lP(e+n,t+i),lP(e,t+i),uP(e,t)):(id(e+n,t+i),HC(e,t))},quadraticCurveTo(e,t,n,i){const r=oh(e,t),o=sh(e,t),s=oh(n,i),a=sh(n,i);XZ(UC,r,s,YZ),XZ(VC,o,a,KZ),HC(s,a)},bezierCurveTo(e,t,n,i,r,o){const s=oh(e,t),a=sh(e,t),l=oh(n,i),u=sh(n,i),c=oh(r,o),d=sh(r,o);QZ(UC,s,l,c,YZ),QZ(VC,a,u,d,KZ),HC(c,d)},arc(e,t,n,i,r,o){if(i+=rh,r+=rh,UC=n*Math.cos(r)+e,VC=n*Math.sin(r)+t,Math.abs(r-i)>D$e)id(e-n,t-n),id(e+n,t+n);else{const s=u=>id(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(i),s(r),r!==i)if((i%=Tl)<0&&(i+=Tl),(r%=Tl)<0&&(r+=Tl),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=Tl,a=i-i%ih,l=0;l<4&&a>r;++l,a-=ih)s(a);else for(a=i-i%ih+ih,l=0;l<4&&a<r;++l,a+=ih)s(a)}}};function XZ(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function QZ(e,t,n,i,r){const o=i-e+3*t-3*n,s=e+n-2*t,a=e-t;let c,l=0,u=0;Math.abs(o)>L3e?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&r(JZ(l,e,t,n,i)),0<u&&u<1&&r(JZ(u,e,t,n,i))}function JZ(e,t,n,i,r){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*i+a*e*r}var rd=(rd=Kc(1,1))?rd.getContext("2d"):null;const cP=new li;function dP(e){return function(t,n){if(!rd)return!0;e(rd,t),cP.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=cP;for(let a=r;a<=s;++a)for(let l=i;l<=o;++l)if(rd.isPointInPath(l,a))return!0;return!1}}function fP(e,t){return t.contains(e.x||0,e.y||0)}function ZZ(e,t){const n=e.x||0,i=e.y||0;return t.intersects(cP.set(n,i,n+(e.width||0),i+(e.height||0)))}function eee(e,t){const n=e.x||0,i=e.y||0;return wm(t,n,i,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i)}function wm(e,t,n,i,r){const{x1:o,y1:s,x2:a,y2:l}=e,u=i-t,c=r-n;let h,p,g,m,d=0,f=1;for(m=0;m<4;++m){if(0===m&&(h=-u,p=-(o-t)),1===m&&(h=u,p=a-t),2===m&&(h=-c,p=-(s-n)),3===m&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>f)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<f&&(f=g)}}return!0}function Em(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ea(e,t){return e??t}function tee(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function nee(e,t,n){return JF(n)?function S$e(e,t,n){const i=n.width(),r=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+Ea(t.x1,.5)*i,n.y1+Ea(t.y1,.5)*r,Math.max(i,r)*Ea(t.r1,0),n.x1+Ea(t.x2,.5)*i,n.y1+Ea(t.y2,.5)*r,Math.max(i,r)*Ea(t.r2,.5));else{const s=Ea(t.x1,0),a=Ea(t.y1,0),l=Ea(t.x2,1),u=Ea(t.y2,0);if(s!==l&&a!==u&&i!==r){const c=Kc(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=tee(d.createLinearGradient(s,a,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}o=e.createLinearGradient(n.x1+s*i,n.y1+a*r,n.x1+l*i,n.y1+u*r)}return tee(o,t.stops)}(e,n,t.bounds):n}function zC(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=nee(e,t,t.fill),!0)}var A$e=[];function Dm(e,t,n){var i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=nee(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||A$e),e.lineDashOffset=t.strokeDashOffset||0),!0)}function T$e(e,t){return e.zindex-t.zindex||e.index-t.index}function hP(e){if(!e.zdirty)return e.zitems;var i,r,o,t=e.items,n=[];for(r=0,o=t.length;r<o;++r)(i=t[r]).index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(T$e)}function Da(e,t){var i,r,n=e.items;if(!n||!n.length)return;const o=hP(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function GC(e,t){var i,r,n=e.items;if(!n||!n.length)return null;const o=hP(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o)for(r=(n=e.items).length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i;return null}function pP(e){return function(t,n,i){Da(n,r=>{(!i||i.intersects(r.bounds))&&iee(e,t,r,r)})}}function x$e(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&iee(e,t,n.items[0],n.items)}}function iee(e,t,n,i){var r=null==n.opacity?1:n.opacity;0!==r&&(e(t,i)||(Em(t,n),n.fill&&zC(t,n,r)&&t.fill(),n.stroke&&Dm(t,n,r)&&t.stroke()))}function WC(e){return e=e||Is,function(t,n,i,r,o,s){return i*=t.pixelRatio,r*=t.pixelRatio,GC(n,a=>{const l=a.bounds;if((!l||l.contains(o,s))&&l&&e(t,a,i,r,o,s))return a})}}function C1(e,t){return function(n,i,r,o){var c,s=Array.isArray(i)?i[0]:i,a=t??s.fill,l=s.stroke&&n.isPointInStroke;return l&&(c=s.strokeCap,n.lineWidth=s.strokeWidth??1,n.lineCap=c??"butt"),!e(n,i)&&(a&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o))}}function gP(e){return WC(C1(e))}function ah(e,t){return"translate("+e+","+t+")"}function mP(e){return"rotate("+e+")"}function ree(e){return ah(e.x||0,e.y||0)}function _P(e,t,n){function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=td),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:function i(s,a){s("transform",function N$e(e){return ah(e.x||0,e.y||0)+(e.angle?" "+mP(e.angle):"")}(a)),s("d",t(null,a))},bound:function r(s,a){return t(D1(s,a.angle),a),Fu(s,a).translate(a.x||0,a.y||0)},draw:pP(o),pick:gP(o),isect:n||dP(o)}}var k$e=_P("arc",function m$e(e,t){return u$e.context(e)(t)});function yP(e,t,n){function o(l,u){l.beginPath(),t(l,u)}const s=C1(o);return{type:e,tag:"path",nested:!0,attr:function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))},bound:function r(l,u){var c=u.items;return 0===c.length?l:(t(D1(l),c),Fu(l,c[0]))},draw:x$e(o),pick:function a(l,u,c,d,f,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(f,h)?null:s(l,p,c*=l.pixelRatio,d*=l.pixelRatio)?p[0]:null},isect:fP,tip:n}}var P$e=yP("area",function _$e(e,t){const n=t[0];return("horizontal"===n.orient?d$e:c$e).curve(ZF(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function I$e(e,t){for(var s,a,n="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",r=e.length,o=1/0;--r>=0;)!1!==e[r].defined&&(a=Math.abs(e[r][i]-n))<o&&(o=a,s=e[r]);return s});function oee(e,t){e.beginPath(),iP(t)?bm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function see(e){const t=Ea(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function aee(e,t){const n=see(t);e("d",bm(null,t,n,n))}function S1(e,t,n,i){const r=see(t);e.beginPath(),bm(e,t,(n||0)+r,(i||0)+r)}const H$e=C1(S1),z$e=C1(S1,!1),G$e=C1(S1,!0);var K$e={type:"group",tag:"g",nested:!1,attr:function $$e(e,t){e("transform",ree(t))},bound:function j$e(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Fu(e,t),e.translate(t.x||0,t.y||0)},draw:function W$e(e,t,n,i){Da(t,r=>{const o=r.x||0,s=r.y||0,a=r.strokeForeground,l=null==r.opacity?1:r.opacity;(r.stroke||r.fill)&&l&&(S1(e,r,o,s),Em(e,r),r.fill&&zC(e,r,l)&&e.fill(),r.stroke&&!a&&Dm(e,r,l)&&e.stroke()),e.save(),e.translate(o,s),r.clip&&oee(e,r),n&&n.translate(-o,-s),Da(r,u=>{("group"===u.marktype||null==i||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(o,s),e.restore(),a&&r.stroke&&l&&(S1(e,r,o,s),Em(e,r),Dm(e,r,l)&&e.stroke())})},pick:function q$e(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const s=n*e.pixelRatio,a=i*e.pixelRatio;return GC(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(r,o))return;c=l.x||0,d=l.y||0;const g=l.clip;if(g&&(r<c||r>c+(l.width||0)||o<d||o>d+(l.height||0)))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,g&&iP(l)&&!G$e(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,_=!1!==t.interactive;return _&&m&&l.stroke&&z$e(e,l,s,a)?(e.restore(),l):(u=GC(l,y=>function Y$e(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(y,c,d)?this.pick(y,n,i,c,d):null),!u&&_&&(l.fill||!m&&l.stroke)&&H$e(e,l,s,a)&&(u=l),e.restore(),u||null)})},isect:ZZ,content:function V$e(e,t,n){e("clip-path",t.clip?rP(n,t,t):null)},background:function B$e(e,t){e("class","background"),e("aria-hidden",!0),aee(e,t)},foreground:function U$e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?aee(e,t):e("d","")}},A1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function vP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function bP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function wP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function qC(e,t){return"center"===e?t/2:"right"===e?t:0}function YC(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Z$e={type:"image",tag:"image",nested:!1,attr:function X$e(e,t,n){const i=vP(t,n),r=bP(t,i),o=wP(t,i),s=(t.x||0)-qC(t.align,r),a=(t.y||0)-YC(t.baseline,o);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",A1["xmlns:xlink"],"xlink:href"),e("transform",ah(s,a)),e("width",r),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function Q$e(e,t){const n=t.image,i=bP(t,n),r=wP(t,n),o=(t.x||0)-qC(t.align,i),s=(t.y||0)-YC(t.baseline,r);return e.set(o,s,o+i,s+r)},draw:function J$e(e,t,n){Da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=vP(i,this);let o=bP(i,r),s=wP(i,r);if(0===o||0===s)return;let u,c,d,f,a=(i.x||0)-qC(i.align,o),l=(i.y||0)-YC(i.baseline,s);!1!==i.aspect&&(c=r.width/r.height,d=i.width/i.height,c==c&&d==d&&c!==d&&(d<c?(f=o/c,l+=(s-f)/2,s=f):(f=s*c,a+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(Em(e,i),e.globalAlpha=null!=(u=i.opacity)?u:1,e.imageSmoothingEnabled=!1!==i.smooth,e.drawImage(r,a,l,o,s))})},pick:WC(),isect:Is,get:vP,xOffset:qC,yOffset:YC},e5e=yP("line",function y$e(e,t){const n=t[0];return f$e.curve(ZF(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function R$e(e,t){for(var r,o,n=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(r=e[i].x-t[0])*r+(o=e[i].y-t[1])*o<n)return e[i];return null});function KC(e,t){var n=t.path;if(null==n)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*td,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ym(n)).path=n),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),y1(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-r)):y1(e,l,i,r,o,s)}var i5e={type:"path",tag:"path",nested:!1,attr:function t5e(e,t){(1!==(t.scaleX||1)||1!==(t.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function O$e(e){return ah(e.x||0,e.y||0)+(e.angle?" "+mP(e.angle):"")+(e.scaleX||e.scaleY?" "+function M$e(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function n5e(e,t){return KC(D1(e,t.angle),t)?e.set(0,0,0,0):Fu(e,t,!0)},draw:pP(KC),pick:gP(KC),isect:dP(KC)};function lee(e,t){e.beginPath(),bm(e,t)}var s5e={type:"rect",tag:"path",nested:!1,attr:function r5e(e,t){e("d",bm(null,t))},bound:function o5e(e,t){var n,i;return Fu(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:pP(lee),pick:gP(lee),isect:ZZ};function uee(e,t,n){var i,r,o,s;return!(!t.stroke||!Dm(e,t,n)||(i=t.x||0,r=t.y||0,o=null!=t.x2?t.x2:i,s=null!=t.y2?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,s),0))}var d5e={type:"rule",tag:"line",nested:!1,attr:function a5e(e,t){e("transform",ree(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function l5e(e,t){var n,i;return Fu(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function u5e(e,t,n){Da(t,i=>{if(!n||n.intersects(i.bounds)){var r=null==i.opacity?1:i.opacity;r&&uee(e,i,r)&&(Em(e,i),e.stroke())}})},pick:WC(function c5e(e,t,n,i){return!!e.isPointInStroke&&uee(e,t,1)&&e.isPointInStroke(n,i)}),isect:eee},f5e=_P("shape",function v$e(e,t){return(t.mark.shape||t.shape).context(e)(t)}),h5e=_P("symbol",function b$e(e,t){return p$e.context(e)(t)},fP);const cee=YY();var Jo={height:xl,measureWidth:EP,estimateWidth:XC,width:XC,canvas:dee};function dee(e){Jo.width=e&&rd?EP:XC}function XC(e,t){return fee(sd(e,t),xl(e))}function fee(e,t){return~~(.8*e.length*t)}function EP(e,t){return xl(e)<=0||!(t=sd(e,t))?0:hee(t,QC(e))}function hee(e,t){const n=`(${t}) ${e}`;let i=cee.get(n);return void 0===i&&(rd.font=t,i=rd.measureText(e).width,cee.set(n,i)),i}function xl(e){return null!=e.fontSize?+e.fontSize||0:11}function od(e){return null!=e.lineHeight?e.lineHeight:xl(e)+2}function T1(e){return function p5e(e){return te(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!te(e.text)?e.text.split(e.lineBreak):e.text)}function DP(e){const t=T1(e);return(te(t)?t.length-1:0)*od(e)}function sd(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function m5e(e,t){var n=+e.limit,i=function g5e(e){if(Jo.width===EP){const t=QC(e);return n=>hee(n,t)}if(Jo.width===XC){const t=xl(e);return n=>fee(n,t)}return t=>Jo.width(e,t)}(e);if(i(t)<n)return t;var l,r=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,a=t.length;if(n-=i(r),o){for(;s<a;)i(t.slice(l=s+a>>>1))>n?s=l+1:a=l;return r+t.slice(s)}for(;s<a;)i(t.slice(0,l=1+(s+a>>>1)))<n?s=l:a=l-1;return t.slice(0,s)+r}(e,n):n}function x1(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function QC(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+xl(e)+"px "+x1(e,t)}function CP(e){var t=e.baseline,n=xl(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*od(e):"line-bottom"===t?.29*n-.5*od(e):0)}dee(!0);const _5e={left:"start",center:"middle",right:"end"},M1=new li;function JC(e){var r,t=e.x||0,n=e.y||0,i=e.radius||0;return i&&(r=(e.theta||0)-ih,t+=i*Math.cos(r),n+=i*Math.sin(r)),M1.x1=t,M1.y1=n,M1}function SP(e,t,n){var d,i=Jo.height(t),r=t.align,o=JC(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+CP(t)-Math.round(.8*i),c=T1(t);if(te(c)?(i+=od(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Jo.width(t,h)),0)):d=Jo.width(t,c),"center"===r?l-=d/2:"right"===r&&(l-=d),e.set(l+=s,u+=a,l+d,u+i),t.angle&&!n)e.rotate(t.angle*td,s,a);else if(2===n)return e.rotatedPoints(t.angle*td,s,a);return e}var E5e={type:"text",tag:"text",nested:!1,attr:function y5e(e,t){var l,n=t.dx||0,i=(t.dy||0)+CP(t),r=JC(t),o=r.x1,s=r.y1,a=t.angle||0;e("text-anchor",_5e[t.align]||"start"),a?(l=ah(o,s)+" "+mP(a),(n||i)&&(l+=" "+ah(n,i))):l=ah(o+n,s+i),e("transform",l)},bound:SP,draw:function v5e(e,t,n){Da(t,i=>{var o,s,a,l,u,c,d,r=null==i.opacity?1:i.opacity;if(!(n&&!n.intersects(i.bounds)||0===r||i.fontSize<=0||null==i.text||0===i.text.length)){if(e.font=QC(i),e.textAlign=i.align||"left",s=(o=JC(i)).x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*td),s=a=0),s+=i.dx||0,a+=(i.dy||0)+CP(i),c=T1(i),Em(e,i),te(c))for(u=od(i),l=0;l<c.length;++l)d=sd(i,c[l]),i.fill&&zC(e,i,r)&&e.fillText(d,s,a),i.stroke&&Dm(e,i,r)&&e.strokeText(d,s,a),a+=u;else d=sd(i,c),i.fill&&zC(e,i,r)&&e.fillText(d,s,a),i.stroke&&Dm(e,i,r)&&e.strokeText(d,s,a);i.angle&&e.restore()}})},pick:WC(function b5e(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=JC(t),a=s.x1,l=s.y1,u=SP(M1,t,1),c=-t.angle*td,d=Math.cos(c),f=Math.sin(c);return u.contains(d*r-f*o+(a-d*a+f*l),f*r+d*o+(l-f*a-d*l))}),isect:function w5e(e,t){const n=SP(M1,e,2);return wm(t,n[0],n[1],n[2],n[3])||wm(t,n[0],n[1],n[4],n[5])||wm(t,n[4],n[5],n[6],n[7])||wm(t,n[2],n[3],n[6],n[7])}},D5e=yP("trail",function w$e(e,t){return g$e.context(e)(t)},function F$e(e,t){for(var i,r,n=e.length;--n>=0;)if(!1!==e[n].defined&&(i=e[n].x-t[0])*i+(r=e[n].y-t[1])*r<(i=e[n].size||1)*i)return e[n];return null}),Zo={arc:k$e,area:P$e,group:K$e,image:Z$e,line:e5e,path:i5e,rect:s5e,rule:d5e,shape:f5e,symbol:h5e,text:E5e,trail:D5e};function AP(e,t,n){var i=Zo[e.mark.marktype];return i.nested&&(e=e.mark),(t||i.bound)(e.bounds||(e.bounds=new li),e,n)}var pee={mark:null};function gee(e,t,n){var a,l,u,c,i=Zo[e.marktype],r=i.bound,o=e.items,s=o&&o.length;if(i.nested)return s?u=o[0]:(pee.mark=e,u=pee),c=AP(u,r,n),t&&t.union(c)||c;if(t=t||e.bounds&&e.bounds.clear()||new li,s)for(a=0,l=o.length;a<l;++a)t.union(AP(o[a],r,n));return e.bounds=t}const C5e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mee(e,t){return JSON.stringify(e,C5e,t)}function _ee(e){return yee("string"==typeof e?JSON.parse(e):e)}function yee(e){var i,r,o,t=e.marktype,n=e.items;if(n)for(r=0,o=n.length;r<o;++r)n[r][i=t?"mark":"group"]=e,n[r].zindex&&(n[r][i].zdirty=!0),"group"===(t||i)&&yee(n[r]);return t&&gee(e),e}class vee{constructor(t){arguments.length?this.root=_ee(t):(this.root=bee({marktype:"group",name:"root",role:"frame"}),this.root.items=[new $C(this.root)])}toJSON(t){return mee(this.root,t||0)}mark(t,n,i){const r=bee(t,n=n||this.root.items[0]);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function bee(e,t){const n={bounds:new li,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ad(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function TP(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Di(e,t,n,i){var o,r=e.childNodes[t];return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=ad(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Vs(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function wee(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function ZC(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}class xP{constructor(t,n){this._active=null,this._handlers={},this._loader=t||$D(),this._tooltip=n||A5e}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const o=new MouseEvent(t.type,t),s=ad(null,"a");for(const a in r)s.setAttribute(a,r[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,i){n&&null!=n.tooltip&&(n=function S5e(e,t,n,i){var o,s,r=e&&e.mark;if(r&&(o=Zo[r.marktype]).tip){for((s=ZC(t,n))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(r.items,s)}return e}(n,t,this.canvas(),this._origin),this._tooltip.call(this._obj,this,t,n,i&&n&&n.tooltip||null))}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+r[0]+i.left,u=o.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}}function A5e(e,t,n,i){e.element().setAttribute("title",i||"")}class N1{constructor(t){this._el=null,this._bgcolor=null,this._loader=new WZ(t)}initialize(t,n,i,r,o){return this._el=t,this.resize(n,i,r,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const o=i._call;i._ready=i._loader.ready().then(s=>{s&&o(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const eS="dragleave",MP="pointerdown",tS="pointermove",nS="pointerout",Cee="pointerover",NP="mousedown",iS="mouseout",rS="click",Tee="mousewheel",oS="touchstart",sS="touchmove",aS="touchend",R5e=["keydown","keypress","keyup","dragenter",eS,"dragover",MP,"pointerup",tS,nS,Cee,NP,"mouseup","mousemove",iS,"mouseover",rS,"dblclick","wheel",Tee,oS,sS,aS],OP=tS,O1=iS,kP=rS;class k1 extends xP{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=R5e,this.pointermove=Mee([tS,"mousemove"],[Cee,"mouseover"],[nS,iS]),this.dragover=Mee(["dragover"],["dragenter"],[eS]),this.pointerout=Nee([nS,iS]),this.dragleave=Nee([eS])}initialize(t,n,i){return this._canvas=t&&TP(t,"canvas"),[rS,NP,MP,tS,nS,eS].forEach(r=>xee(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Tee,t)}pointerdown(t){this._down=this._active,this.fire(MP,t)}mousedown(t){this._down=this._active,this.fire(NP,t)}click(t){this._down===this._active&&(this.fire(rS,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(oS,t,!0)}touchmove(t){this.fire(sS,t,!0)}touchend(t){this.fire(aS,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===kP&&r&&r.href?this.handleHref(n,r,r.href):(t===OP||t===O1)&&this.handleTooltip(n,r,t!==O1),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(xee(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],o=this._handlerIndex(r,t,n);return o>=0&&r.splice(o,1),this}pickEvent(t){const n=ZC(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,o){const s=this.context();return Zo[t.marktype].pick.call(this,s,t,n,i,r,o)}}const F5e=e=>e===oS||e===sS||e===aS?[oS,sS,aS]:[e];function xee(e,t){F5e(t).forEach(n=>function P5e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}(e,n))}function I1(e,t,n){t.forEach(i=>e.fire(i,n))}function Mee(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r||((!r||!r.exit)&&I1(this,n,i),this._active=o,I1(this,t,i)),I1(this,e,i)}}function Nee(e){return function(t){I1(this,e,t),this._active=null}}class lS extends N1{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new li,this._tempb=new li}initialize(t,n,i,r,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Kc(1,1),t&&this._canvas&&(Vs(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,o)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)!function $5e(e,t,n,i,r,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&null!=e.parentNode,a=e.getContext("2d"),l=s?function L5e(){return typeof window<"u"&&window.devicePixelRatio||1}():r;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1]),e}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||ee("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,o=this._width,s=this._height,a=this._dirty,l=B5e(r,o,s);i.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):function U5e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(i,l.intersect(a),r);return this.clear(-r[0],-r[1],o,s),this.draw(i,t,u,n),i.restore(),a.clear(),this}draw(t,n,i,r){if("group"!==n.marktype&&null!=r&&!r.includes(n.marktype))return;const o=Zo[n.marktype];n.clip&&function L$e(e,t){var n=t.clip;e.save(),lt(n)?(e.beginPath(),n(e),e.clip()):oee(e,t.group)}(t,n),o.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const o=this._options,s=this.context();"pdf"!==o.type&&!o.externalContext&&s.clearRect(t,n,i,r),null!=this._bgcolor&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const B5e=(e,t,n)=>(new li).set(0,0,t,n).translate(-e[0],-e[1]);class Oee extends xP{constructor(t,n){super(t,n);const i=this;i._hrefHandler=IP(i,(r,o)=>{o&&o.href&&i.handleHref(r,o,o.href)}),i._tooltipHandler=IP(i,(r,o)=>{i.handleTooltip(r,o,r.type!==O1)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(kP,this._hrefHandler),r.removeEventListener(OP,this._tooltipHandler),r.removeEventListener(O1,this._tooltipHandler)),this._svg=r=t&&TP(t,"svg"),r&&(r.addEventListener(kP,this._hrefHandler),r.addEventListener(OP,this._tooltipHandler),r.addEventListener(O1,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:IP(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],o=this._handlerIndex(r,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(i,r[o].listener),r.splice(o,1)),this}}const IP=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},kee="aria-hidden",RP="aria-label",FP="role",PP="aria-roledescription",Iee="graphics-object",LP="graphics-symbol",Ree=(e,t,n)=>({[FP]:e,[PP]:t,[RP]:n||void 0}),V5e=_a(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Fee={axis:{desc:"axis",caption:function z5e(e){const t=e.datum,n=e.orient,i=t.title?Uee(e):null,r=e.context,o=r.scales[t.scale].value,s=r.dataflow.locale(),a=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${_m(a)?"discrete":a} scale with ${kZ(s,o,e)}`}},legend:{desc:"legend",caption:function G5e(e){const t=e.datum,n=t.title?Uee(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),s=e.context,a=s.scales[r[o[0]]].value,l=s.dataflow.locale();return function q5e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(i)+(n?` titled '${n}'`:"")+` for ${function W5e(e){return e=e.map(t=>t+("fill"===t||"stroke"===t?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+St(e)}(o)} with ${kZ(l,a,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${Bee(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Bee(e)}'`}},Pee={ariaRole:FP,ariaRoleDescription:PP,description:RP};function Lee(e,t){const n=!1===t.aria;if(e(kee,n||void 0),n||null==t.description)for(const i in Pee)e(Pee[i],void 0);else{const i=t.mark.marktype;e(RP,t.description),e(FP,t.ariaRole||("group"===i?Iee:LP)),e(PP,t.ariaRoleDescription||`${i} mark`)}}function $ee(e){return!1===e.aria?{[kee]:!0}:V5e[e.role]?null:Fee[e.role]?function H5e(e,t){try{const n=e.items[0];return Ree(t.role||LP,t.desc,n.description||(t.caption||(()=>""))(n))}catch{return null}}(e,Fee[e.role]):function j5e(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(i=>null!=i.description&&!1!==i.aria);return Ree(n?Iee:LP,`${t} mark container`,e.description)}(e)}function Bee(e){return De(e.text).join(" ")}function Uee(e){try{return De(St(e.items).items[0].text).join(" ")}catch{return null}}const Vee=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Y5e=e=>Vee(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $P(){let e="",t="",n="";const i=[],r=()=>t=n="",s=(l,u)=>(null!=u&&(t+=` ${l}="${Y5e(u)}"`),a),a={open(l){(l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)})(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)s(h,f[h]);return a},close(){const l=i.pop();return e+=t?t+(n?`>${n}</${l}>`:"/>"):`</${l}>`,r(),a},attr:s,text:l=>(n+=Vee(l),a),toString:()=>e};return a}const jee=e=>Hee($P(),e)+"";function Hee(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)3===i.nodeType?e.text(i.nodeValue):Hee(e,i)}return e.close()}const uS={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},cS={blend:"mix-blend-mode"},zee={fill:"none","stroke-miterlimit":10},Gee="http://www.w3.org/2000/xmlns/",Ci=A1.xmlns;class BP extends N1{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,o){return this._defs={},this._clearDefs(),t&&(this._svg=Di(t,0,"svg",Ci),this._svg.setAttributeNS(Gee,"xmlns",Ci),this._svg.setAttributeNS(Gee,"xmlns:xlink",A1["xmlns:xlink"]),this._svg.setAttribute("version",A1.version),this._svg.setAttribute("class","marks"),Vs(t,1),this._root=Di(this._svg,0,"g",Ci),ld(this._root,zee),Vs(this._svg,1)),this.background(this._bgcolor),super.initialize(t,n,i,r,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(ld(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=Di(t,0,"rect",Ci),ld(i,{width:this._width,height:this._height,fill:n}));const r=jee(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Vs(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(i=t[a],r=i.mark,r.marktype!==o&&(o=r.marktype,s=Zo[o]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,Wee(i,n),r.items.forEach(c=>{c.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(i._svg&&i._svg.ownerSVGElement?this._update(s,i._svg,i):(this._dirtyAll=!1,Wee(i,n)),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Zo[s],l=!1===n.interactive?"none":null,u="g"===a.tag,c=qee(n,t,i,"g",o);if("group"!==s&&null!=r&&!r.includes(s))return Vs(c,0),n._svg;c.setAttribute("class",wee(n));const d=$ee(n);for(const g in d)Vr(c,g,d[g]);u||Vr(c,"pointer-events",l),Vr(c,"clip-path",n.clip?rP(this,n,n.group):null);let f=null,h=0;const p=g=>{const m=this.isDirty(g),_=qee(g,c,f,a.tag,o);m&&(this._update(a,_,g),u&&function Q5e(e,t,n,i){t=t.lastChild.previousSibling;let r,o=0;Da(n,s=>{r=e.mark(t,s,r,i),++o}),Vs(t,1+o)}(this,_,g,r)),f=_,++h};return a.nested?n.items.length&&p(n.items[0]):Da(n,p),Vs(c,h),c}_update(t,n,i){Pu=n,Sr=n.__values__,Lee(F1,i),t.attr(F1,i,this);const r=Z5e[t.type];r&&r.call(this,t,n,i),Pu&&this.style(Pu,i)}style(t,n){if(null!=n){for(const i in uS){let r="font"===i?x1(n):n[i];if(r===Sr[i])continue;const o=uS[i];null==r?t.removeAttribute(o):(JF(r)&&(r=RZ(r,this._defs.gradient,Yee())),t.setAttribute(o,r+"")),Sr[i]=r}for(const i in cS)dS(t,cS[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const o in n.gradient)i||(n.el=i=Di(t,1,"defs",Ci)),r=K5e(i,n.gradient[o],r);for(const o in n.clipping)i||(n.el=i=Di(t,1,"defs",Ci)),r=X5e(i,n.clipping[o],r);i&&(0===r?(t.removeChild(i),n.el=null):Vs(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Wee(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function K5e(e,t,n){let i,r,o;if("radial"===t.gradient){let s=Di(e,n++,"pattern",Ci);ld(s,{id:RC+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Di(s,0,"rect",Ci),ld(s,{width:1,height:1,fill:`url(${Yee()}#${t.id})`}),ld(e=Di(e,n++,"radialGradient",Ci),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else ld(e=Di(e,n++,"linearGradient",Ci),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=Di(e,i,"stop",Ci),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Vs(e,i),n}function X5e(e,t,n){let i;return(e=Di(e,n,"clipPath",Ci)).setAttribute("id",t.id),t.path?(i=Di(e,0,"path",Ci),i.setAttribute("d",t.path)):(i=Di(e,0,"rect",Ci),ld(i,{x:0,y:0,width:t.width,height:t.height})),Vs(e,1),n+1}function qee(e,t,n,i,r){let s,o=e._svg;if(!o&&(s=t.ownerDocument,o=ad(s,i,Ci),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===i))){const a=ad(s,"path",Ci);o.appendChild(a),a.__data__=e;const l=ad(s,"g",Ci);o.appendChild(l),l.__data__=e;const u=ad(s,"path",Ci);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function J5e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}let Pu=null,Sr=null;const Z5e={group(e,t,n){const i=Pu=t.childNodes[2];Sr=i.__values__,e.foreground(F1,n,this),Sr=t.__values__,Pu=t.childNodes[1],e.content(F1,n,this);const r=Pu=t.childNodes[0];e.background(F1,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==Sr.events&&(Vr(i,"pointer-events",o),Vr(r,"pointer-events",o),Sr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Vr(i,"display",null),this.style(r,n),Vr(r,"stroke",null),s&&(n.fill=null),Sr=i.__values__,this.style(i,n),s&&(n.fill=s),Pu=null}else Vr(i,"display","none")},image(e,t,n){!1===n.smooth?(dS(t,"image-rendering","optimizeSpeed"),dS(t,"image-rendering","pixelated")):dS(t,"image-rendering",null)},text(e,t,n){const i=T1(n);let r,o,s,a;te(i)?(o=i.map(l=>sd(n,l)),r=o.join("\n"),r!==Sr.text&&(Vs(t,0),s=t.ownerDocument,a=od(n),o.forEach((l,u)=>{const c=ad(s,"tspan",Ci);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Sr.text=r)):(o=sd(n,i),o!==Sr.text&&(t.textContent=o,Sr.text=o)),Vr(t,"font-family",x1(n)),Vr(t,"font-size",xl(n)+"px"),Vr(t,"font-style",n.fontStyle),Vr(t,"font-variant",n.fontVariant),Vr(t,"font-weight",n.fontWeight)}};function F1(e,t,n){t!==Sr[e]&&(n?function eBe(e,t,n,i){null!=n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}(Pu,e,t,n):Vr(Pu,e,t),Sr[e]=t)}function dS(e,t,n){n!==Sr[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Sr[t]=n)}function ld(e,t){for(const n in t)Vr(e,n,t[n])}function Vr(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Yee(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Kee extends N1{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=$P();n.open("svg",ut({},A1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&"transparent"!==i&&"none"!==i&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",zee,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=Zo[n.marktype],r=i.tag,o=[Lee,i.attr];t.open("g",{class:wee(n),"clip-path":n.clip?rP(this,n,n.group):null},$ee(n),{"pointer-events":"g"!==r&&!1===n.interactive?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(r,this.attr(n,a,o,"g"!==r?r:null)),"text"===r){const u=T1(a);if(te(u)){const c={x:0,dy:od(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(sd(a,u[d])).close()}else t.text(sd(a,u))}else if("g"===r){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,i.background,"bgrect")).close(),t.open("g",this.attr(n,a,i.content)),Da(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,i.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):Da(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(i)?i.forEach(a=>a(s,n,this)):i(s,n,this),r&&function tBe(e,t,n,i,r){let o;if(null==t||("bgrect"===i&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill)))return e;"image"===i&&!1===t.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(e["font-family"]=x1(t),e["font-size"]=xl(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in uS){let a=t[s];const l=uS[s];"transparent"===a&&("fill"===l||"stroke"===l)||null!=a&&(JF(a)&&(a=RZ(a,r.gradient,"")),e[l]=a)}for(const s in cS){const a=t[s];null!=a&&(o=o||[],o.push(`${cS[s]}: ${a};`))}o&&(e.style=o.join(" "))}(o,n,t,r,this._defs),o}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;"radial"===s.gradient?(t.open("pattern",{id:RC+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in i){const s=i[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}const Ca={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function nBe(e){Ca.svgMarkTypes=e.svgMarkTypes??["text"],Ca.svgOnTop=e.svgOnTop??!0,Ca.debug=e.debug??!1}class UP extends N1{constructor(t){super(t),this._svgRenderer=new BP(t),this._canvasRenderer=new lS(t)}initialize(t,n,i,r,o){this._root_el=Di(t,0,"div");const s=Di(this._root_el,0,"div"),a=Di(this._root_el,1,"div");return this._root_el.style.position="relative",Ca.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ca.svgOnTop?a:s,this._canvasEl=Ca.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,o),this._svgRenderer.initialize(this._svgEl,n,i,r,o),super.initialize(t,n,i,r,o)}dirty(t){return Ca.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Ca.svgMarkTypes.includes(o));this._svgRenderer.render(t,Ca.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Ca.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class Xee extends k1{constructor(t,n){super(t,n)}initialize(t,n,i){const r=Di(Di(t,0,"div"),Ca.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const ud={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"},lh={};function fS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(lh[e]=t,this):lh[e]}function nte(e,t,n){const i=[],r=(new li).union(t),o=e.marktype;return o?ite(e,r,n,i):"group"===o?rte(e,r,n,i):ee("Intersect scene must be mark node or group item.")}function ite(e,t,n,i){if(function iBe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const r=e.items,o=e.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)rte(r[a],t,n,i);else for(const l=Zo[o].isect;a<s;++a){const u=r[a];ote(u,t,l)&&i.push(u)}}return i}function rte(e,t,n,i){n&&n(e.mark)&&ote(e,t,Zo.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)ite(r[l],t,n,i);t.translate(s,a)}return i}function ote(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}lh.canvas=lh.png={renderer:lS,headless:lS,handler:k1},lh.svg={renderer:BP,headless:Kee,handler:Oee},lh.hybrid={renderer:UP,headless:UP,handler:Xee},lh.none={};const VP=new li;function ste(e){const t=e.clip;if(lt(t))t(D1(VP.clear()));else{if(!t)return;VP.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(VP)}const rBe=1e-9;function jP(e,t,n){return e===t||("path"===n?ate(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ft(e)&&Ft(t)?Math.abs(e-t)<=rBe:e&&t&&(Ee(e)||Ee(t))?function oBe(e,t){var r,o,n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(!jP(e[r=n[o]],t[r],r))return!1;return typeof e==typeof t}(e,t):e==t)}function ate(e,t){return jP(ym(e),ym(t))}function sBe(){GZ(),function N3e(){IZ=0}()}const Cm="top",Sa="left",Aa="right",cd="bottom",aBe="top-left",lBe="top-right",uBe="bottom-left",cBe="bottom-right",HP="start",zP="middle",jr="end",dBe="x",fBe="y",hS="group",GP="axis",WP="title",qP="legend",lte="row-header",ute="row-footer",cte="row-title",dte="column-header",fte="column-footer",hte="column-title",mBe="symbol",YP="none",pS="all",KP="each",XP="flush",dd="column",fd="row";function _te(e){Q.call(this,null,e)}function gS(e,t,n){return t(e.bounds.clear(),e,n)}ye(_te,Q,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=Zo[r],s=o.bound;let l,a=i.bounds;if(o.nested)i.items.length&&n.dirty(i.items[0]),a=gS(i,s),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(r===hS||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),i.items.forEach(u=>a.union(gS(u,s))),i.role){case GP:case qP:case WP:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(gS(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(gS(u,s))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return ste(i),t.modifies("bounds")}});const yte=":vega_identifier:";function QP(e){Q.call(this,0,e)}function vte(e){Q.call(this,null,e)}function bte(e){Q.call(this,null,e)}QP.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},ye(QP,Q,{transform(e,t){const n=function yBe(e){return e._signals[yte]||(e._signals[yte]=e.add(0))}(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}}),ye(vte,Q,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function vBe(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===hS?$C:LC;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const wte={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>r&&Ete(n.bounds,i.bounds,t)?i.opacity=0:(n=i,1))}},Ete=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Dte=(e,t)=>{for(var o,n=1,i=e.length,r=e[0].bounds;n<i;r=o,++n)if(Ete(r,o=e[n].bounds,t))return!0},bBe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Cte=e=>(e.forEach(t=>t.opacity=1),e),Ste=(e,t)=>e.reflow(t.modified()).modifies("opacity");function Ate(e){Q.call(this,null,e)}ye(bte,Q,{transform(e,t){const n=wte[e.method]||wte.parity,i=e.separation||0;let o,s,r=t.materialize(t.SOURCE).source;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(Cte(r),t=Ste(t,e)),t;if(r=r.filter(bBe),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=Cte(r),t=Ste(t,e),o.length>=3&&Dte(o,i)){do{o=n(o,i)}while(o.length>=3&&Dte(o,i));o.length<3&&!St(r).opacity&&(o.length>1&&(St(o).opacity=0),St(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,t,n)=>{var i=e.range(),r=new li;return t===Cm||t===cd?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}}),ye(Ate,Q,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Ar=new li;function Sm(e,t,n){return e[t]===n?0:(e[t]=n,1)}function EBe(e){var t=e.items[0].orient;return t===Sa||t===Aa}function CBe(e,t,n,i){var b,w,r=t.items[0],o=r.datum,s=null!=r.translate?r.translate:.5,a=r.orient,l=function DBe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(o),u=r.range,c=r.offset,d=r.position,f=r.minExtent,h=r.maxExtent,p=o.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,_=p&&DP(p),y=0,v=0;switch(Ar.clear().union(m),m.clear(),(b=l[0])>-1&&m.union(r.items[b].bounds),(b=l[1])>-1&&m.union(r.items[b].bounds),a){case Cm:y=d||0,v=-c,w=Math.max(f,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&mS(e,p,w,g,_,0,-1,m);break;case Sa:y=-c,v=d||0,w=Math.max(f,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&mS(e,p,w,g,_,1,-1,m);break;case Aa:y=n+c,v=d||0,w=Math.max(f,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&mS(e,p,w,g,_,1,1,m);break;case cd:y=d||0,v=i+c,w=Math.max(f,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&mS(e,p,w,g,0,0,1,m);break;default:y=r.x,v=r.y}return Fu(m.translate(y,v),r),Sm(r,"x",y+s)|Sm(r,"y",v+s)&&(r.bounds=Ar,e.dirty(r),r.bounds=m,e.dirty(r)),r.mark.bounds.clear().union(m)}function mS(e,t,n,i,r,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const Tte=(e,t)=>Math.floor(Math.min(e,t)),xte=(e,t)=>Math.ceil(Math.max(e,t));function ABe(e){return(new li).set(0,0,e.width||0,e.height||0)}function TBe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Sn(e,t,n){return(Ee(e)?e[t]:e)??(void 0!==n?n:0)}function Mte(e){return e<0?Math.ceil(-e):0}function Nte(e,t,n){var D,E,S,M,k,R,F,P,A,C,T,i=!n.nodirty,r=n.bounds===XP?ABe:TBe,o=Ar.set(0,0,0,0),s=Sn(n.align,dd),a=Sn(n.align,fd),l=Sn(n.padding,dd),u=Sn(n.padding,fd),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),g=0,m=Array(f),_=Array(d),y=0,v=Array(f),b=Array(f),w=Array(f);for(E=0;E<c;++E)p[E]=0;for(E=0;E<d;++E)_[E]=0;for(E=0;E<f;++E)k=w[E]=r(R=t[E]),R.x=R.x||0,v[E]=0,R.y=R.y||0,b[E]=0,S=E%c,M=~~(E/c),g=Math.max(g,F=Math.ceil(k.x2)),y=Math.max(y,P=Math.ceil(k.y2)),p[S]=Math.max(p[S],F),_[M]=Math.max(_[M],P),h[E]=l+Mte(k.x1),m[E]=u+Mte(k.y1),i&&e.dirty(t[E]);for(E=0;E<f;++E)E%c==0&&(h[E]=0),E<c&&(m[E]=0);if(s===KP)for(S=1;S<c;++S){for(T=0,E=S;E<f;E+=c)T<h[E]&&(T=h[E]);for(E=S;E<f;E+=c)h[E]=T+p[S-1]}else if(s===pS){for(T=0,E=0;E<f;++E)E%c&&T<h[E]&&(T=h[E]);for(E=0;E<f;++E)E%c&&(h[E]=T+g)}else for(s=!1,S=1;S<c;++S)for(E=S;E<f;E+=c)h[E]+=p[S-1];if(a===KP)for(M=1;M<d;++M){for(T=0,D=(E=M*c)+c;E<D;++E)T<m[E]&&(T=m[E]);for(E=M*c;E<D;++E)m[E]=T+_[M-1]}else if(a===pS){for(T=0,E=c;E<f;++E)T<m[E]&&(T=m[E]);for(E=c;E<f;++E)m[E]=T+y}else for(a=!1,M=1;M<d;++M)for(D=(E=M*c)+c;E<D;++E)m[E]+=_[M-1];for(A=0,E=0;E<f;++E)v[E]+=(A=h[E]+(E%c?A:0))-t[E].x;for(S=0;S<c;++S)for(C=0,E=S;E<f;E+=c)b[E]+=(C+=m[E])-t[E].y;if(s&&Sn(n.center,dd)&&d>1)for(E=0;E<f;++E)(A=(k=s===pS?g:p[E%c])-w[E].x2-t[E].x-v[E])>0&&(v[E]+=A/2);if(a&&Sn(n.center,fd)&&1!==c)for(E=0;E<f;++E)(C=(k=a===pS?y:_[~~(E/c)])-w[E].y2-t[E].y-b[E])>0&&(b[E]+=C/2);for(E=0;E<f;++E)o.union(w[E].translate(v[E],b[E]));switch(A=Sn(n.anchor,dBe),C=Sn(n.anchor,fBe),Sn(n.anchor,dd)){case jr:A-=o.width();break;case zP:A-=o.width()/2}switch(Sn(n.anchor,fd)){case jr:C-=o.height();break;case zP:C-=o.height()/2}for(A=Math.round(A),C=Math.round(C),o.clear(),E=0;E<f;++E)t[E].mark.bounds.clear();for(E=0;E<f;++E)(R=t[E]).x+=v[E]+=A,R.y+=b[E]+=C,o.union(R.mark.bounds.union(R.bounds.translate(v[E],b[E]))),i&&e.dirty(R);return o}function MBe(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function NBe(e,t){return e.bounds[t]}function _S(e,t,n,i,r,o,s,a,l,u,c,d,f,h){var _,y,v,b,w,D,E,S,M,p=n.length,g=0,m=0;if(!p)return g;for(_=c;_<p;_+=d)n[_]&&(g=s(g,l(n[_],u)));if(!t.length)return g;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),g+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(_=c,y=0,b=t.length;y<b;++y,_+=d){for(w=(D=t[y]).mark.bounds,v=_;v>=0&&null==(E=n[v]);v-=f);a?(S=null==h?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),M=g):(S=g,M=null==h?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),w.union(D.bounds.translate(S-(D.x||0),M-(D.y||0))),D.x=S,D.y=M,e.dirty(D),m=s(m,w[u])}return m}function Ote(e,t,n,i,r,o){if(t){e.dirty(t);var s=n,a=n;i?s=Math.round(r.x1+o*r.width()):a=Math.round(r.y1+o*r.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function IBe(e,t,n,i,r,o,s){const a=function OBe(e,t){const n=e[t]||{};return(i,r)=>null!=n[i]?n[i]:null!=e[i]?e[i]:r}(n,t),l=function kBe(e,t){let n=-1/0;return e.forEach(i=>{null!=i.offset&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}(e,a("offset",0)),u=a("anchor",HP),c=u===jr?1:u===zP?.5:0,d={align:KP,bounds:a("bounds",XP),columns:"vertical"===a("direction")?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Sa:d.anchor={x:Math.floor(i.x1)-l,column:jr,y:c*(s||i.height()+2*i.y1),row:u};break;case Aa:d.anchor={x:Math.ceil(i.x2)+l,y:c*(s||i.height()+2*i.y1),row:u};break;case Cm:d.anchor={y:Math.floor(r.y1)-l,row:jr,x:c*(o||r.width()+2*r.x1),column:u};break;case cd:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case aBe:d.anchor={x:l,y:l};break;case lBe:d.anchor={x:o-l,y:l,column:jr};break;case uBe:d.anchor={x:l,y:s-l,row:jr};break;case cBe:d.anchor={x:o-l,y:s-l,column:jr,row:jr}}return d}function RBe(e,t){var l,u,n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,s=n.x,a=n.y;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),function PBe(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(t.datum.title){var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=i-s.x,c=i-s.y;switch(s.orient){case Sa:r+=Math.ceil(s.bounds.width())+l;break;case Aa:case cd:break;default:o+=s.bounds.height()+l}switch((r||o)&&P1(e,n,r,o),s.orient){case Sa:c+=Am(t,n,s,a,1,1);break;case Aa:u+=Am(t,n,s,jr,0,0)+l,c+=Am(t,n,s,a,1,1);break;case cd:u+=Am(t,n,s,a,0,0),c+=Am(t,n,s,jr,-1,0,1)+l;break;default:u+=Am(t,n,s,a,0,0)}(u||c)&&P1(e,s,u,c),(u=Math.round(s.bounds.x1-i))<0&&(P1(e,n,-u,0),P1(e,s,-u,0))}else(r||o)&&P1(e,n,r,o)}(e,n,n.items[0].items[0]),o=function FBe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),i.type===mBe&&function LBe(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}(n.items[0].items[0].items[0].items),r!==YP&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Fu(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function Am(e,t,n,i,r,o,s){const l=n.datum.vgrad,c=("symbol"===e.datum.type||!o&&l||s?t:t.items[0]).bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,f=l&&o?0:c,h=r<=0?0:DP(n);return Math.round(i===HP?d:i===jr?f-h:.5*(c-h))}function P1(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function kte(e){Q.call(this,null,e)}function Ite(e,t){let n=0;if(void 0===t)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Rte(e){Q.call(this,null,e)}function Fte(e){Q.call(this,null,e)}function jBe(){return Vt({})}function Pte(e){Q.call(this,null,e)}function Lte(e){Q.call(this,[],e)}ye(kte,Q,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&function xBe(e,t,n){var c,d,f,h,p,g,m,i=function SBe(e){var r,o,t=e.items,n=t.length,i=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(o=(r=t[i]).items,r.marktype===hS)switch(r.role){case GP:case qP:case WP:break;case lte:s.rowheaders.push(...o);break;case ute:s.rowfooters.push(...o);break;case dte:s.colheaders.push(...o);break;case fte:s.colfooters.push(...o);break;case cte:s.rowtitle=o[0];break;case hte:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}(t),r=i.marks,o=n.bounds===XP?MBe:NBe,s=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),u=l*a;const _=Nte(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(g=Sn(n.headerBand,fd,null),c=_S(e,i.rowheaders,r,0,l,-Sn(s,"rowHeader"),Tte,0,o,"x1",0,a,1,g)),i.colheaders&&(g=Sn(n.headerBand,dd,null),d=_S(e,i.colheaders,r,0,a,-Sn(s,"columnHeader"),Tte,1,o,"y1",0,1,a,g)),i.rowfooters&&(g=Sn(n.footerBand,fd,null),f=_S(e,i.rowfooters,r,0,l,Sn(s,"rowFooter"),xte,0,o,"x2",a-1,a,1,g)),i.colfooters&&(g=Sn(n.footerBand,dd,null),h=_S(e,i.colfooters,r,0,a,Sn(s,"columnFooter"),xte,1,o,"y2",u-a,1,a,g)),i.rowtitle&&(p=Sn(n.titleAnchor,fd),m=Sn(s,"rowTitle"),m=p===jr?f+m:c-m,g=Sn(n.titleBand,fd,.5),Ote(e,i.rowtitle,m,0,_,g)),i.coltitle&&(p=Sn(n.titleAnchor,dd),m=Sn(s,"columnTitle"),m=p===jr?h+m:d-m,g=Sn(n.titleBand,dd,.5),Ote(e,i.coltitle,m,1,_,g))}(n,i,e.layout),function UBe(e,t,n){var c,d,f,p,g,i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=(new li).set(0,0,r,o),a=s.clone(),l=s.clone(),u=[];for(p=0,g=i.length;p<g;++p)switch(d=i[p],d.role){case GP:(EBe(d)?a:l).union(CBe(e,d,r,o));break;case WP:c=d;break;case qP:u.push(RBe(e,d));break;case"frame":case"scope":case lte:case ute:case cte:case dte:case fte:case hte:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(u.length){const m={};u.forEach(_=>{(f=_.orient||Aa)!==YP&&(m[f]||(m[f]=[])).push(_)});for(const _ in m){const y=m[_];Nte(e,y,IBe(y,_,n.legends,a,l,r,o))}u.forEach(_=>{const y=_.bounds;if(y.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=y,e.dirty(_)),!n.autosize||"fit"!==n.autosize.type&&"fit-x"!==n.autosize.type&&"fit-y"!==n.autosize.type)s.union(y);else switch(_.orient){case Sa:case Aa:s.add(y.x1,0).add(y.x2,0);break;case Cm:case cd:s.add(0,y.y1).add(0,y.y2)}})}s.union(a).union(l),c&&s.union(function $Be(e,t,n,i,r){var v,o=t.items[0],a=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=a===Sa||a===Aa?i:n,p=0,g=0,m=0,_=0,y=0;if(o.frame!==hS?a===Sa?(p=r.y2,h=r.y1):a===Aa?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):a===Sa&&(p=i,h=0),v=l===HP?p:l===jr?h:(p+h)/2,f&&f.text){switch(a){case Cm:case cd:y=d.bounds.height()+c;break;case Sa:_=d.bounds.width()+c;break;case Aa:_=-d.bounds.width()-c}Ar.clear().union(f.bounds),Ar.translate(_-(f.x||0),y-(f.y||0)),Sm(f,"x",_)|Sm(f,"y",y)&&(e.dirty(f),f.bounds.clear().union(Ar),f.mark.bounds.clear().union(Ar),e.dirty(f)),Ar.clear().union(f.bounds)}else Ar.clear();switch(Ar.union(d.bounds),a){case Cm:g=v,m=r.y1-Ar.height()-u;break;case Sa:g=r.x1-Ar.width()-u,m=v;break;case Aa:g=r.x2+Ar.width()+u,m=v;break;case cd:g=v,m=r.y2+u;break;default:g=o.x,m=o.y}return Sm(o,"x",g)|Sm(o,"y",m)&&(Ar.translate(g,m),e.dirty(o),o.bounds.clear().union(Ar),t.bounds.clear().union(Ar),e.dirty(o)),o.bounds}(e,c,r,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),function VBe(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if("padding"===r.contains){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===YP?(u=0,d=0,l=s,c=a):"fit"===o?(l=Math.max(0,s-u-f),c=Math.max(0,a-d-h)):"fit-x"===o?(l=Math.max(0,s-u-f),a=c+d+h):"fit-y"===o?(s=l+u+f,c=Math.max(0,a-d-h)):"pad"===o&&(s=l+u+f,a=c+d+h),e._resizeView(s,a,l,c,[u,d],r.resize)}(e,t,s,n)}(n,i,e)}),function BBe(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}}),ye(Rte,Q,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=KF(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),l=e.format||SZ(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?CZ(o,e.values,a):XF(o,a);return r&&(i.rem=r),r=u.map((c,d)=>Vt({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(Vt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),ye(Fte,Q,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||jBe,o=e.key||Be,s=this.value;return te(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(o))&&ee("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=function HBe(e){const t=Wg().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,i.add.push(u)):i.mod.push(u):(u=r(a),s.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,i.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}}),ye(Pte,Q,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(te(o)){if(!n.changed()&&!o.every(d=>r[d]))return t.StopPropagation;o=o[0],n.encode=null}var s="enter"===o,a=r.update||Lc,l=r.enter||Lc,u=r.exit||Lc,c=(o&&!s?r[o]:a)||Lc;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Lc&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Lc&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),s||c!==Lc){const d=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(d,f=>{const h=l(f,e)||i;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||i)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),ye(Lte,Q,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var f,h,p,g,m,n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||IC,s=e.scale,a=+e.limit,l=KF(s,null==e.count?5:e.count,e.minstep),c=e.format||MZ(n,s,l,o,e.formatSpecifier,e.formatType,!!e.values||o===IC),d=e.values||xZ(s,l);return r&&(i.rem=r),o===IC?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),m=!0):r=d,lt(p=e.size)?(!e.values&&0===s(r[0])&&(r=r.slice(1)),g=r.reduce((_,y)=>Math.max(_,p(y,e)),0)):p=br(g=p||8),r=r.map((_,y)=>Vt({index:y,label:c(_,y,r),value:_,offset:g,size:p(_,e)})),m&&r.push(Vt({index:r.length,label:`\u2026${d.length-r.length} entries`,value:m=d[r.length],offset:g,size:p(m,e)}))):"gradient"===o?(f=s.domain(),h=bZ(s,f[0],St(f)),d.length<3&&!e.values&&f[0]!==St(f)&&(d=[f[0],St(f)]),r=d.map((_,y)=>Vt({index:y,label:c(_,y,d),value:_,perc:h(_)}))):(p=d.length-1,h=function x3e(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+St(t),o=r-i;if(e.type===NC){const s=n?o/n:.1;i-=s,r+=s,o=r-i}return s=>(s-i)/o}(s),r=d.map((_,y)=>Vt({index:y,label:c(_,y,d),value:_,perc:y?h(_):0,perc2:y===p?1:h(d[y+1])}))),i.source=r,i.add=r,this.value=r,i}});const zBe=e=>e.source.x,GBe=e=>e.source.y,WBe=e=>e.target.x,qBe=e=>e.target.y;function JP(e){Q.call(this,{},e)}JP.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},ye(JP,Q,{transform(e,t){var n=e.sourceX||zBe,i=e.sourceY||GBe,r=e.targetX||WBe,o=e.targetY||qBe,s=e.as||"path",l=e.shape||"line",u=Vte.get(l+"-"+(e.orient||"vertical"))||Vte.get(l);return u||ee("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const $te=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Bte=(e,t,n,i)=>{var r=n-e,o=i-t,s=Math.hypot(r,o)/2;return"M"+e+","+t+"A"+s+","+s+" "+180*Math.atan2(o,r)/Math.PI+" 0 1 "+n+","+i},Ute=(e,t,n,i)=>{const r=n-e,o=i-t,s=.2*(r+o),a=.2*(o-r);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(i-s)+" "+n+","+i},Vte=Wg({line:$te,"line-radial":(e,t,n,i)=>$te(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),arc:Bte,"arc-radial":(e,t,n,i)=>Bte(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),curve:Ute,"curve-radial":(e,t,n,i)=>Ute(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,"orthogonal-vertical":(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,"orthogonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n);return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*s+","+t*a+"L"+i*s+","+i*a},"diagonal-horizontal":(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a}});function ZP(e){Q.call(this,null,e)}ZP.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},ye(ZP,Q,{transform(e,t){var p,g,m,n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.startAngle||0,a=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,u=l.map(e.field||Hg),c=u.length,d=s,f=(a-s)/Ite(u),h=Qo(c);for(e.sort&&h.sort((_,y)=>u[_]-u[y]),p=0;p<c;++p)m=u[h[p]],(g=l[h[p]])[i]=d,g[r]=d+=m*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});function jte(e){return GF(e)&&e!==Sl}const JBe=_a(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Hte(e){Q.call(this,null,e),this.modified(!0)}function zte(e,t,n){return gZ(e)&&Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+me(t)),t}function Gte(e,t,n){return lt(e)&&(t||n)?yZ(e,eL(t||[0,1],n)):e}function eL(e,t){return t?e.slice().reverse():e}function Wte(e){Q.call(this,null,e)}ye(Hte,Q,{transform(e,t){var n=t.dataflow,i=this.value,r=function ZBe(e){var i,t=e.type,n="";return t===Sl?Sl+"-"+pm:(function e4e(e){const t=e.type;return GF(t)&&t!==eh&&t!==th&&(e.scheme||e.range&&e.range.length&&e.range.every(Ce))}(e)&&(n=2===(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?Sl+"-":3===i?gm+"-":""),(n+t||pm).toLowerCase())}(e);for(r in(!i||r!==i.type)&&(this.value=i=Lt(r)()),e)if(!JBe[r]){if("padding"===r&&jte(i.type))continue;lt(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return function o4e(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function s4e(e,t,n){return"band"!==e&&e!==VF&&ee("Only band and point scales support rangeStep."),[0,t.rangeStep*BF(n,e===VF?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?t.paddingOuter:t.padding)||0)]}(i,t,n);else if(t.scheme&&(o=function a4e(e,t,n){var o,i=t.schemeExtent;return te(t.scheme)?o=kC(t.scheme,t.interpolate,t.interpolateGamma):(o=YF(t.scheme.toLowerCase()))||ee(`Unrecognized scheme name: ${t.scheme}`),n=e===NC?n+1:e===jF?n-1:e===mm||e===MC?+t.schemeCount||5:n,mZ(e)?Gte(o,i,t.reverse):lt(o)?vZ(Gte(o,i),n):e===UF?o:o.slice(0,n)}(i,t,n),lt(o))){if(e.interpolator)return e.interpolator(o);ee(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&mZ(i))return e.interpolator(kC(eL(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(qF(t.interpolate,t.interpolateGamma)):lt(e.round)?e.round(r):lt(e.rangeRound)&&e.interpolate(r?d1:Jc),o&&e.range(eL(o,t.reverse))}(i,e,function r4e(e,t,n){let i=t.bins;if(i&&!te(i)){const r=e.domain(),o=r[0],s=St(r),a=i.step;let l=null==i.start?o:i.start,u=null==i.stop?s:i.stop;a||ee("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),i=Qo(l,u+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===jF&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}(i,e,function t4e(e,t,n){const i=function n4e(e,t,n){return t?(e.domain(zte(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(i>-1)return i;var a,l,r=t.domain,o=e.type,s=t.zero||void 0===t.zero&&function QBe(e){const t=e.type;return!e.bins&&(t===pm||t===p1||t===g1)}(e);if(!r)return 0;if((s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),null!=t.domainMin&&(r[0]=t.domainMin),null!=t.domainMax&&(r[a]=t.domainMax),null!=t.domainMid)){const u=(l=t.domainMid)>r[a]?a+1:l<r[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return jte(o)&&t.padding&&r[0]!==St(r)&&(r=function i4e(e,t,n,i,r,o){var s=Math.abs(St(n)-n[0]),a=s/(s-2*i),l=e===Iu?lI(t,null,a):e===g1?wD(t,null,a,.5):e===p1?wD(t,null,a,r||1):e===xC?uI(t,null,a,o||1):aI(t,null,a);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}(o,r,t.range,t.padding,t.exponent,t.constant)),e.domain(zte(o,r,n)),o===UF&&e.unknown(t.domainImplicit?MF:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&KF(e,t.nice)||null),r.length}(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),ye(Wte,Q,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Gf(e.sort)),this.modified(n),t}});const Xte=["y0","y1"];function tL(e){Q.call(this,null,e)}function l4e(e,t,n,i,r){for(var l,o=(t-e.sum)/2,s=e.length,a=0;a<s;++a)(l=e[a])[i]=o,l[r]=o+=Math.abs(n(l))}function u4e(e,t,n,i,r){for(var c,o=1/e.sum,s=0,a=e.length,l=0,u=0;l<a;++l)(c=e[l])[i]=s,c[r]=s=o*(u+=Math.abs(n(c)))}function c4e(e,t,n,i,r){for(var u,c,o=0,s=0,a=e.length,l=0;l<a;++l)(u=+n(c=e[l]))<0?(c[i]=s,c[r]=s+=u):(c[i]=o,c[r]=o+=u)}tL.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Xte}]},ye(tL,Q,{transform(e,t){var l,u,c,d,n=e.as||Xte,i=n[0],r=n[1],o=Gf(e.sort),s=e.field||Hg,a="center"===e.offset?l4e:"normalize"===e.offset?u4e:c4e;for(l=function d4e(e,t,n,i){var s,a,l,u,c,d,f,h,p,r=[],o=g=>g(c);if(null==t)r.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],(f=s[d=t.map(o)])||(s[d]=f=[],r.push(f)),f.push(c);for(d=0,p=0,u=r.length;d<u;++d){for(a=0,h=0,l=(f=r[d]).length;a<l;++a)h+=Math.abs(i(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return r.max=p,r}(t.source,e.groupby,o,s),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,s,i,r);return t.reflow(e.modified()).modifies(n)}});const L1=e=>e;function yS(e,t){e&&Jte.hasOwnProperty(e.type)&&Jte[e.type](e,t)}var Qte={Feature:function(e,t){yS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)yS(n[i].geometry,t)}},Jte={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)t.point((e=n[i])[0],e[1],e[2])},LineString:function(e,t){nL(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)nL(n[i],t,0)},Polygon:function(e,t){Zte(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Zte(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)yS(n[i],t)}};function nL(e,t,n){var o,i=-1,r=e.length-n;for(t.lineStart();++i<r;)t.point((o=e[i])[0],o[1],o[2]);t.lineEnd()}function Zte(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)nL(e[n],t,1);t.polygonEnd()}function Lu(e,t){e&&Qte.hasOwnProperty(e.type)?Qte[e.type](e,t):yS(e,t)}class er{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let i,r,o,n=this._n,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,o=r-(s-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var je=1e-6,vS=1e-12,gt=Math.PI,Gn=gt/2,bS=gt/4,Hr=2*gt,Qn=180/gt,pt=gt/180,At=Math.abs,Tm=Math.atan,js=Math.atan2,ze=Math.cos,wS=Math.ceil,ene=Math.exp,iL=(Math,Math.hypot),ES=Math.log,rL=Math.pow,$e=Math.sin,Hs=Math.sign||function(e){return e>0?1:e<0?-1:0},zr=Math.sqrt,oL=Math.tan;function tne(e){return e>1?0:e<-1?gt:Math.acos(e)}function Eo(e){return e>1?Gn:e<-1?-Gn:Math.asin(e)}function tr(){}var nne,ine,lL,uL,sL=new er,aL=new er,hd={point:tr,lineStart:tr,lineEnd:tr,polygonStart:function(){hd.lineStart=f4e,hd.lineEnd=p4e},polygonEnd:function(){hd.lineStart=hd.lineEnd=hd.point=tr,sL.add(At(aL)),aL=new er},result:function(){var e=sL/2;return sL=new er,e}};function f4e(){hd.point=h4e}function h4e(e,t){hd.point=rne,nne=lL=e,ine=uL=t}function rne(e,t){aL.add(uL*e-lL*t),lL=e,uL=t}function p4e(){rne(nne,ine)}const one=hd;var xm=1/0,DS=xm,$1=-xm,CS=$1,g4e={point:function m4e(e,t){e<xm&&(xm=e),e>$1&&($1=e),t<DS&&(DS=t),t>CS&&(CS=t)},lineStart:tr,lineEnd:tr,polygonStart:tr,polygonEnd:tr,result:function(){var e=[[xm,DS],[$1,CS]];return $1=CS=-(DS=xm=1/0),e}};const SS=g4e;var sne,ane,Ml,Nl,cL=0,dL=0,B1=0,AS=0,TS=0,Mm=0,fL=0,hL=0,U1=0,Ta={point:uh,lineStart:lne,lineEnd:une,polygonStart:function(){Ta.lineStart=v4e,Ta.lineEnd=b4e},polygonEnd:function(){Ta.point=uh,Ta.lineStart=lne,Ta.lineEnd=une},result:function(){var e=U1?[fL/U1,hL/U1]:Mm?[AS/Mm,TS/Mm]:B1?[cL/B1,dL/B1]:[NaN,NaN];return cL=dL=B1=AS=TS=Mm=fL=hL=U1=0,e}};function uh(e,t){cL+=e,dL+=t,++B1}function lne(){Ta.point=_4e}function _4e(e,t){Ta.point=y4e,uh(Ml=e,Nl=t)}function y4e(e,t){var n=e-Ml,i=t-Nl,r=zr(n*n+i*i);AS+=r*(Ml+e)/2,TS+=r*(Nl+t)/2,Mm+=r,uh(Ml=e,Nl=t)}function une(){Ta.point=uh}function v4e(){Ta.point=w4e}function b4e(){cne(sne,ane)}function w4e(e,t){Ta.point=cne,uh(sne=Ml=e,ane=Nl=t)}function cne(e,t){var n=e-Ml,i=t-Nl,r=zr(n*n+i*i);AS+=r*(Ml+e)/2,TS+=r*(Nl+t)/2,Mm+=r,fL+=(r=Nl*e-Ml*t)*(Ml+e),hL+=r*(Nl+t),U1+=3*r,uh(Ml=e,Nl=t)}const dne=Ta;function fne(e){this._context=e}fne.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Hr)}},result:tr};var gL,hne,pne,V1,j1,pL=new er,xS={point:tr,lineStart:function(){xS.point=E4e},lineEnd:function(){gL&&gne(hne,pne),xS.point=tr},polygonStart:function(){gL=!0},polygonEnd:function(){gL=null},result:function(){var e=+pL;return pL=new er,e}};function E4e(e,t){xS.point=gne,hne=V1=e,pne=j1=t}function gne(e,t){pL.add(zr((V1-=e)*V1+(j1-=t)*j1)),V1=e,j1=t}const mne=xS;let _ne,MS,yne,vne;class bne{constructor(t){this._append=null==t?wne:function D4e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wne;if(t!==_ne){const n=10**t;_ne=t,MS=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return MS}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==yne||this._append!==MS){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,yne=i,MS=this._append,vne=this._,this._=r}this._+=vne}}result(){const t=this._;return this._="",t.length?t:null}}function wne(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ene(e,t){let r,o,n=3,i=4.5;function s(a){return a&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),Lu(a,r(o))),o.result()}return s.area=function(a){return Lu(a,r(one)),one.result()},s.measure=function(a){return Lu(a,r(mne)),mne.result()},s.bounds=function(a){return Lu(a,r(SS)),SS.result()},s.centroid=function(a){return Lu(a,r(dne)),dne.result()},s.projection=function(a){return arguments.length?(r=null==a?(e=null,L1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=null==a?(t=null,new bne(n)):new fne(t=a),"function"!=typeof i&&o.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i="function"==typeof a?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return n;if(null==a)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return null===t&&(o=new bne(n)),s},s.projection(e).digits(n).context(t)}function Dne(){var t,e=[];return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:tr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function NS(e,t){return At(e[0]-t[0])<je&&At(e[1]-t[1])<je}function OS(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Cne(e,t,n,i,r){var a,l,o=[],s=[];if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y,m=p[0],_=p[g];if(NS(m,_)){if(!m[2]&&!_[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);return void r.lineEnd()}_[0]+=2*je}o.push(y=new OS(m,p,null,!0)),s.push(y.o=new OS(m,null,y,!1)),o.push(y=new OS(_,p,null,!1)),s.push(y.o=new OS(_,null,y,!0))}}),o.length){for(s.sort(t),Sne(o),Sne(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var c,d,u=o[0];;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)r.point((d=c[a])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(h)for(a=(c=f.p.z).length-1;a>=0;--a)r.point((d=c[a])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,h=!h}while(!f.v);r.lineEnd()}}}function Sne(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function kS(e){return[js(e[1],e[0]),Eo(e[2])]}function ch(e){var t=e[0],n=e[1],i=ze(n);return[i*ze(t),i*$e(t),$e(n)]}function IS(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nm(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mL(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function RS(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function FS(e){var t=zr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function _L(e){return At(e[0])<=gt?e[0]:Hs(e[0])*((At(e[0])+gt)%Hr-gt)}function Ane(e){return Array.from(function*S4e(e){for(const t of e)yield*t}(e))}function Tne(e,t,n,i){return function(r){var u,c,d,o=t(r),s=Dne(),a=t(s),l=!1,f={point:h,lineStart:g,lineEnd:m,polygonStart:function(){f.point=_,f.lineStart=y,f.lineEnd=v,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=m,c=Ane(c);var b=function C4e(e,t){var n=_L(t),i=t[1],r=$e(i),o=[$e(n),-ze(n),0],s=0,a=0,l=new er;1===r?i=Gn+je:-1===r&&(i=-Gn-je);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=_L(h),g=h[1]/2+bS,m=$e(g),_=ze(g),y=0;y<f;++y,p=b,m=D,_=E,h=v){var v=d[y],b=_L(v),w=v[1]/2+bS,D=$e(w),E=ze(w),S=b-p,M=S>=0?1:-1,k=M*S,R=k>gt,F=m*D;if(l.add(js(F*M*$e(k),_*E+F*ze(k))),s+=R?S+M*Hr:S,R^p>=n^b>=n){var P=Nm(ch(h),ch(v));FS(P);var A=Nm(o,P);FS(A);var C=(R^S>=0?-1:1)*Eo(A[2]);(i>C||i===C&&(P[0]||P[1]))&&(a+=R^S>=0?1:-1)}}return(s<-je||s<je&&l<-vS)^1&a}(u,i);c.length?(l||(r.polygonStart(),l=!0),Cne(c,T4e,b,n,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(b,w){e(b,w)&&r.point(b,w)}function p(b,w){o.point(b,w)}function g(){f.point=p,o.lineStart()}function m(){f.point=h,o.lineEnd()}function _(b,w){d.push([b,w]),a.point(b,w)}function y(){a.lineStart(),d=[]}function v(){_(d[0][0],d[0][1]),a.lineEnd();var D,S,M,k,b=a.clean(),w=s.result(),E=w.length;if(d.pop(),u.push(d),d=null,E){if(1&b){if((S=(M=w[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<S;++D)r.point((k=M[D])[0],k[1]);r.lineEnd()}return}E>1&&2&b&&w.push(w.pop().concat(w.shift())),c.push(w.filter(A4e))}}return f}}function A4e(e){return e.length>1}function T4e(e,t){return((e=e.x)[0]<0?e[1]-Gn-je:Gn-e[1])-((t=t.x)[0]<0?t[1]-Gn-je:Gn-t[1])}const xne=Tne(function(){return!0},function x4e(e){var r,t=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(o,s){var a=o>0?gt:-gt,l=At(o-t);At(l-gt)<je?(e.point(t,n=(n+s)/2>0?Gn:-Gn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),r=0):i!==a&&l>=gt&&(At(t-i)<je&&(t-=i*je),At(o-a)<je&&(o-=a*je),n=function M4e(e,t,n,i){var r,o,s=$e(e-n);return At(s)>je?Tm(($e(t)*(o=ze(i))*$e(n)-$e(i)*(r=ze(t))*$e(e))/(r*o*s)):(t+i)/2}(t,n,o,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=o,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}},function N4e(e,t,n,i){var r;if(null==e)i.point(-gt,r=n*Gn),i.point(0,r),i.point(gt,r),i.point(gt,0),i.point(gt,-r),i.point(0,-r),i.point(-gt,-r),i.point(-gt,0),i.point(-gt,r);else if(At(e[0]-t[0])>je){var o=e[0]<t[0]?gt:-gt;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-gt,-Gn]);function Nne(e,t){(t=ch(t))[0]-=e,FS(t);var n=tne(-t[1]);return((-t[2]<0?-n:n)+Hr-je)%Hr}var H1=1e9,PS=-H1;function One(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,f){var h=0,p=0;if(null==u||(h=s(u,d))!==(p=s(c,d))||l(u,c)<0^d>0)do{f.point(0===h||3===h?e:n,h>1?i:t)}while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function s(u,c){return At(u[0]-e)<je?c>0?0:3:At(u[0]-n)<je?c>0?2:1:At(u[1]-t)<je?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=s(u,1),f=s(c,1);return d!==f?d-f:0===d?c[1]-u[1]:1===d?u[0]-c[0]:2===d?u[1]-c[1]:c[0]-u[0]}return function(u){var f,h,p,g,m,_,y,v,b,w,D,c=u,d=Dne(),E={point:S,lineStart:function F(){E.point=A,h&&h.push(p=[]),w=!0,b=!1,y=v=NaN},lineEnd:function P(){f&&(A(g,m),_&&b&&d.rejoin(),f.push(d.result())),E.point=S,b&&c.lineEnd()},polygonStart:function k(){c=d,f=[],h=[],D=!0},polygonEnd:function R(){var C=function M(){for(var C=0,T=0,O=h.length;T<O;++T)for(var V,H,x=h[T],N=1,I=x.length,U=x[0],j=U[0],z=U[1];N<I;++N)V=j,H=z,j=(U=x[N])[0],z=U[1],H<=i?z>i&&(j-V)*(i-H)>(z-H)*(e-V)&&++C:z<=i&&(j-V)*(i-H)<(z-H)*(e-V)&&--C;return C}(),T=D&&C,O=(f=Ane(f)).length;(T||O)&&(u.polygonStart(),T&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),O&&Cne(f,a,C,o,u),u.polygonEnd()),c=u,f=h=p=null}};function S(C,T){r(C,T)&&c.point(C,T)}function A(C,T){var O=r(C,T);if(h&&p.push([C,T]),w)g=C,m=T,_=O,w=!1,O&&(c.lineStart(),c.point(C,T));else if(O&&b)c.point(C,T);else{var x=[y=Math.max(PS,Math.min(H1,y)),v=Math.max(PS,Math.min(H1,v))],N=[C=Math.max(PS,Math.min(H1,C)),T=Math.max(PS,Math.min(H1,T))];!function k4e(e,t,n,i,r,o){var p,s=e[0],a=e[1],c=0,d=1,f=t[0]-s,h=t[1]-a;if(p=n-s,f||!(p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=r-s,f||!(p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=i-a,h||!(p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=o-a,h||!(p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=s+c*f,e[1]=a+c*h),d<1&&(t[0]=s+d*f,t[1]=a+d*h),!0}}}}}(x,N,e,t,n,i)?O&&(c.lineStart(),c.point(C,T),D=!1):(b||(c.lineStart(),c.point(x[0],x[1])),c.point(N[0],N[1]),O||c.lineEnd(),D=!1)}y=C,v=T,b=O}return E}}function yL(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return(i=t.invert(i,r))&&e.invert(i[0],i[1])}),n}function vL(e,t){return At(e)>gt&&(e-=Math.round(e/Hr)*Hr),[e,t]}function kne(e,t,n){return(e%=Hr)?t||n?yL(Rne(e),Fne(t,n)):Rne(e):t||n?Fne(t,n):vL}function Ine(e){return function(t,n){return At(t+=e)>gt&&(t-=Math.round(t/Hr)*Hr),[t,n]}}function Rne(e){var t=Ine(e);return t.invert=Ine(-e),t}function Fne(e,t){var n=ze(e),i=$e(e),r=ze(t),o=$e(t);function s(a,l){var u=ze(l),c=ze(a)*u,d=$e(a)*u,f=$e(l),h=f*n+c*i;return[js(d*r-h*o,c*n-f*i),Eo(h*r+d*o)]}return s.invert=function(a,l){var u=ze(l),c=ze(a)*u,d=$e(a)*u,f=$e(l),h=f*r-d*o;return[js(d*r+f*o,c*n+h*i),Eo(h*n-c*i)]},s}function z1(e){return function(t){var n=new bL;for(var i in e)n[i]=e[i];return n.stream=t,n}}function bL(){}function wL(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),Lu(n,e.stream(SS)),t(SS.result()),null!=i&&e.clipExtent(i),e}function LS(e,t,n){return wL(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function EL(e,t,n){return LS(e,[[0,0],t],n)}function DL(e,t,n){return wL(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},n)}function CL(e,t,n){return wL(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},n)}vL.invert=vL,bL.prototype={constructor:bL,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Pne=16,R4e=ze(30*pt);function Lne(e,t){return+t?function P4e(e,t){function n(i,r,o,s,a,l,u,c,d,f,h,p,g,m){var _=u-i,y=c-r,v=_*_+y*y;if(v>4*t&&g--){var b=s+f,w=a+h,D=l+p,E=zr(b*b+w*w+D*D),S=Eo(D/=E),M=At(At(D)-1)<je||At(o-d)<je?(o+d)/2:js(w,b),k=e(M,S),R=k[0],F=k[1],P=R-i,A=F-r,C=y*P-_*A;(C*C/v>t||At((_*P+y*A)/v-.5)>.3||s*f+a*h+l*p<R4e)&&(n(i,r,o,s,a,l,R,F,M,b/=E,w/=E,D,g,m),m.point(R,F),n(R,F,M,b,w,D,u,c,d,f,h,p,g,m))}}return function(i){var r,o,s,a,l,u,c,d,f,h,p,g,m={point:_,lineStart:y,lineEnd:b,polygonStart:function(){i.polygonStart(),m.lineStart=w},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function _(S,M){S=e(S,M),i.point(S[0],S[1])}function y(){d=NaN,m.point=v,i.lineStart()}function v(S,M){var k=ch([S,M]),R=e(S,M);n(d,f,c,h,p,g,d=R[0],f=R[1],c=S,h=k[0],p=k[1],g=k[2],Pne,i),i.point(d,f)}function b(){m.point=_,i.lineEnd()}function w(){y(),m.point=D,m.lineEnd=E}function D(S,M){v(r=S,M),o=d,s=f,a=h,l=p,u=g,m.point=v}function E(){n(d,f,c,h,p,g,o,s,r,a,l,u,Pne,i),m.lineEnd=b,b()}return m}}(e,t):function F4e(e){return z1({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var L4e=z1({point:function(e,t){this.stream.point(e*pt,t*pt)}});function $ne(e,t,n,i,r,o){if(!o)return function B4e(e,t,n,i,r){function o(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return o.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},o}(e,t,n,i,r);var s=ze(o),a=$e(o),l=s*e,u=a*e,c=s/e,d=a/e,f=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return[l*(g*=i)-u*(m*=r)+t,n-u*g-l*m]}return p.invert=function(g,m){return[i*(c*g-d*m+f),r*(h-d*g-c*m)]},p}function Ol(e){return Bne(function(){return e})()}function Bne(e){var t,c,_,y,v,D,E,S,M,k,n=150,i=480,r=250,o=0,s=0,a=0,l=0,u=0,d=0,f=1,h=1,p=null,g=xne,m=null,b=L1,w=.5;function R(C){return S(C[0]*pt,C[1]*pt)}function F(C){return(C=S.invert(C[0],C[1]))&&[C[0]*Qn,C[1]*Qn]}function P(){var C=$ne(n,0,0,f,h,d).apply(null,t(o,s)),T=$ne(n,i-C[0],r-C[1],f,h,d);return c=kne(a,l,u),E=yL(t,T),S=yL(c,E),D=Lne(E,w),A()}function A(){return M=k=null,R}return R.stream=function(C){return M&&k===C?M:M=L4e(function $4e(e){return z1({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(c)(g(D(b(k=C)))))},R.preclip=function(C){return arguments.length?(g=C,p=void 0,A()):g},R.postclip=function(C){return arguments.length?(b=C,m=_=y=v=null,A()):b},R.clipAngle=function(C){return arguments.length?(g=+C?function O4e(e){var t=ze(e),n=2*pt,i=t>0,r=At(t)>je;function s(c,d){return ze(c)*ze(d)>t}function l(c,d,f){var g=[1,0,0],m=Nm(ch(c),ch(d)),_=IS(m,m),y=m[0],v=_-y*y;if(!v)return!f&&c;var b=t*_/v,w=-t*y/v,D=Nm(g,m),E=RS(g,b);mL(E,RS(m,w));var M=D,k=IS(E,M),R=IS(M,M),F=k*k-R*(IS(E,E)-1);if(!(F<0)){var P=zr(F),A=RS(M,(-k-P)/R);if(mL(A,E),A=kS(A),!f)return A;var N,C=c[0],T=d[0],O=c[1],x=d[1];T<C&&(N=C,C=T,T=N);var I=T-C,U=At(I-gt)<je;if(!U&&x<O&&(N=O,O=x,x=N),U||I<je?U?O+x>0^A[1]<(At(A[0]-C)<je?O:x):O<=A[1]&&A[1]<=x:I>gt^(C<=A[0]&&A[0]<=T)){var H=RS(M,(-k+P)/R);return mL(H,E),[A,kS(H)]}}}function u(c,d){var f=i?e:gt-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return Tne(s,function a(c){var d,f,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,_){var v,y=[m,_],b=s(m,_),w=i?b?0:u(m,_):b?u(m+(m<0?gt:-gt),_):0;if(!d&&(p=h=b)&&c.lineStart(),b!==h&&(!(v=l(d,y))||NS(d,v)||NS(y,v))&&(y[2]=1),b!==h)g=0,b?(c.lineStart(),v=l(y,d),c.point(v[0],v[1])):(v=l(d,y),c.point(v[0],v[1],2),c.lineEnd()),d=v;else if(r&&d&&i^b){var D;!(w&f)&&(D=l(y,d,!0))&&(g=0,i?(c.lineStart(),c.point(D[0][0],D[0][1]),c.point(D[1][0],D[1][1]),c.lineEnd()):(c.point(D[1][0],D[1][1]),c.lineEnd(),c.lineStart(),c.point(D[0][0],D[0][1],3)))}b&&(!d||!NS(d,y))&&c.point(y[0],y[1]),d=y,h=b,f=w},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return g|(p&&h)<<1}}},function o(c,d,f,h){!function Mne(e,t,n,i,r,o){if(n){var s=ze(t),a=$e(t),l=i*n;null==r?(r=t+i*Hr,o=t-l/2):(r=Nne(s,r),o=Nne(s,o),(i>0?r<o:r>o)&&(r+=i*Hr));for(var u,c=r;i>0?c>o:c<o;c-=l)u=kS([s,-a*ze(c),-a*$e(c)]),e.point(u[0],u[1])}}(h,e,n,f,c,d)},i?[0,-e]:[-gt,e-gt])}(p=C*pt):(p=null,xne),A()):p*Qn},R.clipExtent=function(C){return arguments.length?(b=null==C?(m=_=y=v=null,L1):One(m=+C[0][0],_=+C[0][1],y=+C[1][0],v=+C[1][1]),A()):null==m?null:[[m,_],[y,v]]},R.scale=function(C){return arguments.length?(n=+C,P()):n},R.translate=function(C){return arguments.length?(i=+C[0],r=+C[1],P()):[i,r]},R.center=function(C){return arguments.length?(o=C[0]%360*pt,s=C[1]%360*pt,P()):[o*Qn,s*Qn]},R.rotate=function(C){return arguments.length?(a=C[0]%360*pt,l=C[1]%360*pt,u=C.length>2?C[2]%360*pt:0,P()):[a*Qn,l*Qn,u*Qn]},R.angle=function(C){return arguments.length?(d=C%360*pt,P()):d*Qn},R.reflectX=function(C){return arguments.length?(f=C?-1:1,P()):f<0},R.reflectY=function(C){return arguments.length?(h=C?-1:1,P()):h<0},R.precision=function(C){return arguments.length?(D=Lne(E,w=C*C),A()):zr(w)},R.fitExtent=function(C,T){return LS(R,C,T)},R.fitSize=function(C,T){return EL(R,C,T)},R.fitWidth=function(C,T){return DL(R,C,T)},R.fitHeight=function(C,T){return CL(R,C,T)},function(){return t=e.apply(this,arguments),R.invert=t.invert&&F,P()}}function SL(e){var t=0,n=gt/3,i=Bne(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*pt,n=o[1]*pt):[t*Qn,n*Qn]},r}function V4e(e,t){var n=$e(e),i=(n+$e(t))/2;if(At(i)<je)return function U4e(e){var t=ze(e);function n(i,r){return[i*t,$e(r)/t]}return n.invert=function(i,r){return[i/t,Eo(r*t)]},n}(e);var r=1+n*(2*i-n),o=zr(r)/i;function s(a,l){var u=zr(r-2*i*$e(l))/i;return[u*$e(a*=i),o-u*ze(a)]}return s.invert=function(a,l){var u=o-l,c=js(a,At(u))*Hs(u);return u*i<0&&(c-=gt*Hs(a)*Hs(u)),[c/i,Eo((r-(a*a+u*u)*i*i)/(2*i))]},s}function $S(){return SL(V4e).scale(155.424).center([0,33.6442])}function Une(){return $S().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vne(e){return function(t,n){var i=ze(t),r=ze(n),o=e(i*r);return o===1/0?[2,0]:[o*r*$e(t),o*$e(n)]}}function G1(e){return function(t,n){var i=zr(t*t+n*n),r=e(i),o=$e(r),s=ze(r);return[js(t*o,i*s),Eo(i&&n*o/i)]}}var jne=Vne(function(e){return zr(2/(1+e))});jne.invert=G1(function(e){return 2*Eo(e/2)});var Hne=Vne(function(e){return(e=tne(e))&&e/$e(e)});function BS(e,t){return[e,ES(oL((Gn+t)/2))]}function zne(e){var a,l,u,t=Ol(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,s=null;function c(){var d=gt*i(),f=t(function I4e(e){function t(n){return(n=e(n[0]*pt,n[1]*pt))[0]*=Qn,n[1]*=Qn,n}return e=kne(e[0]*pt,e[1]*pt,e.length>2?e[2]*pt:0),t.invert=function(n){return(n=e.invert(n[0]*pt,n[1]*pt))[0]*=Qn,n[1]*=Qn,n},t}(t.rotate()).invert([0,0]));return o(null==s?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===BS?[[Math.max(f[0]-d,s),a],[Math.min(f[0]+d,l),u]]:[[s,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(null==d?s=a=l=u=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):null==s?null:[[s,a],[l,u]]},c()}function US(e){return oL((Gn+e)/2)}function q4e(e,t){var n=ze(e),i=e===t?$e(e):ES(n/ze(t))/ES(US(t)/US(e)),r=n*rL(US(e),i)/i;if(!i)return BS;function o(s,a){r>0?a<-Gn+je&&(a=-Gn+je):a>Gn-je&&(a=Gn-je);var l=r/rL(US(a),i);return[l*$e(i*s),r-l*ze(i*s)]}return o.invert=function(s,a){var l=r-a,u=Hs(i)*zr(s*s+l*l),c=js(s,At(l))*Hs(l);return l*i<0&&(c-=gt*Hs(s)*Hs(l)),[c/i,2*Tm(rL(r/u,1/i))-Gn]},o}function VS(e,t){return[e,t]}function X4e(e,t){var n=ze(e),i=e===t?$e(e):(n-ze(t))/(t-e),r=n/i+e;if(At(i)<je)return VS;function o(s,a){var l=r-a,u=i*s;return[l*$e(u),r-l*ze(u)]}return o.invert=function(s,a){var l=r-a,u=js(s,At(l))*Hs(l);return l*i<0&&(u-=gt*Hs(s)*Hs(l)),[u/i,r-Hs(i)*zr(s*s+l*l)]},o}Hne.invert=G1(function(e){return e}),BS.invert=function(e,t){return[e,2*Tm(ene(t))-Gn]},VS.invert=VS;var W1=1.340264,q1=-.081106,Y1=893e-6,K1=.003796,jS=zr(3)/2;function Gne(e,t){var n=Eo(jS*$e(t)),i=n*n,r=i*i*i;return[e*ze(n)/(jS*(W1+3*q1*i+r*(7*Y1+9*K1*i))),n*(W1+q1*i+r*(Y1+K1*i))]}function Wne(e,t){var n=ze(t),i=ze(e)*n;return[n*$e(e)/i,$e(t)/i]}function qne(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Yne(e,t){return[ze(t)*$e(e),$e(t)]}function Kne(e,t){var n=ze(t),i=1+ze(e)*n;return[n*$e(e)/i,$e(t)/i]}function Xne(e,t){return[ES(oL((Gn+t)/2)),-e]}Gne.invert=function(e,t){for(var s,n=t,i=n*n,r=i*i*i,o=0;o<12&&(r=(i=(n-=s=(n*(W1+q1*i+r*(Y1+K1*i))-t)/(W1+3*q1*i+r*(7*Y1+9*K1*i)))*n)*i*i,!(At(s)<vS));++o);return[jS*e*(W1+3*q1*i+r*(7*Y1+9*K1*i))/ze(n),Eo($e(n)/jS)]},Wne.invert=G1(Tm),qne.invert=function(e,t){var r,n=t,i=25;do{var o=n*n,s=o*o;n-=r=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-t)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(At(r)>je&&--i>0);return[e/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},Yne.invert=G1(Eo),Kne.invert=G1(function(e){return 2*Tm(e)}),Xne.invert=function(e,t){return[-t,2*Tm(ene(e))-Gn]};var s8e=Math.abs,AL=(Math,Math,Math,Math.cos),HS=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),a8e=(Math,1e-6),pd=Math.PI,TL=pd/2,Jne=(Math,zS(2));function Zne(e){return e>1?TL:e<-1?-TL:Math.asin(e)}function zS(e){return e>0?Math.sqrt(e):0}function l8e(e,t){var r,n=e*HS(t),i=30;do{t-=r=(t+HS(t)-n)/(1+AL(t))}while(s8e(r)>a8e&&--i>0);return t/2}zS(pd);var c8e=function u8e(e,t,n){function i(r,o){return[e*r*AL(o=l8e(n,o)),t*HS(o)]}return i.invert=function(r,o){return o=Zne(o/t),[r/(e*AL(o)),Zne((2*o+HS(2*o))/n)]},i}(Jne/TL,Jne,pd);const f8e=Ene(),xL=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ML(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(GS[e]=function h8e(e,t){return function n(){const i=t();return i.type=e,i.path=Ene().projection(i),i.copy=i.copy||function(){const r=n();return xL.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},hZ(i)}}(e,t),this):GS[e]||null}function eie(e){return e&&e.path||f8e}const GS={albers:Une,albersusa:function H4e(){var e,t,i,o,a,l,n=Une(),r=$S().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=$S().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,i.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}function d(){return e=t=null,c}return c.invert=function(f){var h=n.scale(),p=n.translate(),g=(f[0]-p[0])/h,m=(f[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=function j4e(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([n.stream(t=f),r.stream(f),s.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),s.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),r.scale(.35*f),s.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],g=+f[1];return i=n.translate(f).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=r.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+je,g+.12*h+je],[p-.214*h-je,g+.234*h-je]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+je,g+.166*h+je],[p-.115*h-je,g+.234*h-je]]).stream(u),d()},c.fitExtent=function(f,h){return LS(c,f,h)},c.fitSize=function(f,h){return EL(c,f,h)},c.fitWidth=function(f,h){return DL(c,f,h)},c.fitHeight=function(f,h){return CL(c,f,h)},c.scale(1070)},azimuthalequalarea:function z4e(){return Ol(jne).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function G4e(){return Ol(Hne).scale(79.4188).clipAngle(179.999)},conicconformal:function Y4e(){return SL(q4e).scale(109.5).parallels([30,30])},conicequalarea:$S,conicequidistant:function Q4e(){return SL(X4e).scale(131.154).center([0,13.9389])},equalEarth:function Z4e(){return Ol(Gne).scale(177.158)},equirectangular:function K4e(){return Ol(VS).scale(152.63)},gnomonic:function e8e(){return Ol(Wne).scale(144.049).clipAngle(60)},identity:function t8e(){var s,a,u,c,d,m,_,e=1,t=0,n=0,i=1,r=1,o=0,l=null,f=1,h=1,p=z1({point:function(b,w){var D=v([b,w]);this.stream.point(D[0],D[1])}}),g=L1;function y(){return f=e*i,h=e*r,m=_=null,v}function v(b){var w=b[0]*f,D=b[1]*h;if(o){var E=D*s-w*a;w=w*s+D*a,D=E}return[w+t,D+n]}return v.invert=function(b){var w=b[0]-t,D=b[1]-n;if(o){var E=D*s+w*a;w=w*s-D*a,D=E}return[w/f,D/h]},v.stream=function(b){return m&&_===b?m:m=p(g(_=b))},v.postclip=function(b){return arguments.length?(g=b,l=u=c=d=null,y()):g},v.clipExtent=function(b){return arguments.length?(g=null==b?(l=u=c=d=null,L1):One(l=+b[0][0],u=+b[0][1],c=+b[1][0],d=+b[1][1]),y()):null==l?null:[[l,u],[c,d]]},v.scale=function(b){return arguments.length?(e=+b,y()):e},v.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},v.angle=function(b){return arguments.length?(a=$e(o=b%360*pt),s=ze(o),y()):o*Qn},v.reflectX=function(b){return arguments.length?(i=b?-1:1,y()):i<0},v.reflectY=function(b){return arguments.length?(r=b?-1:1,y()):r<0},v.fitExtent=function(b,w){return LS(v,b,w)},v.fitSize=function(b,w){return EL(v,b,w)},v.fitWidth=function(b,w){return DL(v,b,w)},v.fitHeight=function(b,w){return CL(v,b,w)},v},mercator:function W4e(){return zne(BS).scale(961/Hr)},mollweide:function d8e(){return Ol(c8e).scale(169.529)},naturalEarth1:function n8e(){return Ol(qne).scale(175.295)},orthographic:function i8e(){return Ol(Yne).scale(249.5).clipAngle(90+je)},stereographic:function r8e(){return Ol(Kne).scale(250).clipAngle(142)},transversemercator:function o8e(){var e=zne(Xne),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):[(i=t())[1],-i[0]]},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):[(i=n())[0],i[1],i[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in GS)ML(e,GS[e]);function tie(e,t,n){var i=Qo(e,t-je,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function nie(e,t,n){var i=Qo(e,t-je,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function p8e(){}const $u=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function rie(){var e=1,t=1,n=a;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return function o(l,u,c){var h,p,m,_,y,d=[],f=[];for(h=p=-1,$u[(m=l[0]>=u)<<1].forEach(v);++h<e-1;)$u[m|(m=l[h+1]>=u)<<1].forEach(v);for($u[m<<0].forEach(v);++p<t-1;){for(h=-1,$u[(m=l[p*e+e]>=u)<<1|(_=l[p*e]>=u)<<2].forEach(v);++h<e-1;)y=_,$u[m|(m=l[p*e+e+h+1]>=u)<<1|(_=l[p*e+h+1]>=u)<<2|y<<3].forEach(v);$u[m|_<<3].forEach(v)}for(h=-1,$u[(_=l[p*e]>=u)<<2].forEach(v);++h<e-1;)y=_,$u[(_=l[p*e+h+1]>=u)<<2|y<<3].forEach(v);function v(b){var M,k,w=[b[0][0]+h,b[0][1]+p],D=[b[1][0]+h,b[1][1]+p],E=s(w),S=s(D);(M=f[E])?(k=d[S])?(delete f[M.end],delete d[k.start],M===k?(M.ring.push(D),c(M.ring)):d[M.start]=f[k.end]={start:M.start,end:k.end,ring:M.ring.concat(k.ring)}):(delete f[M.end],M.ring.push(D),f[M.end=S]=M):(M=d[S])?(k=f[E])?(delete d[M.start],delete f[k.end],M===k?(M.ring.push(D),c(M.ring)):d[k.start]=f[M.end]={start:k.start,end:M.end,ring:k.ring.concat(M.ring)}):(delete d[M.start],M.ring.unshift(w),d[M.start=E]=M):d[E]=f[S]={start:E,end:S,ring:[w,D]}}$u[_<<3].forEach(v)}(l,u,f=>{n(f,l,u),function g8e(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var g,h=0,p=c.length;h<p;++h)if(-1!==m8e((g=c[h])[0],f))return void g.push(f)}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l){return 2*l[0]+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var m,f=d[0],h=d[1],p=0|f,g=0|h,_=u[g*e+p];f>0&&f<e&&p===f&&(d[0]=f+(c-(m=u[g*e+p-1]))/(_-m)-.5),h>0&&h<t&&g===h&&(d[1]=h+(c-(m=u[(g-1)*e+p]))/(_-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||ee("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?a:p8e,i):n===a},i}function m8e(e,t){for(var r,n=-1,i=t.length;++n<i;)if(r=_8e(e,t[n]))return r;return 0}function _8e(e,t){for(var n=t[0],i=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(y8e(l,d,t))return 0;c>i!=h>i&&n<(f-u)*(i-c)/(h-c)+u&&(r=-r)}return r}function y8e(e,t,n){var i;return function v8e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function b8e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[i=+(e[0]===t[0])],n[i],t[i])}function oie(e,t,n){return function(i){var r=ml(i),o=n?Math.min(r[0],0):r[0],s=r[1],a=s-o,l=t?Vc(o,s,e):a/(e+1);return Qo(o+l,s,l)}}function NL(e){Q.call(this,null,e)}function sie(e,t,n,i,r){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-s)*n+r}return function(d){return d.coordinates.forEach(l),d}}function aie(e,t,n){const i=e>=0?e:dR(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function OL(e){return lt(e)?e:br(+e)}function lie(){var e=l=>l[0],t=l=>l[1],n=Hg,i=[-1,-1],r=960,o=500,s=2;function a(l,u){const c=aie(i[0],l,e)>>s,d=aie(i[1],l,t)>>s,f=c?c+2:0,h=d?d+2:0,p=2*f+(r>>s),g=2*h+(o>>s),m=new Float32Array(p*g),_=new Float32Array(p*g);let y=m;l.forEach(b=>{const w=f+(+e(b)>>s),D=h+(+t(b)>>s);w>=0&&w<p&&D>=0&&D<g&&(m[w+D*p]+=+n(b))}),c>0&&d>0?(Om(p,g,m,_,c),km(p,g,_,m,d),Om(p,g,m,_,c),km(p,g,_,m,d),Om(p,g,m,_,c),km(p,g,_,m,d)):c>0?(Om(p,g,m,_,c),Om(p,g,_,m,c),Om(p,g,m,_,c),y=_):d>0&&(km(p,g,m,_,d),km(p,g,_,m,d),km(p,g,m,_,d),y=_);const v=u?Math.pow(2,-2*s):1/Ite(y);for(let b=0,w=p*g;b<w;++b)y[b]*=v;return{values:y,scale:1<<s,width:p,height:g,x1:f,y1:h,x2:f+(r>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=OL(l),a):e},a.y=function(l){return arguments.length?(t=OL(l),a):t},a.weight=function(l){return arguments.length?(n=OL(l),a):n},a.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||ee("invalid size"),r=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||ee("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(1===(l=De(l)).length&&(l=[+l[0],+l[0]]),2!==l.length&&ee("invalid bandwidth"),i=l,a):i},a}function Om(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<t;++s)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[a+s*e]),a>=r&&(a>=o&&(l-=n[a-o+s*e]),i[a-r+s*e]=l/Math.min(a+1,e-1+o-a,o))}function km(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<e;++s)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[s+a*e]),a>=r&&(a>=o&&(l-=n[s+(a-o)*e]),i[s+(a-r)*e]=l/Math.min(a+1,t-1+o-a,o))}function kL(e){Q.call(this,null,e)}NL.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},ye(NL,Q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||yr,o=rie().smooth(!1!==e.smooth),s=e.thresholds||function w8e(e,t,n){const i=oie(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(e.map(r=>qf(t(r).values)))}(i,r,e),a=null===e.as?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,te(s)?s:s(c.values));(function E8e(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(lt(r)&&(r=r(n,i)),lt(o)&&(o=o(n,i)),(1===r||null==r)&&!o)return;const s=(Ft(r)?r:r[0])||1,a=(Ft(r)?r:r[1])||1;e.forEach(sie(t,s,a,o&&o[0]||0,o&&o[1]||0))})(d,c,u,e),d.forEach(f=>{l.push(jD(u,Vt(null!=a?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),kL.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const D8e=["x","y","weight","size","cellSize","bandwidth"];function uie(e,t){return D8e.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function IL(e){Q.call(this,null,e)}ye(kL,Q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=function C8e(e,t){var r,o,s,a,l,u,n=[],i=c=>c(a);if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(zn),s=uie(lie(),e),a=e.as||"grid";return l=r.map(c=>Vt(function u(c,d){for(let f=0;f<o.length;++f)c[o[f]]=d[f];return c}({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),IL.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},ye(IL,Q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var a,l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=rie().smooth(!1!==e.smooth),r=e.values,o=e.thresholds||oie(e.count||10,e.nice,!!r),s=e.size;return r||(r=t.materialize(t.SOURCE).source,l=sie(a=uie(lie(),e)(r,!0),a.scale||1,a.scale||1,0,0),s=[a.width,a.height],r=a.values),o=te(o)?o:o(r),r=i.size(s)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(Vt),n}});const RL="Feature",FL="FeatureCollection";function PL(e){Q.call(this,null,e)}function LL(e){Q.call(this,null,e)}function $L(e){Q.call(this,null,e)}function BL(e){Q.call(this,null,e)}function UL(e){Q.call(this,[],e),this.generator=function iie(){var e,t,n,i,r,o,s,a,f,h,p,g,l=10,u=l,c=90,d=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:y()}}function y(){return Qo(wS(i/c)*c,n,c).map(p).concat(Qo(wS(a/d)*d,s,d).map(g)).concat(Qo(wS(t/l)*l,e,l).filter(function(v){return At(v%c)>je}).map(f)).concat(Qo(wS(o/u)*u,r,u).filter(function(v){return At(v%d)>je}).map(h))}return _.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},_.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},_.extent=function(v){return arguments.length?_.extentMajor(v).extentMinor(v):_.extentMinor()},_.extentMajor=function(v){return arguments.length?(a=+v[0][1],s=+v[1][1],(i=+v[0][0])>(n=+v[1][0])&&(v=i,i=n,n=v),a>s&&(v=a,a=s,s=v),_.precision(m)):[[i,a],[n,s]]},_.extentMinor=function(v){return arguments.length?(o=+v[0][1],r=+v[1][1],(t=+v[0][0])>(e=+v[1][0])&&(v=t,t=e,e=v),o>r&&(v=o,o=r,r=v),_.precision(m)):[[t,o],[e,r]]},_.step=function(v){return arguments.length?_.stepMajor(v).stepMinor(v):_.stepMinor()},_.stepMajor=function(v){return arguments.length?(c=+v[0],d=+v[1],_):[c,d]},_.stepMinor=function(v){return arguments.length?(l=+v[0],u=+v[1],_):[l,u]},_.precision=function(v){return arguments.length?(m=+v,f=tie(o,r,90),h=nie(t,e,m),p=tie(a,s,90),g=nie(i,n,m),_):m},_.extentMajor([[-180,-90+je],[180,90-je]]).extentMinor([[-180,-80-je],[180,80+je]])}()}function VL(e){Q.call(this,null,e)}function cie(e){if(!lt(e))return!1;const t=_a(_r(e));return t.$x||t.$y||t.$value||t.$max}function die(e){Q.call(this,null,e),this.modified(!0)}function fie(e,t,n){lt(e[t])&&e[t](n)}function hie(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,d,f,h,p,g,m,_,y,o=e._root,s={data:i},a=e._x0,l=e._y0,u=e._x1,c=e._y1;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(d=(a+u)/2))?a=d:u=d,(m=n>=(f=(l+c)/2))?l=f:c=f,r=o,!(o=o[_=m<<1|g]))return r[_]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,r?r[_]=s:e._root=s,e;do{r=r?r[_]=new Array(4):e._root=new Array(4),(g=t>=(d=(a+u)/2))?a=d:u=d,(m=n>=(f=(l+c)/2))?l=f:c=f}while((_=m<<1|g)==(y=(p>=f)<<1|h>=d));return r[y]=o,r[_]=s,e}function Gr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Y8e(e){return e[0]}function X8e(e){return e[1]}function jL(e,t,n){var i=new HL(t??Y8e,n??X8e,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function HL(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function pie(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}PL.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},ye(PL,Q,{transform(e,t){var u,n=this._features,i=this._points,r=e.fields,o=r&&r[0],s=r&&r[1],a=e.geojson||!r&&yr,l=t.ADD;u=e.modified()||t.changed(t.REM)||t.modified(_r(a))||o&&t.modified(_r(o))||s&&t.modified(_r(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var d=o(c),f=s(c);null!=d&&null!=f&&(d=+d)===d&&(f=+f)===f&&i.push([d,f])}),n=n.concat({type:RL,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:FL,features:n}}}),LL.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},ye(LL,Q,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||yr,o=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=eie(e.projection),n.materialize().reflow()):s=r===yr||t.modified(r.fields)?n.ADD_MOD:n.ADD;const a=function A8e(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(i,e.pointRadius);return n.visit(s,l=>l[o]=i(r(l))),i.pointRadius(a),n.modifies(o)}}),$L.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},ye($L,Q,{transform(e,t){var l,n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1];function u(c){const d=n([i(c),r(c)]);d?(c[s]=d[0],c[a]=d[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}}),BL.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},ye(BL,Q,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=function T8e(e,t,n){const i=null==n?r=>e(t(r)):r=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(o),s};return i.context=r=>(e.context(r),i),i}(eie(e.projection),e.field||ks("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[r]=i),n.modifies(r)}}),UL.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},ye(UL,Q,{transform(e,t){var r,n=this.value,i=this.generator;if(!n.length||e.modified())for(const o in e)lt(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(_X(n[0],r)):t.add.push(Vt(r)),n[0]=r,t}}),VL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},ye(VL,Q,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i="shared"===e.resolve,r=e.field||yr,o=function M8e(e,t){let n;return lt(e)?(n=i=>e(i,t),n.dep=cie(e)):e?n=br(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}(e.opacity,e),s=function x8e(e,t){let n;return lt(e)?(n=i=>Qc(e(i,t)),n.dep=cie(e)):n=br(Qc(e||"#888")),n}(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?qf(n.map(u=>qf(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=ut({},u,l);i||(d.$max=qf(c.values||[])),u[a]=function N8e(e,t,n,i){const r=e.width,s=e.x1||0,a=e.y1||0,l=e.x2||r,u=e.y2||e.height,c=e.values,d=c?m=>c[m]:Pc,f=Kc(l-s,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,_=0;m<u;++m){t.$y=m-a;for(let y=s,v=m*r;y<l;++y,_+=4){t.$x=y-s,t.$value=d(y+v);const b=n(t);g[_+0]=b.r,g[_+1]=b.g,g[_+2]=b.b,g[_+3]=~~(255*i(t))}}return h.putImageData(p,0,0),f}(c,d,s.dep?s:br(s(d)),o.dep?o:br(o(d)))}),t.reflow(!0).modifies(a)}}),ye(die,Q,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function k8e(e){const t=ML((e||"mercator").toLowerCase());return t||ee("Unrecognized projection type: "+e),t()}(e.type),xL.forEach(i=>{null!=e[i]&&fie(n,i,e[i])})):xL.forEach(i=>{e.modified(i)&&fie(n,i,e[i])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function O8e(e,t){const n=function I8e(e){return 1===(e=De(e)).length?e[0]:{type:FL,features:e.reduce((t,n)=>t.concat(function R8e(e){return e.type===FL?e.features:De(e).filter(t=>null!=t).map(t=>t.type===RL?t:{type:RL,geometry:t})}(n)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var Wr=jL.prototype=HL.prototype;function qr(e){return function(){return e}}function gd(e){return 1e-6*(e()-.5)}function J8e(e){return e.x+e.vx}function Z8e(e){return e.y+e.vy}Wr.copy=function(){var n,i,e=new HL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root;if(!t)return e;if(!t.length)return e._root=pie(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=pie(i));return e},Wr.add=function P8e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return hie(this.cover(t,n),t,n,e)},Wr.addAll=function L8e(e){var t,n,r,o,i=e.length,s=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=r,a[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)hie(this,s[n],a[n],e[n]);return this},Wr.cover=function $8e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var l,u,s=r-n||1,a=this._root;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Wr.data=function B8e(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},Wr.extent=function U8e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Wr.find=function V8e(e,t,n){var i,s,a,l,u,p,g,r=this._x0,o=this._y0,c=this._x1,d=this._y1,f=[],h=this._root;for(h&&f.push(new Gr(h,r,o,c,d)),null==n?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>d||(l=p.x1)<r||(u=p.y1)<o))if(h.length){var m=(s+l)/2,_=(a+u)/2;f.push(new Gr(h[3],m,_,l,u),new Gr(h[2],s,_,m,u),new Gr(h[1],m,a,l,_),new Gr(h[0],s,a,m,_)),(g=(t>=_)<<1|e>=m)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=p)}else{var y=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),b=y*y+v*v;if(b<n){var w=Math.sqrt(n=b);r=e-w,o=t-w,c=e+w,d=t+w,i=h.data}}return i},Wr.remove=function j8e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,i,r,o,c,d,f,h,p,g,m,_,n=this._root,s=this._x0,a=this._y0,l=this._x1,u=this._y1;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(s+l)/2))?s=f:l=f,(g=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(i=t,_=m)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=o,this)},Wr.removeAll=function H8e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Wr.root=function z8e(){return this._root},Wr.size=function G8e(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},Wr.visit=function W8e(e){var n,r,o,s,a,l,t=[],i=this._root;for(i&&t.push(new Gr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(o+a)/2,c=(s+l)/2;(r=i[3])&&t.push(new Gr(r,u,c,a,l)),(r=i[2])&&t.push(new Gr(r,o,c,u,l)),(r=i[1])&&t.push(new Gr(r,u,s,a,c)),(r=i[0])&&t.push(new Gr(r,o,s,u,c))}return this},Wr.visitAfter=function q8e(e){var i,t=[],n=[];for(this._root&&t.push(new Gr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(s+l)/2,d=(a+u)/2;(o=r[0])&&t.push(new Gr(o,s,a,c,d)),(o=r[1])&&t.push(new Gr(o,c,a,l,d)),(o=r[2])&&t.push(new Gr(o,s,d,c,u)),(o=r[3])&&t.push(new Gr(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this},Wr.x=function K8e(e){return arguments.length?(this._x=e,this):this._x},Wr.y=function Q8e(e){return arguments.length?(this._y=e,this):this._y};var t6e={value:()=>{}};function gie(){for(var i,e=0,t=arguments.length,n={};e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new WS(n)}function WS(e){this._=e}function i6e(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function mie(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=t6e,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}WS.prototype=gie.prototype={constructor:WS,on:function(e,t){var r,n=this._,i=function n6e(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=mie(n[r],e.name,t);else if(null==t)for(r in n)n[r]=mie(n[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=i6e(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new WS(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,o,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const r6e=gie;var qS,Z1,Im=0,Q1=0,J1=0,_ie=1e3,YS=0,dh=0,KS=0,ev="object"==typeof performance&&performance.now?performance:Date,yie="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zL(){return dh||(yie(o6e),dh=ev.now()+KS)}function o6e(){dh=0}function XS(){this._call=this._time=this._next=null}function vie(e,t,n){var i=new XS;return i.restart(e,t,n),i}function bie(){dh=(YS=ev.now())+KS,Im=Q1=0;try{!function s6e(){zL(),++Im;for(var t,e=qS;e;)(t=dh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Im}()}finally{Im=0,function l6e(){for(var e,n,t=qS,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qS=n);Z1=e,GL(i)}(),dh=0}}function a6e(){var e=ev.now(),t=e-YS;t>_ie&&(KS-=t,YS=e)}function GL(e){Im||(Q1&&(Q1=clearTimeout(Q1)),e-dh>24?(e<1/0&&(Q1=setTimeout(bie,e-ev.now()-KS)),J1&&(J1=clearInterval(J1))):(J1||(YS=ev.now(),J1=setInterval(a6e,_ie)),Im=1,yie(bie)))}XS.prototype=vie.prototype={constructor:XS,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?zL():+n)+(null==t?0:+t),!this._next&&Z1!==this&&(Z1?Z1._next=this:qS=this,Z1=this),this._call=e,this._time=n,GL()},stop:function(){this._call&&(this._call=null,this._time=1/0,GL())}};const u6e=1664525,c6e=1013904223,wie=4294967296;function f6e(e){return e.x}function h6e(e){return e.y}var p6e=10,g6e=Math.PI*(3-Math.sqrt(5));function y6e(e){return e.index}function Eie(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const Die={center:function F8e(e,t){var n,i=1;function r(){var o,a,s=n.length,l=0,u=0;for(o=0;o<s;++o)l+=(a=n[o]).x,u+=a.y;for(l=(l/s-e)*i,u=(u/s-t)*i,o=0;o<s;++o)(a=n[o]).x-=l,a.y-=u}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r},collide:function e6e(e){var t,n,i,r=1,o=1;function s(){for(var u,d,f,h,p,g,m,c=t.length,_=0;_<o;++_)for(d=jL(t,J8e,Z8e).visitAfter(a),u=0;u<c;++u)m=(g=n[(f=t[u]).index])*g,h=f.x+f.vx,p=f.y+f.vy,d.visit(y);function y(v,b,w,D,E){var S=v.data,M=v.r,k=g+M;if(!S)return b>h+k||D<h-k||w>p+k||E<p-k;if(S.index>f.index){var R=h-S.x-S.vx,F=p-S.y-S.vy,P=R*R+F*F;P<k*k&&(0===R&&(P+=(R=gd(i))*R),0===F&&(P+=(F=gd(i))*F),P=(k-(P=Math.sqrt(P)))/P*r,f.vx+=(R*=P)*(k=(M*=M)/(m+M)),f.vy+=(F*=P)*k,S.vx-=R*(k=1-k),S.vy-=F*k)}}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,d,c=t.length;for(n=new Array(c),u=0;u<c;++u)n[(d=t[u]).index]=+e(d,u,t)}}return"function"!=typeof e&&(e=qr(null==e?1:+e)),s.initialize=function(u,c){t=u,i=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(r=+u,s):r},s.radius=function(u){return arguments.length?(e="function"==typeof u?u:qr(+u),l(),s):e},s},nbody:function _6e(){var e,t,n,i,o,r=qr(-30),s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=jL(e,f6e,h6e).visitAfter(d);for(i=h,p=0;p<g;++p)t=e[p],m.visit(f)}function c(){if(e){var h,g,p=e.length;for(o=new Array(p),h=0;h<p;++h)o[(g=e[h]).index]=+r(g,h,e)}}function d(h){var g,m,y,v,b,p=0,_=0;if(h.length){for(y=v=b=0;b<4;++b)(g=h[b])&&(m=Math.abs(g.value))&&(p+=g.value,_+=m,y+=m*g.x,v+=m*g.y);h.x=y/_,h.y=v/_}else{(g=h).x=g.data.x,g.y=g.data.y;do{p+=o[g.data.index]}while(g=g.next)}h.value=p}function f(h,p,g,m){if(!h.value)return!0;var _=h.x-t.x,y=h.y-t.y,v=m-p,b=_*_+y*y;if(v*v/l<b)return b<a&&(0===_&&(b+=(_=gd(n))*_),0===y&&(b+=(y=gd(n))*y),b<s&&(b=Math.sqrt(s*b)),t.vx+=_*h.value*i/b,t.vy+=y*h.value*i/b),!0;if(!(h.length||b>=a)){(h.data!==t||h.next)&&(0===_&&(b+=(_=gd(n))*_),0===y&&(b+=(y=gd(n))*y),b<s&&(b=Math.sqrt(s*b)));do{h.data!==t&&(t.vx+=_*(v=o[h.data.index]*i/b),t.vy+=y*v)}while(h=h.next)}}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(r="function"==typeof h?h:qr(+h),c(),u):r},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u},link:function v6e(e){var i,o,s,a,l,u,t=y6e,n=function d(m){return 1/Math.min(a[m.source.index],a[m.target.index])},r=qr(30),c=1;function f(m){for(var _=0,y=e.length;_<c;++_)for(var b,w,D,E,S,M,k,v=0;v<y;++v)E=(D=(b=e[v]).target).x+D.vx-(w=b.source).x-w.vx||gd(u),S=D.y+D.vy-w.y-w.vy||gd(u),S*=M=((M=Math.sqrt(E*E+S*S))-o[v])/M*m*i[v],D.vx-=(E*=M)*(k=l[v]),D.vy-=S*k,w.vx+=E*(k=1-k),w.vy+=S*k}function h(){if(s){var m,b,_=s.length,y=e.length,v=new Map(s.map((w,D)=>[t(w,D,s),w]));for(m=0,a=new Array(_);m<y;++m)(b=e[m]).index=m,"object"!=typeof b.source&&(b.source=Eie(v,b.source)),"object"!=typeof b.target&&(b.target=Eie(v,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)l[m]=a[(b=e[m]).source.index]/(a[b.source.index]+a[b.target.index]);i=new Array(y),p(),o=new Array(y),g()}}function p(){if(s)for(var m=0,_=e.length;m<_;++m)i[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,_=e.length;m<_;++m)o[m]=+r(e[m],m,e)}return null==e&&(e=[]),f.initialize=function(m,_){s=m,u=_,h()},f.links=function(m){return arguments.length?(e=m,h(),f):e},f.id=function(m){return arguments.length?(t=m,f):t},f.iterations=function(m){return arguments.length?(c=+m,f):c},f.strength=function(m){return arguments.length?(n="function"==typeof m?m:qr(+m),p(),f):n},f.distance=function(m){return arguments.length?(r="function"==typeof m?m:qr(+m),g(),f):r},f},x:function b6e(e){var n,i,r,t=qr(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vx+=(r[l]-c.x)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=qr(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:qr(+a),s(),o):t},o.x=function(a){return arguments.length?(e="function"==typeof a?a:qr(+a),s(),o):e},o},y:function w6e(e){var n,i,r,t=qr(.1);function o(a){for(var c,l=0,u=n.length;l<u;++l)(c=n[l]).vy+=(r[l]-c.y)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=qr(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:qr(+a),s(),o):t},o.y=function(a){return arguments.length?(e="function"==typeof a?a:qr(+a),s(),o):e},o}},tv="forces",WL=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],E6e=["static","iterations"],Cie=["x","y","vx","vy"];function qL(e){Q.call(this,null,e)}function Sie(e,t,n,i){var o,s,a,l,r=De(t.forces);for(o=0,s=WL.length;o<s;++o)(a=WL[o])!==tv&&t.modified(a)&&e[a](t[a]);for(o=0,s=r.length;o<s;++o)l=tv+o,(a=n||t.modified(tv,o)?A6e(r[o]):i&&S6e(r[o],i)?e.force(l):null)&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(tv+o,null);return e.numForces=r.length,e}function S6e(e,t){var n,i;for(n in e)if(lt(i=e[n])&&t.modified(_r(i)))return 1;return 0}function A6e(e){var t,n;for(n in Ae(Die,e.force)||ee("Unrecognized force: "+e.force),t=Die[e.force](),e)lt(t[n])&&T6e(t[n],e[n],e);return t}function T6e(e,t,n){e(lt(t)?i=>t(i,n):t)}function x6e(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function YL(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=G6e)):void 0===t&&(t=z6e);for(var i,o,s,a,l,n=new Rm(e),r=[n];i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)r.push(o=s[a]=new Rm(s[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Aie)}function z6e(e){return e.children}function G6e(e){return Array.isArray(e)?e[1]:null}function W6e(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Aie(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Rm(e){this.data=e,this.depth=this.height=0,this.parent=null}function QS(e){return null==e?null:Tie(e)}function Tie(e){if("function"!=typeof e)throw new Error;return e}function fh(){return 0}function Fm(e){return function(){return e}}qL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Cie}]},ye(qL,Q,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(WL),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&Sie(n,e,0,t)):(this.value=n=function C6e(e,t){const n=function m6e(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=vie(d),u=r6e("tick","end"),c=function d6e(){let e=1;return()=>(e=(u6e*e+c6e)%wie)/wie}();function d(){f(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function f(g){var m,y,_=e.length;void 0===g&&(g=1);for(var v=0;v<g;++v)for(n+=(o-n)*r,a.forEach(function(b){b(n)}),m=0;m<_;++m)null==(y=e[m]).fx?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),null==y.fy?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function h(){for(var _,g=0,m=e.length;g<m;++g){if((_=e[g]).index=g,null!=_.fx&&(_.x=_.fx),null!=_.fy&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var y=p6e*Math.sqrt(.5+g),v=g*g6e;_.x=y*Math.cos(v),_.y=y*Math.sin(v)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return null==e&&(e=[]),h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(i=+g,t):i},alphaDecay:function(g){return arguments.length?(r=+g,t):+r},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(null==m?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,_){var b,w,D,E,S,y=0,v=e.length;for(null==_?_=1/0:_*=_,y=0;y<v;++y)(D=(b=g-(E=e[y]).x)*b+(w=m-E.y)*w)<_&&(S=E,_=D);return S},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),Sie(n,t,!0).on("end",()=>o=!0)}(t.source,e),n.on("tick",function D6e(e,t){return()=>e.touch(t).run()}(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(E6e)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let c,a=this._argops,l=0,u=a.length;l<u;++l)if(c=a[l],c.name===tv&&"link"===c.op._argval.force)for(var s,i=c.op._argops,r=0,o=i.length;r<o;++r)if("links"===i[r].name&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(Cie)}}),Rm.prototype=YL.prototype={constructor:Rm,count:function M6e(){return this.eachAfter(x6e)},each:function N6e(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this},eachAfter:function k6e(e,t){for(var o,s,a,n=this,i=[n],r=[],l=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this},eachBefore:function O6e(e,t){for(var r,o,n=this,i=[n],s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this},find:function I6e(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i},sum:function R6e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function F6e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function P6e(e){for(var t=this,n=function L6e(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)i.push(t=t.parent);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function $6e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function B6e(){return Array.from(this)},leaves:function U6e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function V6e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function H6e(){return YL(this).eachBefore(W6e)},[Symbol.iterator]:function*j6e(){var t,i,r,o,e=this,n=[e];do{for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r])}while(n.length)}};const q6e=1664525,Y6e=1013904223,xie=4294967296;function J6e(e,t){var n,i;if(KL(t,e))return[t];for(n=0;n<e.length;++n)if(JS(t,e[n])&&KL(nv(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(JS(nv(e[n],e[i]),t)&&JS(nv(e[n],t),e[i])&&JS(nv(e[i],t),e[n])&&KL(Oie(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function JS(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function Nie(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function KL(e,t){for(var n=0;n<t.length;++n)if(!Nie(e,t[n]))return!1;return!0}function Z6e(e){switch(e.length){case 1:return function e9e(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return nv(e[0],e[1]);case 3:return Oie(e[0],e[1],e[2])}}function nv(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-i,c=a-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+s+u/d*c)/2,r:(d+r+a)/2}}function Oie(e,t,n){var i=e.x,r=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=i-s,h=i-u,p=r-a,g=r-c,m=l-o,_=d-o,y=i*i+r*r-o*o,v=y-s*s-a*a+l*l,b=y-u*u-c*c+d*d,w=h*p-f*g,D=(p*b-g*v)/(2*w)-i,E=(g*m-p*_)/w,S=(h*v-f*b)/(2*w)-r,M=(f*_-h*m)/w,k=E*E+M*M-1,R=2*(o+D*E+S*M),F=D*D+S*S-o*o,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*F))/(2*k):F/R);return{x:i+D+E*P,y:r+S+M*P,r:P}}function kie(e,t,n){var r,o,a,l,i=e.x-t.x,s=e.y-t.y,u=i*i+s*s;u?(o=t.r+n.r,l=e.r+n.r,(o*=o)>(l*=l)?(r=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-a*s,n.y=e.y-r*s+a*i):(r=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-a*s,n.y=t.y+r*s+a*i)):(n.x=t.x+n.r,n.y=t.y)}function Iie(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Rie(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function ZS(e){this._=e,this.next=null,this.previous=null}function Fie(e,t){if(!(o=(e=function X6e(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var n,i,r,o,s,a,l,u,c,d,f;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(n.x=-(i=e[1]).r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;kie(i,n,r=e[2]),n=new ZS(n),i=new ZS(i),r=new ZS(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){kie(n._,i._,r=e[l]),r=new ZS(r),u=i.next,c=n.previous,d=i._.r,f=n._.r;do{if(d<=f){if(Iie(u._,r._)){n.next=i=u,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(Iie(c._,r._)){(n=c).next=i,i.previous=n,--l;continue e}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=Rie(n);(r=r.next)!==i;)(a=Rie(r))<s&&(n=r,s=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=function Mie(e,t){for(var o,s,n=0,i=(e=function Q6e(e,t){let i,r,n=e.length;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}(Array.from(e),t)).length,r=[];n<i;)o=e[n],s&&Nie(s,o)?++n:(s=Z6e(r=J6e(r,o)),n=0);return s}(n,t),l=0;l<o;++l)(n=e[l]).x-=r.x,n.y-=r.y;return r.r}function t9e(e){return Math.sqrt(e.value)}function Pie(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function XL(e,t,n){return function(i){if(r=i.children){var r,o,l,s=r.length,a=e(i)*t||0;if(a)for(o=0;o<s;++o)r[o].r+=a;if(l=Fie(r,n),a)for(o=0;o<s;++o)r[o].r-=a;i.r=l+a}}}function Lie(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function $ie(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function iv(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(i-t)/e.value;++a<l;)(s=o[a]).y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*u}var r9e={depth:-1},Bie={},QL={};function o9e(e){return e.id}function s9e(e){return e.parentId}function Uie(){var n,e=o9e,t=s9e;function i(r){var l,u,c,d,f,h,p,g,o=Array.from(r),s=e,a=t,m=new Map;if(null!=n){const _=o.map((b,w)=>function a9e(e){let t=(e=`${e}`).length;return JL(e,t-1)&&!JL(e,t-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(n(b,w,r))),y=_.map(Vie),v=new Set(_).add("");for(const b of y)v.has(b)||(v.add(b),_.push(b),y.push(Vie(b)),o.push(QL));s=(b,w)=>_[w],a=(b,w)=>y[w]}for(c=0,l=o.length;c<l;++c)h=o[c]=new Rm(u=o[c]),null!=(p=s(u,c,r))&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?Bie:h)),null!=(p=a(u,c,r))&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(p=(h=o[c]).parent){if(!(f=m.get(p)))throw new Error("missing: "+p);if(f===Bie)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(null!=n){for(;d.data===QL&&1===d.children.length;)d=d.children[0],--l;for(let _=o.length-1;_>=0&&(h=o[_]).data===QL;--_)h.data=null}if(d.parent=r9e,d.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(Aie),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=QS(r),i):e},i.parentId=function(r){return arguments.length?(t=QS(r),i):t},i.path=function(r){return arguments.length?(n=QS(r),i):n},i}function Vie(e){let t=e.length;if(t<2)return"";for(;--t>1&&!JL(e,t););return e.slice(0,t)}function JL(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(!(1&n))return!0}return!1}function l9e(e,t){return e.parent===t.parent?1:2}function ZL(e){var t=e.children;return t?t[0]:e.t}function e3(e){var t=e.children;return t?t[t.length-1]:e.t}function u9e(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function d9e(e,t,n){return e.a.parent===t.parent?e.a:n}function eA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function p9e(e,t){return e.parent===t.parent?1:2}function m9e(e,t){return e+t.x}function y9e(e,t){return Math.max(e,t.y)}function tA(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,u=e.value&&(r-n)/e.value;++a<l;)(s=o[a]).x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*u}eA.prototype=Object.create(Rm.prototype);var jie=(1+Math.sqrt(5))/2;function Hie(e,t,n,i,r,o){for(var l,u,h,p,m,_,y,v,b,w,D,s=[],a=t.children,c=0,d=0,f=a.length,g=t.value;c<f;){h=r-n,p=o-i;do{m=a[d++].value}while(!m&&d<f);for(_=y=m,D=m*m*(w=Math.max(p/h,h/p)/(g*e)),b=Math.max(y/D,D/_);d<f;++d){if(m+=u=a[d].value,u<_&&(_=u),u>y&&(y=u),D=m*m*w,(v=Math.max(y/D,D/_))>b){m-=u;break}b=v}s.push(l={value:m,dice:h<p,children:a.slice(c,d)}),l.dice?iv(l,n,i,r,g?i+=p*m/g:o):tA(l,n,i,g?n+=h*m/g:r,o),g-=m,c=d}return s}const zie=function e(t){function n(i,r,o,s,a){Hie(t,i,r,o,s,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(jie),C9e=function e(t){function n(i,r,o,s,a){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h,f=-1,p=l.length,g=i.value;++f<p;){for(c=(u=l[f]).children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?iv(u,r,o,s,g?o+=(a-o)*u.value/g:a):tA(u,r,o,g?r+=(s-r)*u.value/g:s,a),g-=u.value}else i._squarify=l=Hie(t,i,r,o,s,a),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(jie);function t3(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function n3(e){Q.call(this,null,e)}n3.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const A9e=e=>e.values;function T9e(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const s=r.length,a=e[o++],l={},u={};let d,f,h,c=-1;for(;++c<s;)d=a(f=r[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const s=[];for(const a in r)s.push({key:a,values:i(r[a],o)});return s}return t}function Bu(e){Q.call(this,null,e)}ye(n3,Q,{transform(e,t){t.source||ee("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(s=>{s.children&&VD(s.data)&&r.rem.push(s.data)}),this.value=o=YL({values:De(e.keys).reduce((s,a)=>(s.key(a),s),T9e()).entries(r.source)},A9e),n&&o.each(s=>{s.children&&(s=Vt(s.data),r.add.push(s),r.source.push(s))}),t3(o,Be,Be)),r.source.root=o,r}});const x9e=(e,t)=>e.parent===t.parent?1:2;ye(Bu,Q,{transform(e,t){(!t.source||!t.source.root)&&ee(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Gf(e.sort,s=>s.data)),function M9e(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?x9e:Hg);try{this.value=n(r)}catch(s){ee(s)}return r.each(s=>function N9e(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}(s,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const i3=["x","y","r","depth","children"];function r3(e){Bu.call(this,e)}r3.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:i3.length,default:i3}]},ye(r3,Bu,{layout:function n9e(){var e=null,t=1,n=1,i=fh;function r(o){const s=function K6e(){let e=1;return()=>(e=(q6e*e+Y6e)%xie)/xie}();return o.x=t/2,o.y=n/2,e?o.eachBefore(Pie(e)).eachAfter(XL(i,.5,s)).eachBefore(Lie(1)):o.eachBefore(Pie(t9e)).eachAfter(XL(fh,1,s)).eachAfter(XL(i,o.r/Math.min(t,n),s)).eachBefore(Lie(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=QS(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i="function"==typeof o?o:Fm(+o),r):i},r},params:["radius","size","padding"],fields:i3});const o3=["x0","y0","x1","y1","depth","children"];function s3(e){Bu.call(this,e)}function a3(e){Q.call(this,null,e)}s3.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:o3.length,default:o3}]},ye(s3,Bu,{layout:function i9e(){var e=1,t=1,n=0,i=!1;function r(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(function o(s,a){return function(l){l.children&&iv(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}(t,a)),i&&s.eachBefore($ie),s}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r},params:["size","round","padding"],fields:o3}),a3.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},ye(a3,Q,{transform(e,t){t.source||ee("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?t3(Uie().id(e.key).parentId(e.parentKey)(r.source),e.key,Is):t3(Uie()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const Gie={tidy:function h9e(){var e=l9e,t=1,n=1,i=null;function r(u){var c=function f9e(e){for(var n,r,o,s,a,t=new eA(e,0),i=[t];n=i.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(r=n.children[s]=new eA(o[s],s)),r.parent=n;return(t.parent=new eA(null,0)).children=[t],t}(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(y){y.x<d.x&&(d=y),y.x>f.x&&(f=y),y.depth>h.depth&&(h=y)});var p=d===f?1:e(d,f)/2,g=p-d.x,m=t/(f.x+p+g),_=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+g)*m,y.y=y.depth*_})}return u}function o(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){!function c9e(e){for(var o,t=0,n=0,i=e.children,r=i.length;--r>=0;)(o=i[r]).z+=t,o.m+=t,t+=o.s+(n+=o.c)}(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=function a(u,c,d){if(c){for(var b,f=u,h=u,p=c,g=f.parent.children[0],m=f.m,_=h.m,y=p.m,v=g.m;p=e3(p),f=ZL(f),p&&f;)g=ZL(g),(h=e3(h)).a=u,(b=p.z+y-f.z-m+e(p._,f._))>0&&(u9e(d9e(p,u,d),u,b),m+=b,_+=b),y+=p.m,m+=f.m,v+=g.m,_+=h.m;p&&!e3(h)&&(h.t=p,h.m+=y-_),f&&!ZL(g)&&(g.t=f,g.m+=m-v,d=u)}return d}(u,f,u.parent.A||d[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r},cluster:function w9e(){var e=p9e,t=1,n=1,i=!1;function r(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=function g9e(e){return e.reduce(m9e,0)/e.length}(h),f.y=function _9e(e){return 1+e.reduce(y9e,0)}(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=function v9e(e){for(var t;t=e.children;)e=t[0];return e}(o),u=function b9e(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}},l3=["x","y","depth","children"];function u3(e){Bu.call(this,e)}function c3(e){Q.call(this,[],e)}u3.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:l3.length,default:l3}]},ye(u3,Bu,{layout(e){const t=e||"tidy";if(Ae(Gie,t))return Gie[t]();ee("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:l3}),c3.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},ye(c3,Q,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||ee("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>o[Be(s)]=1),i.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Be(a)]&&o[Be(l)]&&r.add.push(Vt({source:l,target:a}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Be(s)]=1),n.forEach(s=>{(o[Be(s.source)]||o[Be(s.target)])&&r.mod.push(s)})),r}});const Wie={binary:function E9e(e,t,n,i,r){var s,l,o=e.children,a=o.length,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;!function c(d,f,h,p,g,m,_){if(d>=f-1){var y=o[d];return y.x0=p,y.y0=g,y.x1=m,void(y.y1=_)}for(var v=u[d],b=h/2+v,w=d+1,D=f-1;w<D;){var E=w+D>>>1;u[E]<b?w=E+1:D=E}b-u[w-1]<u[w]-b&&d+1<w&&--w;var S=u[w]-v,M=h-S;if(m-p>_-g){var k=h?(p*M+m*S)/h:m;c(d,w,S,p,g,k,_),c(w,f,M,k,g,m,_)}else{var R=h?(g*M+_*S)/h:_;c(d,w,S,p,g,m,R),c(w,f,M,p,R,m,_)}}(0,a,e.value,t,n,i,r)},dice:iv,slice:tA,slicedice:function D9e(e,t,n,i,r){(1&e.depth?tA:iv)(e,t,n,i,r)},squarify:zie,resquarify:C9e},d3=["x0","y0","x1","y1","depth","children"];function f3(e){Bu.call(this,e)}f3.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:d3.length,default:d3}]},ye(f3,Bu,{layout(){const e=function S9e(){var e=zie,t=!1,n=1,i=1,r=[0],o=fh,s=fh,a=fh,l=fh,u=fh;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=i,f.eachBefore(d),r=[0],t&&f.eachBefore($ie),f}function d(f){var h=r[f.depth],p=f.x0+h,g=f.y0+h,m=f.x1-h,_=f.y1-h;m<p&&(p=m=(p+m)/2),_<g&&(g=_=(g+_)/2),f.x0=p,f.y0=g,f.x1=m,f.y1=_,f.children&&(h=r[f.depth+1]=o(f)/2,p+=u(f)-h,g+=s(f)-h,(m-=a(f)-h)<p&&(p=m=(p+m)/2),(_-=l(f)-h)<g&&(g=_=(g+_)/2),e(f,p,g,m,_))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],i=+f[1],c):[n,i]},c.tile=function(f){return arguments.length?(e=Tie(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(o="function"==typeof f?f:Fm(+f),c):o},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(s="function"==typeof f?f:Fm(+f),c):s},c.paddingRight=function(f){return arguments.length?(a="function"==typeof f?f:Fm(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l="function"==typeof f?f:Fm(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u="function"==typeof f?f:Fm(+f),c):u},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ae(Wie,t)?e.tile(Wie[t]):ee("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:d3});const h3=4278190080;function p3(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function nA(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;"group"===i?t.forEach(r=>{r.items.forEach(o=>nA(e,o.items,n))}):Zo[i].draw(e,{items:n?t.map(I9e):t})}function I9e(e){const t=jD(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Uu=5,Yr=31,rv=32,md=new Uint32Array(rv+1),xa=new Uint32Array(rv+1);xa[0]=0,md[0]=~xa[0];for(let e=1;e<=rv;++e)xa[e]=xa[e-1]<<1|1,md[e]=~xa[e];function iA(e,t,n,i,r,o){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>o}function _d(e,t,n,i,r,o,s,a){const l=r*o/(2*i),u=e(t-l),c=e(t+l),d=e(n-(o/=2)),f=e(n+o);return s.outOfBounds(u,d,c,f)||s.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}const $9e=[-1,-1,1,1],B9e=[-1,1,-1,1],V9e=["right","center","left"],j9e=["bottom","middle","top"];function qie(e,t,n,i,r,o,s,a,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const z9e={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},G9e={naive:function P9e(e,t,n,i){const r=e.width,o=e.height;return function(s){const a=s.datum.datum.items[i].items,l=a.length,u=s.datum.fontSize,c=Jo.width(s.datum,s.datum.text);let f,h,p,g,m,_,y,d=0;for(let v=0;v<l;++v)f=a[v].x,p=a[v].y,h=void 0===a[v].x2?f:a[v].x2,g=void 0===a[v].y2?p:a[v].y2,m=(f+h)/2,_=(p+g)/2,y=Math.abs(h-f+g-p),y>=d&&(d=y,s.x=m,s.y=_);return m=c/2,_=u/2,f=s.x-m,h=s.x+m,p=s.y-_,g=s.y+_,s.align="center",f<0&&h<=r?s.align="left":0<=f&&r<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}},"reduced-search":function L9e(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),g=e.invert(c);let y,m=d,_=o;if(!iA(p,g,f,h,r,o)&&!_d(e,p,g,h,f,m,s,a)&&!_d(e,p,g,h,f,h,s,null)){for(;_-m>=1;)y=(m+_)/2,_d(e,p,g,h,f,y,s,a)?_=y:m=y;if(m>d)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,f=u.datum.fontSize,h=Jo.width(u.datum,u.datum.text);let y,v,b,w,D,E,S,M,k,R,F,P,A,C,T,O,x,p=n?f:0,g=!1,m=!1,_=0;for(let N=0;N<d;++N){for(y=c[N].x,b=c[N].y,v=void 0===c[N].x2?y:c[N].x2,w=void 0===c[N].y2?b:c[N].y2,y>v&&(x=y,y=v,v=x),b>w&&(x=b,b=w,w=x),k=e(y),F=e(v),R=~~((k+F)/2),P=e(b),C=e(w),A=~~((P+C)/2),S=R;S>=k;--S)for(M=A;M>=P;--M)O=l(S,M,p,h,f),O&&([u.x,u.y,p,g]=O);for(S=R;S<=F;++S)for(M=A;M<=C;++M)O=l(S,M,p,h,f),O&&([u.x,u.y,p,g]=O);!g&&!n&&(T=Math.abs(v-y+w-b),D=(y+v)/2,E=(b+w)/2,T>=_&&!iA(D,E,h,f,r,o)&&!_d(e,D,E,f,h,f,s,null)&&(_=T,u.x=D,u.y=E,m=!0))}return!(!g&&!m||(D=h/2,E=f/2,s.setRange(e(u.x-D),e(u.y-E),e(u.x+D),e(u.y+E)),u.align="center",u.baseline="middle",0))}},floodfill:function U9e(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,f=u.datum.fontSize,h=Jo.width(u.datum,u.datum.text),p=[];let v,b,w,D,E,S,M,k,R,F,P,A,g=n?f:0,m=!1,_=!1,y=0;for(let C=0;C<d;++C){for(v=c[C].x,w=c[C].y,b=void 0===c[C].x2?v:c[C].x2,D=void 0===c[C].y2?w:c[C].y2,p.push([e((v+b)/2),e((w+D)/2)]);p.length;)if([M,k]=p.pop(),!(s.get(M,k)||a.get(M,k)||l.get(M,k))){l.set(M,k);for(let T=0;T<4;++T)E=M+$9e[T],S=k+B9e[T],l.outOfBounds(E,S,E,S)||p.push([E,S]);if(E=e.invert(M),S=e.invert(k),R=g,F=o,!iA(E,S,h,f,r,o)&&!_d(e,E,S,f,h,R,s,a)&&!_d(e,E,S,f,h,f,s,null)){for(;F-R>=1;)P=(R+F)/2,_d(e,E,S,f,h,P,s,a)?F=P:R=P;R>g&&(u.x=E,u.y=S,g=R,m=!0)}}!m&&!n&&(A=Math.abs(b-v+D-w),E=(v+b)/2,S=(w+D)/2,A>=y&&!iA(E,S,h,f,r,o)&&!_d(e,E,S,f,h,f,s,null)&&(y=A,u.x=E,u.y=S,_=!0))}return!(!m&&!_||(E=h/2,S=f/2,s.setRange(e(u.x-E),e(u.y-S),e(u.x+E),e(u.y+S)),u.align="center",u.baseline="middle",0))}}};function W9e(e,t,n,i,r,o,s,a,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),f=function q9e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}(i,d),h=function Y9e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=z9e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}(r,d),p=function K9e(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),g="group"===p&&e[0].datum.items[l].marktype,m="area"===g,_=function X9e(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?"line"===e||"area"===e?o=>r(o.datum):"line"===t?o=>{const s=o.datum.items[i].items;return r(s.length?s["start"===n?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}(p,g,a,l),y=null===u||u===1/0,v=m&&"naive"===c;let b=-1,w=-1;const D=e.map(k=>{const R=y?Jo.width(k,k.text):void 0;return b=Math.max(b,R),w=Math.max(w,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(k),textWidth:R}});u=null===u||u===1/0?Math.max(b,w)+Math.max(...i):u;const E=function F9e(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),s=a=>~~((a+n)/i);return s.invert=a=>a*i-n,s.bitmap=()=>function R9e(e,t){const n=new Uint32Array(~~((e*t+rv)/rv));function i(o,s){n[o]|=s}function r(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Uu]&1<<(a&Yr)},set:(o,s)=>{const a=s*e+o;i(a>>>Uu,1<<(a&Yr))},clear:(o,s)=>{const a=s*e+o;r(a>>>Uu,~(1<<(a&Yr)))},getRange:(o,s,a,l)=>{let c,d,f,h,u=l;for(;u>=s;--u)if(c=u*e+o,d=u*e+a,f=c>>>Uu,h=d>>>Uu,f===h){if(n[f]&md[c&Yr]&xa[1+(d&Yr)])return!0}else{if(n[f]&md[c&Yr]||n[h]&xa[1+(d&Yr)])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>Uu,f=c>>>Uu,d===f)i(d,md[u&Yr]&xa[1+(c&Yr)]);else for(i(d,md[u&Yr]),i(f,xa[1+(c&Yr)]),h=d+1;h<f;++h)i(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,d,f,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,d=u>>>Uu,f=c>>>Uu,d===f)r(d,xa[u&Yr]|md[1+(c&Yr)]);else for(r(d,xa[u&Yr]),r(f,md[1+(c&Yr)]),h=d+1;h<f;++h)r(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}(r,o),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}(t[0],t[1],u);let S;if(!v){n&&D.sort((F,P)=>n(F.datum,P.datum));let k=!1;for(let F=0;F<h.length&&!k;++F)k=5===h[F]||f[F]<0;const R=(p&&s||m)&&e.map(F=>F.datum);S=o.length||R?function k9e(e,t,n,i,r){const o=e.width,s=e.height,a=i||r,l=Kc(o,s).getContext("2d"),u=Kc(o,s).getContext("2d"),c=a&&Kc(o,s).getContext("2d");n.forEach(S=>nA(l,S,!1)),nA(u,t,!1),a&&nA(c,t,!0);const d=p3(l,o,s),f=p3(u,o,s),h=a&&p3(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,_,y,v,b,w,D,E;for(_=0;_<s;++_)for(m=0;m<o;++m)b=_*o+m,w=d[b]&h3,E=f[b]&h3,D=a&&h[b]&h3,(w||D||E)&&(y=e(m),v=e(_),!r&&(w||E)&&p.set(y,v),a&&(w||D)&&g.set(y,v));return[p,g]}(E,R||[],o,k,m):function O9e(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}(E,s&&D)}const M=m?G9e[c](E,S,s,l):function H9e(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>o)return!1;let h,p,g,m,_,y,v,b,w,D,E,S,M,k,R,f=u.textWidth??0;for(let F=0;F<l;++F){if(h=(3&n[F])-1,p=(n[F]>>>2&3)-1,g=0===h&&0===p||i[F]<0,m=h&&p?Math.SQRT1_2:1,_=i[F]<0?-1:1,y=c[1+h]+i[F]*h*m,E=c[4+p]+_*d*p/2+i[F]*p*m,b=E-d/2,w=E+d/2,S=e(y),k=e(b),R=e(w),!f){if(!qie(S,S,k,R,s,a,0,0,0,0,0,g))continue;f=Jo.width(u.datum,u.datum.text)}if(D=y+_*f*h/2,y=D-f/2,v=D+f/2,S=e(y),M=e(v),qie(S,M,k,R,s,a,0,0,0,0,0,g))return u.x=h?h*_<0?v:y:D,u.y=p?p*_<0?w:b:E,u.align=V9e[h*_+1],u.baseline=j9e[p*_+1],s.setRange(S,k,M,R),!0}return!1}}(E,S,h,f);return D.forEach(k=>k.opacity=+M(k)),D}const w3=["x","y","opacity","align","baseline"],Yie=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function E3(e){Q.call(this,null,e)}function Kie(e,t){var r,o,s,a,l,u,n=[],i=function(c){return c(a)};if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(u=r[l=t.map(i)])||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function D3(e){Q.call(this,null,e)}E3.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Yie},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:w3.length,default:w3}]},ye(E3,Q,{transform(e,t){const i=e.modified();if(!(i||t.changed(t.ADD_REM)||function n(o){const s=e[o];return lt(s)&&t.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&ee("Size parameter should be specified as a [width, height] array.");const r=e.as||w3;return W9e(t.materialize(t.SOURCE).source||[],e.size,e.sort,De(null==e.offset?1:e.offset),De(e.anchor||Yie),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[r[0]]=o.x,s[r[1]]=o.y,s[r[2]]=o.opacity,s[r[3]]=o.align,s[r[4]]=o.baseline}),t.reflow(i).modifies(r)}}),D3.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},ye(D3,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Kie(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(zn),s=o.length,a=e.as||[zn(e.x),zn(e.y)],l=[];r.forEach(u=>{YX(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<s;++f)d[o[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(Vt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const C3={constant:DR,linear:CR,log:jX,exp:HX,pow:zX,quad:SR,poly:GX};function S3(e){Q.call(this,null,e)}S3.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(C3)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},ye(S3,Q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Kie(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(zn),s=e.method||"linear",a=null==e.order?3:e.order,l=((e,t)=>"poly"===e?t:"quad"===e?2:1)(s,a),u=e.as||[zn(e.x),zn(e.y)],c=C3[s],d=[];let f=e.extent;Ae(C3,s)||ee("Invalid regression method: "+s),null!=f&&"log"===s&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach(h=>{if(h.length<=l)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const g=c(h,e.x,e.y,a);if(e.params)return void d.push(Vt({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));const m=f||ml(h,e.x),_=y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1],d.push(Vt(v))};"linear"===s||"constant"===s?m.forEach(y=>_([y,g.predict(y)])):ZD(g.predict,m,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const Yt=11102230246251565e-32,Si=134217729,J9e=(3+8*Yt)*Yt;function ov(e,t,n,i,r){let o,s,a,l,u=t[0],c=i[0],d=0,f=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++d]):(s=c+o,a=o-(s-c),c=i[++f]),o=s,0!==a&&(r[h++]=a);d<e&&f<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++f]),o=s,0!==a&&(r[h++]=a);for(;d<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++d],o=s,0!==a&&(r[h++]=a);for(;f<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++f],o=s,0!==a&&(r[h++]=a);return(0!==o||0===h)&&(r[h++]=o),h}function ae(e){return new Float64Array(e)}const e7e=(3+16*Yt)*Yt,t7e=(2+12*Yt)*Yt,n7e=(9+64*Yt)*Yt*Yt,Pm=ae(4),Xie=ae(8),Qie=ae(12),Jie=ae(16),Kr=ae(4);function rA(e,t,n,i,r,o){const s=(t-o)*(n-r),a=(e-r)*(i-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=e7e*u?l:-function i7e(e,t,n,i,r,o,s){let a,l,u,c,d,f,h,p,g,m,_,y,v,b,w,D,E,S;const M=e-r,k=n-r,R=t-o,F=i-o;b=M*F,f=Si*M,h=f-(f-M),p=M-h,f=Si*F,g=f-(f-F),m=F-g,w=p*m-(b-h*g-p*g-h*m),D=R*k,f=Si*R,h=f-(f-R),p=R-h,f=Si*k,g=f-(f-k),m=k-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,Pm[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,Pm[1]=v-(_+d)+(d-D),S=y+_,d=S-y,Pm[2]=y-(S-d)+(_-d),Pm[3]=S;let P=function Z9e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,Pm),A=t7e*s;if(P>=A||-P>=A||(d=e-M,a=e-(M+d)+(d-r),d=n-k,u=n-(k+d)+(d-r),d=t-R,l=t-(R+d)+(d-o),d=i-F,c=i-(F+d)+(d-o),0===a&&0===l&&0===u&&0===c)||(A=n7e*s+J9e*Math.abs(P),P+=M*c+F*a-(R*u+k*l),P>=A||-P>=A))return P;b=a*F,f=Si*a,h=f-(f-a),p=a-h,f=Si*F,g=f-(f-F),m=F-g,w=p*m-(b-h*g-p*g-h*m),D=l*k,f=Si*l,h=f-(f-l),p=l-h,f=Si*k,g=f-(f-k),m=k-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,Kr[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,Kr[1]=v-(_+d)+(d-D),S=y+_,d=S-y,Kr[2]=y-(S-d)+(_-d),Kr[3]=S;const C=ov(4,Pm,4,Kr,Xie);b=M*c,f=Si*M,h=f-(f-M),p=M-h,f=Si*c,g=f-(f-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),D=R*u,f=Si*R,h=f-(f-R),p=R-h,f=Si*u,g=f-(f-u),m=u-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,Kr[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,Kr[1]=v-(_+d)+(d-D),S=y+_,d=S-y,Kr[2]=y-(S-d)+(_-d),Kr[3]=S;const T=ov(C,Xie,4,Kr,Qie);b=a*c,f=Si*a,h=f-(f-a),p=a-h,f=Si*c,g=f-(f-c),m=c-g,w=p*m-(b-h*g-p*g-h*m),D=l*u,f=Si*l,h=f-(f-l),p=l-h,f=Si*u,g=f-(f-u),m=u-g,E=p*m-(D-h*g-p*g-h*m),_=w-E,d=w-_,Kr[0]=w-(_+d)+(d-E),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-D,d=v-_,Kr[1]=v-(_+d)+(d-D),S=y+_,d=S-y,Kr[2]=y-(S-d)+(_-d),Kr[3]=S;const O=ov(T,Qie,4,Kr,Jie);return Jie[O-1]}(e,t,n,i,r,o,u)}ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(8),ae(8),ae(8),ae(4),ae(8),ae(8),ae(8),ae(12),ae(192),ae(192),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(4),ae(4),ae(4),ae(8),ae(16),ae(16),ae(16),ae(32),ae(32),ae(48),ae(64),ae(1152),ae(1152),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(1152),ae(1152),ae(1152),ae(1152),ae(1152),ae(2304),ae(2304),ae(3456),ae(5760),ae(8),ae(8),ae(8),ae(16),ae(24),ae(48),ae(48),ae(96),ae(192),ae(384),ae(384),ae(384),ae(768),ae(96),ae(96),ae(96),ae(1152);const vre=Math.pow(2,-52),pA=new Uint32Array(512);class gA{static from(t,n=D7e,i=C7e){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new gA(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let M=0;M<s;M++){const k=t[2*M],R=t[2*M+1];k<a&&(a=k),R<l&&(l=R),k>u&&(u=k),R>c&&(c=R),this._ids[M]=M}const d=(a+u)/2,f=(l+c)/2;let h,p,g;for(let M=0,k=1/0;M<s;M++){const R=Q3(d,f,t[2*M],t[2*M+1]);R<k&&(h=M,k=R)}const m=t[2*h],_=t[2*h+1];for(let M=0,k=1/0;M<s;M++){if(M===h)continue;const R=Q3(m,_,t[2*M],t[2*M+1]);R<k&&R>0&&(p=M,k=R)}let y=t[2*p],v=t[2*p+1],b=1/0;for(let M=0;M<s;M++){if(M===h||M===p)continue;const k=w7e(m,_,y,v,t[2*M],t[2*M+1]);k<b&&(g=M,b=k)}let w=t[2*g],D=t[2*g+1];if(b===1/0){for(let R=0;R<s;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];zm(this._ids,this._dists,0,s-1);const M=new Uint32Array(s);let k=0;for(let R=0,F=-1/0;R<s;R++){const P=this._ids[R],A=this._dists[P];A>F&&(M[k++]=P,F=A)}return this.hull=M.subarray(0,k),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(rA(m,_,y,v,w,D)<0){const M=p,k=y,R=v;p=g,y=w,v=D,g=M,w=k,D=R}const E=function E7e(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l);return{x:e+(u*c-a*d)*f,y:t+(s*d-l*c)*f}}(m,_,y,v,w,D);this._cx=E.x,this._cy=E.y;for(let M=0;M<s;M++)this._dists[M]=Q3(t[2*M],t[2*M+1],E.x,E.y);zm(this._ids,this._dists,0,s-1),this._hullStart=h;let S=3;i[h]=n[g]=p,i[p]=n[h]=g,i[g]=n[p]=h,r[h]=0,r[p]=1,r[g]=2,o.fill(-1),o[this._hashKey(m,_)]=h,o[this._hashKey(y,v)]=p,o[this._hashKey(w,D)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let k,R,M=0;M<this._ids.length;M++){const F=this._ids[M],P=t[2*F],A=t[2*F+1];if(M>0&&Math.abs(P-k)<=vre&&Math.abs(A-R)<=vre||(k=P,R=A,F===h||F===p||F===g))continue;let C=0;for(let I=0,U=this._hashKey(P,A);I<this._hashSize&&(C=o[(U+I)%this._hashSize],-1===C||C===i[C]);I++);C=n[C];let O,T=C;for(;O=i[T],rA(P,A,t[2*T],t[2*T+1],t[2*O],t[2*O+1])>=0;)if(T=O,T===C){T=-1;break}if(-1===T)continue;let x=this._addTriangle(T,F,i[T],-1,-1,r[T]);r[F]=this._legalize(x+2),r[T]=x,S++;let N=i[T];for(;O=i[N],rA(P,A,t[2*N],t[2*N+1],t[2*O],t[2*O+1])<0;)x=this._addTriangle(N,F,O,r[F],-1,r[N]),r[F]=this._legalize(x+2),i[N]=N,S--,N=O;if(T===C)for(;O=n[T],rA(P,A,t[2*O],t[2*O+1],t[2*T],t[2*T+1])<0;)x=this._addTriangle(O,F,T,-1,r[T],r[O]),this._legalize(x+2),r[O]=x,i[T]=T,S--,T=O;this._hullStart=n[F]=T,i[T]=n[N]=F,i[F]=N,o[this._hashKey(P,A)]=F,o[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(S);for(let M=0,k=this._hullStart;M<S;M++)this.hull[M]=k,k=i[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function v7e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[t],l=t-t%3;if(s=l+(t+2)%3,-1===a){if(0===o)break;t=pA[--o];continue}const u=a-a%3,d=u+(a+2)%3,f=n[s],h=n[t],p=n[l+(t+1)%3],g=n[d];if(b7e(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[t]=g,n[a]=f;const _=i[d];if(-1===_){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,_),this._link(a,i[s]),this._link(s,d),o<pA.length&&(pA[o++]=u+(a+1)%3)}else{if(0===o)break;t=pA[--o]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Q3(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function b7e(e,t,n,i,r,o,s,a){const l=e-s,u=t-a,c=n-s,d=i-a,f=r-s,h=o-a,g=c*c+d*d,m=f*f+h*h;return l*(d*m-g*h)-u*(c*m-g*f)+(l*l+u*u)*(c*h-d*f)<0}function w7e(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,u=o-t,c=s*s+a*a,d=l*l+u*u,f=.5/(s*u-a*l),h=(u*c-a*d)*f,p=(s*d-l*c)*f;return h*h+p*p}function zm(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],s=t[o];let a=r-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=n+1,s=i;uv(e,n+i>>1,o),t[e[n]]>t[e[i]]&&uv(e,n,i),t[e[o]]>t[e[i]]&&uv(e,o,i),t[e[n]]>t[e[o]]&&uv(e,n,o);const a=e[o],l=t[a];for(;;){do{o++}while(t[e[o]]<l);do{s--}while(t[e[s]]>l);if(s<o)break;uv(e,o,s)}e[n+1]=e[s],e[s]=a,i-o+1>=s-n?(zm(e,t,o,i),zm(e,t,n,s-1)):(zm(e,t,n,s-1),zm(e,t,o,i))}}function uv(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function D7e(e){return e[0]}function C7e(e){return e[1]}class wh{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){const r=(t=+t)+(i=+i),o=n=+n;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class J3{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class S7e{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y,v,g=0,m=0,_=i.length;g<_;g+=3,m+=2){const b=2*i[g],w=2*i[g+1],D=2*i[g+2],E=t[b],S=t[b+1],R=t[D],F=t[D+1],P=t[w]-E,A=t[w+1]-S,C=R-E,T=F-S,O=2*(P*T-A*C);if(Math.abs(O)<1e-9){if(void 0===o){o=s=0;for(const N of n)o+=t[2*N],s+=t[2*N+1];o/=n.length,s/=n.length}const x=1e9*Math.sign((o-E)*T-(s-S)*C);y=(E+R)/2-x*T,v=(S+F)/2+x*C}else{const x=1/O,N=P*P+A*A,I=C*C+T*T;y=E+(T*N-A*I)*x,v=S+(P*I-C*N)*x}a[m]=y,a[m+1]=v}let u,d,h,l=n[n.length-1],c=4*l,f=t[2*l],p=t[2*l+1];r.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,d=f,h=p,c=4*l,f=t[2*l],p=t[2*l+1],r[u+2]=r[c]=h-p,r[u+3]=r[c+1]=f-d}render(t){const n=null==t?t=new wh:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const f=i[c];if(f<c)continue;const h=2*Math.floor(c/3),p=2*Math.floor(f/3);this._renderSegment(s[h],s[h+1],s[p],s[p+1],t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=2*Math.floor(r[u]/3),f=s[d],h=s[d+1],p=4*l,g=this._project(f,h,a[p+2],a[p+3]);g&&this._renderSegment(f,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new wh:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=null==n?n=new wh:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new J3;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let s;const a=this._regioncode(t,n),l=this._regioncode(i,r);0===a&&0===l?(o.moveTo(t,n),o.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,i){return(n=+n)==n&&(i=+i)==i&&this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r)e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[o]===r[a]&&n[o+1]===r[a+1]&&n[(o+2)%s]===r[(a+l-2)%l]&&n[(o+3)%s]===r[(a+l-1)%l]){yield i;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[t];if(-1===s)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[2*u],n[2*u+1]),l=l%3==2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==s&&-1!==l);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:i}=this,r=4*t;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let o,s,u,d,r=null,a=n[i-2],l=n[i-1],c=this._regioncode(a,l),f=0;for(let h=0;h<i;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),0===u&&0===c)d=f,f=0,r?r.push(a,l):r=[a,l];else{let p,g,m,_,y;if(0===u){if(null===(p=this._clipSegment(o,s,a,l,u,c)))continue;[g,m,_,y]=p}else{if(null===(p=this._clipSegment(a,l,o,s,c,u)))continue;[_,y,g,m]=p,d=f,f=this._edgecode(g,m),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(g,m):r=[g,m]}d=f,f=this._edgecode(_,y),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(_,y):r=[_,y]}if(r)d=f,f=this._edgecode(r[0],r[1]),d&&f&&this._edge(t,d,f,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,s){const a=o<s;for(a&&([t,n,i,r,o,s]=[i,r,t,n,s,o]);;){if(0===o&&0===s)return a?[i,r,t,n]:[t,n,i,r];if(o&s)return null;let l,u,c=o||s;8&c?(l=t+(i-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(l=t+(i-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?o=this._regioncode(t=l,n=u):s=this._regioncode(i=l,r=u)}}_clipInfinite(t,n,i,r,o,s){let l,a=Array.from(n);if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let d,u=0,c=a.length,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,o){for(;n!==i;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin}(r[o]!==s||r[o+1]!==a)&&this.contains(t,s,a)&&(r.splice(o,0,s,a),o+=2)}return o}_project(t,n,i,r){let s,a,l,o=1/0;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<o&&(l=this.ymin,a=t+(o=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<o&&(l=this.ymax,a=t+(o=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<o&&(a=this.xmax,l=n+(o=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<o&&(a=this.xmin,l=n+(o=s)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}}const A7e=2*Math.PI,Gm=Math.pow;function T7e(e){return e[0]}function x7e(e){return e[1]}function N7e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Z3{static from(t,n=T7e,i=x7e,r){return new Z3("length"in t?function O7e(e,t,n,i){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const a=e[s];o[2*s]=t.call(i,a,s,e),o[2*s+1]=n.call(i,a,s,e)}return o}(t,n,i,r):Float64Array.from(function*k7e(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}(t,n,i,r)))}constructor(t){this._delaunator=new gA(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function M7e(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=N7e(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new gA(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3==2?l-2:l+1];(-1===i[l]||-1===s[c])&&(s[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,2===r.length&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new S7e(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const l=n[t];if(-1===l)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3==2?u-2:u+1,s[u]!==t)return;if(u=o[u],-1===u){const d=i[(r[t]+1)%i.length];return void(d!==c&&(yield d))}}while(u!==l)}find(t,n,i=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,d=Gm(n-u[2*t],2)+Gm(i-u[2*t+1],2);const f=r[t];let h=f;do{let p=l[h];const g=Gm(n-u[2*p],2)+Gm(i-u[2*p+1],2);if(g<d&&(d=g,c=p),h=h%3==2?h-2:h+1,l[h]!==t)break;if(h=a[h],-1===h){if(h=o[(s[t]+1)%o.length],h!==p&&Gm(n-u[2*h],2)+Gm(i-u[2*h+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=null==t?t=new wh:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const u=2*o[s],c=2*o[l];t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0===n&&(!t||"function"!=typeof t.moveTo)&&(n=t,t=null),n=null==n?2:+n;const i=null==t?t=new wh:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,A7e)}return i&&i.value()}renderHull(t){const n=null==t?t=new wh:void 0,{hull:i,points:r}=this,o=2*i[0],s=i.length;t.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new J3;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=null==n?n=new wh:void 0,{points:r,triangles:o}=this,s=2*o[t*=3],a=2*o[t+1],l=2*o[t+2];return n.moveTo(r[s],r[s+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new J3;return this.renderTriangle(t,n),n.value()}}function e$(e){Q.call(this,null,e)}e$.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const I7e=[-1e5,-1e5,1e5,1e5];function R7e(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function F7e(e){return 2===e.length&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}ye(e$,Q,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:I7e;const o=this.value=Z3.from(i,e.x,e.y).voronoi(r);for(let s=0,a=i.length;s<a;++s){const l=o.cellPolygon(s);i[s][n]=l&&!F7e(l)?R7e(l):null}return t.reflow(e.modified()).modifies(n)}});var t$=Math.PI/180,cv=64,mA=2048;function L7e(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,(cv<<5)/o,mA/o);var c,d,f,h,p,s=0,a=0,l=0,u=n.length;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var g=Math.sin(t.rotate*t$),m=Math.cos(t.rotate*t$),_=c*m,y=c*g,v=f*m,b=f*g;c=Math.max(Math.abs(_+b),Math.abs(_-b))+31>>5<<5,f=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else c=c+31>>5<<5;if(f>l&&(l=f),s+c>=cv<<5&&(s=0,a+=l,l=0),a+f>=mA)break;r.translate((s+(c>>1))/o,(a+(f>>1))/o),t.rotate&&r.rotate(t.rotate*t$),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=f,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=r.getImageData(0,0,(cv<<5)/o,mA/o).data,D=[];--i>=0;)if((t=n[i]).hasText){for(d=(c=t.width)>>5,f=t.y1-t.y0,h=0;h<f*d;h++)D[h]=0;if(null==(s=t.xoff))return;a=t.yoff;var E=0,S=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var k=w[(a+p)*(cv<<5)+(s+h)<<2]?1<<31-h%32:0;D[d*p+(h>>5)]|=k,E|=k}E?S=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+S,t.sprite=D.slice(0,(t.y1-t.y0)*d)}}}function $7e(e,t,n){for(var c,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),s=127&o,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*(n>>=5)+(o>>5),d=0;d<l;d++){c=0;for(var f=0;f<=r;f++)if((c<<a|(f<r?(c=i[d*r+f])>>>s:0))&t[u+f])return!0;u+=n}return!1}function B7e(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function U7e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function wre(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Eh(e){return"function"==typeof e?e:function(){return e}}var H7e={archimedean:wre,rectangular:function V7e(e){var n=4*e[0]/e[1],i=0,r=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=n;break;case 1:r+=4;break;case 2:i-=n;break;default:r-=4}return[i,r]}}};const Ere=["x","y","font","fontSize","fontStyle","fontWeight","angle"],z7e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function n$(e){Q.call(this,function P7e(){var t,n,i,r,o,s,a,e=[256,256],l=wre,u=[],c=Math.random,d={};function h(p,g,m){for(var E,S,M,_=g.x,y=g.y,v=Math.hypot(e[0],e[1]),b=l(e),w=c()<.5?1:-1,D=-w;(E=b(D+=w))&&(S=~~E[0],M=~~E[1],!(Math.min(Math.abs(S),Math.abs(M))>=v));)if(g.x=_+S,g.y=y+M,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!$7e(g,p,e[0]))&&(!m||U7e(g,m))){for(var x,k=g.sprite,R=g.width>>5,F=e[0]>>5,P=g.x-(R<<4),A=127&P,C=32-A,T=g.y1-g.y0,O=(g.y+g.y0)*F+(P>>5),N=0;N<T;N++){x=0;for(var I=0;I<=R;I++)p[O+I]|=x<<C|(I<R?(x=k[N*R+I])>>>A:0);O+=F}return g.sprite=null,!0}return!1}return d.layout=function(){for(var p=function f(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(cv<<5)/g,p.height=mA/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}(Kc()),g=function j7e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),m=null,_=u.length,y=-1,v=[],b=u.map(D=>({text:t(D),font:n(D),style:r(D),weight:o(D),rotate:s(D),size:~~(i(D)+1e-14),padding:a(D),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:D})).sort((D,E)=>E.size-D.size);++y<_;){var w=b[y];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,L7e(p,w,b,y),w.hasText&&h(g,w,m)&&(v.push(w),m?B7e(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return v},d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Eh(p),d):n},d.fontStyle=function(p){return arguments.length?(r=Eh(p),d):r},d.fontWeight=function(p){return arguments.length?(o=Eh(p),d):o},d.rotate=function(p){return arguments.length?(s=Eh(p),d):s},d.text=function(p){return arguments.length?(t=Eh(p),d):t},d.spiral=function(p){return arguments.length?(l=H7e[p]||p,d):l},d.fontSize=function(p){return arguments.length?(i=Eh(p),d):i},d.padding=function(p){return arguments.length?(a=Eh(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}(),e)}n$.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Ere}]},ye(n$,Q,{transform(e,t){e.size&&(!e.size[0]||!e.size[1])&&ee("Wordcloud size dimensions must be non-zero.");const i=e.modified();if(!(i||t.changed(t.ADD_REM)||z7e.some(function n(p){const g=e[p];return lt(g)&&t.modified(g.fields)})))return;const r=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Ere;let l,a=e.fontSize||14;if(lt(a)?l=e.fontSizeRange:a=br(a),l){const p=a,g=Lt("sqrt")().domain(ml(r,p)).range(l);a=m=>g(p(m))}r.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ps).layout(),c=o.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let g,m,p=0;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+d,m[s[1]]=g.y+f,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(i).modifies(s)}});const W7e=e=>new Uint8Array(e),q7e=e=>new Uint16Array(e),dv=e=>new Uint32Array(e);function _A(e,t,n){const i=(t<257?W7e:t<65537?q7e:dv)(e);return n&&i.set(n),i}function Dre(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const s=this,a=s.bisect(s.range,r.value),l=r.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)o[l[f]]|=i;for(f=c;f<d;++f)o[l[f]]|=i;return s}}}function Cre(){let e=dv(0),t=[],n=0;return{insert:function i(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=dv(d);let p,g,m,h=Array(d);for(m=0;m<d;++m)h[m]=a(l[m]),f[m]=m;if(h=function X7e(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),function G7e(e,t){return Array.from(t,n=>e[n])}(e,t)}(h,f),c)p=t,g=e,t=Array(c+d),e=dv(c+d),function Q7e(e,t,n,i,r,o,s,a,l){let d,u=0,c=0;for(d=0;u<i&&c<s;++d)t[u]<r[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<s;++c,++d)a[d]=r[c],l[d]=o[c]+e}(u,p,g,c,h,f,d,t,e);else{if(u>0)for(m=0;m<d;++m)f[m]+=u;t=h,e=f}return n=c+d,{index:f,value:h}},remove:function r(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a},bisect:function s(a,l){let u;return l?u=l.length:(l=t,u=n),[UPe(l,a[0],0,u),fC(l,a[1],0,u)]},reindex:function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]},index:()=>e,size:()=>n}}function i$(e){Q.call(this,function Y7e(){let e=8,t=[],n=dv(0),i=_A(0,e),r=_A(0,e);return{data:()=>t,seen:()=>n=function K7e(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(o){for(let u,s=0,a=t.length,l=o.length;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,d,f;for(d=0;!s[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],s[d]?u[d]=-1:(u[d]=f,i[f]=i[d],r[f]=r[d],l[f]=c,c._index=f++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){(o>i.length||s>e)&&(e=Math.max(s,e),i=_A(o,e,i),r=_A(o,e))}}}(),e),this._indices=null,this._dims=null}function r$(e){Q.call(this,null,e)}i$.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},ye(i$,Q,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(i=>t.modified(i.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],s=i.length;let l,u,a=0;for(;a<s;++a)l=n[a].fname,u=r[l]||(r[l]=Cre()),o.push(Dre(u,a,i[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=r.length,p={};let g,m,_,y,v,b,w,D,E;if(u.set(l),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},y=t.mod,w=0,D=y.length;w<D;++w)b[y[w]._index]=1;for(w=0;w<h;++w)E=i[w],(!s[w]||e.modified("fields",w)||t.modified(E.fields))&&(_=E.fname,(g=p[_])||(o[_]=m=Cre(),p[_]=g=m.insert(E,t.source,0)),s[w]=Dre(m,w,r[w]).onAdd(g,l));for(w=0,D=a.data().length;w<D;++w)v[w]||(u[w]!==l[w]?d.push(w):b[w]&&l[w]!==c&&f.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h,p,g,f=r.size();r.resize(c,d),r.add(i);const m=r.curr(),_=r.prev(),y=r.all();for(h=0;h<d;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],i,f)),o[h].onAdd(g,m);for(;f<c;++f)_[f]=y,m[f]!==y&&u.push(f)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),s=r.prev(),a=r.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in i)i[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const s in i)i[s].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,s=i.length;let l,u,a=0;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(1===a)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),s=r.curr(),a=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],g=e.one;let m,_,y;if(d<h)for(m=d,_=Math.min(h,f);m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;else if(d>h)for(m=h,_=Math.min(d,p);m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;if(f>p)for(m=Math.max(d,p),_=f;m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;else if(f<p)for(m=Math.max(h,f),_=p;m<_;++m)y=l[m],o[y]!==n&&(a[y]=s[y],o[y]=n,i.push(y)),s[y]^=g;e.range=t.slice()},incrementOne(e,t,n,i){const o=this.value.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,g,m;if(u<d)for(p=u,g=Math.min(d,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>d)for(p=d,g=Math.min(u,f);p<g;++p)m=s[p],o[m]^=h,i.push(m);if(c>f)for(p=Math.max(u,f),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<f)for(p=Math.max(d,c),g=f;p<g;++p)m=s[p],o[m]^=h,i.push(m);e.range=t.slice()}}),r$.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},ye(r$,Q,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const o=t.fork(t.ALL),s=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const d=a[c]&n;return!d||d^d^l[c]&n?null:s[c]})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===r?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const Dh="Literal",Sre="CallExpression";function Oa(e){this.type=e}Oa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function lUe(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case Sre:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};var Pl,Fe,J,Tr,Jt,yA=1,fv=2,Ch=3,Dd=4,vA=5,Sh=6,So=7,hv=8;(Pl={})[yA]="Boolean",Pl[fv]="<end>",Pl[Ch]="Identifier",Pl[Dd]="Keyword",Pl[vA]="Null",Pl[Sh]="Numeric",Pl[So]="Punctuator",Pl[hv]="String",Pl[9]="RegularExpression";var cUe="ArrayExpression",dUe="BinaryExpression",fUe="CallExpression",hUe="ConditionalExpression",Are="Identifier",pUe="Literal",gUe="LogicalExpression",mUe="MemberExpression",_Ue="ObjectExpression",yUe="Property",vUe="UnaryExpression",Ii="Unexpected token %0",bUe="Unexpected number",wUe="Unexpected string",EUe="Unexpected identifier",DUe="Unexpected reserved word",CUe="Unexpected end of input",o$="Invalid regular expression",s$="Invalid regular expression: missing /",Tre="Octal literals are not allowed in strict mode.",SUe="Duplicate data property in object literal not allowed in strict mode",nr="ILLEGAL",pv="Disabled.",AUe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),TUe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function bA(e,t){if(!e)throw new Error("ASSERT: "+t)}function Vu(e){return e>=48&&e<=57}function a$(e){return"0123456789abcdefABCDEF".includes(e)}function gv(e){return"01234567".includes(e)}function xUe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function mv(e){return 10===e||13===e||8232===e||8233===e}function _v(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&AUe.test(String.fromCharCode(e))}function wA(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&TUe.test(String.fromCharCode(e))}const MUe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function xre(){for(;J<Tr;){const e=Fe.charCodeAt(J);if(!xUe(e)&&!mv(e))break;++J}}function l$(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)J<Tr&&a$(Fe[J])?(i=Fe[J++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):$t({},Ii,nr);return String.fromCharCode(r)}function NUe(){var e,t;for(t=0,"}"===(e=Fe[J])&&$t({},Ii,nr);J<Tr&&a$(e=Fe[J++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&$t({},Ii,nr),t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function Mre(){var e,t;for(e=Fe.charCodeAt(J++),t=String.fromCharCode(e),92===e&&(117!==Fe.charCodeAt(J)&&$t({},Ii,nr),++J,(!(e=l$("u"))||"\\"===e||!_v(e.charCodeAt(0)))&&$t({},Ii,nr),t=e);J<Tr&&wA(e=Fe.charCodeAt(J));)++J,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Fe.charCodeAt(J)&&$t({},Ii,nr),++J,(!(e=l$("u"))||"\\"===e||!wA(e.charCodeAt(0)))&&$t({},Ii,nr),t+=e);return t}function u$(){var n,r,o,s,e=J,t=Fe.charCodeAt(J),i=Fe[J];switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++J,{type:So,value:String.fromCharCode(t),start:e,end:J};default:if(61===(n=Fe.charCodeAt(J+1)))switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return J+=2,{type:So,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:J};case 33:case 61:return 61===Fe.charCodeAt(J+=2)&&++J,{type:So,value:Fe.slice(e,J),start:e,end:J}}}return">>>="===(s=Fe.substr(J,4))?{type:So,value:s,start:e,end:J+=4}:">>>"===(o=s.substr(0,3))||"<<="===o||">>="===o?{type:So,value:o,start:e,end:J+=3}:i===(r=o.substr(0,2))[1]&&"+-<>&|".includes(i)||"=>"===r?{type:So,value:r,start:e,end:J+=2}:("//"===r&&$t({},Ii,nr),"<>=!+-*%&|^/".includes(i)?(++J,{type:So,value:i,start:e,end:J}):void $t({},Ii,nr))}function Nre(){var e,t,n;if(bA(Vu((n=Fe[J]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=J,e="","."!==n){if(e=Fe[J++],n=Fe[J],"0"===e){if("x"===n||"X"===n)return++J,function IUe(e){let t="";for(;J<Tr&&a$(Fe[J]);)t+=Fe[J++];return 0===t.length&&$t({},Ii,nr),_v(Fe.charCodeAt(J))&&$t({},Ii,nr),{type:Sh,value:parseInt("0x"+t,16),start:e,end:J}}(t);if(gv(n))return function RUe(e){let t="0"+Fe[J++];for(;J<Tr&&gv(Fe[J]);)t+=Fe[J++];return(_v(Fe.charCodeAt(J))||Vu(Fe.charCodeAt(J)))&&$t({},Ii,nr),{type:Sh,value:parseInt(t,8),octal:!0,start:e,end:J}}(t);n&&Vu(n.charCodeAt(0))&&$t({},Ii,nr)}for(;Vu(Fe.charCodeAt(J));)e+=Fe[J++];n=Fe[J]}if("."===n){for(e+=Fe[J++];Vu(Fe.charCodeAt(J));)e+=Fe[J++];n=Fe[J]}if("e"===n||"E"===n)if(e+=Fe[J++],("+"===(n=Fe[J])||"-"===n)&&(e+=Fe[J++]),Vu(Fe.charCodeAt(J)))for(;Vu(Fe.charCodeAt(J));)e+=Fe[J++];else $t({},Ii,nr);return _v(Fe.charCodeAt(J))&&$t({},Ii,nr),{type:Sh,value:parseFloat(e),start:t,end:J}}function Ore(){if(xre(),J>=Tr)return{type:fv,start:J,end:J};const e=Fe.charCodeAt(J);return _v(e)?function kUe(){var e,t;return e=J,t=92===Fe.charCodeAt(J)?Mre():function OUe(){var e,t;for(e=J++;J<Tr;){if(92===(t=Fe.charCodeAt(J)))return J=e,Mre();if(!wA(t))break;++J}return Fe.slice(e,J)}(),{type:1===t.length?Ch:MUe.hasOwnProperty(t)?Dd:"null"===t?vA:"true"===t||"false"===t?yA:Ch,value:t,start:e,end:J}}():40===e||41===e||59===e?u$():39===e||34===e?function FUe(){var t,n,i,r,e="",o=!1;for(bA("'"===(t=Fe[J])||'"'===t,"String literal must starts with a quote"),n=J,++J;J<Tr;){if((i=Fe[J++])===t){t="";break}if("\\"===i)if((i=Fe[J++])&&mv(i.charCodeAt(0)))"\r"===i&&"\n"===Fe[J]&&++J;else switch(i){case"u":case"x":"{"===Fe[J]?(++J,e+=NUe()):e+=l$(i);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:gv(i)?(0!==(r="01234567".indexOf(i))&&(o=!0),J<Tr&&gv(Fe[J])&&(o=!0,r=8*r+"01234567".indexOf(Fe[J++]),"0123".includes(i)&&J<Tr&&gv(Fe[J])&&(r=8*r+"01234567".indexOf(Fe[J++]))),e+=String.fromCharCode(r)):e+=i}else{if(mv(i.charCodeAt(0)))break;e+=i}}return""!==t&&$t({},Ii,nr),{type:hv,value:e,octal:o,start:n,end:J}}():46===e?Vu(Fe.charCodeAt(J+1))?Nre():u$():Vu(e)?Nre():u$()}function Ao(){const e=Jt;return J=e.end,Jt=Ore(),J=e.end,e}function kre(){const e=J;Jt=Ore(),J=e}function Ire(e,t,n){const i=new Oa("||"===e||"&&"===e?gUe:dUe);return i.operator=e,i.left=t,i.right=n,i}function jUe(e,t){const n=new Oa(fUe);return n.callee=e,n.arguments=t,n}function c$(e){const t=new Oa(Are);return t.name=e,t}function yv(e){const t=new Oa(pUe);return t.value=e.value,t.raw=Fe.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Rre(e,t,n){const i=new Oa(mUe);return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function Fre(e,t,n){const i=new Oa(yUe);return i.key=t,i.value=n,i.kind=e,i}function $t(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,s)=>(bA(s<i.length,"Message reference must be in range"),i[s]));throw(n=new Error(r)).index=J,n.description=r,n}function EA(e){e.type===fv&&$t(e,CUe),e.type===Sh&&$t(e,bUe),e.type===hv&&$t(e,wUe),e.type===Ch&&$t(e,EUe),e.type===Dd&&$t(e,DUe),$t(e,Ii,e.value)}function xr(e){const t=Ao();(t.type!==So||t.value!==e)&&EA(t)}function En(e){return Jt.type===So&&Jt.value===e}function d$(e){return Jt.type===Dd&&Jt.value===e}function Pre(){J=Jt.start;const e=Ao();return e.type===hv||e.type===Sh?(e.octal&&$t(e,Tre),yv(e)):c$(e.value)}function qUe(){var e,t,n;return J=Jt.start,(e=Jt).type===Ch?(n=Pre(),xr(":"),Fre("init",n,Ah())):e.type!==fv&&e.type!==So?(t=Pre(),xr(":"),Fre("init",t,Ah())):void EA(e)}const XUe={if:1};function QUe(){var e,t,n;if(En("("))return function KUe(){xr("(");const e=f$();return xr(")"),e}();if(En("["))return function WUe(){const e=[];for(J=Jt.start,xr("[");!En("]");)En(",")?(Ao(),e.push(null)):(e.push(Ah()),En("]")||xr(","));return Ao(),function VUe(e){const t=new Oa(cUe);return t.elements=e,t}(e)}();if(En("{"))return function YUe(){var t,i,e=[],r={},o=String;for(J=Jt.start,xr("{");!En("}");)i="$"+((t=qUe()).key.type===Are?t.key.name:o(t.key.value)),Object.prototype.hasOwnProperty.call(r,i)?$t({},SUe):r[i]=!0,e.push(t),En("}")||xr(",");return xr("}"),function zUe(e){const t=new Oa(_Ue);return t.properties=e,t}(e)}();if(J=Jt.start,(e=Jt.type)===Ch||XUe[Jt.value])n=c$(Ao().value);else if(e===hv||e===Sh)Jt.octal&&$t(Jt,Tre),n=yv(Ao());else{if(e===Dd)throw new Error(pv);e===yA?((t=Ao()).value="true"===t.value,n=yv(t)):e===vA?((t=Ao()).value=null,n=yv(t)):En("/")||En("/=")?(n=yv(function BUe(){var e,t,n,i;return Jt=null,xre(),e=J,t=function LUe(){var e,t,n,i;for(bA("/"===(e=Fe[J]),"Regular expression literal must start with a slash"),t=Fe[J++],n=!1,i=!1;J<Tr;)if(t+=e=Fe[J++],"\\"===e)mv((e=Fe[J++]).charCodeAt(0))&&$t({},s$),t+=e;else if(mv(e.charCodeAt(0)))$t({},s$);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||$t({},s$),{value:t.substr(1,t.length-2),literal:t}}(),n=function $Ue(){var e,t,n;for(t="",n="";J<Tr&&wA((e=Fe[J]).charCodeAt(0));)++J,"\\"===e&&J<Tr?$t({},Ii,nr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&$t({},o$,n),{value:n,literal:t}}(),i=function PUe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";$t({},o$)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{$t({},o$)}try{return new RegExp(e,t)}catch{return null}}(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:J}}()),kre()):EA(Ao())}return n}function JUe(){const e=[];if(xr("("),!En(")"))for(;J<Tr&&(e.push(Ah()),!En(")"));)xr(",");return xr(")"),e}function ZUe(){J=Jt.start;const e=Ao();return function UUe(e){return e.type===Ch||e.type===Dd||e.type===yA||e.type===vA}(e)||EA(e),c$(e.value)}function tVe(){xr("[");const e=f$();return xr("]"),e}function Lre(){const e=function nVe(){var e;for(e=QUe();;)if(En("."))xr("."),e=Rre(".",e,ZUe());else if(En("("))e=jUe(e,JUe());else{if(!En("["))break;e=Rre("[",e,tVe())}return e}();if(Jt.type===So&&(En("++")||En("--")))throw new Error(pv);return e}function DA(){var e,t;if(Jt.type!==So&&Jt.type!==Dd)t=Lre();else{if(En("++")||En("--"))throw new Error(pv);if(En("+")||En("-")||En("~")||En("!"))e=Ao(),t=DA(),t=function GUe(e,t){const n=new Oa(vUe);return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(d$("delete")||d$("void")||d$("typeof"))throw new Error(pv);t=Lre()}}return t}function $re(e){let t=0;if(e.type!==So&&e.type!==Dd)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Ah(){var e,t;return e=function iVe(){var e,t,n,i,r,o,s,a,l,u;if(e=Jt,l=DA(),0===(r=$re(i=Jt)))return l;for(i.prec=r,Ao(),t=[e,Jt],o=[l,i,s=DA()];(r=$re(Jt))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=Ire(a,l,s),o.push(n);(i=Ao()).prec=r,o.push(i),t.push(Jt),n=DA(),o.push(n)}for(n=o[u=o.length-1],t.pop();u>1;)t.pop(),n=Ire(o[u-1].value,o[u-2],n),u-=2;return n}(),En("?")&&(Ao(),t=Ah(),xr(":"),e=function HUe(e,t,n){const i=new Oa(hUe);return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,Ah())),e}function f$(){const e=Ah();if(En(","))throw new Error(pv);return e}function h$(e){J=0,Tr=(Fe=e).length,Jt=null,kre();const t=f$();if(Jt.type!==fv)throw new Error("Unexpect token after expression.");return t}var Bre={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Ure(e){function n(s,a,l){return u=>function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",0===l.lastIndexOf("new ",0)&&(c="("+c+")")),c+"."+s+(u<0?"":0===u?"()":"("+a.slice(1).map(e).join(",")+")")}(s,u,a,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ee("Missing arguments to clamp function."),s.length>3&&ee("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&ee("Missing arguments to if function."),s.length>3&&ee("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Vre(e){const t=(e=e||{}).allowed?_a(e.allowed):{},n=e.forbidden?_a(e.forbidden):{},i=e.constants||Bre,r=(e.functions||Ure)(d),o=e.globalvar,s=e.fieldvar,a=lt(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function d(p){if(Ce(p))return p;const g=f[p.type];return null==g&&ee("Unsupported type: "+p.type),g(p)}const f={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Ae(n,g)?ee("Illegal identifier: "+g):Ae(i,g)?i[g]:Ae(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=d(p.object);g&&(c+=1);const _=d(p.property);return m===s&&(u[function rVe(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(_)]=1),g&&(c-=1),m+(g?"."+_:"["+_+"]")},CallExpression:p=>{"Identifier"!==p.callee.type&&ee("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,_=Ae(r,g)&&r[g];return _||ee("Unrecognized function: "+g),lt(_)?_(m):_+"("+m.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const g=d(p.key);return c-=1,g+":"+d(p.value)}};function h(p){const g={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=r,h.constants=i,h}var jre,Hre,p$,g$,m$,CA=new er,SA=new er,Ll={point:tr,lineStart:tr,lineEnd:tr,polygonStart:function(){CA=new er,Ll.lineStart=oVe,Ll.lineEnd=sVe},polygonEnd:function(){var e=+CA;SA.add(e<0?Hr+e:e),this.lineStart=this.lineEnd=this.point=tr},sphere:function(){SA.add(Hr)}};function oVe(){Ll.point=aVe}function sVe(){zre(jre,Hre)}function aVe(e,t){Ll.point=zre,jre=e,Hre=t,p$=e*=pt,g$=ze(t=(t*=pt)/2+bS),m$=$e(t)}function zre(e,t){var n=(e*=pt)-p$,i=n>=0?1:-1,r=i*n,o=ze(t=(t*=pt)/2+bS),s=$e(t),a=m$*s,l=g$*o+a*ze(r),u=a*i*$e(r);CA.add(js(u,l)),p$=e,g$=o,m$=s}var In,To,Wn,ss,Th,Gre,Wre,Wm,vv,Cd,ju,Hu={point:_$,lineStart:Yre,lineEnd:Kre,polygonStart:function(){Hu.point=Xre,Hu.lineStart=uVe,Hu.lineEnd=cVe,vv=new er,Ll.polygonStart()},polygonEnd:function(){Ll.polygonEnd(),Hu.point=_$,Hu.lineStart=Yre,Hu.lineEnd=Kre,CA<0?(In=-(Wn=180),To=-(ss=90)):vv>je?ss=90:vv<-je&&(To=-90),ju[0]=In,ju[1]=Wn},sphere:function(){In=-(Wn=180),To=-(ss=90)}};function _$(e,t){Cd.push(ju=[In=e,Wn=e]),t<To&&(To=t),t>ss&&(ss=t)}function qre(e,t){var n=ch([e*pt,t*pt]);if(Wm){var i=Nm(Wm,n),o=Nm([i[1],-i[0],0],i);FS(o),o=kS(o);var u,s=e-Th,a=s>0?1:-1,l=o[0]*Qn*a,c=At(s)>180;c^(a*Th<l&&l<a*e)?(u=o[1]*Qn)>ss&&(ss=u):c^(a*Th<(l=(l+360)%360-180)&&l<a*e)?(u=-o[1]*Qn)<To&&(To=u):(t<To&&(To=t),t>ss&&(ss=t)),c?e<Th?as(In,e)>as(In,Wn)&&(Wn=e):as(e,Wn)>as(In,Wn)&&(In=e):Wn>=In?(e<In&&(In=e),e>Wn&&(Wn=e)):e>Th?as(In,e)>as(In,Wn)&&(Wn=e):as(e,Wn)>as(In,Wn)&&(In=e)}else Cd.push(ju=[In=e,Wn=e]);t<To&&(To=t),t>ss&&(ss=t),Wm=n,Th=e}function Yre(){Hu.point=qre}function Kre(){ju[0]=In,ju[1]=Wn,Hu.point=_$,Wm=null}function Xre(e,t){if(Wm){var n=e-Th;vv.add(At(n)>180?n+(n>0?360:-360):n)}else Gre=e,Wre=t;Ll.point(e,t),qre(e,t)}function uVe(){Ll.lineStart()}function cVe(){Xre(Gre,Wre),Ll.lineEnd(),At(vv)>je&&(In=-(Wn=180)),ju[0]=In,ju[1]=Wn,Wm=null}function as(e,t){return(t-=e)<0?t+360:t}function dVe(e,t){return e[0]-t[0]}function Qre(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var bv,AA,TA,xA,MA,NA,OA,kA,y$,v$,b$,Jre,Zre,Jr,Zr,eo,ka={sphere:tr,point:w$,lineStart:eoe,lineEnd:toe,polygonStart:function(){ka.lineStart=gVe,ka.lineEnd=mVe},polygonEnd:function(){ka.lineStart=eoe,ka.lineEnd=toe}};function w$(e,t){e*=pt;var n=ze(t*=pt);wv(n*ze(e),n*$e(e),$e(t))}function wv(e,t,n){++bv,TA+=(e-TA)/bv,xA+=(t-xA)/bv,MA+=(n-MA)/bv}function eoe(){ka.point=hVe}function hVe(e,t){e*=pt;var n=ze(t*=pt);Jr=n*ze(e),Zr=n*$e(e),eo=$e(t),ka.point=pVe,wv(Jr,Zr,eo)}function pVe(e,t){e*=pt;var n=ze(t*=pt),i=n*ze(e),r=n*$e(e),o=$e(t),s=js(zr((s=Zr*o-eo*r)*s+(s=eo*i-Jr*o)*s+(s=Jr*r-Zr*i)*s),Jr*i+Zr*r+eo*o);AA+=s,NA+=s*(Jr+(Jr=i)),OA+=s*(Zr+(Zr=r)),kA+=s*(eo+(eo=o)),wv(Jr,Zr,eo)}function toe(){ka.point=w$}function gVe(){ka.point=_Ve}function mVe(){noe(Jre,Zre),ka.point=w$}function _Ve(e,t){Jre=e,Zre=t,e*=pt,t*=pt,ka.point=noe;var n=ze(t);Jr=n*ze(e),Zr=n*$e(e),eo=$e(t),wv(Jr,Zr,eo)}function noe(e,t){e*=pt;var n=ze(t*=pt),i=n*ze(e),r=n*$e(e),o=$e(t),s=Zr*o-eo*r,a=eo*i-Jr*o,l=Jr*r-Zr*i,u=iL(s,a,l),c=Eo(u),d=u&&-c/u;y$.add(d*s),v$.add(d*a),b$.add(d*l),AA+=c,NA+=c*(Jr+(Jr=i)),OA+=c*(Zr+(Zr=r)),kA+=c*(eo+(eo=o)),wv(Jr,Zr,eo)}function wVe(e){return e instanceof EC?e:new EC(e)}const ioe=Symbol("vega_selection_getter");function roe(e){return(!e.getter||!e.getter[ioe])&&(e.getter=ks(e.field),e.getter[ioe]=!0),e.getter}const E$="intersect",$l="_vgsid_",Ev=ks($l),SVe="E",AVe="R",TVe="R-E",xVe="R-LE",MVe="R-RE",IA="index:unit";function aoe(e,t){for(var s,a,n=t.fields,i=t.values,r=n.length,o=0;o<r;++o)if(Bc(s=roe(a=n[o])(e))&&(s=vr(s)),Bc(i[o])&&(i[o]=vr(i[o])),te(i[o])&&Bc(i[o][0])&&(i[o]=i[o].map(vr)),a.type===SVe){if(te(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if(a.type===AVe){if(!qg(s,i[o]))return!1}else if(a.type===MVe){if(!qg(s,i[o],!0,!1))return!1}else if(a.type===TVe){if(!qg(s,i[o],!1,!1))return!1}else if(a.type===xVe&&!qg(s,i[o],!1,!0))return!1;return!0}const loe=em(Ev),OVe=loe.left,kVe=loe.right;var D$={[`${$l}_union`]:function vVe(...e){const t=new EC;for(const n of e)for(const i of n)t.add(i);return t},[`${$l}_intersect`]:function bVe(e,...t){e=new EC(e),t=t.map(wVe);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=vr(t[0]),i=vr(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=vr(t[0]),i=vr(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const PVe=":",LVe="@";function C$(e,t,n,i){t[0].type!==Dh&&ee("First argument to selection functions must be a string literal.");const r=t[0].value,o=t.length>=2&&St(t).value,s="unit",a=LVe+s,l=PVe+r;o===E$&&!Ae(i,a)&&(i[a]=n.getData(r).indataRef(n,s)),Ae(i,l)||(i[l]=n.getData(r).tuplesRef())}function uoe(e){const t=this.context.data[e];return t?t.values.value:[]}const Dv=e=>function(t,n){const i=this.context.dataflow.locale();return null===t?"null":i[e](n)(t)},VVe=Dv("format"),coe=Dv("timeFormat"),jVe=Dv("utcFormat"),HVe=Dv("timeParse"),zVe=Dv("utcParse"),RA=new Date(2e3,0,1);function FA(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(RA.setYear(2e3),RA.setMonth(e),RA.setDate(t),coe.call(this,RA,n)):""}const KVe=":",S$="%",doe="$";function A$(e,t,n,i){t[0].type!==Dh&&ee("First argument to data functions must be a string literal.");const r=t[0].value,o=KVe+r;if(!Ae(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function to(e,t,n,i){if(t[0].type===Dh)foe(n,i,t[0].value);else for(e in n.scales)foe(n,i,e)}function foe(e,t,n){const i=S$+n;if(!Ae(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Bl(e,t){if(lt(e))return e;if(Ce(e)){const n=t.scales[e];return n&&function u3e(e){return e&&!0===e[fZ]}(n.value)?n.value:void 0}}function T$(e,t){return function(n,i,r){if(n){const o=Bl(n,(r||this).context);return o&&o.path[e](i)}return t(i)}}const ZVe=T$("area",function lVe(e){return SA=new er,Lu(e,Ll),2*SA}),eje=T$("bounds",function fVe(e){var t,n,i,r,o,s,a;if(ss=Wn=-(In=To=1/0),Cd=[],Lu(e,Hu),n=Cd.length){for(Cd.sort(dVe),t=1,o=[i=Cd[0]];t<n;++t)Qre(i,(r=Cd[t])[0])||Qre(i,r[1])?(as(i[0],r[1])>as(i[0],i[1])&&(i[1]=r[1]),as(r[0],i[1])>as(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,t=0,i=o[n=o.length-1];t<=n;i=r,++t)(a=as(i[1],(r=o[t])[0]))>s&&(s=a,In=r[0],Wn=i[1])}return Cd=ju=null,In===1/0||To===1/0?[[NaN,NaN],[NaN,NaN]]:[[In,To],[Wn,ss]]}),tje=T$("centroid",function yVe(e){bv=AA=TA=xA=MA=NA=OA=kA=0,y$=new er,v$=new er,b$=new er,Lu(e,ka);var t=+y$,n=+v$,i=+b$,r=iL(t,n,i);return r<vS&&(t=NA,n=OA,i=kA,AA<je&&(t=TA,n=xA,i=MA),(r=iL(t,n,i))<vS)?[NaN,NaN]:[js(n,t)*Qn,Eo(i/r)*Qn]});function x$(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function M$(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function N$(e){const t=Qc(e);return.2126*M$(t.r)+.7152*M$(t.g)+.0722*M$(t.b)}function hoe(e,t){return e===t||e!=e&&t!=t||(te(e)?!(!te(t)||e.length!==t.length)&&function uje(e,t){for(let n=0,i=e.length;n<i;++n)if(!hoe(e[n],t[n]))return!1;return!0}(e,t):!(!Ee(e)||!Ee(t))&&poe(e,t))}function poe(e,t){for(const n in e)if(!hoe(e[n],t[n]))return!1;return!0}function goe(e){return t=>poe(e,t)}const moe={};function O$(e){return te(e)||ArrayBuffer.isView(e)?e:null}function k$(e){return O$(e)||(Ce(e)?e:null)}const _oe=e=>e.data;function yoe(e,t){const n=uoe.call(t,e);return n.root&&n.root.lookup||{}}const voe=()=>typeof window<"u"&&window||null;function boe(e,t,n){if(!e)return[];const[i,r]=e,o=(new li).set(i[0],i[1],r[0],r[1]);return nte(n||this.context.dataflow.scenegraph().root,o,function Fje(e){let t=null;if(e){const n=De(e.marktype),i=De(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}(t))}const Cv={random:()=>Ps(),cumulativeNormal:XD,cumulativeLogNormal:_R,cumulativeUniform:wR,densityNormal:fR,densityLogNormal:mR,densityUniform:bR,quantileNormal:QD,quantileLogNormal:yR,quantileUniform:ER,sampleNormal:KD,sampleLogNormal:gR,sampleUniform:vR,isArray:te,isBoolean:$c,isDate:Bc,isDefined:e=>void 0!==e,isNumber:Ft,isObject:Ee,isRegExp:WY,isString:Ce,isTuple:VD,isValid:e=>null!=e&&e==e,toBoolean:hI,toDate:e=>pI(e),toNumber:vr,toString:gI,indexof:function gje(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return k$(e).indexOf(...n)},join:function pje(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return O$(e).join(...n)},lastindexof:function mje(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return k$(e).lastIndexOf(...n)},replace:function yje(e,t,n){return lt(n)&&ee("Function argument passed to replace."),String(e).replace(t,n)},reverse:function vje(e){return O$(e).slice().reverse()},slice:function _je(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return k$(e).slice(...n)},flush:zY,lerp:qY,merge:function lje(){const e=[].slice.call(arguments);return e.unshift({}),ut(...e)},pad:XY,peek:St,pluck:function hje(e,t){const n=moe[t]||(moe[t]=ks(t));return te(e)?e.map(n):n(e)},span:Fy,inrange:qg,truncate:QY,rgb:Qc,lab:SC,hcl:AC,hsl:gC,luminance:N$,contrast:function aje(e,t){const n=N$(e),i=N$(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},sequence:Qo,format:VVe,utcFormat:jVe,utcParse:zVe,utcOffset:TK,utcSequence:NK,timeFormat:coe,timeParse:HVe,timeOffset:AK,timeSequence:MK,timeUnitSpecifier:gK,monthFormat:function GVe(e){return FA.call(this,e,1,"%B")},monthAbbrevFormat:function WVe(e){return FA.call(this,e,1,"%b")},dayFormat:function qVe(e){return FA.call(this,0,2+e,"%A")},dayAbbrevFormat:function YVe(e){return FA.call(this,0,2+e,"%a")},quarter:UY,utcquarter:VY,week:_K,utcweek:bK,dayofyear:mK,utcdayofyear:vK,warn:function rje(){return x$(this.context.dataflow,"warn",arguments)},info:function oje(){return x$(this.context.dataflow,"info",arguments)},debug:function sje(){return x$(this.context.dataflow,"debug",arguments)},extent:e=>ml(e),inScope:function ije(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:boe,clampRange:jY,pinchDistance:function dje(e){const t=e.touches;return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)},pinchAngle:function fje(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function kje(){const e=voe();return e?e.screen:{}},containerSize:function Rje(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function Ije(){const e=voe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function bje(e,t,n){return BF(e||0,t||0,n||0)},setdata:function BVe(e,t){const n=this.context.dataflow;return n.pulse(this.context.data[e].input,n.changeset().remove(Is).insert(t)),1},pathShape:function Mje(e){let t=null;return function(n){return n?y1(n,t=t||ym(e)):e}},panLinear:PY,panLog:LY,panPow:$Y,panSymlog:BY,zoomLinear:aI,zoomLog:lI,zoomPow:wD,zoomSymlog:uI,encode:function UVe(e,t,n){if(e){const i=this.context.dataflow;i.pulse(e.mark.source,i.changeset().encode(e,t))}return void 0!==n?n:e},modify:function cje(e,t,n,i,r,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let d,f,c=a.changes;if(!1===s._trigger||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(d=!0===n?Is:te(n)||VD(n)?n:goe(n),c.remove(d)),t&&c.insert(t),i&&(d=goe(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(f in o)c.modify(r,f,o[f]);return 1},lassoAppend:function Pje(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const r=(e=De(e))[e.length-1];return void 0===r||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e},lassoPath:function Lje(e){return De(e).reduce((t,n,i)=>{let[r,o]=n;return t+(0==i?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `)},"")},intersectLasso:function $je(e,t,n){const{x:i,y:r,mark:o}=n,s=(new li).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(i,r),boe([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>function Bje(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[s,a]=n[o],[l,u]=n[r];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&i++}return 1&i}(l.x,l.y,t))}},Uje=["view","item","group","xy","x","y"],woe="this.",I$={},Eoe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${me(doe+e)}]`,functions:function jje(e){const t=Ure(e);Uje.forEach(n=>t[n]="event.vega."+n);for(const n in Cv)t[n]=woe+n;return ut(t,function JVe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=to,n._range=to,n._scale=to;const i=r=>"_["+(r.type===Dh?me(S$+r.value):me(S$)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}(e,Cv,I$)),t},constants:Bre,visitors:I$},R$=Vre(Eoe);function Jn(e,t,n){return 1===arguments.length?Cv[e]:(Cv[e]=t,n&&(I$[e]=n),R$&&(R$.functions[e]=woe+e),this)}function Ul(e,t){const n={};let i;try{i=h$(e=Ce(e)?e:me(e)+"")}catch{ee("Expression parse error: "+e)}i.visit(o=>{if(o.type!==Sre)return;const s=o.callee.name,a=Eoe.visitors[s];a&&a(s,o.arguments,t,n)});const r=R$(i);return r.globals.forEach(o=>{const s=doe+o;!Ae(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:ut({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}Jn("bandwidth",function wje(e,t){const n=Bl(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},to),Jn("copy",function Eje(e,t){const n=Bl(e,(t||this).context);return n?n.copy():void 0},to),Jn("domain",function Dje(e,t){const n=Bl(e,(t||this).context);return n?n.domain():[]},to),Jn("range",function Sje(e,t){const n=Bl(e,(t||this).context);return n&&n.range?n.range():[]},to),Jn("invert",function Cje(e,t,n){const i=Bl(e,(n||this).context);return i?te(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0},to),Jn("scale",function Aje(e,t,n){const i=Bl(e,(n||this).context);return i?i(t):void 0},to),Jn("gradient",function Tje(e,t,n,i,r){e=Bl(e,(r||this).context);const o=FZ(t,n);let s=e.domain(),a=s[0],l=St(s),u=yr;return l-a?u=bZ(e,a,l):e=(e.interpolator?Lt("sequential")().interpolator(e.interpolator()):Lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==St(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o},to),Jn("geoArea",ZVe,to),Jn("geoBounds",eje,to),Jn("geoCentroid",tje,to),Jn("geoShape",function xje(e,t,n){const i=Bl(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}},to),Jn("geoScale",function nje(e,t){const n=Bl(e,(t||this).context);return n&&n.scale()},to),Jn("indata",function $Ve(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count},function QVe(e,t,n,i){t[0].type!==Dh&&ee("First argument to indata must be a string literal."),t[1].type!==Dh&&ee("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,s="@"+o;Ae(s,i)||(i[s]=n.getData(r).indataRef(n,o))}),Jn("data",uoe,A$),Jn("treePath",function Nje(e,t,n){const i=yoe(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(_oe):void 0},A$),Jn("treeAncestors",function Oje(e,t){const n=yoe(e,this)[t];return n?n.ancestors().map(_oe):void 0},A$),Jn("vlSelectionTest",function NVe(e,t,n){for(var u,c,d,f,h,i=this.context.data[e],r=i?i.values.value:[],o=i?i[IA]&&i[IA].value:void 0,s=n===E$,a=r.length,l=0;l<a;++l)if(u=r[l],o&&s){if(-1===(d=(c=c||{})[f=u.unit]||0))continue;if(h=aoe(t,u),c[f]=h?-1:++d,h&&1===o.size)return!0;if(!h&&d===o.get(f).count)return!1}else if(s^(h=aoe(t,u)))return h;return a&&s},C$),Jn("vlSelectionIdTest",function IVe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[IA]&&i[IA].value:void 0,s=n===E$,a=Ev(t),l=OVe(r,a);if(l===r.length||Ev(r[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(kVe(r,a)-l<o.size)return!1}return!0},C$),Jn("vlSelectionResolve",function FVe(e,t,n,i){for(var u,c,d,f,h,p,g,m,_,w,D,r=this.context.data[e],o=r?r.values.value:[],s={},a={},l={},v=o.length,b=0;b<v;++b)if(f=(u=o[b]).unit,d=u.values,(c=u.fields)&&d){for(w=0,D=c.length;w<D;++w)m=(g=s[(h=c[w]).field]||(s[h.field]={}))[f]||(g[f]=[]),l[h.field]=_=h.type.charAt(0),g[f]=(0,D$[`${_}_union`])(m,De(d[w]));n&&(m=a[f]||(a[f]=[])).push(De(d).reduce((E,S,M)=>(E[c[M].field]=S,E),{}))}else h=$l,p=Ev(u),(m=(g=s[h]||(s[h]={}))[f]||(g[f]=[])).push(p),n&&(m=a[f]||(a[f]=[])).push({[$l]:p});return t=t||"union",s[$l]?s[$l]=D$[`${$l}_${t}`](...Object.values(s[$l])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(S=>s[E][S]).reduce((S,M)=>void 0===S?M:D$[`${l[E]}_${t}`](S,M))}),o=Object.keys(a),n&&o.length&&(s[i?"vlPoint":"vlMulti"]="union"===t?{or:o.reduce((S,M)=>(S.push(...a[M]),S),[])}:{and:o.map(S=>({or:a[S]}))}),s},C$),Jn("vlSelectionTuples",function RVe(e,t){return e.map(n=>ut(t.fields?{values:t.fields.map(i=>roe(i)(n.datum))}:{[$l]:Ev(n.datum)},t))});const zje=_a(["rule"]),Doe=_a(["group","image","rect"]);function F$(e){return(e+"").toLowerCase()}function Sv(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}var Kje={operator:(e,t)=>Sv(e,["_"],t.code),parameter:(e,t)=>Sv(e,["datum","_"],t.code),event:(e,t)=>Sv(e,["event"],t.code),handler:(e,t)=>Sv(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const s="o["+me(o)+"]";r+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return r+=function Gje(e,t){let n="";return zje[t]||(e.x2&&(e.x?(Doe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Doe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(i,n),r+="return m;",Sv(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(me).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map((o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),function Yje(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${i}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${i} : `}(l,u,-a,a)}).join("")+"0;");return n?r.bind(n):r}}};function Coe(e,t,n){if(!e||!Ee(e))return e;for(let o,i=0,r=Soe.length;i<r;++i)if(o=Soe[i],Ae(e,o.key))return o.parse(e,t,n);return e}var Soe=[{key:"$ref",parse:function Zje(e,t){return t.get(e.$ref)||ee("Operator not defined: "+e.$ref)}},{key:"$key",parse:function tHe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=fI(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function eHe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=mo(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function nHe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ks(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function rHe(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=mo(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}},{key:"$compare",parse:function iHe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=De(e.$compare).map(r=>r&&r.$tupleid?Be:r);return t.fn[n]||(t.fn[n]=cI(i,e.$order,t.expr.codegen))}},{key:"$context",parse:function oHe(e,t){return t}},{key:"$subflow",parse:function sHe(e,t){const n=e.$subflow;return function(i,r,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}},{key:"$tupleid",parse:function aHe(){return Be}}];const cHe={skip:!0};function Aoe(e,t,n,i){return new Toe(e,t,n,i)}function Toe(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Kje,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function xoe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Moe(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}Toe.prototype=xoe.prototype={fork(){const e=new xoe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),function qje(e){return"collect"===F$(e)}(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[F$(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function Hje(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()},parseOperator:function Xje(e){const t=this;!function Wje(e){return"operator"===F$(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function Qje(e){const t=this;if(e.params){const n=t.get(e.id);n||ee("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function Jje(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=te(r)?r.map(o=>Coe(o,n,t)):Coe(r,n,t)}return t},parseStream:function lHe(e){var r,t=this,n=null!=e.filter?t.eventExpression(e.filter):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,n):e.merge&&(i=(r=e.merge.map(o=>t.get(o)))[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&ee("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)},parseUpdate:function uHe(e){var r,t=this,n=Ee(n=e.source)?n.$ref:n,i=t.get(n),o=e.update,s=void 0;i||ee("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,s)},getState:function dHe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(r[o]=s.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n},setState:function fHe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],cHe)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Is).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}};const P$="default";function L$(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function PA(e,t){var n=e._runtime.data;return Ae(n,t)||ee("Unrecognized data set: "+t),n[t]}function LA(e,t){yX(t)||ee("Second argument to changes must be a changeset.");const n=PA(this,e);return n.modified=!0,this.pulse(n.input,t)}function Noe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Ooe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function $A(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}const SHe={trap:!1};function Ioe(e,t,n,i){e._eventListeners.push({type:n,sources:De(t),handler:i})}function BA(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return!(!1===i||Ee(i)&&!i[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function Roe(e){return e.item}function Foe(e){return e.item.mark.source}function Poe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ls(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return null!=n&&(i.textContent=n),i}const OHe="vega-bind",kHe="vega-bind-name",IHe="vega-bind-radio";function RHe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=dI(i.debounce,r.update))),(null==i.input&&i.element?FHe:LHe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function FHe(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),Ioe(i,t,r,o),e.set=s=>{t.value=s,t.dispatchEvent(function PHe(e){return typeof Event<"u"?new Event(e):{type:e}}(r))}}function LHe(e,t,n,i){const r=i.signal(n.signal),o=ls("div",{class:OHe}),s="radio"===n.input?o:o.appendChild(ls("label"));s.appendChild(ls("span",{class:kHe},n.name||n.signal)),t.appendChild(o);let a=$He;switch(n.input){case"checkbox":a=BHe;break;case"select":a=UHe;break;case"radio":a=VHe;break;case"range":a=jHe}a(e,s,n,r)}function $He(e,t,n,i){const r=ls("input");for(const o in n)"signal"!==o&&"element"!==o&&r.setAttribute("input"===o?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function BHe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=ls("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function UHe(e,t,n,i){const r=ls("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};UA(s,i)&&(l.selected=!0),r.appendChild(ls("option",l,(o[a]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(UA(n.options[a],s))return void(r.selectedIndex=a)}}function VHe(e,t,n,i){const r=ls("span",{class:IHe}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};UA(s,i)&&(l.checked=!0);const u=ls("input",l);u.addEventListener("change",()=>e.update(s));const c=ls("label",{},(o[a]||s)+"");return c.prepend(u),r.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)UA(a[u].value,s)&&(a[u].checked=!0)}}function jHe(e,t,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;const r=null!=n.max?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,s=n.step||Vc(o,r,100),a=ls("input",{type:"range",name:n.signal,min:o,max:r,step:s});a.value=i;const l=ls("span",{},+i);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function UA(e,t){return e===t||e+""==t+""}function Loe(e,t,n,i,r,o){return(t=t||new i(e.loader())).initialize(n,Noe(e),Ooe(e),$A(e),r,o).background(e.background())}function $$(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function B$(e,t,n){if("string"==typeof t){if(!(typeof document<"u"))return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Av=e=>+e||0,GHe=e=>({top:e,bottom:e,left:e,right:e});function $oe(e){return Ee(e)?{top:Av(e.top),bottom:Av(e.bottom),left:Av(e.left),right:Av(e.right)}:GHe(Av(e))}function U$(e,t,n,i){return V$.apply(this,arguments)}function V$(){return(V$=vi(function*(e,t,n,i){const r=fS(t),o=r&&r.headless;return o||ee("Unrecognized renderer type: "+t),yield e.runAsync(),Loe(e,null,null,o,n,i).renderAsync(e._scenegraph.root)})).apply(this,arguments)}function j$(){return(j$=vi(function*(e,t){e!==ud.Canvas&&e!==ud.SVG&&e!==ud.PNG&&ee("Unrecognized image type: "+e);const n=yield U$(this,e,t);return e===ud.SVG?function qHe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})).apply(this,arguments)}function H$(){return(H$=vi(function*(e,t){return(yield U$(this,ud.Canvas,e,t)).canvas()})).apply(this,arguments)}function z$(){return(z$=vi(function*(e){return(yield U$(this,ud.SVG,e)).svg()})).apply(this,arguments)}var Boe="width",Uoe="height",G$="padding",Voe={skip:!0};function joe(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===G$?i.left+i.right:0)}function Hoe(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===G$?i.top+i.bottom:0)}function tze(e,t){return t.modified&&te(t.input.value)&&!e.startsWith("_:vega:_")}function nze(e,t){return!("parent"===e||t instanceof am.proxy)}function oze(e,t,n,i){const r=e.element();r&&r.setAttribute("title",function sze(e){return null==e?"":te(e)?zoe(e):Ee(e)&&!Bc(e)?function aze(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(te(n)?zoe(n):Goe(n))}).join("\n")}(e):e+""}(i))}function zoe(e){return"["+e.map(Goe).join(", ")+"]"}function Goe(e){return te(e)?"[\u2026]":Ee(e)&&!Bc(e)?"{\u2026}":e}function Woe(e,t){const n=this;if(t=t||{},sm.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const o=ut({},e.locale,t.locale);n.locale(sX(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ud.Canvas,n._scenegraph=new vee;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||oze,n._redraw=!0,n._handler=(new k1).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function AHe(e){const t=ut({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{te(i[o])&&(i[o]=_a(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=function XHe(e,t,n){return Aoe(e,am,Cv,n).parse(t)}(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:ut({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=joe(n,n._width),n._viewHeight=Hoe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function JHe(e){var t=e._signals,n=t[Boe],i=t[Uoe],r=t[G$];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=joe(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Hoe(e,a.size),o()},{size:i});const s=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}(n),function gHe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function mHe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:P$,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,o=r?Ce(r)?r:r.user:P$,s=i.item&&i.item.cursor||null;return r&&o===r.user&&s==r.item?r:{user:o,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Ce(i)||(r=i.item,i=i.user),L$(e,i&&i!==P$?i:r||i),r},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function VA(e,t){return Ae(e._signals,t)?e._signals[t]:ee("Unrecognized signal name: "+me(t))}function qoe(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function Yoe(e,t,n,i){let r=qoe(n,i);return r||(r=$$(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Koe(e,t,n){const i=qoe(t,n);return i&&t._targets.remove(i),e}ye(Woe,sm,{evaluate(e,t,n){var i=this;return vi(function*(){if(yield sm.prototype.evaluate.call(i,e,t),i._redraw||i._resize)try{i._renderer&&(i._resize&&(i._resize=0,function bHe(e){var t=$A(e),n=Noe(e),i=Ooe(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}(i)),yield i._renderer.renderAsync(i._scenegraph.root)),i._redraw=!1}catch(r){i.error(r)}return n&&UD(i,n),i})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&Moe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=VA(this,e);return 1===arguments.length?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",$oe(e)):$oe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(fS(e)||ee("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(sm.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(VA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function ZHe(e,t,n,i,r,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(Boe,n,Voe),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal(Uoe,i,Voe),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)},addEventListener(e,t,n){let i=t;return n&&!1===n.trap||(i=$$(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var r,o,n=this._handler.handlers(e),i=n.length;--i>=0;)if(r=n[i].handler,e===(o=n[i].type)&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Yoe(this,e,VA(this,e),t)},removeSignalListener(e,t){return Koe(this,VA(this,e),t)},addDataListener(e,t){return Yoe(this,e,PA(this,e).values,t)},removeDataListener(e,t){return Koe(this,PA(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=L$(this,null);this._globalCursor=!!e,t&&L$(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function rze(e,t){this._timers.push(function hHe(e,t,n){var i=new XS,r=t;return null==t?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=null==a?zL():+a,i._restart(function l(u){u+=r,i._restart(l,r+=s,a),o(u)},s,a)},i.restart(e,t,n),i)}(function n(i){e({timestamp:Date.now(),elapsed:i})},t))},events:function xHe(e,t,n){var s,i=this,r=new GD(n),o=function(u,c){i.runAsync(null,()=>{"view"===e&&function THe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[t]:r?!r[t]:e.preventDefault()))}(i,t)&&u.preventDefault(),r.receive(function wHe(e,t,n){var o,a,i=e._renderer,r=i&&i.canvas();return r&&(a=$A(e),(o=ZC(t.changedTouches?t.changedTouches[0]:t,r))[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function EHe(e,t,n){const i=t?"group"===t.mark.marktype?t:t.mark.group:null;function r(s){var l,a=i;if(s)for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Ce(s)&&(s=r(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:br(e),item:br(t||{}),group:r,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}(e,n,o),t}(i,u,c))})};if("timer"===e)BA(i,"timer",t)&&i.timer(o,t);else if("view"===e)BA(i,"view",t)&&i.addEventListener(t,o,SHe);else if("window"===e?BA(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&BA(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),s){for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Ioe(i,s,t,o)}else i.warn("Can not resolve event source: "+e);return r},finalize:function NHe(){var r,o,s,e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=(s=i[r]).sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)this._handler.off(n[r].type,n[r].handler);return this},hover:function MHe(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","pointerover",Roe),Foe,Poe(e)),this.on(this.events("view","pointerout",Roe),Foe,Poe(t)),this},data:function _He(e,t){return arguments.length<2?PA(this,e).values.value:LA.call(this,e,Wf().remove(Is).insert(t))},change:LA,insert:function yHe(e,t){return LA.call(this,e,Wf().insert(t))},remove:function vHe(e,t){return LA.call(this,e,Wf().remove(t))},scale:function QHe(e){var t=this._runtime.scales;return Ae(t,e)||ee("Unrecognized scale or projection: "+e),t[e].value},initialize:function zHe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=fS(i);e=n._el=e?B$(n,e,!0):null,function pHe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Moe(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+i);const s=o.handler||k1,a=e?o.renderer:o.headless;return n._renderer=a?Loe(n,n._renderer,e,a):null,n._handler=function HHe(e,t,n,i){const r=new i(e.loader(),$$(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,$A(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}(n,n._handler,e,s),n._redraw=!0,e&&"none"!==r&&(t=t?n._elBind=B$(n,t,!0):e.appendChild(ls("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&"container"!==r&&(l.element=B$(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{RHe(n,l.element||t,l)})),n},toImageURL:function WHe(e,t){return j$.apply(this,arguments)},toCanvas:function YHe(e,t){return H$.apply(this,arguments)},toSVG:function KHe(e){return z$.apply(this,arguments)},getState:function eze(e){return this._runtime.getState(e||{data:tze,signals:nze,recurse:!0})},setState:function ize(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this},_watchPixelRatio:function lze(){if("canvas"===this.renderer()&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}});const uze="view",jA="[",HA="]",Xoe="{",Qoe="}",cze=":",Joe=",",dze="@",fze=">",hze=/[[\]{}]/,pze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Zoe,ese;function Sd(e,t,n){return Zoe=t||uze,ese=n||pze,tse(e.trim()).map(W$)}function Tv(e,t,n,i,r){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;r&&r.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return t}function tse(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Tv(e,r,Joe,jA+Xoe,HA+Qoe),t.push(e.substring(i,r).trim()),i=++r;if(0===t.length)throw"Empty event selector: "+e;return t}function W$(e){return"["===e[0]?function mze(e){const t=e.length;let i,n=1;if(n=Tv(e,n,HA,jA,HA),n===t)throw"Empty between selector: "+e;if(i=tse(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if((e=e.slice(n+1).trim())[0]!==fze)throw"Expected '>' after between selector: "+e;i=i.map(W$);const r=W$(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}(e):function _ze(e){const t={source:Zoe},n=[];let l,u,i=[0,0],r=0,o=0,s=e.length,a=0;if(e[s-1]===Qoe){if(a=e.lastIndexOf(Xoe),!(a>=0))throw"Unmatched right brace: "+e;try{i=function yze(e){const t=e.split(Joe);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!=i)throw e;return i})}(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}s=(e=e.slice(0,a).trim()).length,a=0}if(!s)throw e;if(e[0]===dze&&(r=++a),l=Tv(e,a,cze),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Tv(e,a,jA),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Tv(e,a,HA),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==jA)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||hze.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):function gze(e){return ese[e]}(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=u&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}(e)}function vze(e){return Ee(e)?e:{type:e||"pad"}}const xv=e=>+e||0,bze=e=>({top:e,bottom:e,left:e,right:e});function wze(e){return Ee(e)?e.signal?e:{top:xv(e.top),bottom:xv(e.bottom),left:xv(e.left),right:xv(e.right)}:bze(xv(e))}const Ri=e=>Ee(e)&&!te(e)?ut({},e):{value:e};function nse(e,t,n,i){return null!=n?(Ee(n)&&!te(n)||te(n)&&n.length&&Ee(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function ir(e,t,n){for(const i in t)nse(e,i,t[i]);for(const i in n)nse(e,i,n[i],"update")}function qm(e,t,n){for(const i in t)n&&Ae(n,i)||(e[i]=ut(e[i]||{},t[i]));return e}function Ym(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const q$="mark",Y$="frame",K$="scope",Eze="axis",Dze="axis-domain",Cze="axis-grid",Sze="axis-label",Aze="axis-tick",Tze="axis-title",xze="legend",Mze="legend-band",Nze="legend-entry",Oze="legend-gradient",ise="legend-label",kze="legend-symbol",Ize="legend-title",Rze="title",Fze="title-text",Pze="title-subtitle";function X$(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const rse=e=>Ce(e)?me(e):e.signal?`(${e.signal})`:ose(e);function zA(e){if(null!=e.gradient)return function Bze(e){const t=[e.start,e.stop,e.count].map(n=>null==n?null:me(n));for(;t.length&&null==St(t);)t.pop();return t.unshift(rse(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function $ze(e){return e.c?GA("hcl",e.h,e.c,e.l):e.h||e.s?GA("hsl",e.h,e.s,e.l):e.l||e.a?GA("lab",e.l,e.a,e.b):e.r||e.g||e.b?GA("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?ose(e.field):void 0!==e.value?me(e.value):void 0;return null!=e.scale&&(t=function Uze(e,t){const n=rse(e.scale);return null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+WA(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0")),t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${WA(e.exponent)})`),null!=e.mult&&(t+=`*${WA(e.mult)}`),null!=e.offset&&(t+=`+${WA(e.offset)}`),e.round&&(t=`round(${t})`),t}const GA=(e,t,n,i)=>`(${e}(${[t,n,i].map(zA).join(",")})+'')`;function WA(e){return Ee(e)?"("+zA(e)+")":e}function ose(e){return sse(Ee(e)?e:{datum:e})}function sse(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ee("Invalid field reference: "+me(e));return e.signal||(i=Ce(i)?gl(i).map(me).join("]["):sse(i)),t+"["+i+"]"}function ase(e,t,n,i,r,o){const s={};(o=o||{}).encoders={$encode:s},e=function Lze(e,t,n,i,r){const o={},s={};let a,l,u,c;for(l in l="lineBreak","text"===t&&null!=r[l]&&!Ym(l,e)&&X$(o,l,r[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===Y$?r.group:n===q$?ut({},r.mark,r[t]):null,c)u=Ym(l,e)||("fill"===l||"stroke"===l)&&(Ym("fill",e)||Ym("stroke",e)),u||X$(o,l,c[l]);for(l in De(i).forEach(d=>{const f=r.style&&r.style[d];for(const h in f)Ym(h,e)||X$(o,h,f[h])}),e=ut({},e),o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=ut(s,e.enter),a&&(e.update=ut(a,e.update)),e}(e,t,n,i,r.config);for(const a in e)s[a]=jze(e[a],t,o,r);return o}function jze(e,t,n,i){const r={},o={};for(const s in e)null!=e[s]&&(r[s]=zze(Hze(e[s]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function Hze(e){return te(e)?function Vze(e){let t="";return e.forEach(n=>{const i=zA(n);t+=n.test?`(${n.test})?${i}:`:i}),":"===St(t)&&(t+="null"),t}(e):zA(e)}function zze(e,t,n,i){const r=Ul(e,t);return r.$fields.forEach(o=>i[o]=1),ut(n,r.$params),r.$expr}const Gze="outer",Wze=["value","update","init","react","bind"];function lse(e,t){ee(e+' for "outer" push: '+me(t))}function use(e,t){const n=e.name;if(e.push===Gze)t.signals[n]||lse("No prior signal definition",n),Wze.forEach(i=>{void 0!==e[i]&&lse("Invalid property ",i)});else{const i=t.addSignal(n,e.value);!1===e.react&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Q$(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function qA(e,t,n,i){return new Q$(e,t,n,i)}function YA(e,t){return qA("operator",e,t)}function Ue(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Mv(e,t){return t?{$field:e,$name:t}:{$field:e}}const J$=Mv("key");function cse(e,t){return{$compare:e,$order:t}}const Kze="descending";function KA(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Z$="scope",e5="view";function Ai(e){return e&&e.signal}function XA(e){if(Ai(e))return!0;if(Ee(e))for(const t in e)if(XA(e[t]))return!0;return!1}function Ia(e,t){return e??t}function xh(e){return e&&e.signal||e}const dse="timer";function Nv(e,t){return(e.merge?Zze:e.stream?eGe:e.type?tGe:ee("Invalid stream specification: "+me(e)))(e,t)}function Zze(e,t){const i=t5({merge:e.merge.map(r=>Nv(r,t))},e,t);return t.addStream(i).id}function eGe(e,t){const i=t5({stream:Nv(e.stream,t)},e,t);return t.addStream(i).id}function tGe(e,t){let n;e.type===dse?(n=t.event(dse,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function Jze(e){return e===Z$?e5:e||e5}(e.source),e.type);const i=t5({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function t5(e,t,n){let i=t.between;return i&&(2!==i.length&&ee('Stream "between" parameter must have 2 entries: '+me(t)),e.between=[Nv(i[0],n),Nv(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(function nGe(e,t,n){const i="event.item";return i+(e&&"*"!==e?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===Z$&&i.push("inScope(event.item)"),i.length&&(e.filter=Ul("("+i.join(")&&(")+")",n).$expr),null!=(i=t.throttle)&&(e.throttle=+i),null!=(i=t.debounce)&&(e.debounce=+i),t.consume&&(e.consume=!0),e}const iGe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function sGe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const en=e=>(t,n,i)=>qA(e,n,t||void 0,i),fse=en("aggregate"),lGe=en("axisticks"),hse=en("bound"),Ra=en("collect"),pse=en("compare"),uGe=en("datajoin"),gse=en("encode"),cGe=en("expression"),dGe=en("facet"),fGe=en("field"),hGe=en("key"),pGe=en("legendentries"),gGe=en("load"),mGe=en("mark"),_Ge=en("multiextent"),yGe=en("multivalues"),vGe=en("overlap"),bGe=en("params"),mse=en("prefacet"),wGe=en("projection"),EGe=en("proxy"),DGe=en("relay"),_se=en("render"),CGe=en("scale"),Mh=en("sieve"),SGe=en("sortitems"),yse=en("viewlayout"),AGe=en("values");let TGe=0;const vse={min:"min",max:"max",count:"sum"};function MGe(e,t){const n=t.getScale(e.name).params;let i;for(i in n.domain=bse(e.domain,e,t),null!=e.range&&(n.range=Ese(e,t,n)),null!=e.interpolate&&function BGe(e,t){t.interpolate=zs(e.type||e),null!=e.gamma&&(t.interpolateGamma=zs(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function $Ge(e,t){return e.signal?t.signalRef(e.signal):Ee(e)?{interval:zs(e.interval),step:zs(e.step)}:zs(e)}(e.nice,t)),null!=e.bins&&(n.bins=function LGe(e,t){return e.signal||te(e)?QA(e,t):t.objectProperty(e)}(e.bins,t)),e)Ae(n,i)||"name"===i||(n[i]=zs(e[i],t))}function zs(e,t){return Ee(e)?e.signal?t.signalRef(e.signal):ee("Unsupported object: "+me(e)):e}function QA(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>zs(n,t))}function JA(e){ee("Can not find data set: "+me(e))}function bse(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(te(e)?NGe:e.fields?kGe:OGe)(e,t,n);(null!=t.domainMin||null!=t.domainMax)&&ee("No scale domain defined for domainMin/domainMax to override.")}function NGe(e,t,n){return e.map(i=>zs(i,n))}function OGe(e,t,n){const i=n.getData(e.data);return i||JA(e.data),_m(t.type)?i.valuesRef(n,e.field,wse(e.sort,!1)):_Z(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function kGe(e,t,n){const i=e.data,r=e.fields.reduce((o,s)=>(s=Ce(s)?{data:i,field:s}:te(s)||s.signal?function IGe(e,t){const n="_:vega:_"+TGe++,i=Ra({});if(te(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+me(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Mh({})]),{data:n,field:"data"}}(s,n):s,o.push(s),o),[]);return(_m(t.type)?RGe:_Z(t.type)?FGe:PGe)(e,n,r)}function RGe(e,t,n){const i=wse(e.sort,!0);let r,o;const s=n.map(u=>{const c=t.getData(u.data);return c||JA(u.data),c.countsRef(t,u.field,i)}),a={groupby:J$,pulse:s};i&&(r=i.op||"count",o=i.field?KA(r,i.field):"count",a.ops=[vse[r]],a.fields=[t.fieldRef(o)],a.as=[o]),r=t.add(fse(a));const l=t.add(Ra({pulse:Ue(r)}));return o=t.add(AGe({field:J$,sort:t.sortRef(i),pulse:Ue(l)})),Ue(o)}function wse(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!vse[e.op]&&ee("Multiple domain scales can not be sorted using "+e.op):ee("No field provided for sort aggregate op: "+e.op):Ee(e)?e.field="key":e={field:"key"}),e}function FGe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||JA(r.data),o.domainRef(t,r.field)});return Ue(t.add(yGe({values:i})))}function PGe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||JA(r.data),o.extentRef(t,r.field)});return Ue(t.add(_Ge({extents:i})))}function Ese(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Ce(r)){if(i&&Ae(i,r))return Ese(e=ut({},e,{range:i[r]}),t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=_m(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ee("Unrecognized scale range value: "+me(r))}else{if(r.scheme)return n.scheme=te(r.scheme)?QA(r.scheme,t):zs(r.scheme,t),r.extent&&(n.schemeExtent=QA(r.extent,t)),void(r.count&&(n.schemeCount=zs(r.count,t)));if(r.step)return void(n.rangeStep=zs(r.step,t));if(_m(e.type)&&!te(r))return bse(r,e,t);te(r)||ee("Unsupported range type: "+me(r))}return r.map(o=>(te(o)?QA:zs)(o,t))}function n5(e,t,n){return te(e)?e.map(i=>n5(i,t,n)):Ee(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:ee("Unsupported parameter object: "+me(e)):e}const Fa="top",Km="left",Xm="right",Ad="bottom",VGe="vertical",jGe="start",zGe="end",i5="index",r5="label",GGe="offset",Qm="perc",WGe="perc2",Gs="value",Ov="guide-label",o5="guide-title",qGe="group-title",YGe="group-subtitle",Cse="symbol",ZA="gradient",s5="discrete",a5="size",l5=[a5,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],kv={name:1,style:1,interactive:1},Mt={value:0},Ws={value:1},eT="group",Sse="rect",u5="rule",KGe="symbol",Nh="text";function Iv(e){return e.type=eT,e.interactive=e.interactive||!1,e}function xo(e,t){const n=(i,r)=>Ia(e[i],Ia(t[i],r));return n.isVertical=i=>VGe===Ia(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ia(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ia(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ia(e.columns,Ia(t.columns,+n.isVertical(!0))),n}function Ase(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function tT(e,t,n){return`item.anchor === '${jGe}' ? ${e} : item.anchor === '${zGe}' ? ${t} : ${n}`}const c5=tT(me(Km),me(Xm),me("center"));function Tse(e,t){return t?e?Ee(e)?Object.assign({},e,{offset:Tse(e.offset,t)}):{value:e,offset:t}:t:e}function us(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=qm(e.encode,t,kv)):e.interactive=!1,e}function JGe(e,t,n,i){const r=xo(e,n),o=r.isVertical(),s=r.gradientThickness(),a=r.gradientLength();let l,u,c,d,f;o?(u=[0,1],c=[0,0],d=s,f=a):(u=[0,0],c=[1,0],d=a,f=s);const h={enter:l={opacity:Mt,x:Mt,y:Mt,width:Ri(d),height:Ri(f)},update:ut({},l,{opacity:Ws,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Mt}};return ir(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),us({type:Sse,role:Oze,encode:h},i)}function ZGe(e,t,n,i,r){const o=xo(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,d,f,h="";s?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:Mt,fill:{scale:t,field:Gs}};p[u]={signal:h+"datum."+Qm,mult:l},p[c]=Mt,p[d]={signal:h+"datum."+WGe,mult:l},p[f]=Ri(a);const g={enter:p,update:ut({},p,{opacity:Ws}),exit:{opacity:Mt}};return ir(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),us({type:Sse,role:Mze,key:Gs,from:r,encode:g},i)}const eWe=`datum.${Qm}<=0?"${Km}":datum.${Qm}>=1?"${Xm}":"center"`,tWe=`datum.${Qm}<=0?"${Ad}":datum.${Qm}>=1?"${Fa}":"middle"`;function xse(e,t,n,i){const r=xo(e,t),o=r.isVertical(),s=Ri(r.gradientThickness()),a=r.gradientLength();let u,c,d,f,l=r("labelOverlap"),h="";const p={enter:u={opacity:Mt},update:c={opacity:Ws,text:{field:r5}},exit:{opacity:Mt}};return ir(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Ia(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:tWe},d="y",f="x",h="1-"):(u.align=c.align={signal:eWe},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+Qm,mult:a},u[f]=c[f]=s,s.offset=Ia(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+i5}:void 0,us({type:Nh,role:ise,style:Ov,key:Gs,from:i,encode:p,overlap:l},n)}function nWe(e,t,n,i,r){const o=xo(e,t),s=n.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},f=`(${r}) ? datum.${GGe} : datum.${a5}`,h=u?Ri(u):{field:a5},p=`datum.${i5}`,g=`max(1, ${r})`;let m,_,y,v,b;h.mult=.5,m={enter:_={opacity:Mt,x:{signal:f,mult:.5,offset:c},y:h},update:y={opacity:Ws,x:_.x,y:_.y},exit:{opacity:Mt}};let w=null,D=null;e.fill||(w=t.symbolBaseFillColor,D=t.symbolBaseStrokeColor),ir(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",D),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),l5.forEach(k=>{e[k]&&(y[k]=_[k]={scale:e[k],field:Gs})});const E=us({type:KGe,role:kze,key:Gs,from:d,clip:!!u||void 0,encode:m},n.symbols),S=Ri(c);S.offset=o("labelOffset"),m={enter:_={opacity:Mt,x:{signal:f,offset:S},y:h},update:y={opacity:Ws,text:{field:r5},x:_.x,y:_.y},exit:{opacity:Mt}},ir(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const M=us({type:Nh,role:ise,style:Ov,key:Gs,from:d,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Mt,height:u?Ri(u):Mt,opacity:Mt},exit:{opacity:Mt},update:y={opacity:Ws,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,y.row.signal=`${p}%${v}`,y.column.signal=`floor(${p} / ${v})`,b={field:["row",p]}):(y.row.signal=`floor(${p} / ${g})`,y.column.signal=`${p} % ${g}`,b={field:p}),y.column.signal=`(${r})?${y.column.signal}:${p}`,Iv({role:K$,from:i={facet:{data:i,name:"value",groupby:i5}},encode:qm(m,s,kv),marks:[E,M],name:l,interactive:a,sort:b})}const d5='item.orient === "left"',f5='item.orient === "right"',nT=`(${d5} || ${f5})`,rWe=`datum.vgrad && ${nT}`,oWe=tT('"top"','"bottom"','"middle"'),aWe=`datum.vgrad && ${f5} ? (${tT('"right"','"left"','"center"')}) : (${nT} && !(datum.vgrad && ${d5})) ? "left" : ${c5}`,lWe=`item._anchor || (${nT} ? "middle" : "start")`,uWe=`${rWe} ? (${d5} ? -90 : 90) : 0`,cWe=`${nT} ? (datum.vgrad ? (${f5} ? "bottom" : "top") : ${oWe}) : "top"`;function fWe(e,t){let n;return Ee(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Mse(e.path)+")":e.sphere&&(n="geoShape("+Mse(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Mse(e){return Ee(e)&&e.signal?e.signal:me(e)}function Nse(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===eT?K$:t||q$}function hWe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Nse(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function pWe(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function h5(e,t){const n=TX(e.type);n||ee("Unrecognized transform type: "+me(e.type));const i=qA(n.type.toLowerCase(),null,Ose(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Ose(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const s=e.params[o];i[s.name]=gWe(s,t,n)}return i}function gWe(e,t,n){const i=e.type,r=t[e.name];return"index"===i?function mWe(e,t,n){return Ce(t.from)||ee('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==r?"param"===i?function _We(e,t,n){const i=t[e.name];return e.array?(te(i)||ee("Expected an array of sub-parameters. Instead: "+me(i)),i.map(r=>Ise(e,r,n))):Ise(e,i,n)}(e,t,n):"projection"===i?n.projectionRef(t[e.name]):e.array&&!Ai(r)?r.map(o=>kse(e,o,n)):kse(e,r,n):void(e.required&&ee("Missing required "+me(t.type)+" parameter: "+me(e.name)))}function kse(e,t,n){const i=e.type;if(Ai(t))return Rse(i)?ee("Expression references can not be signals."):p5(i)?n.fieldRef(t):Fse(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||p5(i);return r&&yWe(t)?n.exprRef(t.expr,t.as):r&&vWe(t)?Mv(t.field,t.as):Rse(i)?Ul(t,n):bWe(i)?Ue(n.getData(t).values):p5(i)?Mv(t):Fse(i)?n.compareRef(t):t}}function Ise(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const a in r.key)if(r.key[a]!==t[a]){r=null;break}if(r)break}r||ee("Unsupported parameter: "+me(t));const o=ut(Ose(r,t,n),r.key);return Ue(n.add(bGe(o)))}const yWe=e=>e&&e.expr,vWe=e=>e&&e.field,bWe=e=>"data"===e,Rse=e=>"expr"===e,p5=e=>"field"===e,Fse=e=>"compare"===e;function iT(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ue(t.getData(e.data).output)}function Oh(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}function Pse(e){return Ce(e)?e:null}function Lse(e,t,n){const i=KA(n.op,n.field);let r;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Rv(e,t,n,i,r,o,s){const a=t[n]||(t[n]={}),l=function Xze(e){return Ee(e)?(e.order===Kze?"-":"+")+KA(e.op,e.field):""}(o);let c,d,u=Pse(r);if(null!=u&&(e=t.scope,u+=l?"|"+l:"",c=a[u]),!c){const f=o?{field:J$,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Ue(t.output)};l&&(f.sort=e.sortRef(o)),d=e.add(qA(i,void 0,f)),s&&(t.index[r]=d),c=Ue(d),null!=u&&(a[u]=c)}return c}function $se(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(YA()),c=Ul("if("+e.trigger+',modify("'+n+'",'+[r,i,o,s,a].map(d=>d??"null").join(",")+"),0)",t);l.update=c.$expr,l.params=c.$params}function rT(e,t){const n=Nse(e),i=e.type===eT,r=e.from&&e.from.facet,o=e.overlap;let a,l,u,c,d,f,h,s=e.layout||n===K$||n===Y$;const p=n===q$||s||r,g=function wWe(e,t,n){let i,r,o,s,a;return e?(i=e.facet)&&(t||ee("Only group marks can be faceted."),null!=i.field?s=a=iT(i,n):(e.data?a=Ue(n.getData(e.data).aggregate):(o=h5(ut({type:"aggregate",groupby:De(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=iT(i,n),s=a=Ue(n.add(o))),r=n.keyRef(i.groupby,!0))):s=Ue(n.add(Ra(null,[{}]))),s||(s=iT(e,n)),{key:r,pulse:s,parent:a}}(e.from,i,t);l=t.add(uGe({key:g.key||(e.key?Mv(e.key):void 0),pulse:g.pulse,clean:!i}));const m=Ue(l);l=u=t.add(Ra({pulse:m})),l=t.add(mGe({markdef:hWe(e),interactive:pWe(e.interactive,t),clip:fWe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ue(l)}));const _=Ue(l);l=c=t.add(gse(ase(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(D=>{const E=h5(D,t),S=E.metadata;(S.generates||S.changes)&&ee("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),E.params.pulse=Ue(l),t.add(l=E)}),e.sort&&(l=t.add(SGe({sort:t.compareRef(e.sort),pulse:Ue(l)})));const y=Ue(l);(r||s)&&(s=t.add(yse({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:y})),f=Ue(s));const v=t.add(hse({mark:_,pulse:f||y}));h=Ue(v),i&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(y,f||h,m),r?function EWe(e,t,n){const i=e.from.facet,r=i.name,o=iT(i,t);let s;i.name||ee("Facet must have a name: "+me(i)),i.data||ee("Facet must reference a data set: "+me(i)),i.field?s=t.add(mse({field:t.fieldRef(i.field),pulse:o})):i.groupby?s=t.add(dGe({key:t.keyRef(i.groupby),group:Ue(t.proxy(n.parent)),pulse:o})):ee("Facet must specify groupby or field: "+me(i));const a=t.fork(),l=a.add(Ra()),u=a.add(Mh({pulse:Ue(l)}));a.addData(r,new Oh(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,g):p?function DWe(e,t,n){const i=t.add(mse({pulse:n.pulse})),r=t.fork();r.add(Mh()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(v))),o&&(h=function CWe(e,t,n){const i=e.method,r=e.bound,o=e.separation,s={separation:Ai(o)?n.signalRef(o.signal):o,method:Ai(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const a=r.tolerance;s.boundTolerance=Ai(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Ue(n.add(vGe(s)))}(o,h,t));const b=t.add(_se({pulse:h})),w=t.add(Mh({pulse:Ue(b)},void 0,t.parent()));null!=e.name&&(d=e.name,t.addData(d,new Oh(t,u,b,w)),e.on&&e.on.forEach(D=>{(D.insert||D.remove||D.toggle)&&ee("Marks only support modify triggers."),$se(D,t,d)}))}function xWe(e,t,n){const i={enter:{},update:{}};return ir(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Bse(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Ase(e,n[0].encode)}Oh.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],s=null,a=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Ue(t[a-1]),e.add(t[a]),"aggregate"===t[a].type&&(s=t[a]);return new Oh(e,o,r,i,s)},Oh.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=Pse(t);let s,a,l;return null!=o&&(e=i.scope,s=r[o]),s?n&&n.field&&Lse(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ue(i.output)},n&&n.field&&Lse(e,l,n),a=e.add(fse(l)),s=e.add(Ra({pulse:Ue(a)})),s={agg:a,ref:Ue(s)},null!=o&&(r[o]=s)),s.ref},tuplesRef(){return Ue(this.values)},extentRef(e,t){return Rv(e,this,"extent","extent",t,!1)},domainRef(e,t){return Rv(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Rv(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Rv(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Rv(e,this,"indata","tupleindex",t,!0,!0)}};const OWe=`item.orient==="${Km}"?-90:item.orient==="${Xm}"?90:0`;function RWe(e,t){const n={enter:{},update:{}};return ir(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:c5},angle:{signal:OWe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),qm(n,t,kv)}function kh(e){const t=Ra({},e);return t.metadata={source:!0},t}function Use(e,t){return gGe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Vse=e=>e===Ad||e===Fa,oT=(e,t,n)=>Ai(e)?jWe(e.signal,t,n):e===Km||e===Fa?t:n,Fi=(e,t,n)=>Ai(e)?UWe(e.signal,t,n):Vse(e)?t:n,Pa=(e,t,n)=>Ai(e)?VWe(e.signal,t,n):Vse(e)?n:t,jse=(e,t,n)=>Ai(e)?HWe(e.signal,t,n):e===Fa?{value:t}:{value:n},BWe=(e,t,n)=>Ai(e)?zWe(e.signal,t,n):e===Xm?{value:t}:{value:n},UWe=(e,t,n)=>Hse(`${e} === '${Fa}' || ${e} === '${Ad}'`,t,n),VWe=(e,t,n)=>Hse(`${e} !== '${Fa}' && ${e} !== '${Ad}'`,t,n),jWe=(e,t,n)=>g5(`${e} === '${Km}' || ${e} === '${Fa}'`,t,n),HWe=(e,t,n)=>g5(`${e} === '${Fa}'`,t,n),zWe=(e,t,n)=>g5(`${e} === '${Xm}'`,t,n),Hse=(e,t,n)=>(t=null!=t?Ri(t):t,n=null!=n?Ri(n):n,zse(t)&&zse(n)?{signal:`${e} ? (${t=t?t.signal||me(t.value):null}) : (${n=n?n.signal||me(n.value):null})`}:[ut({test:e},t)].concat(n||[])),zse=e=>null==e||1===Object.keys(e).length,g5=(e,t,n)=>({signal:`${e} ? (${Jm(t)}) : (${Jm(n)})`}),GWe=(e,t,n,i,r)=>({signal:(null!=i?`${e} === '${Km}' ? (${Jm(i)}) : `:"")+(null!=n?`${e} === '${Ad}' ? (${Jm(n)}) : `:"")+(null!=r?`${e} === '${Xm}' ? (${Jm(r)}) : `:"")+(null!=t?`${e} === '${Fa}' ? (${Jm(t)}) : `:"")+"(null)"}),Jm=e=>Ai(e)?e.signal:null==e?null:me(e),WWe=(e,t)=>0===t?0:Ai(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Zm=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function e_(e,t,n,i){let r;if(t&&Ae(t,e))return t[e];if(Ae(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[o5][r]}if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[Ov][r]}return null}function Gse(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Wse(e,t){return{scale:e.scale,range:t}}function m5(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function tqe(e,t){const n=function qWe(e,t){var a,l,u,n=t.config,i=n.style,r=n.axis,o="band"===t.scaleType(e.scale)&&n.axisBand,s=e.orient;if(Ai(s)){const d=Gse([n.axisX,n.axisY]),f=Gse([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);for(u of(a={},d))a[u]=Fi(s,e_(u,n.axisX,r,i),e_(u,n.axisY,r,i));for(u of(l={},f))l[u]=GWe(s.signal,e_(u,n.axisTop,r,i),e_(u,n.axisBottom,r,i),e_(u,n.axisLeft,r,i),e_(u,n.axisRight,r,i))}else a=s===Fa||s===Ad?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?ut({},r,a,l,o):r}(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,s=r.interactive,a=r.style,l=xo(e,n),u=function QGe(e){const t=e("tickBand");let i,r,n=e("tickOffset");return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ee(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):"extent"===t?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=Ue(t.add(Ra({},[c]))),f=Ue(t.add(lGe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(function KWe(e,t,n,i,r){const o=xo(e,t),s=e.orient,a=e.gridScale,l=oT(s,1,-1),u=function XWe(e,t){if(1!==t)if(Ee(e)){let n=e=ut({},e);for(;null!=n.mult;){if(!Ee(n.mult))return n.mult=Ai(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=ut({},n.mult)}n.mult=t}else e=Ai(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let c,d,f;const h={enter:c={opacity:Mt},update:f={opacity:Ws},exit:d={opacity:Mt}};ir(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Gs,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},g=Fi(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},_=a?{scale:a,range:1,mult:l,offset:u}:ut(g,{mult:l,offset:u});return c.x=f.x=Fi(s,p,m),c.y=f.y=Pa(s,p,m),c.x2=f.x2=Pa(s,_),c.y2=f.y2=Fi(s,_),d.x=Fi(s,p),d.y=Pa(s,p),us({type:u5,role:Cze,key:Gs,from:i,encode:h},n)}(e,n,i.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(function QWe(e,t,n,i,r,o){const s=xo(e,t),a=e.orient,l=oT(a,-1,1);let u,c,d;const f={enter:u={opacity:Mt},update:d={opacity:Ws},exit:c={opacity:Mt}};ir(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Ri(r);h.mult=l;const p={scale:e.scale,field:Gs,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=u.y=Fi(a,Mt,p),d.y2=u.y2=Fi(a,h),c.x=Fi(a,p),d.x=u.x=Pa(a,Mt,p),d.x2=u.x2=Pa(a,h),c.y=Pa(a,p),us({type:u5,role:Aze,key:Gs,from:i,encode:f},n)}(e,n,i.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(function JWe(e,t,n,i,r,o){const s=xo(e,t),a=e.orient,l=e.scale,u=oT(a,-1,1),c=xh(s("labelFlush")),d=xh(s("labelFlushOffset")),f=s("labelAlign"),h=s("labelBaseline");let g,p=0===c||!!c;const m=Ri(r);m.mult=u,m.offset=Ri(s("labelPadding")||0),m.offset.mult=u;const _={scale:l,field:Gs,band:.5,offset:Tse(o.offset,s("labelOffset"))},y=Fi(a,p?m5(l,c,'"left"','"right"','"center"'):{value:"center"},BWe(a,"left","right")),v=Fi(a,jse(a,"bottom","top"),p?m5(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=m5(l,c,`-(${d})`,d,0);p=p&&d;const w={opacity:Mt,x:Fi(a,_,m),y:Pa(a,_,m)},D={enter:w,update:g={opacity:Ws,text:{field:r5},x:w.x,y:w.y,align:y,baseline:v},exit:{opacity:Mt,x:w.x,y:w.y}};ir(D,{dx:!f&&p?Fi(a,b):null,dy:!h&&p?Pa(a,b):null}),ir(D,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:h});const E=s("labelBound");let S=s("labelOverlap");return S=S||E?{separation:s("labelSeparation"),method:S,order:"datum.index",bound:E?{scale:l,orient:a,tolerance:E}:null}:void 0,g.align!==y&&(g.align=Zm(g.align,y)),g.baseline!==v&&(g.baseline=Zm(g.baseline,v)),us({type:Nh,role:Sze,style:Ov,key:Gs,from:i,encode:D,overlap:S},n)}(e,n,i.labels,f,p,u))),c.domain&&h.push(function YWe(e,t,n,i){const r=xo(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Mt},update:a={opacity:Ws},exit:{opacity:Mt}};ir(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=Wse(e,0),c=Wse(e,1);return s.x=a.x=Fi(o,u,Mt),s.x2=a.x2=Fi(o,c),s.y=a.y=Pa(o,u,Mt),s.y2=a.y2=Pa(o,c),us({type:u5,role:Dze,from:i,encode:l},n)}(e,n,i.domain,d)),c.title&&h.push(function ZWe(e,t,n,i){const r=xo(e,t),o=e.orient,s=oT(o,-1,1);let a,l;const u={enter:a={opacity:Mt,anchor:Ri(r("titleAnchor",null)),align:{signal:c5}},update:l=ut({},a,{opacity:Ws,text:Ri(e.title)}),exit:{opacity:Mt}},c={signal:`lerp(range("${e.scale}"), ${tT(0,1,.5)})`};return l.x=Fi(o,c),l.y=Pa(o,c),a.angle=Fi(o,Mt,WWe(s,90)),a.baseline=Fi(o,jse(o,Ad,Fa),{value:Ad}),l.angle=a.angle,l.baseline=a.baseline,ir(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function eqe(e,t,n,i){const r=(a,l)=>null!=a?(n.update[l]=Zm(Ri(a),n.update[l]),!1):!Ym(l,i),o=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===o?Ri(s):Fi(t,Ri(s),Ri(o))}(r,o,u,n),u.update.align=Zm(u.update.align,a.align),u.update.angle=Zm(u.update.angle,a.angle),u.update.baseline=Zm(u.update.baseline,a.baseline),us({type:Nh,role:Tze,style:o5,from:i,encode:u},n)}(e,n,i.title,d)),rT(Iv({role:Eze,from:d,encode:qm(nqe(l,e),r,kv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function nqe(e,t){const n={enter:{},update:{}};return ir(n,{orient:e("orient"),offset:e("offset")||0,position:Ia(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function qse(e,t,n){const i=De(e.signals),r=De(e.scales);return n||i.forEach(o=>use(o,t)),De(e.projections).forEach(o=>function UGe(e,t){const n=t.config.projection||{},i={};for(const r in e)"name"!==r&&(i[r]=n5(e[r],r,t));for(const r in n)null==i[r]&&(i[r]=n5(n[r],r,t));t.addProjection(e.name,i)}(o,t)),r.forEach(o=>function xGe(e,t){const n=e.type||"linear";pZ(n)||ee("Unrecognized scale type: "+me(n)),t.addScale(e.name,{type:n,domain:void 0})}(o,t)),De(e.data).forEach(o=>function LWe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(h5(i,t))}),e.on&&e.on.forEach(i=>{$se(i,t,e.name)}),t.addDataPipeline(e.name,function $We(e,t,n){const i=[];let a,l,u,c,d,r=null,o=!1,s=!1;for(e.values?Ai(e.values)||XA(e.format)?(i.push(Use(t,e)),i.push(r=kh())):i.push(r=kh({$ingest:e.values,$format:e.format})):e.url?XA(e.url)||XA(e.format)?(i.push(Use(t,e)),i.push(r=kh())):i.push(r=kh({$request:e.url,$format:e.format})):e.source&&(r=a=De(e.source).map(f=>Ue(t.getData(f).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=kh()),i.push(c),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?r=c:d.changes&&(r=null);return a&&(u=a.length-1,i[0]=DGe({derive:o,pulse:u?a:a[0]}),(o||u)&&i.splice(1,0,kh())),r||i.push(kh()),i.push(Mh({})),i}(e,t,n))}(o,t)),r.forEach(o=>MGe(o,t)),(n||i).forEach(o=>function aGe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ee("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Ul(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>function rGe(e,t,n){const i=e.encode,r={target:n};let o=e.events,s=e.update,a=[];o||ee("Signal update missing events specification."),Ce(o)&&(o=Sd(o,t.isSubscope()?Z$:e5)),o=De(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[sGe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=i&&(s&&ee("Signal encode and update are mutually exclusive."),s="encode(item(),"+me(i)+")"),r.update=Ce(s)?Ul(s,t):null!=s.expr?Ul(s.expr,t):null!=s.value?s.value:null!=s.signal?{$expr:iGe,$params:{$value:t.signalRef(s.signal)}}:ee("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(l=>t.addUpdate(ut(function oGe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Nv(e,t)}}(l,t),r)))}(r,t,n.id))}(o,t)),De(e.axes).forEach(o=>tqe(o,t)),De(e.marks).forEach(o=>rT(o,t)),De(e.legends).forEach(o=>function SWe(e,t){const n=t.config.legend,i=e.encode||{},r=xo(e,n),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let d,f,h,c=0;l5.forEach(v=>e[v]?(u[v]=e[v],c=c||e[v]):0),c||ee("Missing valid scale for legend.");const p=function AWe(e,t){let n=e.type||Cse;return!e.type&&1===function TWe(e){return l5.reduce((t,n)=>t+(e[n]?1:0),0)}(e)&&(e.fill||e.stroke)&&(n=GF(t)?ZA:WF(t)?s5:Cse),n!==ZA?n:WF(t)?s5:ZA}(e,t.scaleType(c)),g={title:null!=e.title,scales:u,type:p,vgrad:"symbol"!==p&&r.isVertical()},m=Ue(t.add(Ra(null,[g]))),y=Ue(t.add(pGe(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===ZA?(h=[JGe(e,c,n,i.gradient),xse(e,n,i.labels,y)],f.count=f.count||t.signalRef(`max(2,2*floor((${xh(r.gradientLength())})/100))`)):p===s5?h=[ZGe(e,c,n,i.gradient,y),xse(e,n,i.labels,y)]:(d=function iWe(e,t){const n=xo(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),h=[nWe(e,n,i,y,xh(d.columns))],f.size=function MWe(e,t,n){const i=xh(Bse("size",e,n)),r=xh(Bse("strokeWidth",e,n)),o=xh(function NWe(e,t,n){return Ase("fontSize",e)||function XGe(e,t,n){const i=t.config.style[n];return i&&i[e]}("fontSize",t,n)}(n[1].encode,t,Ov));return Ul(`max(ceil(sqrt(${i})+${r}),${o})`,t)}(e,t,h[0].marks)),h=[Iv({role:Nze,from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:d,interactive:a})],g.title&&h.push(function dWe(e,t,n,i){const r=xo(e,t),o={enter:{opacity:Mt},update:{opacity:Ws,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Mt}};return ir(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:lWe},angle:{signal:uWe},align:{signal:aWe},baseline:{signal:cWe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),us({type:Nh,role:Ize,style:o5,from:i,encode:o},n)}(e,n,i.title,m)),rT(Iv({role:xze,from:m,encode:qm(xWe(r,e,n),o,kv),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:a,style:l}),t)}(o,t)),e.title&&function kWe(e,t){const n=xo(e=Ce(e)?{text:e}:e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,s=r.interactive,a=r.style,l=[],c=Ue(t.add(Ra(null,[{}])));return l.push(function FWe(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ir(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),us({type:Nh,role:Fze,style:qGe,from:i,encode:s},n)}(e,n,function IWe(e){const t=e.encode;return t&&t.title||ut({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&l.push(function PWe(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ir(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),us({type:Nh,role:Pze,style:YGe,from:i,encode:s},n)}(e,n,i.subtitle,c)),rT(Iv({role:Rze,from:c,encode:RWe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}(e.title,t),t.parseLambdas(),t}const iqe=e=>qm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Fv(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Yse(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Kse(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function _5(e){return(te(e)?sqe:aqe)(e)}function sqe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ee(r)?r.signal||_5(r):me(r))}return n+"]"}function aqe(e){let i,r,t="{",n=0;for(i in e)r=e[i],t+=(++n>1?",":"")+me(i)+":"+(Ee(r)?r.signal||_5(r):me(r));return t+"}"}function uqe(e,t,n){return Ee(e)||ee("Input Vega specification must be an object."),function rqe(e,t){const n=t.config,i=Ue(t.root=t.add(YA())),r=function oqe(e,t){const n=s=>Ia(e[s],t[s]),i=[Fv("background",n("background")),Fv("autosize",vze(n("autosize"))),Fv("padding",wze(n("padding"))),Fv("width",n("width")||0),Fv("height",n("height")||0)],r=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return De(e.signals).forEach(s=>{Ae(r,s.name)?s=ut(r[s.name],s):i.push(s),o[s.name]=s}),De(t.signals).forEach(s=>{!Ae(o,s.name)&&!Ae(r,s.name)&&i.push(s)}),i}(e,n);r.forEach(u=>use(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ra()),s=t.add(gse(ase(iqe(e.encode),eT,Y$,e.style,t,{pulse:Ue(o)}))),a=t.add(yse({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ue(s)}));t.operators.pop(),t.pushState(Ue(s),Ue(a),null),qse(e,t,r),t.operators.push(a);let l=t.add(hse({mark:i,pulse:Ue(a)}));return l=t.add(_se({pulse:Ue(l)})),l=t.add(Mh({pulse:Ue(l)})),t.addData("root",new Oh(t,o,o,l)),t}(e,new Yse(t=zg(function lqe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}Yse.prototype=Kse.prototype={parse(e){return qse(e,this)},fork(){return new Kse(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Q$?Ue(e):e;return this.add(EGe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let s,a;i&&(s=i.data||(i.data={}),a=s[r]||(s[r]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ue(this.add(Mh({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ue(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return St(this._parent)},encode(){return St(this._encode)},lookup(){return St(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ce(e))return Mv(e,t);e.signal||ee("Unsupported field reference: "+me(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ue(this.add(fGe(r)))}return i},compareRef(e){let t=!1;const n=o=>Ai(o)?(t=!0,this.signalRef(o.signal)):function Qze(e){return e&&e.expr}(o)?(t=!0,this.exprRef(o.expr)):o,i=De(e.field).map(n),r=De(e.order).map(n);return t?Ue(this.add(pse({fields:i,orders:r}))):cse(i,r)},keyRef(e,t){let n=!1;const r=this.signals;return e=De(e).map(o=>Ai(o)?(n=!0,Ue(r[o.signal])):o),n?Ue(this.add(hGe({fields:e,flat:t}))):function qze(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=KA(e.op,e.field),n=e.order||"ascending";return n.signal?Ue(this.add(pse({fields:t,orders:this.signalRef(n.signal)}))):cse(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ae(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ee("Duplicate signal name: "+me(e));const n=t instanceof Q$?t:this.add(YA(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ee("Unrecognized signal name: "+me(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ue(this.signals[e]):(Ae(this.lambdas,e)||(this.lambdas[e]=this.add(YA(null))),Ue(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Ul(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&Ee(e)?this.signalRef(e.signal||_5(e)):e},exprRef(e,t){const n={expr:Ul(e,this)};return t&&(n.expr.$name=t),Ue(this.add(cGe(n)))},addBinding(e,t){this.bindings||ee("Nested signals do not support binding: "+me(e)),this.bindings.push(ut({signal:e},t))},addScaleProj(e,t){Ae(this.scales,e)&&ee("Duplicate scale or projection name: "+me(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,CGe(t))},addProjection(e,t){this.addScaleProj(e,wGe(t))},getScale(e){return this.scales[e]||ee("Unrecognized scale name: "+me(e)),this.scales[e]},scaleRef(e){return Ue(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ae(this.data,e)&&ee("Duplicate data set name: "+me(e)),this.data[e]=t},getData(e){return this.data[e]||ee("Undefined data set name: "+me(e)),this.data[e]},addDataPipeline(e,t){return Ae(this.data,e)&&ee("Duplicate data set name: "+me(e)),this.addData(e,Oh.fromEntries(this,t))}};var cqe="5.30.0";ut(am,ef,dc,bp,fc,wp,tf,Ui,Y_,nf,Fo,ou);var fqe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},hqe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},pqe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const gqe=Array.prototype.slice,Ih=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,gqe.call(t,1))};var _qe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,i,r,o,s)=>new Date(e,t||0,n??1,i||0,r||0,o||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ih("join",arguments)},indexof:function(){return Ih("indexOf",arguments)},lastindexof:function(){return Ih("lastIndexOf",arguments)},slice:function(){return Ih("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ih("substring",arguments,String)},split:function(){return Ih("split",arguments,String)},replace:function(){return Ih("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const yqe=["view","item","group","xy","x","y"],y5=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&y5.add(setImmediate);const vqe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:fqe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),!y5.has(i[r]))return i[r];console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||_qe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>hqe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>pqe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,y5.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function Pv(e,t,n,i,r,o){const s=a=>vqe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=o,yqe.forEach(a=>s.fn[a]=function(){return r.vega[a](...arguments)}),s(e)}var bqe={operator(e,t){const n=t.ast,i=e.functions;return r=>Pv(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>Pv(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>Pv(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>Pv(n,i,r,o.item&&o.item.datum,o)},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o="group"===n||"image"===n||"rect"===n;return(s,a)=>{const l=s.datum;let c,u=0;for(const d in i)c=Pv(i[d].ast,r,a,l,void 0,s),s[d]!==c&&(s[d]=c,u=1);return"rule"!==n&&function dqe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(s,i,o),u}}};function v5(e){return ue(e,"or")}function b5(e){return ue(e,"and")}function w5(e){return ue(e,"not")}function sT(e,t){if(w5(e))sT(e.not,t);else if(b5(e))for(const n of e.and)sT(n,t);else if(v5(e))for(const n of e.or)sT(n,t);else t(e)}function t_(e,t){return w5(e)?{not:t_(e.not,t)}:b5(e)?{and:e.and.map(n=>t_(n,t))}:v5(e)?{or:e.or.map(n=>t_(n,t))}:t(e)}const Ze=structuredClone;function Xse(e){throw new Error(e)}function n_(e,t){const n={};for(const i of t)Ae(e,i)&&(n[i]=e[i]);return n}function Mo(e,t){const n={...e};for(const i of t)delete n[i];return n}function bt(e){if(Ft(e))return e;const t=Ce(e)?e:nn(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return n}function E5(e){return!1===e||null===e}function mt(e,t){return e.includes(t)}function i_(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function D5(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Qse(e,...t){for(const n of t)Eqe(e,n??{});return e}function Eqe(e,t){for(const n of oe(t))Gg(e,n,t[n],!0)}function Vl(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function Dqe(e,t){const n=oe(e),i=oe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Jse(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function C5(e,t){for(const n of e)if(t.has(n))return!0;return!1}function S5(e){const t=new Set;for(const n of e){const r=gl(n).map((s,a)=>0===a?s:`[${s}]`),o=r.map((s,a)=>r.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function A5(e,t){return void 0===e||void 0===t||C5(S5(e),S5(t))}function tn(e){return 0===oe(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>nn(e)).join(",")})`};const oe=Object.keys,rr=Object.values,Td=Object.entries;function Lv(e){return!0===e||!1===e}function xn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function $v(e,t){return w5(e)?`!(${$v(e.not,t)})`:b5(e)?`(${e.and.map(n=>$v(n,t)).join(") && (")})`:v5(e)?`(${e.or.map(n=>$v(n,t)).join(") || (")})`:t(e)}function aT(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&aT(e[n],t)&&delete e[n],tn(e)}function Bv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function T5(e,t="datum"){const n=gl(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(me).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function Zse(e,t="datum"){return`${t}[${me(gl(e).join("."))}]`}function Cqe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function qs(e){return`${gl(e).map(Cqe).join("\\.")}`}function Rh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function r_(e){return`${gl(e).join(".")}`}function o_(e){return e?gl(e).length:0}function Zn(...e){return e.find(t=>void 0!==t)}let eae=42;function tae(e){const t=++eae;return e?String(e)+t:t}function Sqe(){eae=42}function nae(e){return iae(e)?e:`__${e}`}function iae(e){return e.startsWith("__")}function Uv(e){if(void 0!==e)return(e%360+360)%360}function lT(e){return!!Ft(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const rae=Object.getPrototypeOf(structuredClone({}));function cs(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;0!=i--;)if(!cs(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!cs(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;0!=i--;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==rae.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==rae.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!=i--;){const o=r[i];if(!cs(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}function nn(e){const t=[];return function n(i){if(i&&i.toJSON&&"function"==typeof i.toJSON&&(i=i.toJSON()),void 0===i)return;if("number"==typeof i)return isFinite(i)?""+i:"null";if("object"!=typeof i)return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=n(i[r])||"null";return o+"]"}if(null===i)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,a=Object.keys(i).sort();for(o="",r=0;r<a.length;r++){const l=a[r],u=n(i[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function ue(e,t){return Ee(e)&&Ae(e,t)&&void 0!==e[t]}const zu="row",Gu="column",uT="facet",Mn="x",Pi="y",La="x2",jl="y2",xd="xOffset",s_="yOffset",$a="radius",Wu="radius2",Ys="theta",qu="theta2",Ba="latitude",Ua="longitude",Va="latitude2",Ks="longitude2",No="color",Hl="fill",zl="stroke",Oo="shape",Yu="size",Fh="angle",Ku="opacity",Md="fillOpacity",Nd="strokeOpacity",Od="strokeWidth",kd="strokeDash",Vv="text",a_="order",jv="detail",cT="key",Ph="tooltip",dT="href",fT="url",hT="description",oae={theta:1,theta2:1,radius:1,radius2:1};function sae(e){return Ae(oae,e)}const x5={longitude:1,longitude2:1,latitude:1,latitude2:1};function aae(e){switch(e){case Ba:return"y";case Va:return"y2";case Ua:return"x";case Ks:return"x2"}}function lae(e){return Ae(x5,e)}const Tqe=oe(x5),M5={x:1,y:1,x2:1,y2:1,...oae,...x5,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function l_(e){return e===No||e===Hl||e===zl}const uae={row:1,column:1,facet:1},Xs=oe(uae),N5={...M5,...uae},xqe=oe(N5),{order:p1t,detail:g1t,tooltip:m1t,...cae}=N5,{row:_1t,column:y1t,facet:v1t,...dae}=cae;function Mqe(e){return Ae(dae,e)}function fae(e){return Ae(N5,e)}oe(cae),oe(dae);const Nqe=[La,jl,Va,Ks,qu,Wu];function hae(e){return Lh(e)!==e}function Lh(e){switch(e){case La:return Mn;case jl:return Pi;case Va:return Ba;case Ks:return Ua;case qu:return Ys;case Wu:return $a}return e}function Id(e){if(sae(e))switch(e){case Ys:return"startAngle";case qu:return"endAngle";case $a:return"outerRadius";case Wu:return"innerRadius"}return e}function Gl(e){switch(e){case Mn:return La;case Pi:return jl;case Ba:return Va;case Ua:return Ks;case Ys:return qu;case $a:return Wu}}function ko(e){switch(e){case Mn:case La:return"width";case Pi:case jl:return"height"}}function pae(e){switch(e){case Mn:return"xOffset";case Pi:return"yOffset";case La:return"x2Offset";case jl:return"y2Offset";case Ys:return"thetaOffset";case $a:return"radiusOffset";case qu:return"theta2Offset";case Wu:return"radius2Offset"}}function O5(e){switch(e){case Mn:return"xOffset";case Pi:return"yOffset"}}function Oqe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const kqe=oe(M5),{x:E1t,y:D1t,x2:C1t,y2:S1t,xOffset:A1t,yOffset:T1t,latitude:x1t,longitude:M1t,latitude2:N1t,longitude2:O1t,theta:k1t,theta2:I1t,radius:R1t,radius2:F1t,...k5}=M5,Iqe=oe(k5),I5={x:1,y:1},Xu=oe(I5);function ei(e){return Ae(I5,e)}const R5={theta:1,radius:1},Rqe=oe(R5);function pT(e){return"width"===e?Mn:Pi}const F5={xOffset:1,yOffset:1};function Hv(e){return Ae(F5,e)}oe(F5);const{text:L1t,tooltip:$1t,href:B1t,url:U1t,description:V1t,detail:j1t,key:H1t,order:z1t,...gae}=k5,Fqe=oe(gae),mae={...I5,...R5,...F5,...gae},P5=oe(mae);function Wl(e){return Ae(mae,e)}const _ae={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:G1t,...Bqe}=_ae;function L5(e){switch(e){case Mn:case Pi:case Ys:case $a:case xd:case s_:case Yu:case Fh:case Od:case Ku:case Md:case Nd:case La:case jl:case qu:case Wu:return;case uT:case zu:case Gu:case Oo:case kd:case Vv:case Ph:case dT:case fT:case hT:return"discrete";case No:case Hl:case zl:return"flexible";case Ba:case Ua:case Va:case Ks:case jv:case cT:case a_:return}}const Vqe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},jqe={count:1,min:1,max:1};function Qu(e){return ue(e,"argmin")}function Rd(e){return ue(e,"argmax")}function $5(e){return Ce(e)&&Ae(Vqe,e)}const Hqe=new Set(["count","valid","missing","distinct"]);function gT(e){return Ce(e)&&Hqe.has(e)}const Gqe=new Set(["count","sum","distinct","valid","missing"]),Wqe=new Set(["mean","average","median","q1","q3","min","max"]);function yae(e){return $c(e)&&(e=FT(e,void 0)),"bin"+oe(e).map(t=>mT(e[t])?xn(`_${t}_${Td(e[t])}`):xn(`_${t}_${e[t]}`)).join("")}function gn(e){return!0===e||$h(e)&&!e.binned}function or(e){return"binned"===e||$h(e)&&!0===e.binned}function $h(e){return Ee(e)}function mT(e){return ue(e,"param")}function vae(e){switch(e){case zu:case Gu:case Yu:case No:case Hl:case zl:case Od:case Ku:case Md:case Nd:case Oo:return 6;case kd:return 4;default:return 10}}function zv(e){return ue(e,"expr")}function sr(e,{level:t}={level:0}){const n=oe(e||{}),i={};for(const r of n)i[r]=0===t?ds(e[r]):sr(e[r],{level:t-1});return i}function bae(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...g}=e,_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...void 0!==o?{angle:o}:{},...void 0!==s?{limit:s}:{}},y={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}};return{titleMarkConfig:{...g,...a?{fill:a}:{}},subtitleMarkConfig:n_(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:_,subtitle:y}}function Fd(e){return Ce(e)||te(e)&&Ce(e[0])}function Pe(e){return ue(e,"signal")}function Bh(e){return ue(e,"step")}function Ju(e){return!te(e)&&ue(e,"field")&&ue(e,"data")}const Kqe=oe({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Xqe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},B5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function wae(e){const t=te(e.condition)?e.condition.map(Eae):Eae(e.condition);return{...ds(e),condition:t}}function ds(e){if(zv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Eae(e){if(zv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Dn(e){if(zv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Pe(e)?e:void 0!==e?{value:e}:void 0}function Qqe(e){return Pe(e)?e.signal:me(e)}function Dae(e){return Pe(e)?e.signal:me(e.value)}function ja(e){return Pe(e)?e.signal:null==e?null:me(e)}function Jqe(e,t,n){for(const i of n){const r=ql(i,t.markDef,t.config);void 0!==r&&(e[i]=Dn(r))}return e}function Cae(e){return[].concat(e.type,e.style??[])}function rn(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&ue(t,r)?t[r]:void 0!==t[e]?t[e]:!o||r&&r!==e?ql(e,t,n,i):void 0}function ql(e,t,n,{vgChannel:i}={}){const r=U5(e,t,n.style);return Zn(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function U5(e,t,n){return Sae(e,Cae(t),n)}function Sae(e,t,n){let i;t=De(t);for(const r of t){const o=n[r];ue(o,e)&&(i=o[e])}return i}function Aae(e,t){return De(e).reduce((n,i)=>(n.field.push(we(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function Tae(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(cs(r,i))return;n.push(i)}),n}function xae(e,t){return cs(e,t)||!t?e:e?[...De(e),...De(t)].join(", "):t}function Mae(e,t){const n=e.value,i=t.value;if(null==n||null===i)return{explicit:e.explicit,value:null};if((Fd(n)||Pe(n))&&(Fd(i)||Pe(i)))return{explicit:e.explicit,value:xae(n,i)};if(Fd(n)||Pe(n))return{explicit:e.explicit,value:n};if(Fd(i)||Pe(i))return{explicit:e.explicit,value:i};if(!(Fd(n)||Pe(n)||Fd(i)||Pe(i)))return{explicit:e.explicit,value:Tae(n,i)};throw new Error("It should never reach here")}function V5(e){return`Invalid specification ${nn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Zqe='Autosize "fit" only works for single views and layered views.';function Nae(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function Oae(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function kae(e){return e?`Dropping "fit-${e}" because spec has discrete ${ko(e)}.`:'Dropping "fit" because spec has discrete size.'}function j5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Iae(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function eYe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Rae(e){return`Selection not supported for ${e} yet.`}const lYe="The same selection must be used to override scale domains in a layered view.";function Fae(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function Pae(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function pYe(e){return`Ignoring an invalid transform: ${nn(e)}.`}function Lae(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function yYe(e){return`${e}Offset dropped because ${e} is continuous`}function $ae(e){return`Invalid field type "${e}".`}function Bae(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function H5(e,t){return`Dropping ${nn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function _T(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function CYe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function SYe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function AYe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function z5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function IYe(e){return`Using unaggregated domain with raw field has no effect (${nn(e)}).`}function RYe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function FYe(e){return`Unaggregated domain is currently unsupported for log scale (${nn(e)}).`}function Uae(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Vae(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const jae="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",HYe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",zYe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",GYe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function yT(e,t){return`Invalid ${e}: ${nn(t)}.`}function Hae(e){return`1D error band does not support ${e}.`}function zae(e){return`Channel ${e} is required for "binned" bin.`}const Gae=sI(oI);let Yl=Gae;function de(...e){Yl.warn(...e)}function Uh(e){if(e&&Ee(e))for(const t of W5)if(ue(e,t))return!0;return!1}const qae=["january","february","march","april","may","june","july","august","september","october","november","december"],oKe=qae.map(e=>e.substr(0,3)),Yae=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],sKe=Yae.map(e=>e.substr(0,3));function G5(e,t){const n=[];if(t&&void 0!==e.day&&oe(e).length>1&&(de(function KYe(e){return`Dropping day from datetime ${nn(e)} as day cannot be combined with other units.`}(e)),delete(e=Ze(e)).day),n.push(void 0!==e.year?e.year:2012),void 0!==e.month){const i=t?function lKe(e){if(lT(e)&&(e=+e),Ft(e))return e-1;{const t=e.toLowerCase(),n=qae.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=oKe.indexOf(i);if(-1!==r)return r;throw new Error(yT("month",e))}}(e.month):e.month;n.push(i)}else if(void 0!==e.quarter){const i=t?function aKe(e){if(lT(e)&&(e=+e),Ft(e))return e>4&&de(yT("quarter",e)),e-1;throw new Error(yT("quarter",e))}(e.quarter):e.quarter;n.push(Ft(i)?3*i:`${i}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const i=t?function uKe(e){if(lT(e)&&(e=+e),Ft(e))return e%7;{const t=e.toLowerCase(),n=Yae.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=sKe.indexOf(i);if(-1!==r)return r;throw new Error(yT("day",e))}}(e.day):e.day;n.push(Ft(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Vh(e){const n=G5(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}const Kae={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},W5=oe(Kae);function jh(e){return Ee(e)?e.binned:Xae(e)}function Xae(e){return e&&e.startsWith("binned")}function q5(e){return e.startsWith("utc")}const pKe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function vT(e){return W5.filter(t=>Jae(e,t))}function Qae(e){const t=vT(e);return t[t.length-1]}function Jae(e,t){const n=e.indexOf(t);return!(n<0||n>0&&"seconds"===t&&"i"===e.charAt(n-1)||e.length>n+3&&"day"===t&&"o"===e.charAt(n+3)||n>0&&"year"===t&&"f"===e.charAt(n-1))}function Zae(e){if(e)return`timeUnitSpecifier(${nn(vT(e))}, ${nn(pKe)})`}function Li(e){if(!e)return;let t;return Ce(e)?t=Xae(e)?{unit:e.substring(6),binned:!0}:{unit:e}:Ee(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),q5(t.unit)&&(t.utc=!0,t.unit=function hKe(e){return e.substring(3)}(t.unit)),t}function ele(e,t=(n=>n)){const n=Li(e),i=Qae(n.unit);if(i&&"day"!==i){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=tle(i,n.step);return`${t(Vh({...r,[s]:+r[s]+o}))} - ${t(Vh(r))}`}}const yKe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function tle(e,t=1){if(function vKe(e){return Ae(yKe,e)}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function Y5(e){return!!e?.field&&void 0!==e.equal}function K5(e){return!!e?.field&&void 0!==e.lt}function X5(e){return!!e?.field&&void 0!==e.lte}function Q5(e){return!!e?.field&&void 0!==e.gt}function J5(e){return!!e?.field&&void 0!==e.gte}function Z5(e){if(e?.field){if(te(e.range)&&2===e.range.length)return!0;if(Pe(e.range))return!0}return!1}function eB(e){return!!e?.field&&(te(e.oneOf)||te(e.in))}function nle(e){return eB(e)||Y5(e)||Z5(e)||K5(e)||Q5(e)||X5(e)||J5(e)}function Kl(e,t){return PT(e,{timeUnit:t,wrapTime:!0})}function ile(e,t=!0){const{field:n}=e,i=Li(e.timeUnit),{unit:r,binned:o}=i||{},s=we(e,{expr:"datum"}),a=r?`time(${o?s:function gKe(e,t,{end:n}={end:!1}){const i=T5(t),r=q5(e)?"utc":"";function o(l){return"quarter"===l?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const a={};for(const l of W5)Jae(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),function cKe(e){const n=G5(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}(a)}(r,n)})`:s;if(Y5(e))return`${a}===${Kl(e.equal,r)}`;if(K5(e))return`${a}<${Kl(e.lt,r)}`;if(Q5(e))return`${a}>${Kl(e.gt,r)}`;if(X5(e))return`${a}<=${Kl(e.lte,r)}`;if(J5(e))return`${a}>=${Kl(e.gte,r)}`;if(eB(e))return`indexof([${function EKe(e,t){return e.map(n=>Kl(n,t))}(e.oneOf,r).join(",")}], ${a}) !== -1`;if(function wKe(e){return!!e?.field&&void 0!==e.valid}(e))return bT(a,e.valid);if(Z5(e)){const{range:l}=sr(e),u=Pe(l)?{signal:`${l.signal}[0]`}:l[0],c=Pe(l)?{signal:`${l.signal}[1]`}:l[1];if(null!==u&&null!==c&&t)return"inrange("+a+", ["+Kl(u,r)+", "+Kl(c,r)+"])";const d=[];return null!==u&&d.push(`${a} >= ${Kl(u,r)}`),null!==c&&d.push(`${a} <= ${Kl(c,r)}`),d.length>0?d.join(" && "):"true"}throw new Error(`Invalid field predicate: ${nn(e)}`)}function bT(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function DKe(e){return nle(e)&&e.timeUnit?{...e,timeUnit:Li(e.timeUnit)}:e}const Hh={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function CKe(e){return"quantitative"===e||"temporal"===e}function rle(e){return"ordinal"===e||"nominal"===e}const zh=Hh.quantitative,tB=Hh.ordinal,u_=Hh.temporal,nB=Hh.nominal,c_=Hh.geojson;oe(Hh);const ar={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},wT={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function AKe(e,t){const n=wT[e],i=wT[t];return n===i||"ordinal-position"===n&&"time"===i||"ordinal-position"===i&&"time"===n}oe(wT);const TKe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ole(e){return TKe[e]}const sle=new Set(["linear","log","pow","sqrt","symlog"]),ale=new Set([...sle,"time","utc"]);function lle(e){return sle.has(e)}const ule=new Set(["quantile","quantize","threshold"]),xKe=new Set([...ale,...ule,"sequential","identity"]),MKe=new Set(["ordinal","bin-ordinal","point","band"]);function $i(e){return MKe.has(e)}function Ha(e){return xKe.has(e)}function Xl(e){return ale.has(e)}function d_(e){return ule.has(e)}function cle(e){return ue(e,"param")}const dle={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hvt,domain:pvt,range:gvt,rangeMax:mvt,rangeMin:_vt,scheme:yvt,...RKe}=(oe(dle),dle),FKe=oe(RKe);function iB(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Xl(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Xl(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Xl(e);case"nice":return Xl(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return Ha(e)&&!mt(["log","time","utc","threshold","quantile"],e)}}function fle(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return l_(e)?void 0:function OYe(e){return`Cannot use the scale property "${e}" with non-color channel.`}(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const Mr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},hle=Mr.arc,ET=Mr.area,DT=Mr.bar,BKe=Mr.image,CT=Mr.line,ST=Mr.point,UKe=Mr.rect,AT=Mr.rule,ple=Mr.text,rB=Mr.tick,VKe=Mr.trail,oB=Mr.circle,sB=Mr.square,gle=Mr.geoshape;function Ld(e){return["line","area","trail"].includes(e)}function Wv(e){return["rect","bar","image","arc","tick"].includes(e)}const mle=new Set(oe(Mr));function za(e){return ue(e,"type")}const zKe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],_le=oe({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),aB=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],GKe={area:["line","point"],bar:aB,rect:aB,line:["point"],tick:["bandSize","thickness",...aB]},yle=oe({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Gh(e){return ue(e,"band")}const qKe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},lB={binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},YKe={...lB,binSpacing:1},KKe={...lB,thickness:1};function vle(e,{isPath:t}){return void 0===e||"break-paths-show-path-domains"===e?t?"break-paths-show-domains":"filter":null===e?"show":e}function uB({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!Ha(i)||r)return"always-valid";const o=vle(rn("invalid",e,t),{isPath:Ld(e.type)});return void 0!==t.scale?.invalid?.[n]?"show":o}function ble({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,o=`peek(${i})`,s=t.domainHasZero();return"definitely"===s?{scale:e,value:0}:"maybe"===s?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${"zeroOrMin"===n?r:o})`}:{signal:`scale('${e}', ${"zeroOrMin"===n?r:o})`}}function wle({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:o}){const s=n?.get("type"),a=qa(t),u=uB({scaleChannel:e,markDef:r,config:o,scaleType:s,isCountAggregate:gT(a?.aggregate)});if(a&&"show"===u){const c=o.scale.invalid?.[e]??"zero-or-min";return{test:bT(we(a,{expr:"datum"}),!1),...JKe(c,n,i)}}}function JKe(e,t,n){if(function $Ke(e){return Ee(e)&&"value"in e}(e)){const{value:i}=e;return Pe(i)?{signal:i.signal}:{value:i}}return ble({scale:t,scaleName:n,mode:"zeroOrMin"})}function cB(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:o,config:s}=e,a=Lh(t),l=dB(e),u=wle({scaleChannel:a,channelDef:n,scale:r,scaleName:o,markDef:i,config:s});return void 0!==u?[u,l]:l}function Wh(e,t,n,i){const r={};if(t&&(r.scale=t),Ql(e)){const{datum:o}=e;Uh(o)?r.signal=Vh(o):Pe(o)?r.signal=o.signal:zv(o)?r.signal=o.expr:r.value=o}else r.field=we(e,n);if(i){const{offset:o,band:s}=i;o&&(r.offset=o),s&&(r.band=s)}return r}function TT({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:s=.5}){const a=!Pe(s)&&0<s&&s<1?"datum":void 0,l=we(t,{expr:a,suffix:r}),u=void 0!==n?we(n,{expr:a}):we(t,{suffix:o,expr:a}),c={};if(0===s||1===s)c.scale=e,c.field=0===s?l:u;else{const d=Pe(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${d})`}return i&&(c.offset=i),c}function dB({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(nt(t)){const d=s?.get("type");if(no(t)){c??(c=$d({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:f,timeUnit:h,type:p}=t;if(gn(f)||c&&h&&p===u_)return a?.impute?Wh(t,o,{binSuffix:"mid"},{offset:l}):c&&!$i(d)?TT({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Wh(t,o,Jv(t,e)?{binSuffix:"range"}:{},{offset:l});if(or(f)){if(pe(n))return TT({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});de(zae(e===Mn?La:jl))}}return Wh(t,o,$i(d)?{binSuffix:"range"}:{},{offset:l,band:"band"===d?c??t.bandPosition??.5:void 0})}if(Wa(t)){const f=l?{offset:l}:{};return{...qv(e,t.value),...f}}}return lt(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function qv(e,t){return mt(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:mt(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:Dn(t)}function qh(e){return e&&"number"!==e&&"time"!==e}function Ele(e,t,n){return`${e}(${t}${n?`, ${nn(n)}`:""})`}const tXe=" \u2013 ";function fB({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){if(qh(n))return Ga({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const s=Dle(e,i,r),a=f_(e);if(void 0===t&&void 0===n&&o.customFormatTypes){if("quantitative"===a){if(r&&o.normalizedNumberFormatType)return Ga({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ga({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if("temporal"===a&&o.timeFormatType&&pe(e)&&void 0===e.timeUnit)return Ga({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(m_(e)){const l=function iXe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:`${o?"utc":"time"}Format(${e}, '${n=Ce(n)?n:r}')`:function mKe(e,t,n){if(!e)return;const i=Zae(e);return`${n||q5(e)?"utc":"time"}Format(${t}, ${i})`}(t,e,o)}({field:s,timeUnit:pe(e)?Li(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Yh(e)&&e.scale?.type===ar.UTC});return l?{signal:l}:void 0}return t=hB({type:a,specifiedFormat:t,config:o,normalizeStack:r}),pe(e)&&gn(e.bin)?{signal:Yv(s,we(e,{expr:i,binSuffix:"end"}),t,n,o)}:t||"quantitative"===f_(e)?{signal:`${Ale(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Dle(e,t,n){return pe(e)?n?`${we(e,{expr:t,suffix:"end"})}-${we(e,{expr:t,suffix:"start"})}`:we(e,{expr:t}):function ZKe(e){const{datum:t}=e;return Uh(t)?Vh(t):`${nn(t)}`}(e)}function Ga({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:s}){return s??(s=Dle(e,i,r)),"datum.value"!==s&&pe(e)&&gn(e.bin)?{signal:Yv(s,we(e,{expr:i,binSuffix:"end"}),t,n,o)}:{signal:Ele(n,s,t)}}function Cle(e,t,n,i,r,o){if(!(Ce(i)&&qh(i)||void 0===n&&void 0===i&&r.customFormatTypes&&"quantitative"===f_(e)&&(r.normalizedNumberFormatType&&h_(e)&&"normalize"===e.stack||r.numberFormatType))){if(h_(e)&&"normalize"===e.stack&&r.normalizedNumberFormat)return hB({type:"quantitative",config:r,normalizeStack:!0});if(m_(e)){const s=pe(e)?Li(e.timeUnit)?.unit:void 0;return void 0===s&&r.customFormatTypes&&r.timeFormatType?void 0:function nXe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:Zae(t)}:i?void 0:n.timeFormat)}({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return hB({type:t,specifiedFormat:n,config:r})}}function Sle(e,t,n){return e&&(Pe(e)||"number"===e||"time"===e)?e:m_(t)&&"time"!==n&&"utc"!==n?pe(t)&&Li(t?.timeUnit)?.utc?"utc":"time":void 0}function hB({type:e,specifiedFormat:t,config:n,normalizeStack:i}){return Ce(t)?t:e===zh?i?n.normalizedNumberFormat:n.numberFormat:void 0}function Ale(e,t){return`format(${e}, "${t||""}")`}function Tle(e,t,n,i){return qh(n)?Ele(n,e,t):Ale(e,(Ce(t)?t:void 0)??i.numberFormat)}function Yv(e,t,n,i,r){if(void 0===n&&void 0===i&&r.customFormatTypes&&r.numberFormatType)return Yv(e,t,r.numberFormat,r.numberFormatType,r);const o=Tle(e,n,i,r),s=Tle(t,n,i,r);return`${bT(e,!1)} ? "null" : ${o} + "${tXe}" + ${s}`}const xT="min",rXe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function xle(e){return Ae(rXe,e)}function Zu(e){return e&&("count"===e.op||ue(e,"field"))}function Mle(e){return e&&te(e)}function Kv(e){return ue(e,"row")||ue(e,"column")}function pB(e){return ue(e,"header")}function MT(e){return ue(e,"facet")}function Nle(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function gB(e){return ue(e,"sort")}function $d({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(nt(e)&&void 0!==e.bandPosition)return e.bandPosition;if(pe(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return ql("timeUnitBandPosition",n,i);if(gn(o))return.5}}function Ole({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:s}){const a=ko(e),l=rn(s?"size":a,i,r,{vgChannel:a});if(void 0!==l)return l;if(pe(t)){const{timeUnit:u,bin:c}=t;if(u&&!n)return{band:ql("timeUnitBandSize",i,r)};if(gn(c)&&!$i(o))return{band:1}}return Wv(i.type)?o?$i(o)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0}function kle(e,t,n,i){return!!(gn(e.bin)||e.timeUnit&&no(e)&&"temporal"===e.type)&&void 0!==$d({fieldDef:e,fieldDef2:t,markDef:n,config:i})}function Ile(e){return ue(e,"sort")&&!ue(e,"field")}function Xv(e){return ue(e,"condition")}function NT(e){const t=e?.condition;return!!t&&!te(t)&&pe(t)}function Qv(e){const t=e?.condition;return!!t&&!te(t)&&nt(t)}function pe(e){return ue(e,"field")||"count"===e?.aggregate}function f_(e){return e?.type}function Ql(e){return ue(e,"datum")}function Bd(e){return no(e)&&!kT(e)||OT(e)}function Rle(e){return no(e)&&"quantitative"===e.type&&!e.bin||OT(e)}function OT(e){return Ql(e)&&Ft(e.datum)}function nt(e){return pe(e)||Ql(e)}function no(e){return e&&(ue(e,"field")||"count"===e.aggregate)&&ue(e,"type")}function Wa(e){return ue(e,"value")}function Yh(e){return ue(e,"scale")||ue(e,"sort")}function h_(e){return ue(e,"axis")||ue(e,"stack")||ue(e,"impute")}function Fle(e){return ue(e,"legend")}function Ple(e){return ue(e,"format")||ue(e,"formatType")}function uXe(e){return Mo(e,["legend","axis","header","scale"])}function we(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(function fXe(e){return"count"===e.aggregate}(e))n=nae("count");else{let s;if(!t.nofn)if(function cXe(e){return ue(e,"op")}(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;gn(a)?(s=yae(a),r=(t.binSuffix??"")+(t.suffix??"")):l?Rd(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Qu(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!jh(u)&&(s=function _Ke(e){const{utc:t,...n}=Li(e);return n.unit?(t?"utc":"")+oe(n).map(i=>xn(`${"unit"===i?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+oe(n).map(i=>xn(`_${i}_${n[i]}`)).join("")}(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?r_(n):t.expr?Zse(n,t.expr)+o:qs(n)+o}function kT(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return pe(e)&&!!e.bin;case"temporal":return!1}throw new Error($ae(e.type))}const Lle=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function pXe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Rd(t))return`${r} for argmax(${t.argmax})`;if(Qu(t))return`${r} for argmin(${t.argmin})`;const o=i&&!jh(i)?Li(i):void 0,s=t||o?.unit||o?.maxbins&&"timeunit"||gn(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}(e);default:return function hXe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if("count"===o)return t.countTitle;if(gn(i))return`${n} (binned)`;if(r&&!jh(r)){const s=Li(r)?.unit;if(s)return`${n} (${vT(s).join("-")})`}else if(o)return Rd(o)?`${n} for max ${o.argmax}`:Qu(o)?`${n} for min ${o.argmin}`:`${Bv(o)} of ${n}`;return n}(e,t)}};let $le=Lle;function Ble(e){$le=e}function p_(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=mB(e)?.title;if(!pe(e))return r??e.title;const o=e,s=i?_B(o,t):void 0;return n?Zn(r,o.title,s):r??o.title??s}function mB(e){return h_(e)&&e.axis?e.axis:Fle(e)&&e.legend?e.legend:pB(e)&&e.header?e.header:void 0}function _B(e,t){return $le(e,t)}function IT(e){if(Ple(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=mB(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function qa(e){return pe(e)?e:NT(e)?e.condition:void 0}function Ti(e){return nt(e)?e:Qv(e)?e.condition:void 0}function Ule(e,t,n,i={}){return Ce(e)||Ft(e)||$c(e)?(de(function vYe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${nn(n)}}.`}(t,Ce(e)?"string":Ft(e)?"number":"boolean",e)),{value:e}):nt(e)?RT(e,t,n,i):Qv(e)?{...e,condition:RT(e.condition,t,n,i)}:e}function RT(e,t,n,i){if(Ple(e)){const{format:r,formatType:o,...s}=e;if(qh(o)&&!n.customFormatTypes)return de(Lae(t)),RT(s,t,n,i)}else{const r=h_(e)?"axis":Fle(e)?"legend":pB(e)?"header":null;if(r&&e[r]){const{format:o,formatType:s,...a}=e[r];if(qh(s)&&!n.customFormatTypes)return de(Lae(t)),RT({...e,[r]:a},t,n,i)}}return pe(e)?yB(e,t,i):function _Xe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ft(n)?"quantitative":Ce(n)?"nominal":Uh(n)?"temporal":void 0,{...e,type:t}}(e)}function yB(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:s}=e,a={...e};if(!n&&i&&!$5(i)&&!Rd(i)&&!Qu(i)&&(de(function wYe(e){return`Invalid aggregation operator "${e}".`}(i)),delete a.aggregate),r&&(a.timeUnit=Li(r)),s&&(a.field=`${s}`),gn(o)&&(a.bin=FT(o,t)),or(o)&&!ei(t)&&de(function ZYe(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),no(a)){const{type:l}=a,u=function SKe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case zh:return"quantitative";case"t":case u_:return"temporal";case"o":case tB:return"ordinal";case"n":case nB:return"nominal";case c_:return"geojson"}}(l);l!==u&&(a.type=u),"quantitative"!==l&&gT(i)&&(de(function bYe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(l,i)),a.type="quantitative")}else if(!hae(t)){const l=function mXe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(gB(e)&&te(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Rd(n)&&!Qu(n))return"quantitative";if(Yh(e)&&e.scale?.type)switch(wT[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,t);a.type=l}if(no(a)){const{compatible:l,warning:u}=function yXe(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case zu:case Gu:case uT:return kT(e)?g_:{compatible:!1,warning:SYe(t)};case Mn:case Pi:case xd:case s_:case No:case Hl:case zl:case Vv:case jv:case cT:case Ph:case dT:case fT:case Fh:case Ys:case $a:case hT:return g_;case Ua:case Ks:case Ba:case Va:return n!==zh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:g_;case Ku:case Md:case Nd:case Od:case Yu:case qu:case Wu:case La:case jl:return"nominal"!==n||e.sort?g_:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case Oo:case kd:return kT(e)||function dXe(e){return Yh(e)&&d_(e.scale?.type)}(e)?g_:{compatible:!1,warning:AYe(t)};case a_:return"nominal"!==e.type||"sort"in e?g_:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(a,t)||{};!1===l&&de(u)}if(gB(a)&&Ce(a.sort)){const{sort:l}=a;if(xle(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if("-"===l.charAt(0)&&xle(u))return{...a,sort:{encoding:u,order:"descending"}}}if(pB(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function FT(e,t){return $c(e)?{maxbins:vae(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:vae(t)}}const g_={compatible:!0};function m_(e){const{formatType:t}=IT(e);return"time"===t||!t&&function vXe(e){return e&&("temporal"===e.type||pe(e)&&!!e.timeUnit)}(e)}function PT(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const o=t&&Li(t)?.unit;let a,s=o||"temporal"===n;return zv(e)?a=e.expr:Pe(e)?a=e.signal:Uh(e)?(s=!0,a=Vh(e)):(Ce(e)||Ft(e))&&s&&(a=`datetime(${nn(e)})`,function fKe(e){return Ae(Kae,e)}(o)&&(Ft(e)&&e<1e4||Ce(e)&&isNaN(Date.parse(e)))&&(a=Vh({[o]:e}))),a?i&&s?`time(${a})`:a:r?void 0:nn(e)}function Vle(e,t){const{type:n}=e;return t.map(i=>{const o=PT(i,{timeUnit:pe(e)&&!jh(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==o?{signal:o}:i})}function Jv(e,t){return gn(e.bin)?Wl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const jle={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Zv(e){return e?.condition}const Hle=["domain","grid","labels","ticks","title"],bXe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},zle={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Gle={...zle,style:1,labelExpr:1,encoding:1};function Wle(e){return Ae(Gle,e)}oe(Gle);const qle=oe({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function ec(e){return ue(e,"mark")}class LT{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return!!ec(t)&&function XKe(e){return za(e)?e.type:e}(t.mark)===this.name}}function Kh(e,t){const n=e&&e[t];return!!n&&(te(n)?i_(n,i=>!!i.field):pe(n)||NT(n))}function Yle(e,t){const n=e&&e[t];return!!n&&(te(n)?i_(n,i=>!!i.field):pe(n)||Ql(n)||Qv(n))}function Kle(e,t){if(ei(t)){const n=e[t];if((pe(n)||Ql(n))&&(rle(n.type)||pe(n)&&n.timeUnit))return Yle(e,O5(t))}return!1}function Xle(e){return i_(xqe,t=>{if(Kh(e,t)){const n=e[t];if(te(n))return i_(n,i=>!!i.aggregate);{const i=qa(n);return i&&!!i.aggregate}}return!1})}function Qle(e,t){const n=[],i=[],r=[],o=[],s={};return vB(e,(a,l)=>{if(pe(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const g=mB(a)?.title;let m=we(a,{forAs:!0});const _={...g?[]:{title:p_(a,t,{allowDisabling:!0})},...h,field:m};if(c){let y;if(Rd(c)?(y="argmax",m=we({op:"argmax",field:c.argmax},{forAs:!0}),_.field=`${m}.${u}`):Qu(c)?(y="argmin",m=we({op:"argmin",field:c.argmin},{forAs:!0}),_.field=`${m}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(y=c),y){const v={op:y,as:m};u&&(v.field=u),o.push(v)}}else if(n.push(m),no(a)&&gn(d))i.push({bin:d,field:u,as:m}),n.push(we(a,{binSuffix:"end"})),Jv(a,l)&&n.push(we(a,{binSuffix:"range"})),ei(l)&&(s[`${l}2`]={field:`${m}_end`}),_.bin="binned",hae(l)||(_.type=zh);else if(f&&!jh(f)){r.push({timeUnit:f,field:u,as:m});const y=no(a)&&a.type!==u_&&"time";y&&(l===Vv||l===Ph?_.formatType=y:function Pqe(e){return Ae(k5,e)}(l)?_.legend={formatType:y,..._.legend}:ei(l)&&(_.axis={formatType:y,..._.axis}))}s[l]=_}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:s}}function wXe(e,t,n){const i=function $qe(e,t){return function Uqe(e){switch(e){case No:case Hl:case zl:case hT:case jv:case cT:case Ph:case dT:case a_:case Ku:case Md:case Nd:case Od:case uT:case zu:case Gu:return _ae;case Mn:case Pi:case xd:case s_:case Ba:case Ua:return Bqe;case La:case jl:case Va:case Ks:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Yu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case kd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Oo:return{point:"always",geoshape:"always"};case Vv:return{text:"always"};case Fh:return{point:"always",square:"always",text:"always"};case fT:return{image:"always"};case Ys:case $a:return{text:"always",arc:"always"};case qu:case Wu:return{arc:"always"}}}(e)[t]}(t,n);if(!i)return!1;if("binned"===i){const r=e[t===La?Mn:Pi];return!!(pe(r)&&pe(e[t])&&or(r.bin))}return!0}function $T(e,t){const n={};for(const i of oe(e)){const r=Ule(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function vB(e,t,n){if(e)for(const i of oe(e)){const r=e[i];if(te(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function Jle(e,t){return oe(t).reduce((n,i)=>{switch(i){case Mn:case Pi:case dT:case hT:case fT:case La:case jl:case xd:case s_:case Ys:case qu:case $a:case Wu:case Ba:case Ua:case Va:case Ks:case Vv:case Oo:case Fh:case Ph:return n;case a_:if("line"===e||"trail"===e)return n;case jv:case cT:{const r=t[i];if(te(r)||pe(r))for(const o of De(r))o.aggregate||n.push(we(o,{}));return n}case Yu:if("trail"===e)return n;case No:case Hl:case zl:case Ku:case Md:case Nd:case kd:case Od:{const r=qa(t[i]);return r&&!r.aggregate&&n.push(we(r,{})),n}}},[])}function bB(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=i?` of ${wB(t)}`:"";return{field:s+t.field,type:t.type,title:Pe(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=function DXe(e){const t=[];for(const n of oe(e))if(Kh(e,n)){const r=De(e[n]);for(const o of r)pe(o)?t.push(o):NT(o)&&t.push(o.condition)}return t}(n).map(uXe);return{tooltip:[...r,...Vl(o,bt)]}}function wB(e){const{title:t,field:n}=e;return Zn(t,n)}function EB(e,t,n,i,r){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c,extraEncoding:d={}})=>{const f=wB(n);return Zle(e,a,r,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==s?{axis:s}:{}},...Ce(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function Zle(e,t,n,i){const{clip:r,color:o,opacity:s}=e,a=e.type;return e[t]||void 0===e[t]&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...s?{opacity:s}:{},...za(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...$c(e[t])?{}:e[t]}}]:[]}function eue(e,t,n){const{encoding:i}=e,r="vertical"===t?"y":"x",s=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:BT(i[r],n),continuousAxisChannelDef2:BT(s,n),continuousAxisChannelDefError:BT(a,n),continuousAxisChannelDefError2:BT(l,n),continuousAxis:r}}function BT(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(function JYe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),i}return e}function tue(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(za(n)&&n.orient)return n.orient;if(Bd(r)){if(Bd(o)){const s=pe(r)&&r.aggregate,a=pe(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return m_(o)&&!m_(r)?"horizontal":"vertical"}return"horizontal"}if(Bd(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const UT="boxplot",TXe=new LT(UT,iue);function nue(e){return Ft(e)?"tukey":e}function iue(e,{config:t}){e={...e,encoding:$T(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...s}=e,a=za(n)?n:{type:n};r&&de(Rae("boxplot"));const l=a.extent??t.boxplot.extent,u=rn("size",a,t),c=a.invalid,d=nue(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:_,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:D}=function xXe(e,t,n){const i=tue(e,UT),{continuousAxisChannelDef:r,continuousAxis:o}=eue(e,i,UT),s=r.field,a=r_(s),l=nue(t),u=[...rue(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:("min-max"===l?"lower_whisker_":"min_")+a},{op:"max",field:s,as:("min-max"===l?"upper_whisker_":"max_")+a}],c="min-max"===l||"tukey"===l?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=function SXe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(te(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return te(r)&&1===r.length&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}(f),{bins:g,timeUnits:m,aggregate:_,groupby:y,encoding:v}=Qle(p,n),b="vertical"===i?"horizontal":"vertical",w=i;return{bins:g,timeUnits:m,transform:[...g,...m,{aggregate:[..._,...u],groupby:y},...c],groupby:y,aggregate:_,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:h}}(e,l,t),E=r_(g.field),{color:S,size:M,...k}=v,R=Nt=>EB(a,m,g,Nt,t.boxplot),F=R(k),P=R(v),A=(Ee(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",C=R({...k,...M?{size:M}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...S||{value:A}}}}),T=bB([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],g,v),O={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},x="min-max"===d?T:bB([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,v),N=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:x}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:x}),...F({partName:"ticks",mark:O,positionPrefix:"lower_whisker",extraEncoding:x}),...F({partName:"ticks",mark:O,positionPrefix:"upper_whisker",extraEncoding:x})],I=[..."tukey"!==d?N:[],...P({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...C({partName:"median",mark:{type:"tick",invalid:c,...Ee(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if("min-max"===d)return{...s,transform:(s.transform??[]).concat(p),layer:I};const U=`datum["lower_box_${g.field}"]`,V=`datum["upper_box_${g.field}"]`,H=`(${V} - ${U})`,j=`${U} - ${l} * ${H}`,z=`${V} + ${l} * ${H}`,re=`datum["${g.field}"]`,K={joinaggregate:rue(g.field),groupby:_},ce={transform:[{filter:`(${j} <= ${re}) && (${re} <= ${z})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${E}`},{op:"max",field:g.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${E}`},...y],groupby:_}],layer:N},{tooltip:W,...ne}=k,{scale:ie,axis:G}=g,be=wB(g),Te=Mo(G,["title"]),We=Zle(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${j}) || (${re} > ${z})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...void 0!==be?{title:be}:{},...void 0!==ie?{scale:ie}:{},...tn(Te)?{}:{axis:Te}},...ne,...S?{color:S}:{},...D?{tooltip:D}:{}}})[0];let Me;const Le=[...f,...h,K];return We?Me={transform:Le,layer:[We,ce]}:(Me=ce,Me.transform.unshift(...Le)),{...s,layer:[Me,{transform:p,layer:I}]}}function rue(e){const t=r_(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}const DB="errorbar",NXe=new LT(DB,oue);function oue(e,{config:t}){e={...e,encoding:$T(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=sue(e,DB,t);delete o.size;const c=EB(a,r,i,o,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:s,aria:!1,...void 0!==d?{thickness:d}:{},...void 0!==f?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==d?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function sue(e,t,n){const{mark:i,encoding:r,params:o,projection:s,...a}=e,l=za(i)?i:{type:i};o&&de(Rae(t));const{orient:u,inputType:c}=function OXe(e,t){const{encoding:n}=e;if(function kXe(e){return(nt(e.x)||nt(e.y))&&!nt(e.x2)&&!nt(e.y2)&&!nt(e.xError)&&!nt(e.xError2)&&!nt(e.yError)&&!nt(e.yError2)}(n))return{orient:tue(e,t),inputType:"raw"};const i=function IXe(e){return nt(e.x2)||nt(e.y2)}(n),r=function RXe(e){return nt(e.xError)||nt(e.xError2)||nt(e.yError)||nt(e.yError2)}(n),o=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(nt(a)&&nt(l))throw new Error(`${t} cannot have both x2 and y2`);if(nt(a)){if(Bd(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(nt(l)){if(Bd(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const a=n.xError,u=n.yError,c=n.yError2;if(nt(n.xError2)&&!nt(a))throw new Error(`${t} cannot have xError2 without xError`);if(nt(c)&&!nt(u))throw new Error(`${t} cannot have yError2 without yError`);if(nt(a)&&nt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(nt(a)){if(Bd(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(nt(u)){if(Bd(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=eue(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:_,tooltipSummary:y,tooltipTitleWithFieldName:v}=function FXe(e,t,n,i,r,o,s,a){let l=[],u=[];const c=t.field;let d,f=!1;if("raw"===o){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":a.errorbar.center,p=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===p)&&de(function QYe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(h,p,s)),"stderr"===p||"stdev"===p)l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Bv(h)},{fieldPrefix:"upper_",titlePrefix:aue(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:aue(h,p,"-")}],f=!0;else{let g,m,_;"ci"===p?(g="mean",m="ci0",_="ci1"):(g="median",m="q1",_="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:_,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:p_({field:c,aggregate:_,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:p_({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:p_({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(function XYe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],u.push(r?{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}:{calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Rh(Rh(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(l,d,f,h,p,c,t,n),{[g]:b,["x"===g?"x2":"y2"]:w,["x"===g?"xError":"yError"]:D,["x"===g?"xError2":"yError2"]:E,...S}=r,{bins:M,timeUnits:k,aggregate:R,groupby:F,encoding:P}=Qle(S,n),A=[...R,...m],C="raw"!==c?[]:F,T=bB(y,d,P,v);return{transform:[...a.transform??[],...M,...k,...0===A.length?[]:[{aggregate:A,groupby:C}],..._],groupby:C,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:P,ticksOrient:"vertical"===u?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:T}}function aue(e,t,n){return`${Bv(e)} ${n} ${t}`}const CB="errorband",LXe=new LT(CB,lue);function lue(e,{config:t}){e={...e,encoding:$T(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=sue(e,CB,t),u=s,c=EB(u,r,i,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?de(Hae("interpolate")):u.tension&&de(Hae("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const SB={};function AB(e,t,n){const i=new LT(e,t);SB[e]={normalizer:i,parts:n}}AB(UT,iue,["box","median","outliers","rule","ticks"]),AB(DB,oue,["ticks","rule"]),AB(CB,lue,["band","borders"]);const BXe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],uue={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cue={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},UXe=oe(uue),VXe=oe(cue),due=oe({header:1,headerRow:1,headerColumn:1,headerFacet:1}),fue=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],hue={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ya=(oe(hue),"_vgsid_"),HXe={point:{on:"click",fields:[Ya],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function TB(e){return"legend"===e||!!e?.legend}function xB(e){return TB(e)&&Ee(e)}function MB(e){return!!e?.select}function pue(e){const t=[];for(const n of e||[]){if(MB(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const s={...o,bind:r,init:i};t.push(s)}else{const s={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function NB(e){return ue(e,"concat")}function VT(e){return ue(e,"vconcat")}function OB(e){return ue(e,"hconcat")}function gue({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Jl(e){return ue(e,"step")}function mue(e){return ue(e,"view")||ue(e,"width")||ue(e,"height")}const GXe=oe({align:1,bounds:1,center:1,columns:1,spacing:1});function kB(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function IB(e,t){const n=jT(e,t);return Jl(n)?n.step:yue}function jT(e,t){return Zn(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const yue=20,YXe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:yue},mark:{color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},arc:{},area:{},bar:YKe,circle:{},geoshape:{},image:{},line:{},point:{},rect:lB,rule:{color:"black"},square:{},text:{color:"black"},tick:KKe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:HXe,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},tc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],vue={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},bue={blue:tc[0],orange:tc[1],red:tc[2],teal:tc[3],green:tc[4],yellow:tc[5],purple:tc[6],pink:tc[7],brown:tc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function wue(e){const t=oe(e||{}),n={};for(const i of t){const r=e[i];n[i]=Zv(r)?wae(r):ds(r)}return n}const ZXe=[...yle,...qle,...due,"background","padding","legend","lineBreak","scale","style","title","view"];function Eue(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,s=zg({},Ze(YXe),n?function QXe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function KXe(e={}){return{signals:[{name:"color",value:Ee(e)?{...bue,...e}:bue}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},i?function XXe(e){return{signals:[{name:"fontSize",value:Ee(e)?{...vue,...e}:vue}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(i):{},o||{});r&&Gg(s,"selection",r,!0);const a=Mo(s,ZXe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=ds(s[l]));for(const l of yle)s[l]&&(a[l]=sr(s[l]));for(const l of qle)s[l]&&(a[l]=wue(s[l]));for(const l of due)s[l]&&(a[l]=sr(s[l]));if(s.legend&&(a.legend=sr(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=sr(l,{level:1});a.scale={...sr(u),...oe(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=function JXe(e){const t=oe(e),n={};for(const i of t)n[i]=wue(e[i]);return n}(s.style)),s.title&&(a.title=sr(s.title)),s.view&&(a.view=sr(s.view)),a}const eQe=new Set(["view",...mle]),tQe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],nQe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...GKe};function oQe(e,t,n,i){"view"===t&&(n="cell");const o={...i?e[t][i]:e[t],...e.style[n??t]};tn(o)||(e.style[n??t]=o),i||delete e[t]}function HT(e){return ue(e,"layer")}class RB{map(t,n){return MT(t)?this.mapFacet(t,n):function sQe(e){return ue(e,"repeat")}(t)?this.mapRepeat(t,n):OB(t)?this.mapHConcat(t,n):VT(t)?this.mapVConcat(t,n):NB(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(HT(t))return this.mapLayer(t,n);if(ec(t))return this.mapUnit(t,n);throw new Error(V5(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const lQe={zero:1,center:1,normalize:1},cQe=new Set([hle,DT,ET,AT,ST,oB,sB,CT,ple,rB]),dQe=new Set([DT,ET,hle]);function __(e){return pe(e)&&"quantitative"===f_(e)&&!e.bin}function Due(e,t,{orient:n,type:i}){const r="x"===t?"y":"radius",o="x"===t&&["bar","area"].includes(i),s=e[t],a=e[r];if(pe(s)&&pe(a))if(__(s)&&__(a)){if(s.stack)return t;if(a.stack)return r;const l=pe(s)&&!!s.aggregate;if(l!==(pe(a)&&!!a.aggregate))return l?t:r;if(o){if("vertical"===n)return r;if("horizontal"===n)return t}}else{if(__(s))return t;if(__(a))return r}else{if(__(s))return o&&"vertical"===n?void 0:t;if(__(a))return o&&"horizontal"===n?void 0:r}}function Cue(e,t){const n=za(e)?e:{type:e},i=n.type;if(!cQe.has(i))return null;const r=Due(t,"x",n)||Due(t,"theta",n);if(!r)return null;const o=t[r],s=pe(o)?we(o,{}):void 0,a=function fQe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(r),l=[],u=new Set;if(t[a]){const g=t[a],m=pe(g)?we(g,{}):void 0;m&&m!==s&&(l.push(a),u.add(m))}const c="x"===a?"xOffset":"yOffset",d=t[c],f=pe(d)?we(d,{}):void 0;f&&f!==s&&(l.push(c),u.add(f));const h=Iqe.reduce((g,m)=>{if("tooltip"!==m&&Kh(t,m)){const _=t[m];for(const y of De(_)){const v=qa(y);if(v.aggregate)continue;const b=we(v,{});(!b||!u.has(b))&&g.push({channel:m,fieldDef:v})}}return g},[]);let p;return void 0!==o.stack?p=$c(o.stack)?o.stack?"zero":null:o.stack:dQe.has(i)&&(p="zero"),!p||!function uQe(e){return Ae(lQe,e)}(p)||Xle(t)&&0===h.length?null:(o?.scale?.type&&o?.scale?.type!==ar.LINEAR&&o?.stack&&de(function qYe(e){return`Stack is applied to a non-linear scale (${e}).`}(o.scale.type)),nt(t[Gl(r)])?(void 0!==o.stack&&de(function WYe(e){return`Cannot stack "${e}" if there is already "${e}2".`}(r)),null):(pe(o)&&o.aggregate&&!Gqe.has(o.aggregate)&&de(function YYe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:null!==o.impute&&Ld(i),stackBy:h,offset:p}))}function Sue(e,t,n){const i=sr(e),r=rn("orient",i,n);if(i.orient=function mQe(e,t,n){switch(e){case ST:case oB:case sB:case ple:case UKe:case BKe:return}const{x:i,y:r,x2:o,y2:s}=t;switch(e){case DT:if(pe(i)&&(or(i.bin)||pe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(pe(r)&&(or(r.bin)||pe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(pe(i)&&i.type===zh&&!gn(i.bin)||OT(i))&&pe(r)&&or(r.bin)?"horizontal":"vertical";if(!s)return(pe(r)&&r.type===zh&&!gn(r.bin)||OT(r))&&pe(i)&&or(i.bin)?"vertical":"horizontal"}case AT:if(o&&(!pe(i)||!or(i.bin))&&s&&(!pe(r)||!or(r.bin)))return;case ET:if(s)return pe(r)&&or(r.bin)?"horizontal":"vertical";if(o)return pe(i)&&or(i.bin)?"vertical":"horizontal";if(e===AT){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case CT:case rB:{const a=Rle(i),l=Rle(r);if(n)return n;if(a&&!l)return"tick"!==e?"horizontal":"vertical";if(!a&&l)return"tick"!==e?"vertical":"horizontal";if(a&&l)return"vertical";{const u=no(i)&&i.type===u_,c=no(r)&&r.type===u_;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}(i.type,t,r),void 0!==r&&r!==i.orient&&de(function NYe(e,t){return`Specified orient "${e}" overridden with "${t}".`}(i.orient,r)),"bar"===i.type&&i.orient){const l=rn("cornerRadiusEnd",i,n);if(void 0!==l){const u="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:qKe[i.orient];for(const c of u)i[c]=l;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}const o=rn("opacity",i,n),s=rn("fillOpacity",i,n);return void 0===o&&void 0===s&&(i.opacity=function pQe(e,t){if(mt([ST,rB,oB,sB],e)&&!Xle(t))return.7}(i.type,t)),void 0===rn("cursor",i,n)&&(i.cursor=function hQe(e,t,n){return t.href||e.href||rn("href",e,n)?"pointer":e.cursor}(i,t,n)),i}function _Qe(e){const{point:t,line:n,...i}=e;return oe(i).length>1?i:i.type}function yQe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Mo(e[t],["point","line"])});return e}function FB(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?Ee(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function Aue(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class vQe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ec(t)){const{mark:i,encoding:r}=t,o=za(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!FB(o,n[o.type],r);case"area":return!!FB(o,n[o.type],r)||!!Aue(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,d=$T(u,r),f=za(a)?a:{type:a},h=FB(f,r[f.type],d),p="area"===f.type&&Aue(f,r[f.type]),g=[{name:l,...o?{params:o}:{},mark:_Qe({..."area"===f.type&&void 0===f.opacity&&void 0===f.fillOpacity?{opacity:.7}:{},...f}),encoding:Mo(d,["shape"])}],m=Cue(Sue(f,d,r),d);let _=d;if(m){const{fieldChannel:y,offset:v}=m;_={...d,[y]:{...d[y],...v?{stack:v}:{}}}}return _=Mo(_,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...n_(f,["clip","interpolate","tension","tooltip"]),...p},encoding:_}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...n_(f,["clip","tooltip"]),...h},encoding:_}),i({...c,layer:g},{...n,config:yQe(r)})}}function bQe(e,t){return t?Kv(e)?Nue(e,t):Tue(e,t):e}function PB(e,t){return t?Nue(e,t):e}function LB(e,t,n){const i=t[e];return function aXe(e){return!Ce(e)&&ue(e,"repeat")}(i)?i.repeat in n?{...t,[e]:n[i.repeat]}:void de(function cYe(e){return`Unknown repeated value "${e}".`}(i.repeat)):t}function Tue(e,t){if(void 0!==(e=LB("field",e,t))){if(null===e)return null;if(gB(e)&&Zu(e.sort)){const n=LB("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function xue(e,t){if(pe(e))return Tue(e,t);{const n=LB("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Mue(e,t){if(!nt(e)){if(Qv(e)){const n=xue(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}{const n=xue(e,t);if(n)return n;if(Xv(e))return{condition:e.condition}}}function Nue(e,t){const n={};for(const i in e)if(ue(e,i)){const r=e[i];if(te(r))n[i]=r.map(o=>Mue(o,t)).filter(o=>o);else{const o=Mue(r,t);void 0!==o&&(n[i]=o)}}return n}class wQe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ec(t)){const{encoding:n,mark:i}=t;if("line"===i||za(i)&&"line"===i.type)for(const r of Nqe){const s=n[Lh(r)];if(n[r]&&(pe(s)&&!or(s.bin)||Ql(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return de(function MYe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!r.x2,!!r.y2)),i({...t,mark:Ee(o)?{...o,type:"rule"}:"rule"},n)}}function Oue({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...oe(e),...oe(t)]);for(const o of r){const s=t[o],a=e[o];if(nt(s)){const l={...a,...s};i[o]=l}else Qv(s)?i[o]={...s,condition:{...a,...s.condition}}:s||null===s?i[o]=s:(n||Wa(a)||Pe(a)||nt(a)||te(a))&&(i[o]=a)}}else i=t;return!i||tn(i)?void 0:i}function kue(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(function mYe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${nn(t)} is overridden by a child projection ${nn(n)}.`}({parentProjection:t,projection:n})),n??t}function $B(e){return ue(e,"filter")}function Iue(e){return ue(e,"lookup")}function AQe(e){return ue(e,"pivot")}function TQe(e){return ue(e,"density")}function xQe(e){return ue(e,"quantile")}function MQe(e){return ue(e,"regression")}function NQe(e){return ue(e,"loess")}function OQe(e){return ue(e,"sample")}function kQe(e){return ue(e,"window")}function IQe(e){return ue(e,"joinaggregate")}function RQe(e){return ue(e,"flatten")}function FQe(e){return ue(e,"calculate")}function Rue(e){return ue(e,"bin")}function PQe(e){return ue(e,"impute")}function LQe(e){return ue(e,"timeUnit")}function $Qe(e){return ue(e,"aggregate")}function BQe(e){return ue(e,"stack")}function UQe(e){return ue(e,"fold")}function VQe(e){return ue(e,"extent")&&!ue(e,"density")&&!ue(e,"regression")}function Fue(e,t){const{transform:n,...i}=e;return n?{...i,transform:n.map(o=>{if($B(o))return{filter:BB(o,t)};if(Rue(o)&&$h(o.bin))return{...o,bin:Lue(o.bin)};if(Iue(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o})}:e}function Pue(e,t){const n=Ze(e);if(pe(n)&&$h(n.bin)&&(n.bin=Lue(n.bin)),Yh(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(Xv(n))if(te(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:o,test:s,...a}=i;return o?i:{...a,test:BB(i,t)}});else{const{selection:i,param:r,test:o,...s}=Pue(n.condition,t);n.condition=r?n.condition:{...s,test:BB(n.condition,t)}}return n}function Lue(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function BB(e,t){const n=i=>t_(i,r=>{var o;const a={param:r,empty:t.emptySelections[r]??!0};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(a),a});return e.selection?n(e.selection):t_(e.test||e.filter,i=>i.selection?n(i.selection):i)}class UB extends RB{map(t,n){const i=n.selections??[];if(t.params&&!ec(t)){const r=[];for(const o of t.params)MB(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const s of i)if(s.views&&s.views.length)for(const a of s.views)(Ce(a)&&(a===t.name||r.includes(a))||te(a)&&a.map(l=>r.indexOf(l)).every((l,u,c)=>-1!==l&&(0===u||l>c[u-1])))&&o.push(s);else o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=UB.prototype[e];UB.prototype[e]=function(n,i){return t.call(this,n,zQe(n,i))}}function zQe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function $ue(e,t){void 0===t&&(t=Eue(e.config));const n=function YQe(e,t={}){const n={config:t};return qQe.map(GQe.map(WQe.map(e,n),n),n)}(e,t),{width:i,height:r}=e,o=function KQe(e,t,n){let{width:i,height:r}=t;const o=ec(e)||HT(e),s={};o?"container"==i&&"container"==r?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==r&&(s.type="fit-y",s.contains="padding"):("container"==i&&(de(Nae("width")),i=void 0),"container"==r&&(de(Nae("height")),r=void 0));const a={type:"pad",...s,...n?Bue(n.autosize):{},...Bue(e.autosize)};if("fit"===a.type&&!o&&(de(Zqe),a.type="pad"),"container"==i&&!("fit"==a.type||"fit-x"==a.type)&&de(Oae("width")),"container"==r&&!("fit"==a.type||"fit-y"==a.type)&&de(Oae("height")),!cs(a,{type:"pad"}))return a}(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const GQe=new class EQe extends RB{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[TXe,NXe,LXe,new vQe,new wQe]}map(t,n){if(ec(t)){const i=Kh(t.encoding,zu),r=Kh(t.encoding,Gu),o=Kh(t.encoding,uT);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=PB(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return function aQe(e){return!te(e.repeat)&&ue(e.repeat,"layer")}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:s,column:a,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const f={...u,layer:d},h=`${(r.name?`${r.name}_`:"")+c}child__layer_${xn(d)}`,p=this.mapLayerOrUnit(r,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...s}=t;!te(i)&&t.columns&&(t=Mo(t,["columns"]),de(Fae("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!te(i)&&i.row||[l?l.row:null],d=!te(i)&&i.column||[l?l.column:null],f=te(i)&&i||[l?l.repeat:null];for(const p of f)for(const g of c)for(const m of d){const _={repeat:p,row:g,column:m,layer:l.layer},y=(r.name?`${r.name}_`:"")+u+"child__"+(te(i)?`${xn(p)}`:(i.row?`row_${xn(g)}`:"")+(i.column?`column_${xn(m)}`:"")),v=this.map(r,{...n,repeater:_,repeaterPrefix:y});v.name=y,a.push(Mo(v,["data"]))}const h=te(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:i}=t;return Kv(i)&&t.columns&&(t=Mo(t,["columns"]),de(Fae("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=kue({parentProjection:s,projection:r}),u=Oue({parentEncoding:o,encoding:PB(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),_=PB(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:_,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&de(function TYe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...i?[zu]:[],...r?[Gu]:[]]));const s={},a={};for(const l of[zu,Gu]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])void 0!==u[g]&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:bQe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:s,...a}=t,l={...r,parentEncoding:Oue({parentEncoding:n,encoding:o,layer:!0}),parentProjection:kue({parentProjection:i,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}},WQe=new class HQe extends RB{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Fue(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if((t=Fue(t,n)).encoding){const i={};for(const[r,o]of Td(t.encoding))i[r]=Pue(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Td(i).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;"single"===c.type?(c.type="point",c.toggle=!1):"multi"===c.type&&(c.type="point"),n.emptySelections[o]="none"!==u;for(const d of rr(n.selectionPredicates[o]??{}))d.empty="none"!==u;return{name:o,value:a,select:c,bind:l}})}:t}},qQe=new UB;function Bue(e){return Ce(e)?{type:e}:e??{}}const JQe=["background","padding"];function Uue(e,t){const n={};for(const i of JQe)e&&void 0!==e[i]&&(n[i]=ds(e[i]));return t&&(n.params=e.params),n}class nc{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new nc(Ze(this.explicit),Ze(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Zn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){void 0!==n&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){void 0!==n[t]?this.set(t,n[t],!0):void 0!==i[t]&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}copyAll(t){for(const n of oe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Zl(e){return{explicit:!0,value:e}}function fs(e){return{explicit:!1,value:e}}function Vue(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:zT(t,n,i,r)}}function zT(e,t,n,i){return e.explicit&&t.explicit&&de(function BYe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${nn(n)} and ${nn(i)}). Using ${nn(n)}.`}(n,i,e.value,t.value)),e}function Ud(e,t,n,i,r=zT){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:cs(e.value,t.value)?e:r(e,t,n,i)}class ZQe extends nc{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function y_(e){return ue(e,"url")}function eb(e){return ue(e,"values")}function jue(e){return ue(e,"name")&&!y_(e)&&!eb(e)&&!Vd(e)}function Vd(e){return e&&(Hue(e)||zue(e)||VB(e))}function Hue(e){return ue(e,"sequence")}function zue(e){return ue(e,"sphere")}function VB(e){return ue(e,"graticule")}var Rn=(()=>{return(e=Rn||(Rn={}))[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid",Rn;var e})();function Gue({invalid:e,isPath:t}){switch(vle(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Wue(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=qs(r.field),r}function Xh(e,t=!0,n=yr){if(te(e)){const i=e.map(r=>Xh(r,t,n));return t?`[${i.join(", ")}]`:i}return Uh(e)?n(t?Vh(e):function dKe(e){const t=G5(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(nn(e)):e}function tJe(e,t){for(const n of rr(e.component.selection??{})){const i=n.name;let r=`${i}${jd}, ${"global"===n.resolve?"true":`{unit: ${Jh(e)}}`}`;for(const o of QT)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+kJe,on:[{events:{signal:n.name+jd},update:`modify(${me(n.name+Qh)}, ${r})`}]})}return jB(t)}function nJe(e,t){if(e.component.selection&&oe(e.component.selection).length){const n=me(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Sd("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return jB(t)}function que(e,t){for(const n of rr(e.component.selection??{}))for(const i of QT)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function jB(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Zt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){this._children.includes(t)?de("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Io extends Zt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${tae()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function HB(e){return void 0!==e.as}function Yue(e){return`${e}_end`}class eu extends Zt{clone(){return new eu(null,Ze(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(jh(l)){if(Fn(n)){const{mark:c,markDef:d,config:f}=n,h=$d({fieldDef:o,markDef:d,config:f});(Wv(c)||h)&&(u={timeUnit:Li(l),field:a})}}else u={as:we(o,{forAs:!0}),field:a,timeUnit:l};if(Fn(n)){const{mark:c,markDef:d,config:f}=n,h=$d({fieldDef:o,markDef:d,config:f});Wv(c)&&ei(s)&&.5!==h&&(u.rectBandPosition=h)}u&&(r[bt(u)]=u)}return r},{});return tn(i)?null:new eu(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s={...r,timeUnit:Li(i)};return new eu(t,{[bt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Td(this.timeUnits)){const o=HB(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(rr(this.timeUnits).map(t=>HB(t)?t.as:Yue(t.field)))}dependentFields(){return new Set(rr(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${bt(this.timeUnits)}`}assemble(){const t=[];for(const n of rr(this.timeUnits)){const{rectBandPosition:i}=n,r=Li(n.timeUnit);if(HB(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=r,c=[s,`${s}_end`];t.push({field:qs(o),type:"timeunit",...a?{units:vT(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...Xue(c,i,r))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=Kue({timeUnit:r,field:s}),l=Yue(s);t.push({type:"formula",expr:a,as:l}),t.push(...Xue([s,l],i,r))}}return t}}const GT="offsetted_rect_start",WT="offsetted_rect_end";function Kue({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,o=Qae(i),{part:s,step:a}=tle(o,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function Xue([e,t],n,i){if(void 0!==n&&.5!==n){const r=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:Que([Kue({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${GT}`},{type:"formula",expr:Que([r,o],n+.5),as:`${e}_${WT}`}]}return[]}function Que([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const tb="_tuple_fields";class aJe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const lJe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new aJe),o={},s={},a=new Set,l=(p,g)=>{const m="visual"===g?p.channel:p.field;let _=xn(`${i}_${m}`);for(let y=1;a.has(_);y++)_=xn(`${i}_${m}_${y}`);return a.add(_),{[g]:_}},u=t.type,c=e.config.selection[u],d=void 0!==n.value?De(n.value):null;let{fields:f,encodings:h}=Ee(n.select)?n.select:{};if(!f&&!h&&d)for(const p of d)if(Ee(p))for(const g of oe(p))Mqe(g)?(h||(h=[])).push(g):"interval"===u?(de('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=c.encodings):(f??(f=[])).push(g);!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){de(eYe(p,g.aggregate));continue}if(!m){de(Iae(p));continue}if(g.timeUnit&&!jh(g.timeUnit)){m=e.vgField(p);const _={timeUnit:g.timeUnit,as:m,field:g.field};s[bt(_)]=_}if(!o[m]){const y={field:m,channel:p,type:"interval"===u&&Wl(p)&&Ha(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",index:r.items.length};y.signals={...l(y,"data"),...l(y,"visual")},r.items.push(o[m]=y),r.hasField[m]=o[m],r.hasSelectionId=r.hasSelectionId||m===Ya,lae(p)?(y.geoChannel=p,y.channel=aae(p),r.hasChannel[y.channel]=o[m]):r.hasChannel[p]=o[m]}}else de(Iae(p))}for(const p of f??[]){if(r.hasField[p])continue;const g={type:"E",field:p,index:r.items.length};g.signals={...l(g,"data")},r.items.push(g),r.hasField[p]=g,r.hasSelectionId=r.hasSelectionId||p===Ya}d&&(t.init=d.map(p=>r.items.map(g=>Ee(p)?void 0!==p[g.geoChannel||g.channel]?p[g.geoChannel||g.channel]:p[g.field]:p))),tn(s)||(r.timeUnit=new eu(null,s))},signals:(e,t,n)=>{const i=t.name+tb;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Wue)})}},ic={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Wl(r))continue;const o=e.getScaleComponent(r),s=o?o.get("type"):void 0;"sequential"==s&&de("Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc"),o&&Ha(s)?(o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)):de("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>0===n.filter(a=>a.name===s.signals.data).length);if(!e.parent||Jue(e)||0===i.length)return n;const r=n.find(s=>s.name===t.name);let o=r.update;if(o.includes(Ece))r.update=`{${i.map(s=>`${me(qs(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const a=`${me(qs(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}r.update=o}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Jue(e))for(const i of t.scales){const r=n.find(o=>o.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function zB(e,t){return`domain(${me(e.scaleName(t))})`}function Jue(e){return e.parent&&M_(e.parent)&&!e.parent.parent}const v_="_brush",Zue="_scale_trigger",nb="geo_interval_init_tick",cJe={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Ee(n.select)?n.select:{}};r.fields=[Ya],r.encodings||(r.encodings=n.value?oe(n.value):[Ua,Ba]),n.select={type:"interval",...r}}if(t.translate&&!ic.defined(t)){const r=`!event.item || event.item.mark.name !== ${me(t.name+v_)}`;for(const o of t.events){if(!o.between){de(`${o} is not an ordered event stream for interval selections.`);continue}const s=De((i=o.between[0]).filter??(i.filter=[]));s.includes(r)||s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+jd,o=rr(t.project.hasChannel).filter(a=>a.channel===Mn||a.channel===Pi),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(function dJe(e,t,n,i){const r=!e.hasProjection,o=n.channel,s=n.signals.visual,a=me(r?e.scaleName(o):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(o===Mn?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const f=n.signals.data,h=ic.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=i?{init:Xh(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+Zue},update:Ha(g)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:s,...m,on:d},{name:f,...i?{init:Xh(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}{const f=o===Mn?0:1,h=t.name+"_init";return[{name:s,...i?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]},on:d}]}}(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=me(e.projectionName()),l=e.projectionName()+"_center",{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":g("width")}, ${f?f+"[1]":g("height")}]]`;s&&(n.unshift({name:i+"_init",init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(D=>D.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const v=`vlSelectionTuples(intersect(${m}, {markname: ${me(e.getName("marks"))}}, unit.mark), {unit: ${Jh(e)}})`,b=o.map(w=>w.signals.visual);return n.concat({name:r,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:nb}]:[]],update:v}]})}{if(!ic.defined(t)){const u=i+Zue,c=o.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,g=me(e.scaleName(f)),_=Ha(e.getScaleComponent(f).get("type"))?"+":"";return`(!isArray(${h}) || (${_}invert(${g}, ${p})[0] === ${_}${h}[0] && ${_}invert(${g}, ${p})[1] === ${_}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Jh(e)}, fields: ${i+tb}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Xh(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Fn(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===nb).length||n.unshift({name:nb,value:null,on:[{events:"timer{1}",update:`${nb} === null ? {} : ${nb}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,s=r?.signals.visual,a=o?.signals.visual,l=`data(${me(t.name+Qh)})`;if(ic.defined(t)||!r&&!o)return n;const u={x:void 0!==r?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==r?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const m of oe(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${Jh(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=oe(h).reduce((m,_)=>(m[_]=[{test:[void 0!==r&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[_]},{value:null}],m),{}),g=f??(t.translate?"move":null);return[{name:`${i+v_}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+v_,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}},fJe={defined:e=>"point"===e.type,signals:(e,t,n)=>{const i=t.name,r=i+tb,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=rr(e.component.selection??{}).reduce((d,f)=>"interval"===f.type?d.concat(f.name+v_):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(a?` && ${a}`:"");let u=`unit: ${Jh(e)}, `;u+=t.project.hasSelectionId?`${Ya}: ${s}[${me(Ya)}]`:`fields: ${r}, values: [${o.items.map(f=>e.fieldDef(f.channel)?.bin?`[${s}[${me(e.vgField(f.channel,{}))}], ${s}[${me(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${me(f.field)}]`).join(", ")}]`;const c=t.events;return n.concat([{name:i+jd,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function b_({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const o=Xv(t)&&t.condition;let s=[];o&&(s=De(o).map(u=>{const c=r(u);if(function sXe(e){return ue(e,"param")}(u)){const{param:d,empty:f}=u;return{test:Ace(e,{param:d,empty:f}),...c}}return{test:JT(e,u.test),...c}})),void 0!==i&&s.push(i);const a=r(t);return void 0!==a&&s.push(a),s.length>1||1===s.length&&Boolean(s[0].test)?{[n]:s}:1===s.length?{[n]:s[0]}:{}}function GB(e,t="text"){return b_({model:e,channelDef:e.encoding[t],vgChannel:t,mainRefFn:i=>qT(i,e.config),invalidValueRef:void 0})}function qT(e,t,n="datum"){if(e){if(Wa(e))return Dn(e.value);if(nt(e)){const{format:i,formatType:r}=IT(e);return fB({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function tce(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,s=n.tooltip;if(te(s))return{tooltip:ice({tooltip:s},o,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return b_({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=qT(u,r,a);if(c)return c;if(null===u)return;let d=rn("tooltip",i,r);return!0===d&&(d={content:"encoding"}),Ce(d)?{value:d}:Ee(d)?Pe(d)?d:"encoding"===d.content?ice(n,o,r,t):{signal:a}:void 0},invalidValueRef:void 0})}}function nce(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o=new Set,s=i?"datum.datum":"datum",a=[];function l(c,d){const f=Lh(d),h=no(c)?c:{...c,type:e[f].type},g=De(h.title||_B(h,r)).join(", ").replaceAll(/"/g,'\\"');let m;if(ei(d)){const _="x"===d?"x2":"y2",y=qa(e[_]);if(or(h.bin)&&y){const v=we(h,{expr:s}),b=we(y,{expr:s}),{format:w,formatType:D}=IT(h);m=Yv(v,b,w,D,r),o.add(_)}}if((ei(d)||d===Ys||d===$a)&&t&&t.fieldChannel===d&&"normalize"===t.offset){const{format:_,formatType:y}=IT(h);m=fB({fieldOrDatumDef:h,format:_,formatType:y,expr:s,config:r,normalizeStack:!0}).signal}m??(m=qT(h,r,s).signal),a.push({channel:d,key:g,value:m})}vB(e,(c,d)=>{pe(c)?l(c,d):NT(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!o.has(c)&&!u[d]&&(u[d]=f);return u}function ice(e,t,n,{reactiveGeom:i}={}){const r=nce(e,t,n,{reactiveGeom:i}),o=Td(r).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function hJe(e){const{markDef:t,config:n}=e,i=rn("aria",t,n);return!1===i?{}:{...i?{aria:i}:{},...pJe(e),...gJe(e)}}function pJe(e){const{mark:t,markDef:n,config:i}=e;if(!1===i.aria)return{};const r=rn("ariaRoleDescription",n,i);return null!=r?{ariaRoleDescription:{value:r}}:Ae(Xqe,t)?{}:{ariaRoleDescription:{value:t}}}function gJe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return b_({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>qT(l,e.config),invalidValueRef:void 0});const s=rn("description",n,i);if(null!=s)return{description:Dn(s)};if(!1===i.aria)return{};const a=nce(t,r,i);return tn(a)?void 0:{description:{signal:Td(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function lr(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=r[e];void 0===a&&(l??(l=rn(e,i,o,{vgChannel:s,ignoreVgConfig:!Xv(u)})),void 0!==l&&(a=Dn(l)));const c={markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=wle({...c,scaleChannel:e,channelDef:u});return b_({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:d,mainRefFn:h=>dB({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function rce(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,s=t.filled??rn("filled",n,r),a=mt(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=rn(!0===s?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[!0===s&&"color"]??a,u=rn(!1===s?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[!1===s&&"color"],c=s?"fill":"stroke",d={...l?{fill:Dn(l)}:{},...u?{stroke:Dn(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&de(Bae("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...lr("color",e,{vgChannel:c,defaultValue:s?l:u}),...lr("fill",e,{defaultValue:i.fill?l:void 0}),...lr("stroke",e,{defaultValue:i.stroke?u:void 0})}}function mJe(e){const{encoding:t,mark:n}=e,i=t.order;return!Ld(n)&&Wa(i)?b_({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Dn(r.value),invalidValueRef:void 0}):{}}function w_({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,s=t[o],a=n[o];if(("xOffset"===o||"yOffset"===o)&&a)return{offsetType:"encoding",offset:dB({channel:o,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:Dn(s),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function io(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:s,stack:a}=t,l=r[e],u=r[Gl(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=w_({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),p=WB({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),g=!l&&ei(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:function _Je(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:s}=e;if(nt(n)&&r&&t===r.fieldChannel){if(pe(n)){let a=n.bandPosition;if(void 0===a&&"text"===s.type&&("radius"===t||"theta"===t)&&(a=.5),void 0!==a)return TT({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Wh(n,i,{suffix:"end"},{offset:o})}return cB(e)}({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return g?{[i||e]:g}:void 0}function WB({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:s}=e;return()=>{const a=Lh(n),l=Id(n),u=rn(n,o,s,{vgChannel:l});if(void 0!==u)return qv(n,u);switch(t){case"zeroOrMin":return oce({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return oce({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[ko(n)],mult:.5}}}}function oce({mainChannel:e,config:t,...n}){const i=ble(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if("zeroOrMin"===r)return{value:0};const{widthSignal:o,heightSignal:s}=r.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return"zeroOrMin"===r?{value:0}:{signal:"2*PI"};case"x":return"zeroOrMin"===r?{value:0}:{field:{group:"width"}};case"y":return"zeroOrMin"===r?{field:{group:"height"}}:{value:0}}}const yJe={left:"x",center:"xc",right:"x2"},vJe={top:"y",middle:"yc",bottom:"y2"};function sce(e,t,n,i="middle"){if("radius"===e||"theta"===e)return Id(e);const r="x"===e?"align":"baseline",o=rn(r,t,n);let s;return Pe(o)?(de(function xYe(e){return`The ${e} for range marks cannot be an expression`}(r)),s=void 0):s=o,"x"===e?yJe[s||("top"===i?"left":"center")]:vJe[s||i]}function YT(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?ace(e,t,{defaultPos:n,defaultPos2:i}):io(e,t,{defaultPos:n})}function ace(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,s=Gl(e),a=ko(e),l=function bJe(e,t,n){const{encoding:i,mark:r,markDef:o,stack:s,config:a}=e,l=Lh(n),u=ko(n),c=Id(n),d=i[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=w_(n in i||n in o?{channel:n,markDef:o,encoding:i,model:e}:{channel:l,markDef:o,encoding:i,model:e});if(!d&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){const m=ko(n),_=e.markDef[m];return null!=_?{[m]:{value:_}}:{[c]:{field:e.getName(n)}}}const g=function wJe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return nt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Wh(t,o,{suffix:"start"},{offset:l}):cB({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:i,config:r,offset:l,defaultRef:u})}({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:a,scaleName:f,scale:h,stack:s,offset:p,defaultRef:void 0});return void 0!==g?{[c]:g}:KT(n,o)||KT(n,{[n]:U5(n,o,a.style),[u]:U5(u,o,a.style)})||KT(n,a[r])||KT(n,a.mark)||{[c]:WB({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}(t,i,s);return{...io(e,t,{defaultPos:n,vgChannel:l[a]?sce(e,r,o):Id(e)}),...l}}function KT(e,t){const n=ko(e),i=Id(e);if(void 0!==t[i])return{[i]:qv(e,t[i])};if(void 0!==t[e])return{[i]:qv(e,t[e])};if(t[n]){const r=t[n];if(!Gh(r))return{[n]:qv(e,r)};de(function EYe(e){return`Position range does not support relative band size for ${e}.`}(n))}}function rc(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,s=Gl(t),a=ko(t),l=i[t],u=i[s],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=r.orient,h=i[a]??i.size??rn("size",r,n,{vgChannel:a}),p=pae(t),g="bar"===o&&("x"===t?"vertical"===f:"horizontal"===f)||"tick"===o&&("y"===t?"vertical"===f:"horizontal"===f);return!pe(l)||!(gn(l.bin)||or(l.bin)||l.timeUnit&&!u)||h&&!Gh(h)||i[p]||$i(d)?(nt(l)&&$i(d)||g)&&!u?function DJe(e,t,n){const{markDef:i,encoding:r,config:o,stack:s}=n,a=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=ko(t),d=Gl(t),f=pae(t),h=n.scaleName(f),p=n.getScaleComponent(O5(t)),g="tick"===i.type||"horizontal"===a&&"y"===t||"vertical"===a&&"x"===t;let m;(r.size||i.size)&&(g?m=lr("size",n,{vgChannel:c,defaultRef:Dn(i.size)}):de(function PYe(e){return`Cannot apply size to non-oriented mark "${e}".`}(i.type)));const _=!!m,y=Ole({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(u||p)?.get("type"),useVlSizeChannel:g});m=m||{[c]:EJe(c,h||l,p||u,o,y,!!e,i.type)};const b=sce(t,i,o,"band"===(u||p)?.get("type")&&Gh(y)&&!_?"top":"middle"),w="xc"===b||"yc"===b,{offset:D,offsetType:E}=w_({channel:t,markDef:i,encoding:r,model:n,bandPosition:w?.5:0}),S=cB({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:s,offset:D,defaultRef:WB({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?"encoding"===E?0:.5:Pe(y)?{signal:`(1-${y})/2`}:Gh(y)?(1-y.band)/2:0});if(c)return{[b]:S,...m};{const M=Id(d),k=m[c],R=D?{...k,offset:D}:k;return{[b]:S,[M]:te(S)?[S[0],{...S[1],offset:R}]:{...S,offset:R}}}}(l,t,e):ace(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function CJe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:o,encoding:s}=i,a=i.getScaleComponent(n),l=i.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=Ole({channel:n,fieldDef:e,markDef:o,config:r,scaleType:u}),h=i.component.axes[n]?.[0]?.get("translate")??.5,p=ei(n)?rn("binSpacing",o,r)??0:0,g=Gl(n),m=Id(n),_=Id(g),y=ql("minBandSize",o,r),{offset:v}=w_({channel:n,markDef:o,encoding:s,model:i,bandPosition:0}),{offset:b}=w_({channel:g,markDef:o,encoding:s,model:i,bandPosition:0}),w=function eXe({scaleName:e,fieldDef:t}){const n=we(t,{expr:"datum"});return`abs(scale("${e}", ${we(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:l}),D=lce(n,p,c,h,v,y,w),E=lce(g,p,c,h,b??v,y,w),S=Pe(d)?{signal:`(1-${d.signal})/2`}:Gh(d)?(1-d.band)/2:.5,M=$d({fieldDef:e,fieldDef2:t,markDef:o,config:r});if(gn(e.bin)||e.timeUnit){const k=e.timeUnit&&.5!==M;return{[_]:uce({fieldDef:e,scaleName:l,bandPosition:S,offset:E,useRectOffsetField:k}),[m]:uce({fieldDef:e,scaleName:l,bandPosition:Pe(S)?{signal:`1-${S.signal}`}:1-S,offset:D,useRectOffsetField:k})}}if(or(e.bin)){const k=Wh(e,l,{},{offset:E});if(pe(t))return{[_]:k,[m]:Wh(t,l,{},{offset:D})};if($h(e.bin)&&e.bin.step)return{[_]:k,[m]:{signal:`scale("${l}", ${we(e,{expr:"datum"})} + ${e.bin.step})`,offset:D}}}de(zae(g))}({fieldDef:l,fieldDef2:u,channel:t,model:e})}function EJe(e,t,n,i,r,o,s){if(Gh(r)){if(!n)return{mult:r.band,field:{group:e}};{const l=n.get("type");if("band"===l){let u=`bandwidth('${t}')`;1!==r.band&&(u=`${r.band} * ${u}`);const c=ql("minBandSize",{type:s},i);return{signal:c?`max(${ja(c)}, ${u})`:u}}1!==r.band&&(de(function kYe(e){return`Cannot use the relative band size with ${e} scale.`}(l)),r=void 0)}}else{if(Pe(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Bh(l)&&Ft(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:d}=i.scale,f=Zn(l,"tick"===s?d:"bar"===s?u:c);if(Pe(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Ft(f))return{signal:`${1-f} * ${e}`}}return{value:IB(i.view,e)-2}}function lce(e,t,n,i,r,o,s){if(sae(e))return 0;const a="x"===e||"y2"===e,l=a?-t/2:t/2;if(Pe(n)||Pe(r)||Pe(i)||o){const u=ja(n),c=ja(r),d=ja(i),f=ja(o),p=o?`(${s} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${s})) : ${l})`:l;return{signal:(d?`${d} + `:"")+(u?`(${u} ? -1 : 1) * `:"")+(c?`(${c} + ${p})`:p)}}return r=r||0,i+(n?-r-l:+r+l)}function uce({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return TT({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:GT,endSuffix:WT}:{}})}const SJe=new Set(["aria","width","height"]);function Qs(e,t){const{fill:n,stroke:i}="include"===t.color?rce(e):{};return{...AJe(e.markDef,t),...cce("fill",n),...cce("stroke",i),...lr("opacity",e),...lr("fillOpacity",e),...lr("strokeOpacity",e),...lr("strokeWidth",e),...lr("strokeDash",e),...mJe(e),...tce(e),...GB(e,"href"),...hJe(e)}}function cce(e,t){return t?{[e]:t}:{}}function AJe(e,t){return Kqe.reduce((n,i)=>(!SJe.has(i)&&ue(e,i)&&"ignore"!==t[i]&&(n[i]=Dn(e[i])),n),{})}function qB(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,o)=>{let s;if(!Wl(o)||!(s=e.getScaleType(o)))return;const a=gT(r.aggregate);if(function QKe(e){return"break-paths-filter-domains"===e||"break-paths-show-domains"===e}(uB({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a}))){const u=e.vgField(o,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&i.add(u)}}),i.size>0)return{defined:{signal:[...i].map(o=>bT(o,!0)).join(" && ")}}}function dce(e,t){if(void 0!==t)return{[e]:Dn(t)}}const YB="voronoi",fce={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(YB)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(Ld(o))return de(function tYe(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),n;const s={name:e.getName(YB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...tce(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.includes(YB)&&(l=!0)}),l||n.splice(a+1,0,s),n}},hce={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!TB(e.bind),parse:(e,t,n)=>Dce(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,s=t.init&&t.init[0],a=fce.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=xn(`${i}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...s?{init:Xh(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${me(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(u=>u.name===i+jd),s=i+tb,a=r.items.map(u=>xn(`${i}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},XT="_toggle",pce={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+XT,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+jd,i=t.name+XT;return`${i} ? null : ${n}, `+("global"===t.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${Jh(e)}}, `)+`${i} ? ${n} : null`}},TJe={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=Ce(t.clear)?Sd(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(hce.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===xn(`${t.name}_${i.field}`));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){-1!==r&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if("interval"===t.type)for(const r of t.project.items){const o=n.findIndex(s=>s.name===r.signals.visual);i(o,"[0, 0]"),-1===o&&i(n.findIndex(a=>a.name===r.signals.data),"null")}else{let r=n.findIndex(o=>o.name===t.name+jd);i(r,"null"),pce.defined(t)&&(r=n.findIndex(o=>o.name===t.name+XT),i(r,"false"))}return n}},gce={defined:e=>{const t="global"===e.resolve&&e.bind&&TB(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Ya;return t&&!n&&de("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const i=Ze(n);if(i.select=Ce(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},Dce(t,i),Ee(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=De(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const r=xB(t.bind)?t.bind.legend:"click",o=Ce(r)?Sd(r,"view"):De(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=xB(t.bind)&&t.bind.legend,o=s=>a=>{const l=Ze(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${xn(s.field)}_legend`,l=`${i}_${a}`;if(0===n.filter(c=>c.name===l).length){const c=r.merge.map(o(`${a}_symbols`)).concat(r.merge.map(o(`${a}_labels`))).concat(r.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(f=>f.name===i+jd),s=i+tb,a=r.items.filter(f=>f.hasLegend).map(f=>xn(`${i}_${xn(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(f=>f.name===i+XT),d=xB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}},mce="_translate_anchor",_ce="_translate_delta",NJe={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const i=t.name,r=ic.defined(t),o=i+mce,{x:s,y:a}=t.project.hasChannel;let l=Sd(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+v_,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${r?zB(e,Mn):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?zB(e,Pi):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+_ce,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&yce(e,t,s,"width",n),void 0!==a&&yce(e,t,a,"height",n),n}};function yce(e,t,n,i,r){const o=t.name,s=o+mce,a=o+_ce,l=n.channel,u=ic.defined(t),c=r.find(w=>w.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(i).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=`${s}.extent_${l}`,b=`${u&&f?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${u?l===Mn?p?"":"-":p?"-":"":""}${a}.${l} / ${u?`${d}`:`span(${m})`}${u?"pow"===h?`, ${f.get("exponent")??1}`:"symlog"===h?`, ${f.get("constant")??1}`:"":""})`;c.on.push({events:{signal:a},update:u?b:`clampRange(${b}, 0, ${d})`})}const vce="_zoom_anchor",bce="_zoom_delta",OJe={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=ic.defined(t),o=i+bce,{x:s,y:a}=t.project.hasChannel,l=me(e.scaleName(Mn)),u=me(e.scaleName(Pi));let c=Sd(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+v_,d))),n.push({name:i+vce,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&wce(e,t,s,"width",n),void 0!==a&&wce(e,t,a,"height",n),n}};function wce(e,t,n,i,r){const o=t.name,s=n.channel,a=ic.defined(t),l=r.find(y=>y.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(s),d=c&&c.get("type"),f=a?zB(e,s):l.name,h=o+bce,_=`${a&&c?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${f}, ${o}${vce}.${s}, ${h}${a?"pow"===d?`, ${c.get("exponent")??1}`:"symlog"===d?`, ${c.get("constant")??1}`:"":""})`;l.on.push({events:{signal:h},update:a?_:`clampRange(${_}, 0, ${u})`})}const Qh="_store",jd="_tuple",kJe="_modify",Ece="vlSelectionResolve",QT=[fJe,cJe,lJe,pce,hce,ic,gce,TJe,NJe,OJe,fce];function Jh(e,{escape:t}={escape:!0}){let n=t?me(e.name):e.name;const i=function IJe(e){let t=e.parent;for(;t&&!hs(t);)t=t.parent;return t}(e);if(i){const{facet:r}=i;for(const o of Xs)r[o]&&(n+=` + '__facet_${o}_' + (facet[${me(i.vgField(o))}])`)}return n}function KB(e){return rr(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Dce(e,t){(Ce(t.select)||!t.select.on)&&delete e.events,(Ce(t.select)||!t.select.clear)&&delete e.clear,(Ce(t.select)||!t.select.toggle)&&delete e.toggle}function XB(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...XB(e.object)),t.push(...XB(e.property))),t)}function Cce(e){return"MemberExpression"===e.object.type?Cce(e.object):"datum"===e.object.name}function Sce(e){const t=h$(e),n=new Set;return t.visit(i=>{"MemberExpression"===i.type&&Cce(i)&&n.add(XB(i).slice(1).join("."))}),n}class E_ extends Zt{clone(){return new E_(null,this.model,Ze(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=JT(this.model,this.filter,this),this._dependentFields=Sce(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ace(e,t,n,i="datum"){const r=Ce(t)?t:t.param,o=xn(r),s=me(o+Qh);let a;try{a=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const c=`${a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${s}, ${i}${"global"===a.resolve?")":`, ${me(a.resolve)})`}`,d=`length(data(${s}))`;return!1===t.empty?`${d} && ${c}`:`!${d} || ${c}`}function Tce(e,t,n){const i=xn(t),r=n.encoding;let s,o=n.field;try{s=e.getSelectionComponent(i,t)}catch{return i}if(r||o){if(r&&!o){const a=s.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(o=s.project.items[0].field,de((a.length?"Multiple ":"No ")+`matching ${me(r)} encoding found for selection ${me(n.param)}. Using "field": ${me(o)}.`)):o=a[0].field}}else o=s.project.items[0].field,s.project.items.length>1&&de(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${me(o)}.`);return`${s.name}[${me(qs(o))}]`}function JT(e,t,n){return $v(t,i=>Ce(i)?i:function bKe(e){return ue(e,"param")}(i)?Ace(e,i,n):ile(i))}function QB(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function ib(e,t,n,i={header:!1}){const{disable:r,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!r){for(const d in c){const f=d,h=bXe[f],p=c[f];if(h&&h!==t&&"both"!==h)delete c[f];else if(Zv(p)){const{condition:g,...m}=p,_=De(g),y=jle[f];if(y){const{vgProp:v,part:b}=y;QB(c,b,v,[..._.map(D=>{const{test:E,...S}=D;return{test:JT(null,E),...S}}),m]),delete c[f]}else if(null===y){const v={signal:_.map(b=>{const{test:w,...D}=b;return`${JT(null,w)} ? ${Dae(D)} : `}).join("")+Dae(m)};c[f]=v}}else if(Pe(p)){const g=jle[f];if(g){const{vgProp:m,part:_}=g;QB(c,_,m,p),delete c[f]}}mt(["labelAlign","labelBaseline"],f)&&null===c[f]&&delete c[f]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:d}=c.encode;c.encode={...d?{grid:d}:{}},tn(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Zn(u,0)}}{if(!i.header&&e.mainExtracted)return;if(void 0!==a){let f=a;c.encode?.labels?.update&&Pe(c.encode.labels.update.text)&&(f=Rh(a,"datum.label",c.encode.labels.update.text.signal)),QB(c,"labels","text",{signal:f})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const f of Hle)e.hasAxisPart(f)||delete c.encode[f];tn(c.encode)&&delete c.encode}const d=function PJe(e,t){if(e)return te(e)&&!Fd(e)?e.map(n=>_B(n,t)).join(", "):e}(l,n);return{scale:s,orient:o,grid:!1,...d?{title:d}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:Zn(u,0)}}}}function xce(e){const{axes:t}=e.component,n=[];for(const i of Xu)if(t[i])for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o="x"===i?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}return n}function Mce(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if("axisOrient"===r){const o="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},a=t["x"===n?"axisTop":"axisRight"]||{},l=new Set([...oe(s),...oe(a)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${ja(s[c])} : ${ja(a[c])}`};return u}return t[r]})])}function BJe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=De(r);for(const o of r)n.push(t.style[o])}}return Object.assign.apply(null,n)}function JB(e,t,n,i={}){const r=Sae(e,n,t);if(void 0!==r)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==i[o]?.[e])return{configFrom:o,configValue:i[o][e]};return{}}const Nce={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function UJe(e,t){return!$i(e)&&pe(t)&&!gn(t?.bin)&&!or(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function VJe(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||kce(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||Oce(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function HJe(e,t){if("x"===t&&mt(["quantitative","temporal"],e))return!0}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function zJe(e,t,n,i){if(n&&!Ee(i)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}(t.type,n,pe(t)&&!!t.timeUnit,pe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o="x"===e?"width":"y"===e?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function WJe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!$i(t)&&"log"!==t){if(pe(e)){if(gn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&mt(["month","hours","day","quarter"],Li(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:function qJe({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(pe(t)){const{timeUnit:n}=t;if(n){const i=ele(n);if(i)return{signal:i}}}},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const i=Ice(t,n);if(void 0!==i)return i;const r=t.typedFieldDef(n),s=t.fieldDef("x"===n?"x2":"y2");return Tae(r?[Nle(r)]:[],pe(s)?[Nle(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function YJe(e,t){const n=e.values;return te(n)?Vle(t,n):Pe(n)?n:void 0}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function KJe(e,t){return"rect"===e&&kT(t)?1:0}(n,t)};function ZB(e){return`(((${e.signal} % 360) + 360) % 360)`}function Oce(e,t,n,i){if(void 0!==e){if("x"===n){if(Pe(e)){const r=ZB(e);return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${Pe(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":Pe(t)?{signal:`${t.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Pe(e)){const r=ZB(e);return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${Pe(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?i?"middle":null:Pe(t)?{signal:`${t.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function kce(e,t,n){if(void 0===e)return;const i="x"===n,r=i?0:90,o=i?"bottom":"left";if(Pe(e)){const s=ZB(e);return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${Pe(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}return(e+r)%180==0?i?null:"center":Pe(t)?{signal:`${t.signal} ${r<e&&e<180+r?"===":"!=="} "${o}" ? "left" : "right"`}:(r<e&&e<180+r)==(t===o)?"left":"right"}function Ice(e,t){const n="x"===t?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,s=r?r.title:void 0;return o&&s?xae(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class D_ extends Zt{clone(){return new D_(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Sce(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Yh(i)&&Mle(i.sort)){const{field:o,timeUnit:s}=i,a=i.sort,l=a.map((u,c)=>`${ile({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new D_(t,{calculate:l,as:C_(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${bt(this.transform)}`}}function C_(e,t,n){return we(e,{prefix:t,suffix:"sort_index",...n})}function ZT(e,t){return mt(["top","bottom"],t)?"column":mt(["left","right"],t)||"row"===e?"row":"column"}function S_(e,t,n,i){return Zn((t||{})[e],("row"===i?n.headerRow:"column"===i?n.headerColumn:n.headerFacet)[e],n.header[e])}function ex(e,t,n,i){const r={};for(const o of e){const s=S_(o,t||{},n,i);void 0!==s&&(r[o]=s)}return r}const e4=["row","column"],t4=["header","footer"];function XJe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=ex(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=ZT(t,a),u=Uv(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...Fce(u,l),...Rce(l,u,o),...Pce(i,r,t,UXe,uue)}}}function Rce(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=kce(t,"row"===e?"left":"top","row"===e?"y":"x");return i?{align:i}:{}}function Fce(e,t){const n=Oce(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function QJe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of t4)if(n[r])for(const o of n[r]){const s=ZJe(e,t,r,n,o);null!=s&&i.push(s)}return i}function JJe(e,t){const{sort:n}=e;return Zu(n)?{field:we(n,{expr:"datum"}),order:n.order??"ascending"}:te(n)?{field:C_(e,t,{expr:"datum"}),order:"ascending"}:{field:we(e,{expr:"datum"}),order:n??"ascending"}}function n4(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=ex(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=fB({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=ZT(t,a);return{text:{signal:l?Rh(Rh(l,"datum.label",u),"datum.value",we(e,{expr:"parent"})):u},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...Fce(o,c),...Rce(c,o,s),...Pce(n,e,t,VXe,cue)}}function ZJe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:d}=ex(["labelOrient"],s.header,a,t);("row"===t&&!mt(["top","bottom"],d)||"column"===t&&!mt(["left","right"],d))&&(o=n4(s,t,a))}const l=hs(e)&&!Kv(e.facet),u=r.axes,c=u?.length>0;if(o||c){const d="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:JJe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const eZe={column:{start:0,end:1},row:{start:1,end:0}};function tZe(e,t){return eZe[t][e]}function Pce(e,t,n,i,r){const o={};for(const s of i){if(!r[s])continue;const a=S_(s,t?.header,e,n);void 0!==a&&(o[r[s]]=a)}return o}function i4(e){return[...tx(e,"width"),...tx(e,"height"),...tx(e,"childWidth"),...tx(e,"childHeight")]}function tx(e,t){const n="width"===t?"x":"y",i=e.component.layoutSize.get(t);if(!i||"merged"===i)return[];const r=e.getSizeSignalRef(t).signal;if("step"===i){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if($i(s)&&Bh(a)){const l=e.scaleName(n);return hs(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[Lce(l,a)]:[Lce(l,a),{name:r,update:$ce(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const o=r.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",l=`isFinite(${s}) ? ${s} : ${kB(e.config.view,o?"width":"height")}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}return[{name:r,value:i}]}function Lce(e,t){const n=`${e}_step`;return Pe(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function $ce(e,t,n){const i=t.get("type"),r=t.get("padding"),o=Zn(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s="band"===i?void 0!==s?s:r:1,`bandspace(${n}, ${ja(s)}, ${ja(o)}) * ${e}_step`}function Bce(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Uce(e,t){return oe(e).reduce((n,i)=>({...n,...b_({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Dn(r.value),invalidValueRef:void 0})}),{})}function Vce(e,t){if(hs(t))return"theta"===e?"independent":"shared";if(M_(t))return"shared";if(v4(t))return ei(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function r4(e,t){const n=e.scale[t],i=ei(t)?"axis":"legend";return"independent"===n?("shared"===e[i][t]&&de(function VYe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[i][t]||"shared"}const iZe={...hue,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},jce=oe(iZe);class rZe extends nc{}const Hce={symbols:function oZe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if("symbol"!==o)return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&"trail"!==u;let d={...Jqe({},n,zKe),...rce(n,{filled:c})};const f=r.get("symbolOpacity")??l.legend.symbolOpacity,h=r.get("symbolFillColor")??l.legend.symbolFillColor,p=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=void 0===f?zce(a.opacity)??s.opacity:void 0;if(d.fill)if("fill"===i||c&&i===No)delete d.fill;else if(ue(d.fill,"field"))h?delete d.fill:(d.fill=Dn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Dn(g??1));else if(te(d.fill)){const m=o4(a.fill??a.color)??s.fill??(c&&s.color);m&&(d.fill=Dn(m))}if(d.stroke)if("stroke"===i||!c&&i===No)delete d.stroke;else if(ue(d.stroke,"field")||p)delete d.stroke;else if(te(d.stroke)){const m=Zn(o4(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(d.stroke={value:m})}if(i!==Ku){const m=pe(t)&&Wce(0,r,t);m?d.opacity=[{test:m,...Dn(g??1)},Dn(l.legend.unselectedOpacity)]:g&&(d.opacity=Dn(g))}return d={...d,...e},tn(d)?void 0:d},gradient:function sZe(e,{model:t,legendType:n,legendCmpt:i}){if("gradient"!==n)return;const{config:r,markDef:o,encoding:s}=t;let a={};const u=void 0===(i.get("gradientOpacity")??r.legend.gradientOpacity)?zce(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Dn(u)),a={...a,...e},tn(a)?void 0:a},labels:function aZe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},s=n.config,a=pe(t)?Wce(0,r,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;qh(c)?d=Ga({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):void 0===u&&void 0===c&&s.customFormatTypes&&("quantitative"===t.type&&s.numberFormatType?d=Ga({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):"temporal"===t.type&&s.timeFormatType&&pe(t)&&void 0===t.timeUnit&&(d=Ga({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return tn(f)?void 0:f},entries:function lZe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function zce(e){return Gce(e,(t,n)=>Math.max(t,n.value))}function o4(e){return Gce(e,(t,n)=>Zn(t,n.value))}function Gce(e,t){return function lXe(e){const t=e?.condition;return!!t&&(te(t)||Wa(t))}(e)?De(e.condition).reduce(t,e.value):Wa(e)?e.value:void 0}function Wce(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=me(n.field);return i.map(o=>`(!length(data(${me(xn(o)+Qh)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const qce={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Cle(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Sle(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function gZe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Xl(r))return"horizontal"===n?"top"===i||"bottom"===i?Yce(t,"width",s,o):s:Yce(t,"height",l,a)}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function mZe(e){if(mt(["quantile","threshold","log","symlog"],e))return"greedy"}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??function cZe(e,t,n,i){if("shape"!==t){const r=o4(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>p_(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(l_(n)&&Xl(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function uZe(e,t){const n=e.values;return te(n)?Vle(t,n):Pe(n)?n:void 0}(t,e)};function Yce(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function Kce(e){const t=Fn(e)?function _Ze(e){const{encoding:t}=e,n={};for(const i of[No,...fue]){const r=Ti(t[i]);!r||!e.getScaleComponent(i)||i===Oo&&pe(r)&&r.type===c_||(n[i]=bZe(e,i))}return n}(e):function wZe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Kce(i);for(const r of oe(i.component.legends))n.legend[r]=r4(e.component.resolve,r),"shared"===n.legend[r]&&(t[r]=Xce(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of oe(t))for(const r of e.children)r.component.legends[i]&&"shared"===n.legend[i]&&delete r.component.legends[i];return t}(e);return e.component.legends=t,t}function vZe(e,t,n,i){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===i?.title)return!0}return e===(n||{})[t]}function bZe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,s=o.legend,a=new rZe({},function yZe(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function MJe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of rr(e.component.selection??{})){const o=r.project.hasField[i]??r.project.hasChannel[t];if(o&&gce.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),o.hasLegend=!0}}}(e,t,a);const l=void 0!==n?!n:s.disable;if(a.set("disable",l,void 0!==n),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Ti(r[t]),d=pe(c)?Li(c.timeUnit)?.unit:void 0,f=n.orient||o.legend.orient||"right",h=function dZe(e){const{legend:t}=e;return Zn(t.type,function fZe({channel:e,timeUnit:t,scaleType:n}){if(l_(e)){if(mt(["quarter","month","day"],t))return"symbol";if(Xl(n))return"gradient"}return"symbol"}(e))}({legend:n,channel:t,timeUnit:d,scaleType:u}),p=function hZe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??function pZe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:n,legendType:h,orient:f,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:f,legendType:h,direction:p};for(const b of jce){if("gradient"===h&&b.startsWith("symbol")||"symbol"===h&&b.startsWith("gradient"))continue;const w=b in qce?qce[b](g):n[b];if(void 0!==w){const D=vZe(w,b,n,e.fieldDef(t));(D||void 0===o.legend[b])&&a.set(b,w,D)}}const m=n?.encoding??{},_=a.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const b of["labels","legend","title","symbols","gradient","entries"]){const w=Uce(m[b]??{},e),D=b in Hce?Hce[b](w,v):w;void 0!==D&&!tn(D)&&(y[b]={..._?.length&&pe(c)?{name:`${xn(c.field)}_legend_${b}`}:{},..._?.length?{interactive:!!_}:{},update:D})}return tn(y)||a.set("encode",y,!!n?.encoding),a}function Xce(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const o of jce){const s=Ud(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(a,l)=>{switch(o){case"symbolType":return EZe(a,l);case"title":return Mae(a,l);case"type":return r=!0,fs("symbol")}return zT(a,l,o,"legend")});e.setWithExplicit(o,s)}return r&&(e.implicit?.encode?.gradient&&aT(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&aT(e.explicit,["encode","gradient"])),e}function EZe(e,t){return"circle"===t.value?t:e}function Qce(e){const t=e.component.legends,n={};for(const r of oe(t)){const s=nn(e.getScaleComponent(r).get("domains"));if(n[s])for(const a of n[s])Xce(a,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return rr(n).flat().map(r=>function CZe(e,t){const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(!1===t.aria&&null==o.aria&&(o.aria=!1),o.encode?.symbols){const s=o.encode.symbols.update;s.fill&&"transparent"!==s.fill.value&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(const a of fue)o[a]&&delete s[a]}if(o.title||delete o.title,void 0!==i){let s=i;o.encode?.labels?.update&&Pe(o.encode.labels.update.text)&&(s=Rh(i,"datum.label",o.encode.labels.update.text.signal)),function DZe(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}(o,"labels","text",{signal:s})}return o}}(r,e.config)).filter(r=>void 0!==r)}function Jce(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Pe(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return mt(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const TZe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Zce extends nc{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function ede(e){e.component.projection=Fn(e)?function xZe(e){if(e.hasProjection){const t=sr(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?function MZe(e){const t=[],{encoding:n}=e;for(const i of[[Ua,Ba],[Ks,Va]])(Ti(n[i[0]])||Ti(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Oo)&&e.typedFieldDef(Oo).type===c_&&t.push({signal:e.getName(`geojson_${t.length}`)}),0===t.length&&t.push(e.requestDataName(Rn.Main)),t}(e):void 0,o=new Zce(e.projectionName(!0),{...sr(e.config.projection),...t},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}(e):function OZe(e){if(0===e.children.length)return;let t;for(const i of e.children)ede(i);const n=D5(e.children,i=>{const r=i.component.projection;if(r){if(t){const o=function NZe(e,t){const n=D5(TZe,r=>!!(!Ae(e.explicit,r)&&!Ae(t.explicit,r)||Ae(e.explicit,r)&&Ae(t.explicit,r)&&cs(e.get(r),t.get(r))));if(cs(e.size,t.size)){if(n)return e;if(cs(e.explicit,{}))return t;if(cs(t.explicit,{}))return e}return null}(t,r);return o&&(t=o),!!o}return t=r,!0}return!0});if(t&&n){const i=e.projectionName(!0),r=new Zce(i,t.specifiedProjection,t.size,Ze(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return r}}(e)}function kZe(e,t,n,i){if(Jv(t,n)){const r=Fn(e)?e.axis(n)??e.legend(n)??{}:{},o=we(t,{expr:"datum"}),s=we(t,{expr:"datum",binSuffix:"end"});return{formulaAs:we(t,{binSuffix:"range",forAs:!0}),formula:Yv(o,s,r.format,r.formatType,i)}}return{}}function tde(e,t){return`${yae(e)}_${t}`}function s4(e,t,n){const r=tde(FT(n,void 0)??{},t);return e.getName(`${r}_bins`)}function nde(e,t,n){let i,r;i=function RZe(e){return"as"in e}(e)?Ce(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[we(e,{forAs:!0}),we(e,{binSuffix:"end",forAs:!0})];const o={...FT(t,void 0)},s=tde(o,e.field),{signal:a,extentSignal:l}=function IZe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(mT(o.extent)){const c=o.extent;r=Tce(n,c.param,c),delete o.extent}return{key:s,binComponent:{bin:o,field:e.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}}}}class tu extends Zt{clone(){return new tu(null,Ze(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{if(no(o)&&gn(o.bin)){const{key:a,binComponent:l}=nde(o,o.bin,n);r[a]={...l,...r[a],...kZe(n,o,s,n.config)}}return r},{});return tn(i)?null:new tu(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=nde(n,n.bin,i);return new tu(t,{[r]:o})}merge(t,n){for(const i of oe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Vl([...this.bins[i].as,...t.bins[i].as],bt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(rr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(rr(this.bins).map(t=>t.field))}hash(){return`Bin ${bt(this.bins)}`}assemble(){return rr(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:qs(t.field),as:i,signal:t.signal,...mT(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:qs(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:we({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class Ka extends Zt{clone(){return new Ka(null,new Set(this.dimensions),Ze(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},o=new Set;return i&&(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if("count"===l)r["*"]??(r["*"]={}),r["*"].count=new Set([we(s,{forAs:!0})]);else{if(Qu(l)||Rd(l)){const c=Qu(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([we({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([we(s,{forAs:!0})]);Wl(a)&&"unaggregated"===n.scaleDomain(a)&&(r[u]??(r[u]={}),r[u].min=new Set([we({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([we({field:u,aggregate:"max"},{forAs:!0})]))}else!function FZe(e,t,n,i){const r=Fn(i)?i.encoding[Gl(t)]:void 0;if(no(n)&&Fn(i)&&kle(n,r,i.markDef,i.config)){e.add(we(n,{})),e.add(we(n,{suffix:"end"}));const{mark:o,markDef:s,config:a}=i,l=$d({fieldDef:n,markDef:s,config:a});Wv(o)&&.5!==l&&ei(t)&&(e.add(we(n,{suffix:GT})),e.add(we(n,{suffix:WT}))),n.bin&&Jv(n,t)&&e.add(we(n,{binSuffix:"range"}))}else if(lae(t)){const o=aae(t);e.add(i.getName(o))}else e.add(we(n));return Yh(n)&&function IKe(e){return Ee(e)&&"field"in e}(n.scale?.range)&&e.add(n.scale.range.field),e}(o,a,s,n)}),o.size+oe(r).length!==0)?new Ka(t,o,r):null}static makeFromTransform(t,n){var i;const r=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&("count"===a?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||we(s,{forAs:!0})])):(o[l]??(o[l]={}),(i=o[l])[a]??(i[a]=new Set),o[l][a].add(u||we(s,{forAs:!0}))))}for(const s of n.groupby??[])r.add(s);return r.size+oe(o).length===0?null:new Ka(t,r,o)}merge(t){return Jse(this.dimensions,t.dimensions)?(function PZe(e,t){for(const n of oe(t)){const i=t[n];for(const r of oe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}(this.measures,t.measures),!0):(function rKe(...e){Yl.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...oe(this.measures)])}producedFields(){const t=new Set;for(const n of oe(this.measures))for(const i of oe(this.measures[n])){const r=this.measures[n][i];0===r.size?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${bt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of oe(this.measures))for(const s of oe(this.measures[o]))for(const a of this.measures[o][s])i.push(a),t.push(s),n.push("*"===o?null:qs(o));return{type:"aggregate",groupby:[...this.dimensions].map(qs),ops:t,fields:n,as:i}}}class A_ extends Zt{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Xs){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[we(s),...gn(a)?[we(s,{binSuffix:"end"})]:[]],...Zu(l)?{sortField:l}:te(l)?{sortIndexField:C_(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Xs)this[n]&&(t+=` ${n.charAt(0)}:${bt(this[n])}`);return t}get fields(){const t=[];for(const n of Xs)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Xs)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Xu){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if($i(r)&&Bh(o)){const a=_4(ix(this.childModel,n));a?t[n]=a:de(j5(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),s.push("max")):(o.push(i[r]),s.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=xT,field:d}=l;o.push(d),s.push(c),a.push(we(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const l of e4){for(const u of t4){const c=(i[l]&&i[l][u])??[];for(const d of c)if(d.axes?.length>0){o[l]=!0;break}}if(o[l]){const u=`length(data("${this.facet.name}"))`;r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:"row"===l?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u}}]})}}const{row:s,column:a}=o;return(s||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:s}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Gu,zu])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(s){const a=this.assembleFacetHeaderData(i);a&&t.push(...a)}return t}}function ide(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function $Ze(e){const t={};return sT(e.filter,n=>{if(nle(n)){let i=null;Y5(n)?i=ds(n.equal):X5(n)?i=ds(n.lte):K5(n)?i=ds(n.lt):Q5(n)?i=ds(n.gt):J5(n)?i=ds(n.gte):Z5(n)?i=n.range[0]:eB(n)&&(i=(n.oneOf??n.in)[0]),i&&(Uh(i)?t[n.field]="date":Ft(i)?t[n.field]="number":Ce(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}class Nr extends Zt{clone(){return new Nr(null,Ze(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${bt(this._parse)}`}static makeExplicit(t,n,i){let r={};const o=n.data;return!Vd(o)&&o?.format?.parse&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const a of oe(i)){const l=r.getWithExplicit(a);void 0!==l.value&&(l.explicit||l.value===i[a]||"derived"===l.value||"flatten"===i[a]?delete i[a]:de(Pae(a,i[a],l.value)))}for(const a of oe(n)){const l=r.get(a);void 0!==l&&(l===n[a]?delete n[a]:de(Pae(a,n[a],l)))}const o=new nc(n,i);r.copyAll(o);const s={};for(const a of oe(o.combine())){const l=o.get(a);null!==l&&(s[a]=l)}return 0===oe(s).length||r.parseNothing?null:new Nr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of oe(this._parse)){const i=this._parse[n];1===o_(n)&&(t[n]=i)}return t}producedFields(){return new Set(oe(this._parse))}dependentFields(){return new Set(oe(this._parse))}assembleTransforms(t=!1){return oe(this._parse).filter(n=>!t||o_(n)>1).map(n=>{const i=function LZe(e,t){const n=T5(e);return"number"===t?`toNumber(${n})`:"boolean"===t?`toBoolean(${n})`:"string"===t?`toString(${n})`:"date"===t?`toDate(${n})`:"flatten"===t?n:t.startsWith("date:")?`timeParse(${n},'${ide(t.slice(5,t.length))}')`:t.startsWith("utc:")?`utcParse(${n},'${ide(t.slice(4,t.length))}')`:(de(function fYe(e){return`Unrecognized parse "${e}".`}(t)),null)}(n,this._parse[n]);return i?{type:"formula",expr:i,as:r_(n)}:null}).filter(n=>null!==n)}}class Hd extends Zt{clone(){return new Hd(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ya])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ya}}}class rb extends Zt{clone(){return new rb(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${bt(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class ob extends Zt{clone(){return new ob(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${bt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Zh extends Zt{constructor(t){let n;if(super(null),t??(t={name:"source"}),Vd(t)||(n=t.format?{...Mo(t.format,["parse"])}:{}),eb(t))this._data={values:t.values};else if(y_(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];mt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else zue(t)?this._data={values:[{type:"Sphere"}]}:(jue(t)||Vd(t))&&(this._data={});this._generator=Vd(t),t.name&&(this._name=t.name),n&&!tn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var sb,rde=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};function a4(e){return e instanceof Zh||e instanceof rb||e instanceof ob}class l4{constructor(){sb.set(this,void 0),rde(this,sb,!1,"f")}setModified(){rde(this,sb,!0,"f")}get modifiedFlag(){return function(e,t,n,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,sb)}}sb=new WeakMap;class ep extends l4{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class u4 extends l4{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class jZe extends u4{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)void 0===i[n[r]]?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of oe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class HZe extends u4{constructor(t){super(),this.requiresSelectionId=t&&KB(t)}run(t){t instanceof Hd&&(this.requiresSelectionId&&(a4(t.parent)||t.parent instanceof Ka||t.parent instanceof Nr)||(this.setModified(),t.remove()))}}class zZe extends l4{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof eu&&(i=t.producedFields(),C5(i,n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class GZe extends u4{constructor(){super()}run(t){t instanceof Io&&!t.isRequired()&&(this.setModified(),t.remove())}}class WZe extends ep{run(t){if(!(a4(t)||t.numChildren()>1))for(const n of t.children)if(n instanceof Nr)if(t instanceof Nr)this.setModified(),t.merge(n);else{if(A5(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}class qZe extends ep{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Nr);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const s of i){const a=s.parse;for(const l of oe(a))l in r?r[l]!==a[l]&&o.add(l):r[l]=a[l]}for(const s of o)delete r[s];if(!tn(r)){this.setModified();const s=new Nr(t,r);for(const a of n){if(a instanceof Nr)for(const l of oe(r))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Nr&&0===oe(a.parse).length&&a.remove()}}}}}class YZe extends ep{run(t){t instanceof Io||t.numChildren()>0||t instanceof A_||t instanceof Zh||(this.setModified(),t.remove())}}class KZe extends ep{run(t){const n=t.children.filter(r=>r instanceof eu),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class XZe extends ep{run(t){const n=t.children.filter(r=>r instanceof Ka),i={};for(const r of n){const o=bt(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of oe(i)){const o=i[r];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class QZe extends ep{constructor(t){super(),this.model=t}run(t){const n=!(a4(t)||t instanceof E_||t instanceof Nr||t instanceof Hd),i=[],r=[];for(const o of t.children)o instanceof tu&&(n&&!A5(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof tu?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class JZe extends ep{run(t){const n=[...t.children];if(!i_(n,s=>s instanceof Io)||t.numChildren()<=1)return;const r=[];let o;for(const s of n)if(s instanceof Io){let a=s;for(;1===a.numChildren();){const[l]=a.children;if(!(l instanceof Io))break;a=l}r.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=o}}}class tp extends Zt{clone(){return new tp(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??we(t)}hash(){return`JoinAggregateTransform ${bt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(void 0===o.field?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==r?{groupby:r}:{}}}}class T_ extends Zt{clone(){return new T_(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:o}=n,{marks:s,scales:a}=i;if("include-invalid-values"===s&&"include-invalid-values"===a)return null;const l=n.reduceFieldDef((u,c,d)=>{const f=Wl(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,g=uB({scaleChannel:d,markDef:o,config:r,scaleType:h,isCountAggregate:gT(p)});"show"!==g&&"always-valid"!==g&&(u[c.field]=c)}return u},{});return oe(l).length?new T_(t,l):null}dependentFields(){return new Set(oe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${bt(this.filter)}`}assemble(){const t=oe(this.filter).reduce((n,i)=>{const r=this.filter[i],o=we(r,{expr:"datum"});return null!==r&&("temporal"===r.type?n.push(`(isDate(${o}) || (${c4(o)}))`):"quantitative"===r.type&&n.push(c4(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function c4(e){return`isValid(${e}) && isFinite(+${e})`}class oc extends Zt{clone(){return new oc(null,Ze(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:s="zero"}=n,a=[],l=[];if(void 0!==n.sort)for(const d of n.sort)a.push(d.field),l.push(Zn(d.order,"ascending"));const u={field:a,order:l};let c;return c=function eet(e){return te(e)&&e.every(t=>Ce(t))&&e.length>1}(o)?o:Ce(o)?[o,`${o}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new oc(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,u=o.map(h=>qa(r[h])).filter(h=>!!h),c=function ZZe(e){return e.stack.stackBy.reduce((t,n)=>{const r=we(n.fieldDef);return r&&t.push(r),t},[])}(n),d=n.encoding.order;let f;if(te(d)||pe(d))f=Aae(d);else{const h=Ile(d)?d.sort:"y"===s?"descending":"ascending";f=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new oc(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${bt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[we(r,{binSuffix:"mid"})]:[we(r,{}),we(r,{binSuffix:"end"})]:[we(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:f}=c;if(f){const h=we(c,{expr:"datum"}),p=we(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${c4(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:we(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:we(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:u,offset:a}),t}}class x_ extends Zt{clone(){return new x_(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??we(t)}hash(){return`WindowTransform ${bt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(void 0===d.param?null:d.param),t.push(void 0===d.field?null:d.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(d=>$5(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==s?{groupby:s}:{}};const a=[],l=[];if(void 0!==this.transform.sort)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:{field:a,order:l},...void 0!==c?{ignorePeers:c}:{},...void 0!==s?{groupby:s}:{},...void 0!==o?{frame:o}:{}}}}function d4(e){if(e instanceof A_)if(1!==e.numChildren()||e.children[0]instanceof Io){const t=e.model.component.data.main;ode(t);const n=function tet(e){return function t(n){if(!(n instanceof A_)){const i=n.clone();if(i instanceof Io){const r=f4+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Ka||i instanceof oc||i instanceof x_||i instanceof tp)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}}(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else{const t=e.children[0];(t instanceof Ka||t instanceof oc||t instanceof x_||t instanceof tp)&&t.addDimensions(e.fields),t.swapWithParent(),d4(e)}else e.children.map(d4)}function ode(e){if(e instanceof Io&&e.type===Rn.Main&&1===e.numChildren()){const t=e.children[0];t instanceof A_||(t.swapWithParent(),ode(e))}}const f4="scale_",nx=5;function h4(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!h4(t.children))return!1}return!0}function Xa(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function sde(e,t,n){let i=e.sources,r=!1;return r=Xa(new GZe,i)||r,r=Xa(new HZe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=Xa(new YZe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=Xa(new WZe,i)||r,r=Xa(new QZe(t),i)||r,r=Xa(new zZe,i)||r,r=Xa(new qZe,i)||r,r=Xa(new XZe,i)||r,r=Xa(new KZe,i)||r,r=Xa(new jZe,i)||r,r=Xa(new JZe,i)||r),e.sources=i,r}class Bi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Bi(()=>t(n))}}function ade(e){Fn(e)?function iet(e){const t=e.component.scales;for(const n of oe(t)){const i=set(e,n);if(t[n].setWithExplicit("domains",i),uet(e,n),e.component.data.isFaceted){let o=e;for(;!hs(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[n])for(const a of i.value)Ju(a)&&(a.data=f4+a.data.replace(f4,""))}}}(e):function ret(e){for(const n of e.children)ade(n);const t=e.component.scales;for(const n of oe(t)){let i,r=null;for(const o of e.children){const s=o.component.scales[n];if(s){i=void 0===i?s.getWithExplicit("domains"):Ud(i,s.getWithExplicit("domains"),"domains","scale",m4);const a=s.get("selectionExtent");r&&a&&r.param!==a.param&&de(lYe),r=a}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}(e)}function set(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=function oet(e,t,n,i){if("unaggregated"===e){const{valid:r,reason:o}=lde(t,n);if(!r)return void de(o)}else if(void 0===e&&i.useUnaggregatedDomain){const{valid:r}=lde(t,n);if(r)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),"x"===t&&Ti(i.x2)?Ti(i.x)?Ud(zd(n,r,e,"x"),zd(n,r,e,"x2"),"domain","scale",m4):zd(n,r,e,"x2"):"y"===t&&Ti(i.y2)?Ti(i.y)?Ud(zd(n,r,e,"y"),zd(n,r,e,"y2"),"domain","scale",m4):zd(n,r,e,"y2"):zd(n,r,e,t)}function p4(e,t,n){const i=Li(n)?.unit;return"temporal"===t||i?function aet(e,t,n){return e.map(i=>({signal:`{data: ${PT(i,{timeUnit:n,type:t})}}`}))}(e,t,i):[e]}function zd(e,t,n,i){const{encoding:r,markDef:o,mark:s,config:a,stack:l}=n,u=Ti(r[i]),{type:c}=u,d=u.timeUnit,f=function eJe(e){const{marks:t,scales:n}=Gue(e);return t===n?Rn.Main:"include-invalid-values"===n?Rn.PreFilterInvalid:Rn.PostFilterInvalid}({invalid:ql("invalid",o,a),isPath:Ld(s)});if(function kKe(e){return ue(e,"unionWith")}(t)){const g=zd(e,void 0,n,i);return Zl([...p4(t.unionWith,c,d),...g.value])}if(Pe(t))return Zl([t]);if(t&&"unaggregated"!==t&&!cle(t))return Zl(p4(t,c,d));if(l&&i===l.fieldChannel){if("normalize"===l.offset)return fs([[0,1]]);const g=n.requestDataName(f);return fs([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=Wl(i)&&pe(u)?function cet(e,t,n){if(!$i(n))return;const i=e.fieldDef(t),r=i.sort;if(Mle(r))return{op:"min",field:C_(i,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Zu(r))return g4(r,o&&!s.has(r.field));if(function oXe(e){return ue(e,"encoding")}(r)){const{encoding:a,order:l}=r,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=o&&!s.has(d);if(Qu(c)||Rd(c))return g4({field:we(u),order:l},f);if($5(c)||!c)return g4({op:c,field:d,order:l},f)}else{if("descending"===r)return{op:"min",field:e.vgField(t),order:"descending"};if(mt(["ascending",void 0],r))return!0}}(n,i,e):void 0;if(Ql(u))return fs(p4([u.datum],c,d));const p=u;if("unaggregated"===t){const{field:g}=u;return fs([{data:n.requestDataName(f),field:we({field:g,aggregate:"min"})},{data:n.requestDataName(f),field:we({field:g,aggregate:"max"})}])}if(gn(p.bin)){if($i(e))return fs("bin-ordinal"===e?[]:[{data:Lv(h)?n.requestDataName(f):n.requestDataName(Rn.Raw),field:n.vgField(i,Jv(p,i)?{binSuffix:"range"}:{}),sort:!0!==h&&Ee(h)?h:{field:n.vgField(i,{}),op:"min"}}]);{const{bin:g}=p;if(gn(g)){const m=s4(n,p.field,g);return fs([new Bi(()=>{const _=n.getSignalName(m);return`[${_}.start, ${_}.stop]`})])}return fs([{data:n.requestDataName(f),field:n.vgField(i,{})}])}}if(p.timeUnit&&mt(["time","utc"],e)){const g=r[Gl(i)];if(kle(p,g,o,a)){const m=n.requestDataName(f),_=$d({fieldDef:p,fieldDef2:g,markDef:o,config:a}),y=Wv(s)&&.5!==_&&ei(i);return fs([{data:m,field:n.vgField(i,y?{suffix:GT}:{})},{data:m,field:n.vgField(i,{suffix:y?WT:"end"})}])}}return fs(h?[{data:Lv(h)?n.requestDataName(f):n.requestDataName(Rn.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(i)}])}function g4(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":xT),...i?{field:qs(i)}:{},...r?{order:r}:{}}}function uet(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,o=cle(i)?i:void 0,s=$h(r)&&mT(r.extent)?r.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function lde(e,t){const{aggregate:n,type:i}=e;return n?Ce(n)&&!Wqe.has(n)?{valid:!1,reason:RYe(n)}:"quantitative"===i&&"log"===t?{valid:!1,reason:FYe(e)}:{valid:!0}:{valid:!1,reason:IYe(e)}}function m4(e,t,n,i){return e.explicit&&t.explicit&&de(function UYe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${nn(n)} and ${nn(i)}). Using the union of the two domains.`}(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function _4(e){if(Ju(e)&&Ce(e.field))return e.field;if(function qqe(e){return!te(e)&&ue(e,"fields")&&!ue(e,"data")}(e)){let t;for(const n of e.fields)if(Ju(n)&&Ce(n.field))if(t){if(t!==n.field)return de(HYe),t}else t=n.field;return de(zYe),t}if(function Yqe(e){return!te(e)&&ue(e,"fields")&&ue(e,"data")}(e)){de(GYe);const t=e.fields[0];return Ce(t)?t:void 0}}function ix(e,t){return function det(e){const t=Vl(e.map(s=>{if(Ju(s)){const{sort:a,...l}=s;return l}return s}),bt),n=Vl(e.map(s=>{if(Ju(s)){const a=s.sort;return void 0!==a&&!Lv(a)&&("op"in a&&"count"===a.op&&delete a.field,"ascending"===a.order&&delete a.order),a}}).filter(s=>void 0!==s),bt);if(0===t.length)return;if(1===t.length){const s=e[0];if(Ju(s)&&n.length>0){let a=n[0];if(n.length>1){de(jae);const l=n.filter(u=>Ee(u)&&"op"in u&&"min"!==u.op);a=!n.every(u=>Ee(u)&&"op"in u)||1!==l.length||l[0]}else Ee(a)&&"field"in a&&s.field===a.field&&(a=!a.order||{order:a.order});return{...s,sort:a}}return s}const i=Vl(n.map(s=>Lv(s)||!("op"in s)||Ce(s.op)&&Ae(jqe,s.op)?s:(de(function jYe(e){return`Dropping sort property ${nn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),bt);let r;1===i.length?r=i[0]:i.length>1&&(de(jae),r=!0);const o=Vl(e.map(s=>Ju(s)?s.data:null),s=>s);return 1===o.length&&null!==o[0]?{data:o[0],fields:t.map(a=>a.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}(e.component.scales[t].get("domains").map(r=>(Ju(r)&&(r.data=e.lookupDataSource(r.data)),r)))}function ude(e){return M_(e)||v4(e)?e.children.reduce((t,n)=>t.concat(ude(n)),cde(e)):cde(e)}function cde(e){return oe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...d}=r,f=function fet(e,t,n,i){if(ei(n)){if(Bh(e))return{step:{signal:`${t}_step`}}}else if(Ee(e)&&Ju(e))return{...e,data:i.lookupDataSource(e.data)};return e}(r.range,o,n,e),h=ix(e,n),p=a?function sJe(e,t,n,i){const r=Tce(e,t.param,t);return{signal:Ha(n.get("type"))&&te(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}(e,a,i,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...void 0!==c?{reverse:c}:{},...d}),t},[])}class dde extends nc{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(mt([ar.LOG,ar.TIME,ar.UTC],t))return"definitely-not";const n=this.get("zero");if(!0===n||void 0===n&&mt([ar.LINEAR,ar.SQRT,ar.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,o=!1,s=!1;for(const a of i){if(te(a)){const l=a[0],u=a[a.length-1];if(Ft(l)&&Ft(u)){if(l<=0&&u>=0){r=!0;continue}o=!0;continue}}s=!0}if(r)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const het=["range","scheme"];function fde(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,o=ko(t),s=e.getName(o);if(Ee(i)&&i.binned&&void 0!==i.step)return new Bi(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(gn(i)){const a=s4(e,r,i);return new Bi(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function get(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of het)if(void 0!==n[d]){const f=iB(o,d),h=fle(e,d);if(f)if(h)de(h);else switch(d){case"range":{const p=n.range;if(te(p)){if(ei(e))return Zl(p.map(g=>{if("width"===g||"height"===g){const m=t.getName(g),_=t.getSignalName.bind(t);return Bi.fromName(_,m)}return g}))}else if(Ee(p))return Zl({data:t.requestDataName(Rn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Zl(p)}case"scheme":return Zl(met(n[d]))}else de(Uae(o,d,e))}const s=e===Mn||"xOffset"===e?"width":"height",a=i[s];if(Jl(a))if(ei(e))if($i(o)){const d=pde(a,t,e);if(d)return Zl({step:d})}else de(Vae(s));else if(Hv(e)&&"band"===t.getScaleComponent(e===xd?"x":"y").get("type")){const p=gde(a,o);if(p)return Zl(p)}const{rangeMin:l,rangeMax:u}=n,c=function _et(e,t){const{size:n,config:i,mark:r,encoding:o}=t,{type:s}=Ti(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Mn:case Pi:if(mt(["point","band"],l)){const d=mde(e,n,i.view);if(Jl(d))return{step:pde(d,t,e)}}return hde(e,t,l);case xd:case s_:return function yet(e,t,n){const i=e===xd?"x":"y",r=t.getScaleComponent(i);if(!r)return hde(i,t,n,{center:!0});const o=r.get("type"),s=t.scaleName(i),{markDef:a,config:l}=t;if("band"===o){const u=mde(i,t.size,t.config.view);if(Jl(u)){const c=gde(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}{const u=t.encoding[i];if(pe(u)&&u.timeUnit){const c=ele(u.timeUnit,p=>`scale('${s}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=$d({fieldDef:u,markDef:a,config:l})-.5,h=0!==f?` + ${f}`:"";return d?[{signal:`${Pe(d)?`${d.signal}/2`+h:`${d/2+f}`} * (${c})`},{signal:`${Pe(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`} * (${c})`}]:[0,{signal:c}]}return Xse(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}(e,t,l);case Yu:{const d=function wet(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(_T("size",e))}(r,i),f=function Eet(e,t,n,i){const r={x:fde(n,"x"),y:fde(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const o=yde(t,r,i.view);return Ft(o)?o-1:new Bi(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=yde(t,r,i.view);return Ft(o)?Math.pow(_de*o,2):new Bi(()=>`pow(${_de} * ${o.signal}, 2)`)}}throw new Error(_T("size",e))}(r,n,t,i);return d_(l)?function bet(e,t,n){const i=()=>{const r=ja(t),o=ja(e),s=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${s}, ${s})`};return Pe(t)?new Bi(i):{signal:i()}}(d,f,function vet(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&te(n)?n.length+1:(de(function eKe(e){return`Domain for ${e} is required for threshold scale.`}(i)),3)}}(l,i,u,e)):[d,f]}case Ys:return[0,2*Math.PI];case Fh:return[0,360];case $a:return[0,new Bi(()=>`min(${t.getSignalName(hs(t.parent)?"child_width":"width")},${t.getSignalName(hs(t.parent)?"child_height":"height")})/2`)];case Od:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case kd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Oo:return"symbol";case No:case Hl:case zl:return"ordinal"===l?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===r||"geoshape"===r?"heatmap":"ramp";case Ku:case Md:case Nd:return[i.scale.minOpacity,i.scale.maxOpacity]}}(e,t);return(void 0!==l||void 0!==u)&&iB(o,"rangeMin")&&te(c)&&2===c.length?Zl([l??c[0],u??c[1]]):fs(c)}function met(e){return function OKe(e){return!Ce(e)&&ue(e,"name")}(e)?{scheme:e.name,...Mo(e,["name"])}:{scheme:e}}function hde(e,t,n,{center:i}={}){const r=ko(e),o=t.getName(r),s=t.getSignalName.bind(t);return e===Pi&&Ha(n)?i?[Bi.fromName(a=>`${s(a)}/2`,o),Bi.fromName(a=>`-${s(a)}/2`,o)]:[Bi.fromName(s,o),0]:i?[Bi.fromName(a=>`-${s(a)}/2`,o),Bi.fromName(a=>`${s(a)}/2`,o)]:[0,Bi.fromName(s,o)]}function pde(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=O5(n),s=i[o];if("offset"===gue({step:e,offsetIsDiscrete:nt(s)&&rle(s.type)})&&Yle(i,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;"band"===l.get("type")&&(c=`bandspace(${c}, ${l.get("paddingInner")??l.get("padding")??0}, ${l.get("paddingOuter")??l.get("padding")??0})`);const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${Qqe(d)})`}}return e.step}function gde(e,t){if("offset"===gue({step:e,offsetIsDiscrete:$i(t)}))return{step:e.step}}function mde(e,t,n){const i=e===Mn?"width":"height";return t[i]||jT(n,i)}const _de=.95;function yde(e,t,n){const i=Jl(e.width)?e.width.step:IB(n,"width"),r=Jl(e.height)?e.height.step:IB(n,"height");return t.x||t.y?new Bi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function vde(e,t){Fn(e)?function Det(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:s}=e;for(const a of oe(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),d=Ti(r[a]),f=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=iB(h,t),_=fle(a,t);if(void 0!==f&&(m?_&&de(_):de(Uae(h,t,a))),m&&void 0===_)if(void 0!==f){const y=d.timeUnit,v=d.type;switch(t){case"domainMax":case"domainMin":Uh(l[t])||"temporal"===v||y?u.set(t,{signal:PT(l[t],{type:v,timeUnit:y})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const y=ue(bde,t)?bde[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:Kle(r,a),hasSecondaryRangeChannel:!!r[Gl(a)]}):i.scale[t];void 0!==y&&u.set(t,y,!1)}}}(e,t):Ede(e,t)}const bde={bins:({model:e,fieldOrDatumDef:t})=>pe(t)?function Cet(e,t){const n=t.bin;if(gn(n)){const i=s4(e,t.field,n);return new Bi(()=>e.getSignalName(i))}if(or(n)&&$h(n)&&void 0!==n.step)return{step:n.step}}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function Aet(e,t){if(mt([No,Hl,zl],e)&&"nominal"!==t)return"hcl"}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>function Tet(e,t,n,i,r,o){if(!(qa(o)?.bin||te(n)||null!=r||null!=i||mt([ar.TIME,ar.UTC],e)))return!!ei(t)||void 0}(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>function xet(e,t,n,i,r,o){if(ei(e)){if(Xl(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:s,orient:a}=r;if("bar"===s&&(!pe(i)||!i.bin&&!i.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===ar.POINT)return n.pointPadding}}(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>function Met(e,t,n,i,r,o=!1){if(void 0===e){if(ei(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=r;return o?c:Zn(s,"bar"===n?a:"tick"===n?u:l)}if(Hv(t)&&i===ar.BAND)return r.offsetBandPaddingInner}}(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>function Net(e,t,n,i,r,o=!1){if(void 0===e)if(ei(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=r;if(o)return a;if(n===ar.BAND)return Zn(s,Pe(i)?{signal:`${i.signal}/2`}:i/2)}else if(Hv(t)){if(n===ar.POINT)return.5;if(n===ar.BAND)return r.offsetBandPaddingOuter}}(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>function Oet(e,t,n,i){return"x"===n&&void 0!==i.xReverse?Ha(e)&&"descending"===t?Pe(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!Ha(e)||"descending"!==t)||void 0}(t,pe(e)?e.sort:void 0,n,i.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:s})=>function ket(e,t,n,i,r,o,s){if(n&&"unaggregated"!==n&&Ha(r)){if(te(n)){const l=n[0],u=n[n.length-1];if(Ft(l)&&l<=0&&Ft(u)&&u>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!d_(r))return!0;if((!pe(t)||!t.bin)&&mt([...Xu,...Rqe],e)){const{orient:l,type:u}=i;return(!mt(["bar","area","line","trail"],u)||!("horizontal"===l&&"y"===e||"vertical"===l&&"x"===e))&&(!(!mt(["bar","area"],u)||s)||o?.zero)}return!1}(e,t,n,i,r,o.scale,s)};function wde(e){Fn(e)?function pet(e){const t=e.component.scales;for(const n of P5){const i=t[n];if(!i)continue;const r=get(n,e);i.setWithExplicit("range",r)}}(e):Ede(e,"range")}function Ede(e,t){const n=e.component.scales;for(const i of e.children)"range"===t?wde(i):vde(i,t);for(const i of oe(n)){let r;for(const o of e.children){const s=o.component.scales[i];s&&(r=Ud(r,s.getWithExplicit(t),t,"scale",Vue((l,u)=>"range"===t&&l.step&&u.step?l.step-u.step:0)))}n[i].setWithExplicit(t,r)}}function Iet(e,t,n,i,r=!1){const o=function Ret(e,t,n,i){switch(t.type){case"nominal":case"ordinal":if(l_(e)||"discrete"===L5(e))return"shape"===e&&"ordinal"===t.type&&de(z5(e,"ordinal")),"ordinal";if(ei(e)||Hv(e)){if(mt(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if("arc"===n.type&&e in R5)return"band";return Gh(n[ko(e)])||h_(t)&&t.axis?.tickBand?"band":"point";case"temporal":return l_(e)?"time":"discrete"===L5(e)?(de(z5(e,"temporal")),"ordinal"):pe(t)&&t.timeUnit&&Li(t.timeUnit).utc?"utc":"time";case"quantitative":return l_(e)?pe(t)&&gn(t.bin)?"bin-ordinal":"linear":"discrete"===L5(e)?(de(z5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error($ae(t.type))}(t,n,i,r),{type:s}=e;return Wl(t)?void 0!==s?function LKe(e,t,n=!1){if(!Wl(e))return!1;switch(e){case Mn:case Pi:case xd:case s_:case Ys:case $a:return!(!Xl(t)&&"band"!==t)||"point"===t&&!n;case Yu:case Od:case Ku:case Md:case Nd:case Fh:return Xl(t)||d_(t)||mt(["band","point","ordinal"],t);case No:case Hl:case zl:return"band"!==t;case kd:case Oo:return"ordinal"===t||d_(t)}}(t,s)?pe(n)&&!function PKe(e,t){return mt([tB,nB],t)?void 0===e||$i(e):t===u_?mt([ar.TIME,ar.UTC,void 0],e):t!==zh||lle(e)||d_(e)||void 0===e}(s,n.type)?(de(function $Ye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(s,o)),o):s:(de(function LYe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,s,o)),o):o:null}function Dde(e){e.component.scales=Fn(e)?function Pet(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of P5){const s=Ti(t[o]);if(s&&n===gle&&o===Oo&&s.type===c_)continue;let a=s&&s.scale;if(s&&null!==a&&!1!==a){a??(a={});const u=Iet(a,o,s,i,Kle(t,o));r[o]=new dde(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return r}(e):function $et(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){Dde(o);for(const s of oe(o.component.scales))if((t=r.scale)[s]??(t[s]=Vce(s,e)),"shared"===r.scale[s]){const a=i[s],l=o.component.scales[s].getWithExplicit("type");a?AKe(a.value,l.value)?i[s]=Ud(a,l,"type","scale",Let):(r.scale[s]="independent",delete i[s]):i[s]=l}}for(const o of oe(i)){const s=e.scaleName(o,!0);n[o]=new dde(s,i[o]);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}(e)}const Let=Vue((e,t)=>ole(e)-ole(t));class y4{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Fn(e){return"unit"===e?.type}function hs(e){return"facet"===e?.type}function v4(e){return"concat"===e?.type}function M_(e){return"layer"===e?.type}class b4{constructor(t,n,i,r,o,s,a){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>(l.from?.data&&(l.from.data=this.lookupDataSource(l.from.data)),l.from?.facet?.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l),this.parent=i,this.config=o,this.view=sr(a),this.name=t.name??r,this.title=Fd(t.title)?{text:t.title}:t.title?sr(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new y4,this.projectionNameMap=i?i.projectionNameMap:new y4,this.signalNameMap=i?i.signalNameMap:new y4,this.data=t.data,this.description=t.description,this.transforms=function jQe(e){return e.map(t=>$B(t)?{filter:t_(t.filter,DKe)}:t)}(t.transform??[]),this.layout="layer"===n||"unit"===n?{}:function WXe(e,t,n){const i=n[t],r={},{spacing:o,columns:s}=i;void 0!==o&&(r.spacing=o),void 0!==s&&(MT(e)&&!Kv(e.facet)||NB(e))&&(r.columns=s),VT(e)&&(r.columns=1);for(const a of GXe)if(void 0!==e[a])if("spacing"===a){const l=e[a];r[a]=Ft(l)?l:{row:l.row??o,column:l.column??o}}else r[a]=e[a];return r}(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:MT(t)||i?.component.data.isFaceted&&void 0===t.data},layoutSize:new nc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Ze(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function Fet(e,{ignoreRange:t}={}){Dde(e),ade(e);for(const n of FKe)vde(e,n);t||wde(e)}(this)}parseProjection(){ede(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Kce(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of oe(i)){const s=i[o];void 0!==s&&(r[o]=Dn(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=Dn(this.description)),"unit"!==this.type&&"layer"!==this.type)?tn(n)?void 0:n:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=function nZe(e,t){const n={};for(const i of Xs){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:o,titleOrient:s}=ex(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=ZT(i,s),l=tZe(o,a);void 0!==l&&(n[a]=l)}}return tn(n)?void 0:n}(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Xs)t[i].title&&n.push(XJe(this,i));for(const i of e4)n=n.concat(QJe(this,i));return n}assembleAxes(){return function LJe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>ib(r,"grid",t)),...i.map(r=>ib(r,"grid",t)),...n.map(r=>ib(r,"main",t)),...i.map(r=>ib(r,"main",t))].filter(r=>r)}(this.component.axes,this.config)}assembleLegends(){return Qce(this)}assembleProjections(){return function SZe(e){return M_(e)||v4(e)?function AZe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Jce(e))}(e):Jce(e)}(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...bae(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return mt(["unit","layer"],this.type)?mt(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),tn(i)?void 0:i}assembleGroup(t=[]){const n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||hs(this.parent)?ude(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return xn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Rn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(hs(this.parent)){const i=pT(Bce(t)),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if($i(o)&&Bh(s)){const a=r.get("name"),u=_4(ix(this,i));return u?{signal:$ce(a,r,we({aggregate:"distinct",field:u},{expr:"datum"}))}:(de(j5(i)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){return n?this.getName(t):fae(t)&&Wl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(function nYe(e){return`Cannot find a selection named "${e}".`}(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class Cde extends b4{vgField(t,n={}){const i=this.fieldDef(t);if(i)return we(i,n)}reduceFieldDef(t,n){return function CXe(e,t,n,i){return e?oe(e).reduce((r,o)=>{const s=e[o];return te(s)?s.reduce((a,l)=>t.call(i,a,l,o),r):t.call(i,r,s,o)},n):n}(this.getMapping(),(i,r,o)=>{const s=qa(r);return s?t(i,s,o):i},n)}forEachFieldDef(t,n){vB(this.getMapping(),(i,r)=>{const o=qa(i);o&&t(o,r)},n)}}class rx extends Zt{clone(){return new rx(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"],this.transform.resolve=this.transform.resolve??"shared"}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${bt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class ox extends Zt{clone(){return new ox(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${bt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class sx extends Zt{clone(){return new sx(this.parent,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,s)=>r[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${bt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class ax extends Zt{clone(){return new ax(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${bt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class N_ extends Zt{clone(){return new N_(null,Ze(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ua,Ba],[Ks,Va]]){const o=r.map(s=>{const a=Ti(n.encoding[s]);return pe(a)?a.field:Ql(a)?{expr:`${a.datum}`}:Wa(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new N_(t,o,null,n.getName("geojson_"+i++)))}if(n.channelHasField(Oo)){const r=n.typedFieldDef(Oo);r.type===c_&&(t=new N_(t,null,r.field,n.getName("geojson_"+i++)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Ce);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${bt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class ab extends Zt{clone(){return new ab(null,this.projection,Ze(this.fields),Ze(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ua,Ba],[Ks,Va]]){const r=i.map(s=>{const a=Ti(n.encoding[s]);return pe(a)?a.field:Ql(a)?{expr:`${a.datum}`}:Wa(a)?{expr:`${a.value}`}:void 0}),o=i[0]===Ks?"2":"";(r[0]||r[1])&&(t=new ab(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ce))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${bt(this.fields)} ${bt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class np extends Zt{clone(){return new np(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new np(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(pe(r)&&pe(o)){const s=r.impute?r:o.impute?o:void 0;if(void 0===s)return;const a=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=s.impute,f=Jle(n.mark,i);return new np(t,{impute:s.field,key:a.field,...l?{method:l}:{},...void 0!==u?{value:u}:{},...c?{frame:c}:{},...void 0!==d?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${bt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:(e=i,ue(e,"stop")?this.processSequence(i):i)}:{},method:"value",...o?{groupby:o}:{},value:r&&"value"!==r?null:s};var e;return r&&"value"!==r?[l,{type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[l]}}class lx extends Zt{clone(){return new lx(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${bt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class lb extends Zt{clone(){return new lb(null,Ze(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:s}=i;let a=null;if(function CQe(e){return ue(e,"data")}(s)){let l=xde(s.data,o);l||(l=new Zh(s.data),o.push(l));const u=n.getName(`lookup_${r}`);a=new Io(l,u,Rn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(function SQe(e){return ue(e,"param")}(s)){const l=s.param;let u;i={as:l,...i};try{u=n.getSelectionComponent(xn(l),l)}catch{throw new Error(function sYe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(l))}if(a=u.materialized,!a)throw new Error(function aYe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(l))}return new lb(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?De(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${bt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:De(this.transform.as)}:{}};else{let n=this.transform.as;Ce(n)||(de('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class ux extends Zt{clone(){return new ux(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${bt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class cx extends Zt{clone(){return new cx(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${bt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class dx extends Zt{clone(){return new dx(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vl((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${bt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...void 0!==r?{limit:r}:{},...void 0!==o?{op:o}:{},...void 0!==i?{groupby:i}:{}}}}class fx extends Zt{clone(){return new fx(null,Ze(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${bt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Sde(e){let t=0;return function n(i,r){if(i instanceof Zh&&!i.isGenerator&&!y_(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Nr&&(i.parent instanceof Zh&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof A_)return r.name||(r.name="data_"+t++),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,void e.push(...i.assemble());switch((i instanceof rb||i instanceof ob||i instanceof T_||i instanceof E_||i instanceof D_||i instanceof ab||i instanceof Ka||i instanceof lb||i instanceof x_||i instanceof tp||i instanceof ax||i instanceof sx||i instanceof rx||i instanceof lx||i instanceof ux||i instanceof cx||i instanceof Hd||i instanceof fx||i instanceof dx||i instanceof ox)&&r.transform.push(i.assemble()),(i instanceof tu||i instanceof eu||i instanceof np||i instanceof oc||i instanceof N_)&&r.transform.push(...i.assemble()),i instanceof Io&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof Io?i.setSource(r.name):(r.name||(r.name="data_"+t++),i.setSource(r.name),1===i.numChildren()&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Io&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name="data_"+t++);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const s of i.children)n(s,{name:null,source:o,transform:[]});break}}}}function Vet(e){return"top"===e||"left"===e||Pe(e)?"header":"footer"}function Het(e,t){const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],a=S_("title",null,i,t);let l=p_(s,i,{allowDisabling:!0,includeDefault:void 0===a||!!a});r.component.layoutHeaders[t].title&&(l=te(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const u=S_("labelOrient",s.header,i,t),c=null!==s.header&&Zn(s.header?.labels,i.header.labels,!0),d=mt(["bottom","right"],u)?"footer":"header";o.layoutHeaders[t]={title:null!==s.header?l:null,facetFieldDef:s,[d]:"facet"===t?[]:[Ade(e,t,c)]}}}function Ade(e,t,n){const i="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Tde(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=r4(r,t),"shared"===r.axis[t]){const o="x"===t?"column":"row",s=i[o];for(const a of n.component.axes[t]){const l=Vet(a.get("orient"));s[l]??(s[l]=[Ade(e,o,!1)]);const u=ib(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function w4(e){for(const t of e.children)t.parseLayoutSize()}function hx(e,t){const n=Bce(t),i=pT(n),r=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=r.scale[i]??Vce(i,e);if("independent"===u&&"step"===l.value){s=void 0;break}if(s){if("independent"===u&&s.value!==l.value){s=void 0;break}s=Ud(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function qet(e,t){const i=e.config,r=e.getScaleComponent("width"===t?"x":"y");if(r){const o=r.get("type"),s=r.get("range");if($i(o)){const a=jT(i.view,t);return Bh(s)||Jl(a)?"step":a}return kB(i.view,t)}if(e.hasProjection||"arc"===e.mark)return kB(i.view,t);{const o=jT(i.view,t);return Jl(o)?o.step:o}}function E4(e,t,n){return we(t,{suffix:`by_${we(e)}`,...n})}class ub extends Cde{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=T4(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Kv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=oe(t),i={};for(const r of n){if(![zu,Gu].includes(r)){de(_T(r,"facet"));break}const o=t[r];if(void 0===o.field){de(H5(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=yB(t,n);return i.header?i.header=sr(i.header):null===i.header&&(i.header=null),i}channelHasField(t){return ue(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=px(this),this.child.parseData()}parseLayoutSize(){w4(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function jet(e){for(const t of Xs)Het(e,t);Tde(e,"x"),Tde(e,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Xs)for(const i of t4){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:s}=r;if(s){const a=S_("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=ZT(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o?.[0]){const l="header"===i?"headerBand":"footerBand";"facet"!==n&&!this.child.component.layoutSize.get("row"===n?"height":"width")&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset["row"===n?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&"independent"===this.component.resolve.scale.x||!t&&"independent"===this.component.resolve.scale.y)&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ub))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof ub?{...this.channelHasField("column")?{encode:{update:{columns:{field:we(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof ub){if(this.child.channelHasField("column")){const r=we(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Xu){const o=this.child.component.scales[r];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if($i(s)&&Bh(a)){const u=_4(ix(this.child,r));u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):de(j5(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Xs){const d=this.facet[c];if(d){l.push(we(d));const{bin:f,sort:h}=d;if(gn(f)&&l.push(we(d,{binSuffix:"end"})),Zu(h)){const{field:p,op:g=xT}=h,m=E4(d,h);i&&r?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(te(h)){const p=C_(d,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Zu(i.sort)?[E4(i,i.sort,{expr:"datum"})]:te(i.sort)?[C_(i,t,{expr:"datum"})]:[we(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Zu(r)?r.order:!te(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return n4(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of e4)if(t[r]){const o=S_("labelOrient",t[r]?.header,n,r);if(i[r].includes(o))return n4(t[r],r,n)}}assembleMarks(){const{child:t}=this,i=function Bet(e){const t=[],n=Sde(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Xs.map(l=>this.facetSortFields(l)).flat(),order:Xs.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(nJe(this,[]))}]}getMapping(){return this.facet}}function xde(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,o=i.format?.feature;if(r&&o)continue;const s=e.format?.feature;if((s||o)&&s!==o)continue;const a=i.format?.mesh;if(!r&&!a||r===a)if(eb(e)&&eb(i)){if(cs(e.values,i.values))return n}else if(y_(e)&&y_(i)){if(e.url===i.url)return n}else if(jue(e)&&e.name===n.dataName)return n}return null}function px(e){let t=function Ket(e,t){if(e.data||!e.parent){if(null===e.data){const i=new Zh({values:[]});return t.push(i),i}const n=xde(e.data,t);if(n)return Vd(e.data)||(n.data.format=Qse({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Zh(e.data);return t.push(i),i}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(Vd(r)||y_(r)||eb(r))||!e.parent?new ZQe:e.parent.component.data.ancestorParse.clone();Vd(r)?(Hue(r)?t=new ob(t,r.sequence):VB(r)&&(t=new rb(t,r.graticule)),s.parseNothing=!0):null===r?.format?.parse&&(s.parseNothing=!0),t=Nr.makeExplicit(t,e,s)??t,t=new Hd(t);const a=e.parent&&M_(e.parent);(Fn(e)||hs(e))&&a&&(t=tu.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function Xet(e,t,n){let i=0;for(const r of t.transforms){let o,s;if(FQe(r))s=e=new D_(e,r),o="derived";else if($B(r)){const a=$Ze(r);s=e=Nr.makeWithAncestors(e,{},a,n)??e,e=new E_(e,t,r.filter)}else if(Rue(r))s=e=tu.makeFromTransform(e,r,t),o="number";else if(LQe(r))o="date",void 0===n.getWithExplicit(r.field).value&&(e=new Nr(e,{[r.field]:o}),n.set(r.field,o,!1)),s=e=eu.makeFromTransform(e,r);else if($Qe(r))s=e=Ka.makeFromTransform(e,r),o="number",KB(t)&&(e=new Hd(e));else if(Iue(r))s=e=lb.make(e,t,r,i++),o="derived";else if(kQe(r))s=e=new x_(e,r),o="number";else if(IQe(r))s=e=new tp(e,r),o="number";else if(BQe(r))s=e=oc.makeFromTransform(e,r),o="derived";else if(UQe(r))s=e=new ax(e,r),o="derived";else if(VQe(r))s=e=new ox(e,r),o="derived";else if(RQe(r))s=e=new sx(e,r),o="derived";else if(AQe(r))s=e=new dx(e,r),o="derived";else if(OQe(r))e=new fx(e,r);else if(PQe(r))s=e=np.makeFromTransform(e,r),o="derived";else if(TQe(r))s=e=new rx(e,r),o="derived";else if(xQe(r))s=e=new ux(e,r),o="derived";else if(MQe(r))s=e=new cx(e,r),o="derived";else{if(!NQe(r)){de(pYe(r));continue}s=e=new lx(e,r),o="derived"}if(s&&void 0!==o)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}(t,e,s));const l=function UZe(e){const t={};if(Fn(e)&&e.component.selection)for(const n of oe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&o_(r.field)>1&&(t[r.field]="flatten")}return t}(e),u=function BZe(e){const t={};function n(i){m_(i)?t[i.field]="date":"quantitative"===i.type&&function zqe(e){return Ce(e)&&mt(["min","max"],e)}(i.aggregate)?t[i.field]="number":o_(i.field)>1?i.field in t||(t[i.field]="flatten"):Yh(i)&&Zu(i.sort)&&o_(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Fn(e)||hs(e))&&e.forEachFieldDef((i,r)=>{if(no(i))n(i);else{const o=Lh(r),s=e.fieldDef(o);n({...i,type:s.type})}}),Fn(e)){const{mark:i,markDef:r,encoding:o}=e;if(Ld(i)&&!e.encoding.order){const a=o["horizontal"===r.orient?"y":"x"];pe(a)&&"quantitative"===a.type&&!(a.field in t)&&(t[a.field]="number")}}return t}(e);t=Nr.makeWithAncestors(t,{},{...l,...u},s)??t,Fn(e)&&(t=N_.parseAll(t,e),t=ab.parseAll(t,e)),(Fn(e)||hs(e))&&(a||(t=tu.makeFromEncoding(t,e)??t),t=eu.makeFromEncoding(t,e)??t,t=D_.parseAllForSortIndex(t,e));const c=t=gx(Rn.Raw,e,t);if(Fn(e)){const m=Ka.makeFromEncoding(t,e);m&&(t=m,KB(e)&&(t=new Hd(t))),t=np.makeFromEncoding(t,e)??t,t=oc.makeFromEncoding(t,e)??t}let d,f;if(Fn(e)){const{markDef:m,mark:_,config:y}=e,v=rn("invalid",m,y),{marks:b,scales:w}=f=Gue({invalid:v,isPath:Ld(_)});b!==w&&"include-invalid-values"===w&&(d=t=gx(Rn.PreFilterInvalid,e,t)),"exclude-invalid-values"===b&&(t=T_.make(t,e,f)??t)}const h=t=gx(Rn.Main,e,t);let p;if(Fn(e)&&f){const{marks:m,scales:_}=f;"include-invalid-values"===m&&"exclude-invalid-values"===_&&(t=T_.make(t,e,f)??t,p=t=gx(Rn.PostFilterInvalid,e,t))}Fn(e)&&function FJe(e,t){for(const[n,i]of Td(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Io(new E_(t,e,{param:n}),r,Rn.Lookup,e.component.data.outputNodeRefCounts)}}(e,h);let g=null;if(hs(e)){const m=e.getName("facet");t=function Yet(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(Zu(o.sort)){const{field:s,op:a=xT}=o.sort;e=r=new tp(e,{joinaggregate:[{op:a,field:s,as:E4(o,o.sort,{forAs:!0})}],groupby:[we(o)]})}return r}return null}(t,e.facet)??t,g=new A_(t,e,m,h.getSource()),n[m]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:d,postFilterInvalid:p}}function gx(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,o=t.getDataName(e),s=new Io(n,o,e,r);return i[o]=s,s}class Qet extends b4{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),("shared"===t.resolve?.axis?.x||"shared"===t.resolve?.axis?.y)&&de("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((o,s)=>T4(o,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=px(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return VT(t)?t.vconcat:OB(t)?t.hconcat:t.concat}parseLayoutSize(){!function Get(e){w4(e);const n=void 0===e.layout.columns?"height":"childHeight";hx(e,1===e.layout.columns?"width":"childWidth"),hx(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=i4(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...null!=t?{columns:t}:{},bounds:"full",align:"each"}}}const Zet={disable:1,gridScale:1,scale:1,...zle,labelExpr:1,encode:1},Mde=oe(Zet);class D4 extends nc{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new D4(Ze(this.explicit),Ze(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function Jet(e){return!1===e||null===e}(this.get(t)))}hasOrientSignalRef(){return Pe(this.explicit.orient)}}const ntt={bottom:"top",top:"bottom",left:"right",right:"left"};function rtt(e,t){if(!e)return t.map(n=>n.clone());{if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const s=r.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=ott(r,o)}}}return e}function ott(e,t){for(const n of Mde){const i=Ud(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return Mae(r,o);case"gridScale":return{explicit:r.explicit,value:Zn(r.value,o.value)}}return zT(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function stt(e,t,n,i,r){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Pe(n.labelAngle)?n.labelAngle:Uv(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Ice(i,r))return!0}return e===n[t]}const att=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ltt(e,t){let n=t.axis(e);const i=new D4,r=Ti(t.encoding[e]),{mark:o,config:s}=t,a=n?.orient||s["x"===e?"axisX":"axisY"]?.orient||s.axis?.orient||function GJe(e){return"x"===e?"bottom":"left"}(e),l=t.getScaleComponent(e).get("type"),u=function $Je(e,t,n,i){const r="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:lle(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",s=Pe(n)?"axisOrient":`axis${Bv(n)}`,a=[...r,...r.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:Mce(a,i,e,n),vgAxisConfig:Mce(l,i,e,n),axisConfigStyle:BJe([...l,...a],i)}}(e,l,a,t.config),c=void 0!==n?!n:JB("disable",s.style,n?.style,u).configValue;if(i.set("disable",c,void 0!==n),c)return i;n=n||{};const d=function jJe(e,t,n,i,r){const o=t?.labelAngle;if(void 0!==o)return Pe(o)?o:Uv(o);{const{configValue:s}=JB("labelAngle",i,t?.style,r);return void 0!==s?Uv(s):n!==Mn||!mt([nB,tB],e.type)||pe(e)&&e.timeUnit?void 0:270}}(r,n,e,s.style,u),f=Sle(n.formatType,r,l),h=Cle(r,r.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:o,config:s};for(const _ of Mde){const y=_ in Nce?Nce[_](p):Wle(_)?n[_]:void 0,v=void 0!==y,b=stt(y,_,n,t,e);if(v&&b)i.set(_,y,b);else{const{configValue:w,configFrom:D}=Wle(_)&&"values"!==_?JB(_,s.style,n.style,u):{},E=void 0!==w;v&&!E?i.set(_,y,b):("vgAxisConfig"!==D||att.has(_)&&E||Zv(w)||Pe(w))&&i.set(_,w,!1)}}const g=n.encoding??{},m=Hle.reduce((_,y)=>{if(!i.hasAxisPart(y))return _;const v=Uce(g[y]??{},t),b="labels"===y?function ett(e,t,n){const{encoding:i,config:r}=e,o=Ti(i[t])??Ti(i[Gl(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(qh(l))return{text:Ga({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:r}),...n};if(void 0===a&&void 0===l&&r.customFormatTypes){if("quantitative"===f_(o)){if(h_(o)&&"normalize"===o.stack&&r.normalizedNumberFormatType)return{text:Ga({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Ga({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if("temporal"===f_(o)&&r.timeFormatType&&pe(o)&&!o.timeUnit)return{text:Ga({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}(t,e,v):v;return void 0!==b&&!tn(b)&&(_[y]={update:b}),_},{});return tn(m)||i.set("encode",m,!!n.encoding||void 0!==n.labelAngle),i}const ctt={vgMark:"arc",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...io("x",e,{defaultPos:"mid"}),...io("y",e,{defaultPos:"mid"}),...rc(e,"radius"),...rc(e,"theta")})},dtt={vgMark:"area",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...YT("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...YT("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...qB(e)})},ftt={vgMark:"rect",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rc(e,"x"),...rc(e,"y")})},htt={vgMark:"shape",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&pe(n)&&n.type===c_?{field:we(n,{expr:"datum"})}:{}}]}},ptt={vgMark:"image",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...rc(e,"x"),...rc(e,"y"),...GB(e,"url")})},gtt={vgMark:"line",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...io("x",e,{defaultPos:"mid"}),...io("y",e,{defaultPos:"mid"}),...lr("size",e,{vgChannel:"strokeWidth"}),...qB(e)})},mtt={vgMark:"trail",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...io("x",e,{defaultPos:"mid"}),...io("y",e,{defaultPos:"mid"}),...lr("size",e),...qB(e)})};function C4(e,t){const{config:n}=e;return{...Qs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...io("x",e,{defaultPos:"mid"}),...io("y",e,{defaultPos:"mid"}),...lr("size",e),...lr("angle",e),..._tt(e,0,t)}}function _tt(e,t,n){return n?{shape:{value:n}}:lr("shape",e)}const ytt={vgMark:"symbol",encodeEntry:e=>C4(e)},vtt={vgMark:"symbol",encodeEntry:e=>C4(e,"circle")},btt={vgMark:"symbol",encodeEntry:e=>C4(e,"square")},wtt={vgMark:"rect",encodeEntry:e=>({...Qs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rc(e,"x"),...rc(e,"y")})},Ett={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...Qs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...YT("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...YT("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...lr("size",e,{vgChannel:"strokeWidth"})}:{}}},Dtt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Qs(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...io("x",e,{defaultPos:"mid"}),...io("y",e,{defaultPos:"mid"}),...GB(e),...lr("size",e,{vgChannel:"fontSize"}),...lr("angle",e),...dce("align",Ctt(e.markDef,0,t)),...dce("baseline",Stt(e.markDef,0,t)),...io("radius",e,{defaultPos:null}),...io("theta",e,{defaultPos:null})}}};function Ctt(e,t,n){if(void 0===rn("align",e,n))return"center"}function Stt(e,t,n){if(void 0===rn("baseline",e,n))return"middle"}const mx={arc:ctt,area:dtt,bar:ftt,circle:vtt,geoshape:htt,image:ptt,line:gtt,point:ytt,rect:wtt,rule:Ett,square:btt,text:Dtt,tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r="horizontal"===i?"x":"y",o="horizontal"===i?"y":"x",s="horizontal"===i?"height":"width";return{...Qs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rc(e,r),...io(o,e,{defaultPos:"mid",vgChannel:"y"===o?"yc":"xc"}),[s]:Dn(rn("thickness",n,t))}}},trail:mtt};const Nde="faceted_path_",Ode="stack_group_";function S4(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,s=Zn(i.clip,function Ntt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!t?.get("selectionExtent")&&!n?.get("selectionExtent"))||void 0}(e),function Ott(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),a=Cae(i),l=r.key,u=function Mtt(e){const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,s=t.order;if(!(!te(s)&&Wa(s)&&E5(s.value)||!s&&E5(rn("order",r,o)))){if((te(s)||pe(s))&&!n)return Aae(s,{expr:"datum"});if(Ld(i)){const a="horizontal"===r.orient?"y":"x";if(pe(t[a]))return{field:a}}}}(e),c=function ktt(e){if(!e.component.selection)return null;const t=oe(e.component.selection).length;let n=t,i=e.parent;for(;i&&0===n;)n=oe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}(e),d=rn("aria",i,o),f=mx[n].postEncodingTransform?mx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:mx[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...!1===d?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Rn.Main)},encode:{update:mx[n].encodeEntry(e)},...f?{transform:f}:{}}]}class kde extends Cde{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,mue(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=za(t.mark)?{...t.mark}:{type:t.mark},a=s.type;void 0===s.filled&&(s.filled=function gQe(e,t,{graticule:n}){if(n)return!1;const i=ql("filled",e,t),r=e.type;return Zn(i,r!==ST&&r!==CT&&r!==AT)}(s,o,{graticule:t.data&&VB(t.data)}));const l=this.encoding=function EXe(e,t,n,i){const r={};for(const o of oe(e))fae(o)||de(CYe(o));for(let o of kqe){if(!e[o])continue;const s=e[o];if(Hv(o)){const a=Oqe(o),l=r[a];if(pe(l)&&CKe(l.type)&&pe(s)&&!l.timeUnit){de(yYe(a));continue}}if("angle"===o&&"arc"===t&&!e.theta&&(de("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=Ys),wXe(e,o,t))if(o===Yu&&"line"===t&&qa(e[o])?.aggregate)de("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");else if(o===No&&(n?"fill"in e:"stroke"in e))de(Bae("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===jv||o===a_&&!te(s)&&!Wa(s)||o===Ph&&te(s)){if(s){if(o===a_){const a=e[o];if(Ile(a)){r[o]=a;continue}}r[o]=De(s).reduce((a,l)=>(pe(l)?a.push(yB(l,o)):de(H5(l,o)),a),[])}}else{if(o===Ph&&null===s)r[o]=null;else if(!(pe(s)||Ql(s)||Wa(s)||Xv(s)||Pe(s))){de(H5(s,o));continue}r[o]=Ule(s,o,i)}else de(_T(o,t))}return r}(t.encoding||{},a,s.filled,o);this.markDef=Sue(s,l,o),this.size=function utt({encoding:e,size:t}){for(const n of Xu){const i=ko(n);Jl(t[i])&&Bd(e[n])&&(delete t[i],de(Vae(i)))}return t}({encoding:l,size:mue(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=Cue(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>MB(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===gle,i=t&&Tqe.some(r=>nt(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return P5.reduce((i,r)=>{const o=Ti(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=sr(t);return te(n)&&(r.domain=n.map(ds)),te(i)&&(r.range=i.map(ds)),r}initAxes(t){return Xu.reduce((n,i)=>{const r=t[i];if(nt(r)||i===Mn&&nt(t.x2)||i===Pi&&nt(t.y2)){const o=nt(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=oe(t),i={};for(const r of n){const o=t[r];i[r]=Zv(o)?wae(o):ds(o)}return i}initLegends(t){return Fqe.reduce((n,i)=>{const r=Ti(t[i]);if(r&&function Lqe(e){switch(e){case No:case Hl:case zl:case Yu:case Oo:case Ku:case Od:case kd:return!0;case Md:case Nd:case Fh:return!1}}(i)){const o=r.legend;n[i]=o&&sr(o)}return n},{})}parseData(){this.component.data=px(this)}parseLayoutSize(){!function Wet(e){const{size:t,component:n}=e;for(const i of Xu){const r=ko(i);if(t[r]){const o=t[r];n.layoutSize.set(r,Jl(o)?"step":o,!0)}else{const o=qet(e,r);n.layoutSize.set(r,o,!1)}}}(this)}parseSelections(){this.component.selection=function RJe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=xn(r.name),s=r.select,a=Ce(s)?s:s.type,l=Ee(s)?Ze(s):{type:a},u=i[a];for(const f in u)"fields"===f||"encodings"===f||("mark"===f&&(l.mark={...u.mark,...l.mark}),(void 0===l[f]||!0===l[f])&&(l[f]=Ze(u[f]??l[f])));const c=n[o]={...l,name:o,type:a,init:r.value,bind:r.bind,events:Ce(l.on)?Sd(l.on,"scope"):De(Ze(l.on))},d=Ze(r);for(const f of QT)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=function Att(e){if(mt([CT,ET,VKe],e.mark)){const t=Jle(e.mark,e.encoding);if(t.length>0)return function Ttt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Nde+e.requestDataName(Rn.Main),data:e.requestDataName(Rn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:S4(e,{fromPrefix:Nde})}]}(e,t)}else if(e.mark===DT){const t=B5.some(n=>rn(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function xtt(e){const[t]=S4(e,{fromPrefix:Ode}),n=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),r=(u,c)=>`${u}(${[i({prefix:"min",suffix:"start",expr:c}),i({prefix:"max",suffix:"start",expr:c}),i({prefix:"min",suffix:"end",expr:c}),i({prefix:"max",suffix:"end",expr:c})].map(f=>`scale('${n}',${f})`).join(",")})`;let o,s;"x"===e.stack.fieldChannel?(o={...n_(t.encode.update,["y","yc","y2","height",...B5]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Mo(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...n_(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Mo(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of B5){const c=ql(u,e.markDef,e.config);t.encode.update[u]?(o[u]=t.encode.update[u],delete t.encode.update[u]):c&&(o[u]=Dn(c)),c&&(t.encode.update[u]={value:0})}const a=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const c=e.fieldDef(u),d=we(c);d&&a.push(d),(c?.bin||c?.timeUnit)&&a.push(we(c,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(t.encode.update[c])return{...u,[c]:t.encode.update[c]};{const d=ql(c,e.markDef,e.config);return void 0!==d?{...u,[c]:Dn(d)}:u}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Rn.Main),name:Ode+e.requestDataName(Rn.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}(e)}return S4(e)}(this)}parseAxesAndHeaders(){this.component.axes=function ttt(e){return Xu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[ltt(n,e)]),t),{})}(this)}assembleSelectionTopLevelSignals(t){return function iJe(e,t){let n=!1;for(const i of rr(e.component.selection??{})){const r=i.name,o=me(r+Qh);if(0===t.filter(a=>a.name===r).length){const l="point"===i.type?", true, true)":")";t.push({name:i.name,update:`${Ece}(${o}, ${me("global"===i.resolve?"union":i.resolve)}${l}`})}n=!0;for(const a of QT)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t))}return n&&0===t.filter(r=>"unit"===r.name).length&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),jB(t)}(this,t)}assembleSignals(){return[...xce(this),...tJe(this,[])]}assembleSelectionData(t){return function rJe(e,t){const n=[...t],i=Jh(e,{escape:!1});for(const r of rr(e.component.selection??{})){const o={name:r.name+Qh};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ya}}]),r.init){const a=r.project.items.map(Wue);o.values=r.init.map(r.project.hasSelectionId?l=>({unit:i,[Ya]:Xh(l,!1)[0]}):l=>({unit:i,fields:a,values:Xh(l,!1)}))}n.filter(a=>a.name===r.name+Qh).length||n.push(o)}return n}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return i4(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!M_(this.parent))&&(t=que(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Kh(this.encoding,t)}fieldDef(t){return qa(this.encoding[t])}typedFieldDef(t){const n=this.fieldDef(t);return no(n)?n:null}}class A4 extends b4{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(HT(a))return new A4(a,this,this.getName(`layer_${l}`),s,o);if(ec(a))return new kde(a,this,this.getName(`layer_${l}`),s,o);throw new Error(V5(a))})}parseData(){this.component.data=px(this);for(const t of this.children)t.parseData()}parseLayoutSize(){!function zet(e){w4(e),hx(e,"width"),hx(e,"height")}(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function itt(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of oe(r.component.axes))n.axis[o]=r4(e.component.resolve,o),"shared"===n.axis[o]&&(t[o]=rtt(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of Xu){for(const o of e.children)if(o.component.axes[r]){if("independent"===n.axis[r]){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const s of o.component.axes[r]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Pe(a)){if(i[a]>0&&!l){const u=ntt[a];i[a]>i[u]&&s.set("orient",u,!1)}i[a]++}}}delete o.component.axes[r]}if("independent"===n.axis[r]&&t[r]&&t[r].length>1)for(const[o,s]of(t[r]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),xce(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),i4(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of De(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:1===n.length?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function oJe(e,t){for(const n of e.children)Fn(n)&&(t=que(n,t));return t}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Qce(this))}}function T4(e,t,n,i,r){if(MT(e))return new ub(e,t,n,r);if(HT(e))return new A4(e,t,n,i,r);if(ec(e))return new kde(e,t,n,i,r);if(function zXe(e){return VT(e)||OB(e)||NB(e)}(e))return new Qet(e,t,n,r);throw new Error(V5(e))}function Itt(e,t={}){t.logger&&function iKe(e){Yl=e}(t.logger),t.fieldTitle&&Ble(t.fieldTitle);try{const n=Eue(zg(t.config,e.config)),i=$ue(e,n),r=T4(i,null,"",void 0,n);return r.parse(),function net(e,t){h4(e.sources);let n=0,i=0;for(let r=0;r<nx&&sde(e,t,!0);r++)n++;e.sources.map(d4);for(let r=0;r<nx&&sde(e,t,!1);r++)i++;h4(e.sources),Math.max(n,i)===nx&&de(`Maximum optimization runs(${nx}) reached.`)}(r.component.data,r),{spec:Ftt(r,Rtt(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&function Wae(){return Yl=Gae,Yl}(),t.fieldTitle&&function gXe(){Ble(Lle)}()}}function Rtt(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ce(t)&&(t={type:t}),r&&o&&function XQe(e){return["fit","fit-x","fit-y"].includes(e)}(t.type))if("step"===r&&"step"===o)de(kae()),t.type="pad";else if("step"===r||"step"===o){const s="step"===r?"width":"height";de(kae(pT(s))),t.type=function QQe(e){return e?`fit-${pT(e)}`:"fit"}("width"===s?"height":"width")}return{...1===oe(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...Uue(n,!1),...Uue(e,!0)}}function Ftt(e,t,n={},i){const r=e.config?function iQe(e){e=Ze(e);for(const t of tQe)delete e[t];if(e.axis)for(const t in e.axis)Zv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of BXe)delete e.legend[t];if(e.mark){for(const t of _le)delete e.mark[t];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(pue(e.params)),delete e.params);for(const t of eQe){for(const i of _le)delete e[t][i];const n=nQe[t];if(n)for(const i of n)delete e[t][i];oQe(e,t)}for(const t of function $Xe(){return oe(SB)}())delete e[t];!function rQe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=bae(e.title);tn(t)||(e.style["group-title"]={...e.style["group-title"],...t}),tn(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),tn(i)?delete e.title:e.title=i}(e);for(const t in e)Ee(e[t])&&tn(e[t])&&delete e[t];return tn(e)?void 0:e}(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function Uet(e,t){const n=[],i=Sde(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName="source_"+r++);const a=s.assemble();i(s,a)}for(const s of n)0===s.transform.length&&delete s.transform;let o=0;for(const[s,a]of n.entries())0===(a.transform??[]).length&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])"lookup"===a.type&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(t[h.name]=+h.value,!1));const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...pue(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const Ptt="5.21.0",Ide=function Ltt(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};const O_="#fff",int={background:"#333",view:{stroke:"#888"},title:{color:O_,subtitleColor:O_},style:{"guide-label":{fill:O_},"guide-title":{fill:O_}},axis:{domainColor:O_,gridColor:"#888",tickColor:O_}},ip="#4572a7",rnt={background:"#fff",arc:{fill:ip},area:{fill:ip},line:{stroke:ip,strokeWidth:2},path:{stroke:ip},rect:{fill:ip},shape:{stroke:ip},symbol:{fill:ip,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},rp="#30a2da",x4="#cbcbcb",ant={arc:{fill:rp},area:{fill:rp},axis:{domainColor:x4,grid:!0,gridColor:x4,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:x4,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:rp,strokeWidth:2},path:{stroke:rp,strokeWidth:.5},rect:{fill:rp},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:rp},bar:{binSpacing:2,fill:rp,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},op="#000",lnt={group:{fill:"#e5e5e5"},arc:{fill:op},area:{fill:op},line:{stroke:op},path:{stroke:op},rect:{fill:op},shape:{stroke:op},symbol:{fill:op,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Lde="Benton Gothic, sans-serif",sp="#82c6df",M4="Benton Gothic Bold, sans-serif",cb={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},fnt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:M4,fontSize:22,fontWeight:"normal"},arc:{fill:sp},area:{fill:sp},line:{stroke:sp,strokeWidth:2},path:{stroke:sp},rect:{fill:sp},shape:{stroke:sp},symbol:{fill:sp,size:30},axis:{labelFont:Lde,labelFontSize:11.5,labelFontWeight:"normal",titleFont:M4,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Lde,labelFontSize:11.5,symbolType:"square",titleFont:M4,titleFontSize:13,titleFontWeight:"normal"},range:{category:cb["category-6"],diverging:cb["fireandice-6"],heatmap:cb["fire-7"],ordinal:cb["fire-7"],ramp:cb["fire-7"]}},ap="#ab5787",_x="#979797",hnt={background:"#f9f9f9",arc:{fill:ap},area:{fill:ap},line:{stroke:ap},path:{stroke:ap},rect:{fill:ap},shape:{stroke:ap},symbol:{fill:ap,size:30},axis:{domainColor:_x,domainWidth:.5,gridWidth:.2,labelColor:_x,tickColor:_x,tickWidth:.2,titleColor:_x},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},lp="#3e5c69",pnt={background:"#fff",arc:{fill:lp},area:{fill:lp},line:{stroke:lp},path:{stroke:lp},rect:{fill:lp},shape:{stroke:lp},symbol:{fill:lp},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Js="#1696d2",yx="Lato",N4="Lato",db={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},vnt={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:yx},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:N4,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:yx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:N4,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:yx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:N4,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:yx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:db["six-groups-cat-1"],diverging:db["diverging-colors"],heatmap:db["diverging-colors"],ordinal:db["six-groups-seq"],ramp:db["shades-blue"]},area:{fill:Js},rect:{fill:Js},line:{color:Js,stroke:Js,strokeWidth:5},trail:{color:Js,stroke:Js,strokeWidth:0,size:1},path:{stroke:Js,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Js,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Js,stroke:null}},arc:{fill:Js},shape:{stroke:Js},symbol:{fill:Js,size:30}},up="#3366CC",vx="Arial, sans-serif",bnt={arc:{fill:up},area:{fill:up},path:{stroke:up},rect:{fill:up},shape:{stroke:up},symbol:{stroke:up},circle:{fill:up},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:vx,fontSize:12},"guide-title":{font:vx,fontSize:12},"group-title":{font:vx,fontSize:12}},title:{font:vx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},O4=e=>e*(1/3+1),Hde=O4(9),zde=O4(10),Gde=O4(12),fb="Segoe UI",Wde="wf_standard-font, helvetica, arial, sans-serif",hb="#605E5C",Yde="transparent",Qa="#118DFF",Qde=["#DEEFFF",Qa],Mnt={view:{stroke:Yde},background:Yde,font:fb,header:{titleFont:Wde,titleFontSize:Gde,titleColor:"#252423",labelFont:fb,labelFontSize:zde,labelColor:hb},axis:{ticks:!1,grid:!1,domain:!1,labelColor:hb,labelFontSize:Hde,titleFont:Wde,titleColor:"#252423",titleFontSize:Gde,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Qa},line:{stroke:Qa,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:fb,fontSize:Hde,fill:hb},arc:{fill:Qa},area:{fill:Qa,line:!0,opacity:.6},path:{stroke:Qa},rect:{fill:Qa},point:{fill:Qa,filled:!0,size:75},shape:{stroke:Qa},symbol:{fill:Qa,strokeWidth:1.5,size:50},legend:{titleFont:fb,titleFontWeight:"bold",titleColor:hb,labelFont:fb,labelFontSize:zde,labelColor:hb,symbolType:"circle",symbolSize:75},range:{category:[Qa,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:Qde,heatmap:Qde,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Qa]}},k4='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Nnt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',I4=400,bx={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ont=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],knt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function wx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=bx.gridBg[e],r=bx.textPrimary[e],o=bx.textSecondary[e],a="dark"===n?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:k4,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:Nnt,labelFontWeight:I4,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:bx.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:k4,fill:o,fontWeight:I4},"guide-title":{font:k4,fill:o,fontWeight:I4}},range:{category:"dark"===n?Ont:knt,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Int=wx({theme:"white",background:"#ffffff"}),Rnt=wx({theme:"g10",background:"#f4f4f4"}),Fnt=wx({theme:"g90",background:"#262626"}),Pnt=wx({theme:"g100",background:"#161616"}),Lnt="2.15.0";function Jde(e,t){return JSON.stringify(e,function sit(e){const t=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}(t))}const Zde="vg-tooltip-element",lit={offsetX:10,offsetY:10,id:Zde,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function uit(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function oit(e,t,n,i){if(te(e))return`[${e.map(r=>t(Ce(r)?r:Jde(r,n))).join(", ")}]`;if(Ee(e)){let r="";const{title:o,image:s,...a}=e;o&&(r+=`<h2>${t(o)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(a);if(l.length>0){r+="<table>";for(const u of l){let c=a[u];void 0!==c&&(Ee(c)&&(c=Jde(c,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)},baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function efe(e,t,{offsetX:n,offsetY:i}){const r=tfe({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(nfe(r[s],t))return r[s];return r["top-left"]}function tfe(e,t,n,i){const s=e.x1-t.width-n,a=(e.x1+e.x2)/2-t.width/2,l=e.x2+n,u=e.y1-t.height-i,c=(e.y1+e.y2)/2-t.height/2,d=e.y2+i;return{top:{x:a,y:u},bottom:{x:a,y:d},left:{x:s,y:c},right:{x:l,y:c},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:d},"bottom-right":{x:l,y:d}}}function nfe(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function hit(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class ife{constructor(t){this.options={...lit,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function cit(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(Zde,e)}(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}="mark"===this.options.anchor?function dit(e,t,n,i,r){const{position:o,offsetX:s,offsetY:a}=r,c=function fit(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,o=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,o+=s.y??0;return{x1:r,x2:r+(i.x2-i.x1),y1:o,y2:o+(i.y2-i.y1)}}(e._el.getBoundingClientRect(),e._origin,n),d=tfe(c,i,s,a),f=Array.isArray(o)?o:[o];for(const h of f)if(nfe(d[h],i)&&!hit(t,d[h],i))return d[h];return efe(t,i,r)}(t,n,i,this.el.getBoundingClientRect(),this.options):efe(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var e,pit=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(t,n)},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),git=Object.prototype.hasOwnProperty;function R4(e,t){return git.call(e,t)}function F4(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)R4(e,r)&&i.push(r);return i}function ps(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function P4(e){for(var i,t=0,n=e.length;t<n;){if(!((i=e.charCodeAt(t))>=48&&i<=57))return!1;t++}return!0}function cp(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function rfe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function L4(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(L4(e[t]))return!0}else if("object"==typeof e)for(var i=F4(e),r=i.length,o=0;o<r;o++)if(L4(e[i[o]]))return!0;return!1}function ofe(e,t){var n=[e];for(var i in t){var r="object"==typeof t[i]?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join("\n")}var sfe=function(e){function t(n,i,r,o,s){var a=this.constructor,l=e.call(this,ofe(n,{name:i,index:r,operation:o,tree:s}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=ofe(n,{name:i,index:r,operation:o,tree:s}),l}return pit(t,e),t}(Error),qn=sfe,k_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Ex(n,this.path);i&&(i=ps(i));var r=dp(n,{op:"remove",path:this.from}).removed;return dp(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Ex(n,this.from);return dp(n,{op:"add",path:this.path,value:ps(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:pb(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_it={add:function(e,t,n){return P4(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:k_.move,copy:k_.copy,test:k_.test,_get:k_._get};function Ex(e,t){if(""==t)return e;var n={op:"_get",path:t};return dp(e,n),n.value}function dp(e,t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):Cx(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=Ex(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=pb(e,t.value),!1===s.test)throw new qn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new qn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}i||(e=ps(e));var l=(t.path||"").split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(p="function"==typeof n?n:Cx;;){if((h=l[c])&&-1!=h.indexOf("~")&&(h=rfe(h)),r&&("__proto__"==h||"prototype"==h&&c>0&&"constructor"==l[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[h]?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),void 0!==f&&p(t,0,e,f)),c++,Array.isArray(u)){if("-"===h)h=u.length;else{if(n&&!P4(h))throw new qn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);P4(h)&&(h=~~h)}if(c>=d){if(n&&"add"===t.op&&h>u.length)throw new qn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=_it[t.op].call(t,u,h,e)).test)throw new qn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=d){if(!1===(s=k_[t.op].call(t,u,h,e)).test)throw new qn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<d&&(!u||"object"!=typeof u))throw new qn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function Dx(e,t,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(t))throw new qn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=ps(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=dp(e,t[s],n,!0,r,s),e=o[s].newDocument;return o.newDocument=e,o}function Cx(e,t,n,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new qn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!k_[e.op])throw new qn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new qn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new qn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new qn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new qn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&L4(e.value))throw new qn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new qn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new qn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=afe([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new qn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function afe(e,t,n){try{if(!Array.isArray(e))throw new qn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Dx(ps(t),ps(e),n||!0);else{n=n||Cx;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof qn)return r;throw r}}function pb(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,o,s,n=Array.isArray(e),i=Array.isArray(t);if(n&&i){if((o=e.length)!=t.length)return!1;for(r=o;0!=r--;)if(!pb(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(e);if((o=a.length)!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=o;0!=r--;)if(!pb(e[s=a[r]],t[s]))return!1;return!0}return e!=e&&t!=t}var vit=Object.freeze({__proto__:null,JsonPatchError:qn,_areEquals:pb,applyOperation:dp,applyPatch:Dx,applyReducer:function yit(e,t,n){var i=dp(e,t);if(!1===i.test)throw new qn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument},deepClone:ps,getValueByPointer:Ex,validate:afe,validator:Cx}),$4=new WeakMap,bit=function e(t){this.observers=new Map,this.obj=t},wit=function e(t,n){this.callback=t,this.observer=n};function B4(e,t){void 0===t&&(t=!1);var n=$4.get(e.object);U4(n.value,e.object,e.patches,"",t),e.patches.length&&Dx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function U4(e,t,n,i,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=F4(t),s=F4(e),a=!1,l=s.length-1;l>=0;l--){var c=e[u=s[l]];if(!R4(t,u)||void 0===t[u]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+cp(u),value:ps(c)}),n.push({op:"remove",path:i+"/"+cp(u)}),a=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}));else{var d=t[u];"object"==typeof c&&null!=c&&"object"==typeof d&&null!=d&&Array.isArray(c)===Array.isArray(d)?U4(c,d,n,i+"/"+cp(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+cp(u),value:ps(c)}),n.push({op:"replace",path:i+"/"+cp(u),value:ps(d)}))}}if(a||o.length!=s.length)for(l=0;l<o.length;l++){var u;!R4(e,u=o[l])&&void 0!==t[u]&&n.push({op:"add",path:i+"/"+cp(u),value:ps(t[u])})}}}var V4,lfe,j4,ufe,xit=Object.freeze({__proto__:null,compare:function Tit(e,t,n){void 0===n&&(n=!1);var i=[];return U4(e,t,i,"",n),i},generate:B4,observe:function Ait(e,t){var i,r=function Eit(e){return $4.get(e)}(e);if(r){var o=function Dit(e,t){return e.observers.get(t)}(r,t);i=o&&o.observer}else r=new bit(e),$4.set(e,r);if(i)return i;if(i={},r.value=ps(e),t){i.callback=t,i.next=null;var s=function(){B4(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){B4(i),clearTimeout(i.next),function Cit(e,t){e.observers.delete(t.callback)}(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new wit(t,i)),i},unobserve:function Sit(e,t){t.unobserve()}});function Mit(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function H4(){if(ufe)return j4;ufe=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return j4=i=>i?"object"!=typeof i?e:i:t}Object.assign({},vit,xit,{JsonPatchError:sfe,deepClone:ps,escapePathComponent:cp,unescapePathComponent:rfe});var z4,cfe,W4,dfe,ffe,Y4,hfe,K4,pfe,Q4,gfe,J4,mfe,Z4,_fe,e8,yfe,t8,vfe,n8,bfe,i8,wfe,r8,Efe,o8,Dfe,s8,Cfe,a8,Afe,Sx={exports:{}};function G4(){return cfe?z4:(cfe=1,z4={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2})}function Ax(){return dfe||(dfe=1,W4="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),W4}function q4(){return ffe||(ffe=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=G4(),o=Ax(),s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[d,i]],p=(g,m,_)=>{const y=(g=>{for(const[m,_]of f)g=g.split(`${m}*`).join(`${m}{0,${_}}`).split(`${m}+`).join(`${m}{1,${_}}`);return g})(m),v=c++;o(g,v,m),u[g]=v,l[v]=m,s[v]=new RegExp(m,_?"g":void 0),a[v]=new RegExp(y,_?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Sx,Sx.exports)),Sx.exports}function X4(){if(pfe)return K4;pfe=1;const e=Ax(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=G4(),{safeRe:i,t:r}=q4(),o=H4(),{compareIdentifiers:s}=function Oit(){if(hfe)return Y4;hfe=1;const e=/^[0-9]+$/,t=(i,r)=>{const o=e.test(i),s=e.test(r);return o&&s&&(i=+i,r=+r),i===r?0:o&&!s?-1:s&&!o?1:i<r?-1:1};return Y4={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)}}();class a{constructor(u,c){if(c=o(c),u instanceof a){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if("string"!=typeof u)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const d=u.trim().match(c.loose?i[r.LOOSE]:i[r.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=d[4]?d[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const h=+f;if(h>=0&&h<n)return h}return f}):[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if("string"==typeof u&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const d=this.prerelease[c],f=u.prerelease[c];if(e("prerelease compare",c,d,f),void 0===d&&void 0===f)return 0;if(void 0===f)return 1;if(void 0===d)return-1;if(d!==f)return s(d,f)}while(++c)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let c=0;do{const d=this.build[c],f=u.build[c];if(e("build compare",c,d,f),void 0===d&&void 0===f)return 0;if(void 0===f)return 1;if(void 0===d)return-1;if(d!==f)return s(d,f)}while(++c)}inc(u,c,d){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,d),this.inc("pre",c,d);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",c,d),this.inc("pre",c,d);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(d)?1:0;if(!c&&!1===d)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[f];else{let h=this.prerelease.length;for(;--h>=0;)"number"==typeof this.prerelease[h]&&(this.prerelease[h]++,h=-2);if(-1===h){if(c===this.prerelease.join(".")&&!1===d)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(c){let h=[c,f];!1===d&&(h=[c]),0===s(this.prerelease[0],c)?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return K4=a}function I_(){if(gfe)return Q4;gfe=1;const e=X4();return Q4=(n,i,r)=>new e(n,r).compare(new e(i,r))}function Sfe(){if(Cfe)return s8;Cfe=1;const e=/\s+/g;class t{constructor(C,T){if(T=r(T),C instanceof t)return C.loose===!!T.loose&&C.includePrerelease===!!T.includePrerelease?C:new t(C.raw,T);if(C instanceof o)return this.raw=C.value,this.set=[[C]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=C.trim().replace(e," "),this.set=this.raw.split("||").map(O=>this.parseRange(O.trim())).filter(O=>O.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const O=this.set[0];if(this.set=this.set.filter(x=>!g(x[0])),0===this.set.length)this.set=[O];else if(this.set.length>1)for(const x of this.set)if(1===x.length&&m(x[0])){this.set=[x];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let C=0;C<this.set.length;C++){C>0&&(this.formatted+="||");const T=this.set[C];for(let O=0;O<T.length;O++)O>0&&(this.formatted+=" "),this.formatted+=T[O].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(C){const O=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+C,x=i.get(O);if(x)return x;const N=this.options.loose;C=C.replace(N?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE],F(this.options.includePrerelease)),s("hyphen replace",C),C=C.replace(l[u.COMPARATORTRIM],c),s("comparator trim",C),C=C.replace(l[u.TILDETRIM],d),s("tilde trim",C),C=C.replace(l[u.CARETTRIM],f),s("caret trim",C);let U=C.split(" ").map(z=>y(z,this.options)).join(" ").split(/\s+/).map(z=>R(z,this.options));N&&(U=U.filter(z=>(s("loose invalid filter",z,this.options),!!z.match(l[u.COMPARATORLOOSE])))),s("range list",U);const V=new Map,H=U.map(z=>new o(z,this.options));for(const z of H){if(g(z))return[z];V.set(z.value,z)}V.size>1&&V.has("")&&V.delete("");const j=[...V.values()];return i.set(O,j),j}intersects(C,T){if(!(C instanceof t))throw new TypeError("a Range is required");return this.set.some(O=>_(O,T)&&C.set.some(x=>_(x,T)&&O.every(N=>x.every(I=>N.intersects(I,T)))))}test(C){if(!C)return!1;if("string"==typeof C)try{C=new a(C,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(P(this.set[T],C,this.options))return!0;return!1}}s8=t;const n=function Nit(){return lfe?V4:(lfe=1,V4=class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(void 0!==i)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&void 0!==i){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,i)}return this}})}(),i=new n,r=H4(),o=function Bit(){if(Dfe)return o8;Dfe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.value=this.semver===e?"":this.operator+this.semver.version,s("comp",this)}parse(c){const f=c.match(this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR]);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=void 0!==f[1]?f[1]:"","="===this.operator&&(this.operator=""),this.semver=f[2]?new a(f[2],this.options.loose):e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if("string"==typeof c)try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(c.value,d).test(this.value):""===c.operator?""===c.value||new l(this.value,d).test(c.semver):!((d=n(d)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===c.value)||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}o8=t;const n=H4(),{safeRe:i,t:r}=q4(),o=function $it(){if(Efe)return r8;Efe=1;const e=function kit(){if(mfe)return J4;mfe=1;const e=I_();return J4=(n,i,r)=>0===e(n,i,r)}(),t=function Iit(){if(_fe)return Z4;_fe=1;const e=I_();return Z4=(n,i,r)=>0!==e(n,i,r)}(),n=function Rit(){if(yfe)return e8;yfe=1;const e=I_();return e8=(n,i,r)=>e(n,i,r)>0}(),i=function Fit(){if(vfe)return t8;vfe=1;const e=I_();return t8=(n,i,r)=>e(n,i,r)>=0}(),r=function Pit(){if(bfe)return n8;bfe=1;const e=I_();return n8=(n,i,r)=>e(n,i,r)<0}(),o=function Lit(){if(wfe)return i8;wfe=1;const e=I_();return i8=(n,i,r)=>e(n,i,r)<=0}();return r8=(a,l,u,c)=>{switch(l){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof u&&(u=u.version),a===u;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof u&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,c);case"!=":return t(a,u,c);case">":return n(a,u,c);case">=":return i(a,u,c);case"<":return r(a,u,c);case"<=":return o(a,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}}}(),s=Ax(),a=X4(),l=Sfe();return o8}(),s=Ax(),a=X4(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=q4(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=G4(),g=A=>"<0.0.0-0"===A.value,m=A=>""===A.value,_=(A,C)=>{let T=!0;const O=A.slice();let x=O.pop();for(;T&&O.length;)T=O.every(N=>x.intersects(N,C)),x=O.pop();return T},y=(A,C)=>(s("comp",A,C),A=D(A,C),s("caret",A),A=b(A,C),s("tildes",A),A=S(A,C),s("xrange",A),A=k(A,C),s("stars",A),A),v=A=>!A||"x"===A.toLowerCase()||"*"===A,b=(A,C)=>A.trim().split(/\s+/).map(T=>w(T,C)).join(" "),w=(A,C)=>A.replace(C.loose?l[u.TILDELOOSE]:l[u.TILDE],(O,x,N,I,U)=>{let V;return s("tilde",A,O,x,N,I,U),v(x)?V="":v(N)?V=`>=${x}.0.0 <${+x+1}.0.0-0`:v(I)?V=`>=${x}.${N}.0 <${x}.${+N+1}.0-0`:U?(s("replaceTilde pr",U),V=`>=${x}.${N}.${I}-${U} <${x}.${+N+1}.0-0`):V=`>=${x}.${N}.${I} <${x}.${+N+1}.0-0`,s("tilde return",V),V}),D=(A,C)=>A.trim().split(/\s+/).map(T=>E(T,C)).join(" "),E=(A,C)=>{s("caret",A,C);const O=C.includePrerelease?"-0":"";return A.replace(C.loose?l[u.CARETLOOSE]:l[u.CARET],(x,N,I,U,V)=>{let H;return s("caret",A,x,N,I,U,V),v(N)?H="":v(I)?H=`>=${N}.0.0${O} <${+N+1}.0.0-0`:v(U)?H="0"===N?`>=${N}.${I}.0${O} <${N}.${+I+1}.0-0`:`>=${N}.${I}.0${O} <${+N+1}.0.0-0`:V?(s("replaceCaret pr",V),H="0"===N?"0"===I?`>=${N}.${I}.${U}-${V} <${N}.${I}.${+U+1}-0`:`>=${N}.${I}.${U}-${V} <${N}.${+I+1}.0-0`:`>=${N}.${I}.${U}-${V} <${+N+1}.0.0-0`):(s("no pr"),H="0"===N?"0"===I?`>=${N}.${I}.${U}${O} <${N}.${I}.${+U+1}-0`:`>=${N}.${I}.${U}${O} <${N}.${+I+1}.0-0`:`>=${N}.${I}.${U} <${+N+1}.0.0-0`),s("caret return",H),H})},S=(A,C)=>(s("replaceXRanges",A,C),A.split(/\s+/).map(T=>M(T,C)).join(" ")),M=(A,C)=>(A=A.trim()).replace(C.loose?l[u.XRANGELOOSE]:l[u.XRANGE],(O,x,N,I,U,V)=>{s("xRange",A,O,x,N,I,U,V);const H=v(N),j=H||v(I),z=j||v(U);return"="===x&&z&&(x=""),V=C.includePrerelease?"-0":"",H?O=">"===x||"<"===x?"<0.0.0-0":"*":x&&z?(j&&(I=0),U=0,">"===x?(x=">=",j?(N=+N+1,I=0,U=0):(I=+I+1,U=0)):"<="===x&&(x="<",j?N=+N+1:I=+I+1),"<"===x&&(V="-0"),O=`${x+N}.${I}.${U}${V}`):j?O=`>=${N}.0.0${V} <${+N+1}.0.0-0`:z&&(O=`>=${N}.${I}.0${V} <${N}.${+I+1}.0-0`),s("xRange return",O),O}),k=(A,C)=>(s("replaceStars",A,C),A.trim().replace(l[u.STAR],"")),R=(A,C)=>(s("replaceGTE0",A,C),A.trim().replace(l[C.includePrerelease?u.GTE0PRE:u.GTE0],"")),F=A=>(C,T,O,x,N,I,U,V,H,j,z,re)=>`${T=v(O)?"":v(x)?`>=${O}.0.0${A?"-0":""}`:v(N)?`>=${O}.${x}.0${A?"-0":""}`:I?`>=${T}`:`>=${T}${A?"-0":""}`} ${V=v(H)?"":v(j)?`<${+H+1}.0.0-0`:v(z)?`<${H}.${+j+1}.0-0`:re?`<=${H}.${j}.${z}-${re}`:A?`<${H}.${j}.${+z+1}-0`:`<=${V}`}`.trim(),P=(A,C,T)=>{for(let O=0;O<A.length;O++)if(!A[O].test(C))return!1;if(C.prerelease.length&&!T.includePrerelease){for(let O=0;O<A.length;O++)if(s(A[O].semver),A[O].semver!==o.ANY&&A[O].semver.prerelease.length>0){const x=A[O].semver;if(x.major===C.major&&x.minor===C.minor&&x.patch===C.patch)return!0}return!1}return!0};return s8}var Vit=function Uit(){if(Afe)return a8;Afe=1;const e=Sfe();return a8=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)}}(),Tfe=Mit(Vit),Hit='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function xfe(e,...t){for(const n of t)zit(e,n);return e}function zit(e,t){for(const n of Object.keys(t))Gg(e,n,t[n],!0)}const nu=rf;let gb=sf;const Mfe=typeof window<"u"?window:void 0;void 0===gb&&Mfe?.vl?.compile&&(gb=Mfe.vl);const hrt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},prt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},mb={vega:"Vega","vega-lite":"Vega-Lite"},Tx={vega:nu.version,"vega-lite":gb?gb.version:"not available"},grt={vega:e=>e,"vega-lite":(e,t)=>gb.compile(e,{config:t}).spec},mrt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',_rt="chart-wrapper";function Nfe(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+o),s.document.title=`${mb[i]} JSON Source`}function Ofe(e){return!(!e||!("load"in e))}function kfe(e){return Ofe(e)?e:nu.loader(e)}function R_(e,t){return l8.apply(this,arguments)}function l8(){return l8=vi(function*(e,t,n={}){let i,r;Ce(t)?(r=kfe(n.loader),i=JSON.parse(yield r.load(t))):i=t;const o=function brt(e){const t=e.usermeta?.embedOptions??{};return Ce(t.defaultStyle)&&(t.defaultStyle=!1),t}(i),s=o.loader;(!r||s)&&(r=kfe(n.loader??s));const a=yield Ife(o,r),l=yield Ife(n,r),u={...xfe(l,a),config:zg(l.config??{},a.config??{})};return yield function Ert(e,t){return c8.apply(this,arguments)}(e,i,u,r)}),l8.apply(this,arguments)}function Ife(e,t){return u8.apply(this,arguments)}function u8(){return u8=vi(function*(e,t){const n=Ce(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},i=Ce(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}),u8.apply(this,arguments)}function c8(){return c8=vi(function*(e,t,n={},i){const r=n.theme?zg(af[n.theme],n.config??{}):n.config,o=$c(n.actions)?n.actions:xfe({},hrt,n.actions??{}),s={...prt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??nu.Warn,u=n.downloadFileName??"visualization",c="string"==typeof e?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const w="vega-embed-style",{root:D,rootContainer:E}=function wrt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}(c);if(!D.getElementById(w)){const S=document.createElement("style");S.id=w,S.innerHTML=void 0===n.defaultStyle||!0===n.defaultStyle?Hit.toString():n.defaultStyle,E.appendChild(S)}}const d=function vrt(e,t){if(e.$schema){const n=Ide(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${mb[n.library]}, but mode argument sets ${mb[t]??t}.`);const i=n.library;return Tfe(Tx[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${mb[i]} ${n.version}, but the current version of ${mb[i]} is v${Tx[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}(t,n.mode);let f=grt[d](t,r);if("vega-lite"===d&&f.$schema){const w=Ide(f.$schema);Tfe(Tx.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${Tx.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(_rt),c.appendChild(w),h=w}const p=n.patch;if(p&&(f=p instanceof Function?p(f):Dx(f,p,!0,!1).newDocument),n.formatLocale&&nu.formatLocale(n.formatLocale),n.timeFormatLocale&&nu.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const D=n.expressionFunctions[w];"fn"in D?nu.expressionFunction(w,D.fn,D.visitor):D instanceof Function&&nu.expressionFunction(w,D)}const{ast:g}=n,m=nu.parse(f,"vega-lite"===d?{}:r,{ast:g}),_=new(n.viewClass||nu.View)(m,{loader:i,logLevel:l,renderer:a,...g?{expr:nu.expressionInterpreter??n.expr??bqe}:{}});if(_.addSignalListener("autosize",(w,D)=>{const{type:E}=D;"fit-x"==E?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==E?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==E?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),!1!==n.tooltip){const{loader:w,tooltip:D}=n,E=w&&!Ofe(w)?w?.baseURL:void 0,S=function yrt(e){return"function"==typeof e}(D)?D:new ife({baseURL:E,...!0===D?{}:D}).call;_.tooltip(S)}let v,{hover:y}=n;if(void 0===y&&(y="vega"===d),y){const{hoverSet:w,updateSet:D}="boolean"==typeof y?{}:y;_.hover(w,D)}if(n&&(null!=n.width&&_.width(n.width),null!=n.height&&_.height(n.height),null!=n.padding&&_.padding(n.padding)),yield _.initialize(h,n.bind).runAsync(),!1!==o){let w=c;if(!1!==n.defaultStyle||n.forceActionsMenu){const E=document.createElement("details");E.title=s.CLICK_TO_VIEW_ACTIONS,c.append(E),w=E;const S=document.createElement("summary");S.innerHTML=mrt,E.append(S),v=M=>{E.contains(M.target)||E.removeAttribute("open")},document.addEventListener("click",v)}const D=document.createElement("div");if(w.append(D),D.classList.add("vega-actions"),!0===o||!1!==o.export)for(const E of["svg","png"])if(!0===o||!0===o.export||o.export[E]){const S=s[`${E.toUpperCase()}_ACTION`],M=document.createElement("a"),k=Ee(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;M.text=S,M.href="#",M.target="_blank",M.download=`${u}.${E}`,M.addEventListener("mousedown",function(){var R=vi(function*(F){F.preventDefault();const P=yield _.toImageURL(E,k);this.href=P});return function(F){return R.apply(this,arguments)}}()),D.append(M)}if(!0===o||!1!==o.source){const E=document.createElement("a");E.text=s.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(S){Nfe(iI()(t),n.sourceHeader??"",n.sourceFooter??"",d),S.preventDefault()}),D.append(E)}if("vega-lite"===d&&(!0===o||!1!==o.compiled)){const E=document.createElement("a");E.text=s.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(S){Nfe(iI()(f),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),D.append(E)}if(!0===o||!1!==o.editor){const E=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=s.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(M){(function jit(e,t,n){const i=e.open(t),{origin:s}=new URL(t);let a=40;e.addEventListener("message",function l(c){c.source===i&&(a=0,e.removeEventListener("message",l,!1))},!1),setTimeout(function u(){a<=0||(i.postMessage(n,s),setTimeout(u,250),a-=1)},250)})(window,E,{config:r,mode:p?"vega":d,renderer:a,spec:iI()(p?f:t)}),M.preventDefault()}),D.append(S)}}return{view:_,spec:t,vgSpec:f,finalize:function b(){v&&document.removeEventListener("click",v),_.finalize()},embedOptions:n}}),c8.apply(this,arguments)}class xx{}class d8{}class sc{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(o=>o.toString()),r.length>0){const o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof sc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new sc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof sc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class Drt{encodeKey(t){return Rfe(t)}encodeValue(t){return Rfe(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Srt=/%(\d[a-f0-9])/gi,Art={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rfe(e){return encodeURIComponent(e).replace(Srt,(t,n)=>Art[n]??t)}function Mx(e){return`${e}`}class Gd{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Drt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Crt(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],r=Array.isArray(i)?i.map(Mx):[Mx(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Gd({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Mx(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(Mx(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Trt{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Ffe(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Pfe(e){return typeof Blob<"u"&&e instanceof Blob}function Lfe(e){return typeof FormData<"u"&&e instanceof FormData}class _b{constructor(t,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function xrt(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new sc),this.context||(this.context=new Trt),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Gd,this.urlWithParams=n}serializeBody(){return null===this.body?null:Ffe(this.body)||Pfe(this.body)||Lfe(this.body)||function Mrt(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lfe(this.body)?null:Pfe(this.body)?this.body.type||null:Ffe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,u=t.params||this.params;const c=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,f)=>d.set(f,t.setHeaders[f]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((d,f)=>d.set(f,t.setParams[f]),u)),new _b(n,i,o,{params:u,headers:l,context:c,reportProgress:a,responseType:r,withCredentials:s})}}var ui=(()=>((ui=ui||{})[ui.Sent=0]="Sent",ui[ui.UploadProgress=1]="UploadProgress",ui[ui.ResponseHeader=2]="ResponseHeader",ui[ui.DownloadProgress=3]="DownloadProgress",ui[ui.Response=4]="Response",ui[ui.User=5]="User",ui))();class f8{constructor(t,n=200,i="OK"){this.headers=t.headers||new sc,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class h8 extends f8{constructor(t={}){super(t),this.type=ui.ResponseHeader}clone(t={}){return new h8({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Nx extends f8{constructor(t={}){super(t),this.type=ui.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Nx({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $fe extends f8{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function p8(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let yb=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof _b)o=n;else{let l,u;l=r.headers instanceof sc?r.headers:new sc(r.headers),r.params&&(u=r.params instanceof Gd?r.params:new Gd({fromObject:r.params})),o=new _b(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Ve(o).pipe(Cc(l=>this.handler.handle(l)));if(n instanceof _b||"events"===r.observe)return s;const a=s.pipe(Xn(l=>l instanceof Nx));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Xe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Xe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Xe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Xe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Gd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,p8(r,i))}post(n,i,r={}){return this.request("POST",n,p8(r,i))}put(n,i,r={}){return this.request("PUT",n,p8(r,i))}}return e.\u0275fac=function(n){return new(n||e)(fe(xx))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();function Bfe(e,t){return t(e)}function Nrt(e,t){return(n,i)=>t.intercept(n,{handle:r=>e(r,i)})}const krt=new Ie("HTTP_INTERCEPTORS"),vb=new Ie("HTTP_INTERCEPTOR_FNS");function Irt(){let e=null;return(t,n)=>(null===e&&(e=(tt(krt,{optional:!0})??[]).reduceRight(Nrt,Bfe)),e(t,n))}let Ufe=(()=>{class e extends xx{constructor(n,i){super(),this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=Array.from(new Set(this.injector.get(vb)));this.chain=i.reduceRight((r,o)=>function Ort(e,t,n){return(i,r)=>n.runInContext(()=>t(i,o=>e(o,r)))}(r,o,this.injector),Bfe)}return this.chain(n,i=>this.backend.handle(i))}}return e.\u0275fac=function(n){return new(n||e)(fe(d8),fe(Ds))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const Lrt=/^\)\]\}',?\n/;let jfe=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new on(i=>{const r=this.xhrFactory.build();if(r.open(n.method,n.urlWithParams),n.withCredentials&&(r.withCredentials=!0),n.headers.forEach((h,p)=>r.setRequestHeader(h,p.join(","))),n.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&r.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();r.responseType="json"!==h?h:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const h=r.statusText||"OK",p=new sc(r.getAllResponseHeaders()),g=function $rt(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||n.url;return s=new h8({headers:p,status:r.status,statusText:h,url:g}),s},l=()=>{let{headers:h,status:p,statusText:g,url:m}=a(),_=null;204!==p&&(_=typeof r.response>"u"?r.responseText:r.response),0===p&&(p=_?200:0);let y=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof _){const v=_;_=_.replace(Lrt,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=v,y&&(y=!1,_={error:b,text:_})}}y?(i.next(new Nx({body:_,headers:h,status:p,statusText:g,url:m||void 0})),i.complete()):i.error(new $fe({error:_,headers:h,status:p,statusText:g,url:m||void 0}))},u=h=>{const{url:p}=a(),g=new $fe({error:h,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(g)};let c=!1;const d=h=>{c||(i.next(a()),c=!0);let p={type:ui.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),"text"===n.responseType&&r.responseText&&(p.partialText=r.responseText),i.next(p)},f=h=>{let p={type:ui.UploadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),n.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",f)),r.send(o),i.next({type:ui.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",l),r.removeEventListener("timeout",u),n.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(fe(VH))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const g8=new Ie("XSRF_ENABLED"),Hfe=new Ie("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),zfe=new Ie("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Gfe{}let Vrt=(()=>{class e{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=MH(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(fe(hn),fe(qw),fe(Hfe))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();function jrt(e,t){const n=e.url.toLowerCase();if(!tt(g8)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const i=tt(Gfe).getToken(),r=tt(zfe);return null!=i&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),t(e)}var ti=(()=>((ti=ti||{})[ti.Interceptors=0]="Interceptors",ti[ti.LegacyInterceptors=1]="LegacyInterceptors",ti[ti.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ti[ti.NoXsrfProtection=3]="NoXsrfProtection",ti[ti.JsonpSupport=4]="JsonpSupport",ti[ti.RequestsMadeViaParent=5]="RequestsMadeViaParent",ti))();function F_(e,t){return{\u0275kind:e,\u0275providers:t}}function Hrt(...e){const t=[yb,jfe,Ufe,{provide:xx,useExisting:Ufe},{provide:d8,useExisting:jfe},{provide:vb,useValue:jrt,multi:!0},{provide:g8,useValue:!0},{provide:Gfe,useClass:Vrt}];for(const n of e)t.push(...n.\u0275providers);return function _0e(e){return{\u0275providers:e}}(t)}const Wfe=new Ie("LEGACY_INTERCEPTOR_FN");let Grt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({providers:[Hrt(F_(ti.LegacyInterceptors,[{provide:Wfe,useFactory:Irt},{provide:vb,useExisting:Wfe,multi:!0}]))]}),e})();const Wrt=["map"];function qrt(e,t){if(1&e&&($(0,"i"),Y(1),B()),2&e){const n=_e();q(1),pi("in "+n.selectedYear)}}function Yrt(e,t){1&e&&($(0,"span"),Y(1),B()),2&e&&(q(1),pi(" based on the most recent available data"))}function Krt(e,t){if(1&e&&($(0,"option",16),Y(1),B()),2&e){const n=t.$implicit;X("ngValue",n.id),q(1),pi(n.name)}}function Xrt(e,t){1&e&&($(0,"div",21),Re(1,"img",22),$(2,"p",23),Y(3,"You explored unresearched areas, no data available."),B()())}const Qrt=function(e){return{"font-style":e}};let Jrt=(()=>{const t=class{constructor(i,r,o){this.http=i,this.apparelService=r,this.renderer=o,this.title="The top 100 apparel companies'",this.apparelTop100=[],this.suppliers=[],this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=r.getCompanies()}ngOnInit(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}ngAfterViewInit(){}updateChart(){let i="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[company_group]=Apparel%20100%20Companies&filter[year]="+this.selectedYear+"&limit=0";0!=this.company.id&&(i="https://wikirate.org/Commons+Supplied_By+RelationshipAnswer/answer_list.json?filter[subject_company_id]="+this.company.id+"&filter[year]="+this.selectedYear+"&limit=0"),this.suppliers=[],null!=this.suppliers_map&&this.renderer.removeChild(this.mapElement.nativeElement,this.suppliers_map),this.http.get(i).subscribe(r=>{this.suppliers=r,this.suppliers.length>0&&(this.suppliers_map=this.renderer.createElement("div"),this.suppliers_map.id="supplier-map",this.renderer.appendChild(this.mapElement.nativeElement,this.suppliers_map),R_("div#supplier-map",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Apparel Top 100 Suppliers per Country",width:800,height:520,signals:[{name:"type",value:"equalEarth"},{name:"scale",value:200},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:2},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Number of Apparel Top 100 Suppliers per Country",update:"hover ? hover.country + ' (' + hover.companies + ')' : 'Number of Apparel Top 100 Suppliers per Country'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"suppliers_country",url:"../../assets/content/Core+Country+Answer.json",format:{type:"json",parse:"auto"}},{name:"suppliers",values:this.suppliers,transform:[{type:"lookup",from:"suppliers_country",key:"company",fields:["object_company"],values:["value"],as:["country"]}]},{name:"wikirate_countries",values:[{code:"AD",name:"Andorra",card_id:2917786},{code:"AE",name:"United Arab Emirates",card_id:169529},{code:"AF",name:"Afghanistan",card_id:2917789},{code:"AG",name:"Antigua and Barbuda",card_id:2917790},{code:"AI",name:"Anguilla",card_id:2917791},{code:"AL",name:"Albania",card_id:2917792},{code:"AM",name:"Armenia",card_id:2917793},{code:"AO",name:"Angola",card_id:2917794},{code:"AQ",name:"Antarctica",card_id:2917795},{code:"AR",name:"Argentina",card_id:14400},{code:"AS",name:"American Samoa",card_id:2917796},{code:"AT",name:"Austria",card_id:17233},{code:"AU",name:"Australia",card_id:14405},{code:"AW",name:"Aruba",card_id:2917797},{code:"AX",name:"\xc5land Islands",card_id:2917798},{code:"AZ",name:"Azerbaijan",card_id:2917799},{code:"BA",name:"Bosnia and Herzegovina",card_id:2917800},{code:"BB",name:"Barbados",card_id:2917801},{code:"BD",name:"Bangladesh",card_id:14386},{code:"BE",name:"Belgium",card_id:19867},{code:"BF",name:"Burkina Faso",card_id:14408},{code:"BG",name:"Bulgaria",card_id:13973},{code:"BH",name:"Bahrain",card_id:2917802},{code:"BI",name:"Burundi",card_id:2917803},{code:"BJ",name:"Benin",card_id:2917804},{code:"BL",name:"Saint Barth\xe9lemy",card_id:2917805},{code:"BM",name:"Bermuda",card_id:2917806},{code:"BN",name:"Brunei Darussalam",card_id:2917807},{code:"BO",name:"Bolivia",card_id:2917808},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba",card_id:2917809},{code:"BR",name:"Brazil",card_id:12379},{code:"BS",name:"Bahamas",card_id:2917810},{code:"BT",name:"Bhutan",card_id:2917811},{code:"BV",name:"Bouvet Island",card_id:2917812},{code:"BW",name:"Botswana",card_id:2917813},{code:"BY",name:"Belarus",card_id:2917814},{code:"BZ",name:"Belize",card_id:2917815},{code:"CA",name:"Canada",card_id:14965},{code:"CC",name:"Cocos (Keeling) Islands",card_id:2917828},{code:"CD",name:"Democratic Republic of the Congo",card_id:2917829},{code:"CF",name:"Central African Republic",card_id:2917830},{code:"CG",name:"Congo",card_id:38190},{code:"CH",name:"Switzerland",card_id:15220},{code:"CI",name:"C\xf4te d'Ivoire",card_id:2917831},{code:"CK",name:"Cook Islands",card_id:2917832},{code:"CL",name:"Chile",card_id:14404},{code:"CM",name:"Cameroon",card_id:2917833},{code:"CN",name:"China",card_id:12378},{code:"CO",name:"Colombia",card_id:12320},{code:"CR",name:"Costa Rica",card_id:2917834},{code:"CU",name:"Cuba",card_id:19542},{code:"CV",name:"Cape Verde",card_id:2917835},{code:"CW",name:"Cura\xe7ao",card_id:2917836},{code:"CX",name:"Christmas Island",card_id:2917837},{code:"CY",name:"Cyprus",card_id:2917838},{code:"CZ",name:"Czech Republic",card_id:45425},{code:"DE",name:"Germany",card_id:15272},{code:"DJ",name:"Djibouti",card_id:2917839},{code:"DK",name:"Denmark",card_id:21425},{code:"DM",name:"Dominica",card_id:2917840},{code:"DO",name:"Dominican Republic",card_id:18543},{code:"DZ",name:"Algeria",card_id:2917841},{code:"EC",name:"Ecuador",card_id:2917842},{code:"EE",name:"Estonia",card_id:2917843},{code:"EG",name:"Egypt",card_id:2917844},{code:"EH",name:"Western Sahara",card_id:2917845},{code:"ER",name:"Eritrea",card_id:2917846},{code:"ES",name:"Spain",card_id:12333},{code:"ET",name:"Ethiopia",card_id:14424},{code:"FI",name:"Finland",card_id:2917847},{code:"FJ",name:"Fiji",card_id:2917848},{code:"FK",name:"Falkland Islands (Malvinas)",card_id:2917849},{code:"FM",name:"Micronesia, Federated States of",card_id:2917850},{code:"FO",name:"Faroe Islands",card_id:2917851},{code:"FR",name:"France",card_id:19365},{code:"GA",name:"Gabon",card_id:2917852},{code:"GB",name:"United Kingdom",card_id:14908},{code:"GD",name:"Grenada",card_id:2917853},{code:"GE",name:"Georgia",card_id:2917854},{code:"GF",name:"French Guiana",card_id:2917855},{code:"GG",name:"Guernsey",card_id:2917856},{code:"GH",name:"Ghana",card_id:18541},{code:"GI",name:"Gibraltar",card_id:2917857},{code:"GL",name:"Greenland",card_id:2917858},{code:"GM",name:"Gambia",card_id:2917859},{code:"GN",name:"Guinea",card_id:2917860},{code:"GP",name:"Guadeloupe",card_id:2917861},{code:"GQ",name:"Equatorial Guinea",card_id:2917862},{code:"GR",name:"Greece",card_id:34142},{code:"GS",name:"South Georgia and the South Sandwich Islands",card_id:2917863},{code:"GT",name:"Guatemala",card_id:2917864},{code:"GU",name:"Guam",card_id:2917865},{code:"GW",name:"Guinea-Bissau",card_id:2917866},{code:"GY",name:"Guyana",card_id:2917867},{code:"HK",name:"Hong Kong",card_id:2917868},{code:"HM",name:"Heard Island and McDonald Islands",card_id:2917869},{code:"HN",name:"Honduras",card_id:18094},{code:"HR",name:"Croatia",card_id:2917870},{code:"HT",name:"Haiti",card_id:2917871},{code:"HU",name:"Hungary",card_id:45424},{code:"ID",name:"Indonesia",card_id:14371},{code:"IE",name:"Ireland",card_id:14394},{code:"IL",name:"Israel",card_id:14701},{code:"IM",name:"Isle of Man",card_id:2917872},{code:"IN",name:"India",card_id:14389},{code:"IO",name:"British Indian Ocean Territory",card_id:2917873},{code:"IQ",name:"Iraq",card_id:3913},{code:"IR",name:"Iran",card_id:2917874},{code:"IS",name:"Iceland",card_id:2917875},{code:"IT",name:"Italy",card_id:16175},{code:"JE",name:"Jersey",card_id:2917876},{code:"JM",name:"Jamaica",card_id:2917877},{code:"JO",name:"Jordan",card_id:1812107},{code:"JP",name:"Japan",card_id:14387},{code:"KE",name:"Kenya",card_id:21392},{code:"KG",name:"Kyrgyzstan",card_id:2917878},{code:"KH",name:"Cambodia",card_id:13908},{code:"KI",name:"Kiribati",card_id:2917879},{code:"KM",name:"Comoros",card_id:2917880},{code:"KN",name:"Saint Kitts and Nevis",card_id:2917881},{code:"KP",name:"Korea, Democratic People's Republic of",card_id:2917882},{code:"KR",name:"Korea, Republic of",card_id:2917883},{code:"KW",name:"Kuwait",card_id:2917884},{code:"KY",name:"Cayman Islands",card_id:2917885},{code:"KZ",name:"Kazakhstan",card_id:2917886},{code:"LA",name:"Laos",card_id:2917887},{code:"LB",name:"Lebanon",card_id:2917888},{code:"LC",name:"Saint Lucia",card_id:2917889},{code:"LI",name:"Liechtenstein",card_id:2917890},{code:"LK",name:"Sri Lanka",card_id:2917891},{code:"LR",name:"Liberia",card_id:2917892},{code:"LS",name:"Lesotho",card_id:2917893},{code:"LT",name:"Lithuania",card_id:2917894},{code:"LU",name:"Luxembourg",card_id:20766},{code:"LV",name:"Latvia",card_id:2917895},{code:"LY",name:"Libya",card_id:2917896},{code:"MA",name:"Morocco",card_id:14426},{code:"MC",name:"Monaco",card_id:2917897},{code:"MD",name:"Moldova",card_id:2917898},{code:"ME",name:"Montenegro",card_id:2917899},{code:"MF",name:"Saint Martin (French part)",card_id:2917900},{code:"MG",name:"Madagascar",card_id:40709},{code:"MH",name:"Marshall Islands",card_id:2917901},{code:"MK",name:"North Macedonia",card_id:2917902},{code:"ML",name:"Mali",card_id:20033},{code:"MM",name:"Myanmar",card_id:2917903},{code:"MN",name:"Mongolia",card_id:2917904},{code:"MO",name:"Macao",card_id:2917905},{code:"MP",name:"Northern Mariana Islands",card_id:2917906},{code:"MQ",name:"Martinique",card_id:2917907},{code:"MR",name:"Mauritania",card_id:2917908},{code:"MS",name:"Montserrat",card_id:2917909},{code:"MT",name:"Malta",card_id:2917910},{code:"MU",name:"Mauritius",card_id:2917911},{code:"MV",name:"Maldives",card_id:2917912},{code:"MW",name:"Malawi",card_id:14410},{code:"MX",name:"Mexico",card_id:14403},{code:"MY",name:"Malaysia",card_id:16948},{code:"MZ",name:"Mozambique",card_id:2917913},{code:"NA",name:"Namibia",card_id:2917914},{code:"NC",name:"New Caledonia",card_id:2917915},{code:"NE",name:"Niger",card_id:2917916},{code:"NF",name:"Norfolk Island",card_id:2917917},{code:"NG",name:"Nigeria",card_id:14384},{code:"NI",name:"Nicaragua",card_id:2917918},{code:"NL",name:"Netherlands",card_id:2917919},{code:"NO",name:"Norway",card_id:2917920},{code:"NP",name:"Nepal",card_id:45091},{code:"NR",name:"Nauru",card_id:2917921},{code:"NU",name:"Niue",card_id:2917922},{code:"NZ",name:"New Zealand",card_id:2917923},{code:"OM",name:"Oman",card_id:2917924},{code:"PA",name:"Panama",card_id:2917925},{code:"PE",name:"Peru",card_id:16184},{code:"PF",name:"French Polynesia",card_id:2917926},{code:"PG",name:"Papua New Guinea",card_id:16949},{code:"PH",name:"Philippines",card_id:37238},{code:"PK",name:"Pakistan",card_id:36162},{code:"PL",name:"Poland",card_id:37189},{code:"PM",name:"Saint Pierre and Miquelon",card_id:2917927},{code:"PN",name:"Pitcairn",card_id:2917928},{code:"PR",name:"Puerto Rico",card_id:2917929},{code:"PS",name:"Palestinian Territory",card_id:2917930},{code:"PT",name:"Portugal",card_id:2917931},{code:"PW",name:"Palau",card_id:2917932},{code:"PY",name:"Paraguay",card_id:2917933},{code:"QA",name:"Qatar",card_id:168817},{code:"RE",name:"R\xe9union",card_id:2917934},{code:"RO",name:"Romania",card_id:13974},{code:"RS",name:"Serbia",card_id:2917935},{code:"RU",name:"Russia",card_id:35176},{code:"RW",name:"Rwanda",card_id:2917936},{code:"SA",name:"Saudi Arabia",card_id:43202},{code:"SB",name:"Solomon Islands",card_id:2917937},{code:"SC",name:"Seychelles",card_id:2917938},{code:"SD",name:"Sudan",card_id:14149},{code:"SE",name:"Sweden",card_id:43201},{code:"SG",name:"Singapore",card_id:2917939},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha",card_id:2917940},{code:"SI",name:"Slovenia",card_id:20157},{code:"SJ",name:"Svalbard and Jan Mayen",card_id:2917941},{code:"SK",name:"Slovakia",card_id:2917942},{code:"SL",name:"Sierra Leone",card_id:2917943},{code:"SM",name:"San Marino",card_id:2917944},{code:"SN",name:"Senegal",card_id:15492},{code:"SO",name:"Somalia",card_id:2917945},{code:"SR",name:"Suriname",card_id:2917946},{code:"SS",name:"South Sudan",card_id:2917947},{code:"ST",name:"Sao Tome and Principe",card_id:2917948},{code:"SV",name:"El Salvador",card_id:33639},{code:"SX",name:"Sint Maarten (Dutch part)",card_id:2917949},{code:"SY",name:"Syrian Arab Republic",card_id:2917950},{code:"SZ",name:"Swaziland",card_id:2917951},{code:"TC",name:"Turks and Caicos Islands",card_id:2917952},{code:"TD",name:"Chad",card_id:2917953},{code:"TF",name:"French Southern Territories",card_id:2917954},{code:"TG",name:"Togo",card_id:2917955},{code:"TH",name:"Thailand",card_id:14214},{code:"TJ",name:"Tajikistan",card_id:2917956},{code:"TK",name:"Tokelau",card_id:2917957},{code:"TL",name:"Timor-Leste",card_id:2917958},{code:"TM",name:"Turkmenistan",card_id:2917959},{code:"TN",name:"Tunisia",card_id:2917960},{code:"TO",name:"Tonga",card_id:2917961},{code:"TR",name:"Turkey",card_id:13972},{code:"TT",name:"Trinidad and Tobago",card_id:2917962},{code:"TV",name:"Tuvalu",card_id:2917963},{code:"TW",name:"Taiwan, Province of China",card_id:2917964},{code:"TZ",name:"Tanzania",card_id:16808},{code:"UA",name:"Ukraine",card_id:2917965},{code:"UG",name:"Uganda",card_id:40396},{code:"UM",name:"United States Minor Outlying Islands",card_id:2917966},{code:"US",name:"United States",card_id:14551},{code:"UY",name:"Uruguay",card_id:2918018},{code:"UZ",name:"Uzbekistan",card_id:14412},{code:"VA",name:"Holy See (Vatican City State)",card_id:2918019},{code:"VC",name:"Saint Vincent and the Grenadines",card_id:2918020},{code:"VE",name:"Venezuela",card_id:2918021},{code:"VG",name:"British Virgin Islands",card_id:2918022},{code:"VI",name:"U.S. Virgin Islands",card_id:2918023},{code:"VN",name:"Vietnam",card_id:2918024},{code:"VU",name:"Vanuatu",card_id:2918025},{code:"WF",name:"Wallis and Futuna",card_id:2918026},{code:"WS",name:"Samoa",card_id:2918027},{code:"XK",name:"Kosovo",card_id:2918028},{code:"YE",name:"Yemen",card_id:2918029},{code:"YT",name:"Mayotte",card_id:2918030},{code:"ZA",name:"South Africa",card_id:14938},{code:"ZM",name:"Zambia",card_id:2918031},{code:"ZW",name:"Zimbabwe",card_id:2918032}]},{name:"country_codes",values:[{name:"Afghanistan","alpha-2":"AF","country-code":"004"},{name:"\xc5land Islands","alpha-2":"AX","country-code":"248"},{name:"Albania","alpha-2":"AL","country-code":"008"},{name:"Algeria","alpha-2":"DZ","country-code":"012"},{name:"American Samoa","alpha-2":"AS","country-code":"016"},{name:"Andorra","alpha-2":"AD","country-code":"020"},{name:"Angola","alpha-2":"AO","country-code":"024"},{name:"Anguilla","alpha-2":"AI","country-code":"660"},{name:"Antarctica","alpha-2":"AQ","country-code":"010"},{name:"Antigua and Barbuda","alpha-2":"AG","country-code":"028"},{name:"Argentina","alpha-2":"AR","country-code":"032"},{name:"Armenia","alpha-2":"AM","country-code":"051"},{name:"Aruba","alpha-2":"AW","country-code":"533"},{name:"Australia","alpha-2":"AU","country-code":"036"},{name:"Austria","alpha-2":"AT","country-code":"040"},{name:"Azerbaijan","alpha-2":"AZ","country-code":"031"},{name:"Bahamas","alpha-2":"BS","country-code":"044"},{name:"Bahrain","alpha-2":"BH","country-code":"048"},{name:"Bangladesh","alpha-2":"BD","country-code":"050"},{name:"Barbados","alpha-2":"BB","country-code":"052"},{name:"Belarus","alpha-2":"BY","country-code":"112"},{name:"Belgium","alpha-2":"BE","country-code":"056"},{name:"Belize","alpha-2":"BZ","country-code":"084"},{name:"Benin","alpha-2":"BJ","country-code":"204"},{name:"Bermuda","alpha-2":"BM","country-code":"060"},{name:"Bhutan","alpha-2":"BT","country-code":"064"},{name:"Bolivia (Plurinational State of)","alpha-2":"BO","country-code":"068"},{name:"Bonaire, Sint Eustatius and Saba","alpha-2":"BQ","country-code":"535"},{name:"Bosnia and Herzegovina","alpha-2":"BA","country-code":"070"},{name:"Botswana","alpha-2":"BW","country-code":"072"},{name:"Bouvet Island","alpha-2":"BV","country-code":"074"},{name:"Brazil","alpha-2":"BR","country-code":"076"},{name:"British Indian Ocean Territory","alpha-2":"IO","country-code":"086"},{name:"Brunei Darussalam","alpha-2":"BN","country-code":"096"},{name:"Bulgaria","alpha-2":"BG","country-code":"100"},{name:"Burkina Faso","alpha-2":"BF","country-code":"854"},{name:"Burundi","alpha-2":"BI","country-code":"108"},{name:"Cabo Verde","alpha-2":"CV","country-code":"132"},{name:"Cambodia","alpha-2":"KH","country-code":"116"},{name:"Cameroon","alpha-2":"CM","country-code":"120"},{name:"Canada","alpha-2":"CA","country-code":"124"},{name:"Cayman Islands","alpha-2":"KY","country-code":"136"},{name:"Central African Republic","alpha-2":"CF","country-code":"140"},{name:"Chad","alpha-2":"TD","country-code":"148"},{name:"Chile","alpha-2":"CL","country-code":"152"},{name:"China","alpha-2":"CN","country-code":"156"},{name:"Christmas Island","alpha-2":"CX","country-code":"162"},{name:"Cocos (Keeling) Islands","alpha-2":"CC","country-code":"166"},{name:"Colombia","alpha-2":"CO","country-code":"170"},{name:"Comoros","alpha-2":"KM","country-code":"174"},{name:"Congo","alpha-2":"CG","country-code":"178"},{name:"Congo, Democratic Republic of the","alpha-2":"CD","country-code":"180"},{name:"Cook Islands","alpha-2":"CK","country-code":"184"},{name:"Costa Rica","alpha-2":"CR","country-code":"188"},{name:"C\xf4te d'Ivoire","alpha-2":"CI","country-code":"384"},{name:"Croatia","alpha-2":"HR","country-code":"191"},{name:"Cuba","alpha-2":"CU","country-code":"192"},{name:"Cura\xe7ao","alpha-2":"CW","country-code":"531"},{name:"Cyprus","alpha-2":"CY","country-code":"196"},{name:"Czechia","alpha-2":"CZ","country-code":"203"},{name:"Denmark","alpha-2":"DK","country-code":"208"},{name:"Djibouti","alpha-2":"DJ","country-code":"262"},{name:"Dominica","alpha-2":"DM","country-code":"212"},{name:"Dominican Republic","alpha-2":"DO","country-code":"214"},{name:"Ecuador","alpha-2":"EC","country-code":"218"},{name:"Egypt","alpha-2":"EG","country-code":"818"},{name:"El Salvador","alpha-2":"SV","country-code":"222"},{name:"Equatorial Guinea","alpha-2":"GQ","country-code":"226"},{name:"Eritrea","alpha-2":"ER","country-code":"232"},{name:"Estonia","alpha-2":"EE","country-code":"233"},{name:"Eswatini","alpha-2":"SZ","country-code":"748"},{name:"Ethiopia","alpha-2":"ET","country-code":"231"},{name:"Falkland Islands (Malvinas)","alpha-2":"FK","country-code":"238"},{name:"Faroe Islands","alpha-2":"FO","country-code":"234"},{name:"Fiji","alpha-2":"FJ","country-code":"242"},{name:"Finland","alpha-2":"FI","country-code":"246"},{name:"France","alpha-2":"FR","country-code":"250"},{name:"French Guiana","alpha-2":"GF","country-code":"254"},{name:"French Polynesia","alpha-2":"PF","country-code":"258"},{name:"French Southern Territories","alpha-2":"TF","country-code":"260"},{name:"Gabon","alpha-2":"GA","country-code":"266"},{name:"Gambia","alpha-2":"GM","country-code":"270"},{name:"Georgia","alpha-2":"GE","country-code":"268"},{name:"Germany","alpha-2":"DE","country-code":"276"},{name:"Ghana","alpha-2":"GH","country-code":"288"},{name:"Gibraltar","alpha-2":"GI","country-code":"292"},{name:"Greece","alpha-2":"GR","country-code":"300"},{name:"Greenland","alpha-2":"GL","country-code":"304"},{name:"Grenada","alpha-2":"GD","country-code":"308"},{name:"Guadeloupe","alpha-2":"GP","country-code":"312"},{name:"Guam","alpha-2":"GU","country-code":"316"},{name:"Guatemala","alpha-2":"GT","country-code":"320"},{name:"Guernsey","alpha-2":"GG","country-code":"831"},{name:"Guinea","alpha-2":"GN","country-code":"324"},{name:"Guinea-Bissau","alpha-2":"GW","country-code":"624"},{name:"Guyana","alpha-2":"GY","country-code":"328"},{name:"Haiti","alpha-2":"HT","country-code":"332"},{name:"Heard Island and McDonald Islands","alpha-2":"HM","country-code":"334"},{name:"Holy See","alpha-2":"VA","country-code":"336"},{name:"Honduras","alpha-2":"HN","country-code":"340"},{name:"Hong Kong","alpha-2":"HK","country-code":"344"},{name:"Hungary","alpha-2":"HU","country-code":"348"},{name:"Iceland","alpha-2":"IS","country-code":"352"},{name:"India","alpha-2":"IN","country-code":"356"},{name:"Indonesia","alpha-2":"ID","country-code":"360"},{name:"Iran (Islamic Republic of)","alpha-2":"IR","country-code":"364"},{name:"Iraq","alpha-2":"IQ","country-code":"368"},{name:"Ireland","alpha-2":"IE","country-code":"372"},{name:"Isle of Man","alpha-2":"IM","country-code":"833"},{name:"Israel","alpha-2":"IL","country-code":"376"},{name:"Italy","alpha-2":"IT","country-code":"380"},{name:"Jamaica","alpha-2":"JM","country-code":"388"},{name:"Japan","alpha-2":"JP","country-code":"392"},{name:"Jersey","alpha-2":"JE","country-code":"832"},{name:"Jordan","alpha-2":"JO","country-code":"400"},{name:"Kazakhstan","alpha-2":"KZ","country-code":"398"},{name:"Kenya","alpha-2":"KE","country-code":"404"},{name:"Kiribati","alpha-2":"KI","country-code":"296"},{name:"Korea (Democratic People's Republic of)","alpha-2":"KP","country-code":"408"},{name:"Korea, Republic of","alpha-2":"KR","country-code":"410"},{name:"Kuwait","alpha-2":"KW","country-code":"414"},{name:"Kyrgyzstan","alpha-2":"KG","country-code":"417"},{name:"Lao People's Democratic Republic","alpha-2":"LA","country-code":"418"},{name:"Latvia","alpha-2":"LV","country-code":"428"},{name:"Lebanon","alpha-2":"LB","country-code":"422"},{name:"Lesotho","alpha-2":"LS","country-code":"426"},{name:"Liberia","alpha-2":"LR","country-code":"430"},{name:"Libya","alpha-2":"LY","country-code":"434"},{name:"Liechtenstein","alpha-2":"LI","country-code":"438"},{name:"Lithuania","alpha-2":"LT","country-code":"440"},{name:"Luxembourg","alpha-2":"LU","country-code":"442"},{name:"Macao","alpha-2":"MO","country-code":"446"},{name:"Madagascar","alpha-2":"MG","country-code":"450"},{name:"Malawi","alpha-2":"MW","country-code":"454"},{name:"Malaysia","alpha-2":"MY","country-code":"458"},{name:"Maldives","alpha-2":"MV","country-code":"462"},{name:"Mali","alpha-2":"ML","country-code":"466"},{name:"Malta","alpha-2":"MT","country-code":"470"},{name:"Marshall Islands","alpha-2":"MH","country-code":"584"},{name:"Martinique","alpha-2":"MQ","country-code":"474"},{name:"Mauritania","alpha-2":"MR","country-code":"478"},{name:"Mauritius","alpha-2":"MU","country-code":"480"},{name:"Mayotte","alpha-2":"YT","country-code":"175"},{name:"Mexico","alpha-2":"MX","country-code":"484"},{name:"Micronesia (Federated States of)","alpha-2":"FM","country-code":"583"},{name:"Moldova, Republic of","alpha-2":"MD","country-code":"498"},{name:"Monaco","alpha-2":"MC","country-code":"492"},{name:"Mongolia","alpha-2":"MN","country-code":"496"},{name:"Montenegro","alpha-2":"ME","country-code":"499"},{name:"Montserrat","alpha-2":"MS","country-code":"500"},{name:"Morocco","alpha-2":"MA","country-code":"504"},{name:"Mozambique","alpha-2":"MZ","country-code":"508"},{name:"Myanmar","alpha-2":"MM","country-code":"104"},{name:"Namibia","alpha-2":"NA","country-code":"516"},{name:"Nauru","alpha-2":"NR","country-code":"520"},{name:"Nepal","alpha-2":"NP","country-code":"524"},{name:"Netherlands","alpha-2":"NL","country-code":"528"},{name:"New Caledonia","alpha-2":"NC","country-code":"540"},{name:"New Zealand","alpha-2":"NZ","country-code":"554"},{name:"Nicaragua","alpha-2":"NI","country-code":"558"},{name:"Niger","alpha-2":"NE","country-code":"562"},{name:"Nigeria","alpha-2":"NG","country-code":"566"},{name:"Niue","alpha-2":"NU","country-code":"570"},{name:"Norfolk Island","alpha-2":"NF","country-code":"574"},{name:"North Macedonia","alpha-2":"MK","country-code":"807"},{name:"Northern Mariana Islands","alpha-2":"MP","country-code":"580"},{name:"Norway","alpha-2":"NO","country-code":"578"},{name:"Oman","alpha-2":"OM","country-code":"512"},{name:"Pakistan","alpha-2":"PK","country-code":"586"},{name:"Palau","alpha-2":"PW","country-code":"585"},{name:"Palestine, State of","alpha-2":"PS","country-code":"275"},{name:"Panama","alpha-2":"PA","country-code":"591"},{name:"Papua New Guinea","alpha-2":"PG","country-code":"598"},{name:"Paraguay","alpha-2":"PY","country-code":"600"},{name:"Peru","alpha-2":"PE","country-code":"604"},{name:"Philippines","alpha-2":"PH","country-code":"608"},{name:"Pitcairn","alpha-2":"PN","country-code":"612"},{name:"Poland","alpha-2":"PL","country-code":"616"},{name:"Portugal","alpha-2":"PT","country-code":"620"},{name:"Puerto Rico","alpha-2":"PR","country-code":"630"},{name:"Qatar","alpha-2":"QA","country-code":"634"},{name:"R\xe9union","alpha-2":"RE","country-code":"638"},{name:"Romania","alpha-2":"RO","country-code":"642"},{name:"Russian Federation","alpha-2":"RU","country-code":"643"},{name:"Rwanda","alpha-2":"RW","country-code":"646"},{name:"Saint Barth\xe9lemy","alpha-2":"BL","country-code":"652"},{name:"Saint Helena, Ascension and Tristan da Cunha","alpha-2":"SH","country-code":"654"},{name:"Saint Kitts and Nevis","alpha-2":"KN","country-code":"659"},{name:"Saint Lucia","alpha-2":"LC","country-code":"662"},{name:"Saint Martin (French part)","alpha-2":"MF","country-code":"663"},{name:"Saint Pierre and Miquelon","alpha-2":"PM","country-code":"666"},{name:"Saint Vincent and the Grenadines","alpha-2":"VC","country-code":"670"},{name:"Samoa","alpha-2":"WS","country-code":"882"},{name:"San Marino","alpha-2":"SM","country-code":"674"},{name:"Sao Tome and Principe","alpha-2":"ST","country-code":"678"},{name:"Saudi Arabia","alpha-2":"SA","country-code":"682"},{name:"Senegal","alpha-2":"SN","country-code":"686"},{name:"Serbia","alpha-2":"RS","country-code":"688"},{name:"Seychelles","alpha-2":"SC","country-code":"690"},{name:"Sierra Leone","alpha-2":"SL","country-code":"694"},{name:"Singapore","alpha-2":"SG","country-code":"702"},{name:"Sint Maarten (Dutch part)","alpha-2":"SX","country-code":"534"},{name:"Slovakia","alpha-2":"SK","country-code":"703"},{name:"Slovenia","alpha-2":"SI","country-code":"705"},{name:"Solomon Islands","alpha-2":"SB","country-code":"090"},{name:"Somalia","alpha-2":"SO","country-code":"706"},{name:"South Africa","alpha-2":"ZA","country-code":"710"},{name:"South Georgia and the South Sandwich Islands","alpha-2":"GS","country-code":"239"},{name:"South Sudan","alpha-2":"SS","country-code":"728"},{name:"Spain","alpha-2":"ES","country-code":"724"},{name:"Sri Lanka","alpha-2":"LK","country-code":"144"},{name:"Sudan","alpha-2":"SD","country-code":"729"},{name:"Suriname","alpha-2":"SR","country-code":"740"},{name:"Svalbard and Jan Mayen","alpha-2":"SJ","country-code":"744"},{name:"Sweden","alpha-2":"SE","country-code":"752"},{name:"Switzerland","alpha-2":"CH","country-code":"756"},{name:"Syrian Arab Republic","alpha-2":"SY","country-code":"760"},{name:"Taiwan, Province of China","alpha-2":"TW","country-code":"158"},{name:"Tajikistan","alpha-2":"TJ","country-code":"762"},{name:"Tanzania, United Republic of","alpha-2":"TZ","country-code":"834"},{name:"Thailand","alpha-2":"TH","country-code":"764"},{name:"Timor-Leste","alpha-2":"TL","country-code":"626"},{name:"Togo","alpha-2":"TG","country-code":"768"},{name:"Tokelau","alpha-2":"TK","country-code":"772"},{name:"Tonga","alpha-2":"TO","country-code":"776"},{name:"Trinidad and Tobago","alpha-2":"TT","country-code":"780"},{name:"Tunisia","alpha-2":"TN","country-code":"788"},{name:"Turkey","alpha-2":"TR","country-code":"792"},{name:"Turkmenistan","alpha-2":"TM","country-code":"795"},{name:"Turks and Caicos Islands","alpha-2":"TC","country-code":"796"},{name:"Tuvalu","alpha-2":"TV","country-code":"798"},{name:"Uganda","alpha-2":"UG","country-code":"800"},{name:"Ukraine","alpha-2":"UA","country-code":"804"},{name:"United Arab Emirates","alpha-2":"AE","country-code":"784"},{name:"United Kingdom of Great Britain and Northern Ireland","alpha-2":"GB","country-code":"826"},{name:"United States of America","alpha-2":"US","country-code":"840"},{name:"United States Minor Outlying Islands","alpha-2":"UM","country-code":"581"},{name:"Uruguay","alpha-2":"UY","country-code":"858"},{name:"Uzbekistan","alpha-2":"UZ","country-code":"860"},{name:"Vanuatu","alpha-2":"VU","country-code":"548"},{name:"Venezuela (Bolivarian Republic of)","alpha-2":"VE","country-code":"862"},{name:"Viet Nam","alpha-2":"VN","country-code":"704"},{name:"Virgin Islands (British)","alpha-2":"VG","country-code":"092"},{name:"Virgin Islands (U.S.)","alpha-2":"VI","country-code":"850"},{name:"Wallis and Futuna","alpha-2":"WF","country-code":"876"},{name:"Western Sahara","alpha-2":"EH","country-code":"732"},{name:"Yemen","alpha-2":"YE","country-code":"887"},{name:"Zambia","alpha-2":"ZM","country-code":"894"},{name:"Zimbabwe","alpha-2":"ZW","country-code":"716"}],format:{type:"json",parse:{"country-code":"number"}}},{name:"suppliers_per_country",source:"suppliers",transform:[{type:"aggregate",groupby:["country"],fields:["name"],ops:["count"],as:["companies"]},{type:"lookup",from:"wikirate_countries",key:"name",fields:["country"],values:["code"],as:["country_code"]},{type:"lookup",from:"country_codes",key:"alpha-2",fields:["country_code"],values:["country-code"],as:["country_number"]},{type:"lookup",from:"world",key:"id",fields:["country_number"],as:["geo"]},{type:"filter",expr:"datum.geo"},{type:"formula",as:"centroid",expr:"geoCentroid('projection', datum.geo)"}]},{name:"graticule",transform:[{type:"graticule"}]}],projections:[{name:"projection",type:{signal:"type"},scale:{signal:"scale"},rotate:[{signal:"rotate0"},{signal:"rotate1"},{signal:"rotate2"}],center:[{signal:"center0"},{signal:"center1"}],translate:[{signal:"translate0"},{signal:"translate1"}]}],scales:[{name:"size",domain:{data:"suppliers_per_country",field:"companies"},zero:!1,range:[50,2e3]},{name:"color",type:"linear",nice:!0,domain:{data:"suppliers_per_country",field:"companies"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},stroke:{signal:"'#ddd'"},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{strokeWidth:{signal:"+borderWidth"},fill:{value:"#171832"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"suppliers_per_country"},encode:{enter:{x:{field:"centroid[0]"},y:{field:"centroid[1]"},size:{scale:"size",field:"companies"},strokeWidth:{value:.7},tooltip:{signal:"{'title': datum.country, 'Number of Companies': datum.companies}"}},update:{fill:{scale:"color",field:"companies"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.centroid[0]"},{force:"y",y:"datum.centroid[1]"}]}]}],legends:[{fill:"color",orient:"bottom-left",title:"No. of Suppliers"}]},{renderer:"svg",actions:{source:!1,editor:!1}}))},r=>{})}onSelectYear(){this.updateChart()}onSelectCompany(){this.company=this.apparelService.getCompany(this.selectedCompany),this.title=0!=this.company.id?this.company.name:"The top 100 apparel companies'",this.updateChart()}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(yb),L(Dg),L(pr))},t.\u0275cmp=kt({type:t,selectors:[["app-suppliers-map"]],viewQuery:function(r,o){if(1&r&&fa(Wrt,5),2&r){let s;yt(s=vt())&&(o.mapElement=s.first)}},decls:31,vars:14,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[3,"ngStyle"],[4,"ngIf"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","mb-2","no-gutters","mt-2","col-12"],["map",""],[1,"col-md"],["id","no_data","class","mt-4 text-center",4,"ngIf"],["id","no_data",1,"mt-4","text-center"],["src","assets/moon.svg","width","60px",1,"mb-1"],[1,"mt-2","showcase-main-text"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Y(5," Suppliers per country "),B(),$(6,"h3",5)(7,"span",6),Y(8),B(),Y(9," suppliers' locations "),ge(10,qrt,2,1,"i",7),ge(11,Yrt,2,1,"span",7),B()(),$(12,"div",8)(13,"div",9)(14,"div",10)(15,"select",11),Oe("ngModelChange",function(a){return o.selectedCompany=a})("change",function(){return o.onSelectCompany()}),ge(16,Krt,2,2,"option",12),B()(),$(17,"div",13)(18,"select",14),Oe("ngModelChange",function(a){return o.selectedYear=a})("change",function(){return o.updateChart()}),$(19,"option",15),Y(20,"latest"),B(),$(21,"option",16),Y(22,"2020"),B(),$(23,"option",16),Y(24,"2019"),B(),$(25,"option",16),Y(26,"2018"),B()()()()(),$(27,"div",17,18)(29,"div",19),ge(30,Xrt,4,0,"div",20),B()()()()()),2&r&&(q(7),X("ngStyle",cg(12,Qrt,0!=o.selectedCompany?"italic":"normal")),q(1),pi(o.title),q(2),X("ngIf","latest"!==o.selectedYear),q(1),X("ngIf","latest"===o.selectedYear),q(4),X("ngModel",o.selectedCompany),q(1),X("ngForOf",o.apparelTop100),q(2),X("ngModel",o.selectedYear),q(1),X("ngValue","latest"),q(2),X("ngValue",2020),q(2),X("ngValue",2019),q(2),X("ngValue",2018),q(5),X("ngIf",o.suppliers&&0==o.suppliers.length))},dependencies:[Tg,xg,Ic,Cg,xf,po,qi,PH]}),e})(),Zrt=(()=>{const t=class{transform(i,r){return"string"==typeof i?i:Number.isNaN(i)?null:i<1e3?i:(o=Math.floor(Math.log(i)/Math.log(1e3)),(i/Math.pow(1e3,o)).toFixed(r)+["k","M","B","T","P","E"][o-1]);var o}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=ur({name:"bigNumSuff",type:t,pure:!0}),e})(),eot=(()=>{const t=class{constructor(i){this.http=i,this.total_market_cap="unknown",this.total_employees="Unknown",this.number_of_suppliers="Unknown",this.workers_in_supply_chain="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection()}ngAfterViewInit(){}updateSection(){this.http.get("https://wikirate.org/Core+Market_Cap+Answer.json?filter[not_ids]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(a=>{this.total_market_cap=this.getSum(a),R_("div#vis",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Market Cap of Apparel Top 100 Companies",width:900,height:560,autosize:"none",signals:[{name:"type",value:"equalEarth"},{name:"rotate0",value:-15},{name:"rotate1",value:0},{name:"rotate2",value:0},{name:"center0",value:0},{name:"center1",value:0},{name:"translate0",update:"width / 2"},{name:"translate1",update:"height / 2"},{name:"borderWidth",value:1},{name:"hover",value:null,on:[{events:"@circles:mouseover",update:"datum"},{events:"@circles:mouseout",update:"null"}]},{name:"title",value:"Market Cap of Apparel Top 100 Companies",update:"hover ? hover.name + ' (' + hover.market_cap_text + ')' : 'Market Cap of Apparel Top 100 Companies'"},{name:"cell_stroke",value:null,on:[{events:"dblclick",update:"cell_stroke ? null : 'brown'"},{events:"mousedown!",update:"cell_stroke"}]},{name:"tx",update:"width / 2"},{name:"ty",update:"height / 2"}],data:[{name:"world",url:"assets/world-110m.json",format:{type:"topojson",feature:"countries"},transform:[{type:"geopath",projection:"projection"}]},{name:"market_cap",values:a,format:{type:"json",parse:{value:"number"}}},{name:"apparel_top_100_geo",values:[{company:"Puma",lat:49.5755269,lng:10.8714149},{company:"H&M",lat:59.3317973,lng:18.0583112},{company:"Gap inc.",lat:37.79081085,lng:-122.3909804},{company:"Marks and Spencer Group plc",lat:51.51865225,lng:-.175000995},{company:"Asos",lat:51.5333888,lng:-.139905636},{company:"Nike Inc.",lat:45.507191,lng:-122.827393},{company:"Adidas AG",lat:49.58253265,lng:10.91048856},{company:"Louis Vuitton Malletier SA (LVMH)",lat:48.8586162,lng:2.3429393},{company:"Burberry Group plc",lat:51.49437555,lng:-.126392473},{company:"Guess? Inc",lat:34.02410214,lng:-118.2391726},{company:"Zalando SE",lat:52.50655705,lng:13.44148723},{company:"Nordstrom",lat:47.614361,lng:-122.335852},{company:"Fossil Group, Inc.",lat:32.939486,lng:-96.745425},{company:"Inditex",lat:43.32307,lng:-8.49019},{company:"American Eagle Outfitters",lat:40.4282854,lng:-79.9606724},{company:"Hugo Boss AG",lat:48.54694115,lng:9.271591308},{company:"Urban Outfitters",lat:39.9046154,lng:-75.1739344},{company:"Skechers USA Inc",lat:33.88490024,lng:-118.4100629},{company:"Ralph Lauren Corporation",lat:40.7638797,lng:-73.97161599},{company:"Prada",lat:43.5463209,lng:11.5707173},{company:"Under Armour",lat:39.27516635,lng:-76.5903856},{company:"Tapestry Inc",lat:40.75274965,lng:-74.00152052},{company:"Columbia Sportswear",lat:45.52966955,lng:-122.8248874},{company:"Foot Locker Inc.",lat:40.7526738,lng:-73.9950505},{company:"Abercrombie & Fitch",lat:40.0904919,lng:-82.7755106},{company:"Macy's",lat:40.7509149,lng:-73.98933149},{company:"DSW Inc.",lat:39.98864,lng:-82.89824},{company:"Esprit Holdings Limited",lat:22.2924077,lng:114.20294},{company:"Moncler",lat:45.4540887,lng:9.1588378},{company:"Asics Corporation",lat:34.6913,lng:135.183},{company:"Ross Stores",lat:37.7079277,lng:-121.8881302},{company:"Chico's FAS Inc",lat:28.75054,lng:-82.5001},{company:"Gildan Activewear Inc.",lat:45.504205,lng:-73.571125},{company:"Boohoo.com",lat:53.480813,lng:-2.2326412},{company:"Anta Sports Products",lat:24.66745455,lng:118.5540534},{company:"Gerry Weber",lat:52.0603355,lng:8.3615619},{company:"Brunello Cucinelli",lat:43.0830538,lng:12.277156},{company:"Next",lat:52.6071351,lng:-1.2418189},{company:"Salvatore Ferragamo SpA",lat:43.7722809,lng:11.2513491},{company:"Express Inc",lat:40.001342,lng:-83.094886},{company:"Tiffany & Co.",lat:42.7158328,lng:-73.7079487},{company:"Hermes International",lat:48.8688993,lng:2.3217376},{company:"Hudson's Bay Company",lat:43.7823924,lng:-79.7718789},{company:"United Arrows",lat:35.706766,lng:139.7616265},{company:"Canada Goose",lat:43.6954839,lng:-79.46397981},{company:"Bosideng International Holdings Limited",lat:31.2322758,lng:121.4692071},{company:"Metersbonwe",lat:31.2322758,lng:121.4692071},{company:"Dick's Sporting Goods",lat:40.465624,lng:-80.205892},{company:"Capri Holdings Ltd (formerly Michael Kors)",lat:51.51414,lng:-.11828},{company:"Buckle Inc",lat:40.699424,lng:-99.105033},{company:"TOD'S",lat:43.2627,lng:13.7203},{company:"Dillard's, Inc.",lat:34.753373,lng:-92.287569},{company:"Li-Ning",lat:39.812904,lng:116.547259},{company:"Children's Place Inc",lat:40.78885,lng:-74.056035},{company:"Steve Madden",lat:40.75017166,lng:-73.91508484},{company:"lululemon athletica",lat:49.272004,lng:-123.147121},{company:"PVH",lat:40.74969101,lng:-73.98155975},{company:"Ted Baker",lat:51.537667,lng:-.132265},{company:"Fast Retailing",lat:34.0372,lng:131.3577},{company:"JD Sports Fashion plc",lat:53.573908,lng:-2.278928},{company:"Burlington Stores Inc",lat:40.094145,lng:-74.812232},{company:"Sports Direct",lat:53.2063042,lng:-1.2205319},{company:"Superdry plc",lat:51.9202605,lng:-2.0968209},{company:"VF",lat:39.751618,lng:-105.002998},{company:"Christian Dior",lat:48.8697044,lng:2.325038},{company:"Semir",lat:27.9963899,lng:120.695345},{company:"L Brands",lat:39.981797,lng:-83.033627},{company:"Deckers Outdoor Corporation",lat:34.4314978,lng:-119.8635551},{company:"Hanesbrands",lat:36.18900595,lng:-80.2640623},{company:"Carter's Inc",lat:33.848681,lng:-84.366387},{company:"TJX",lat:42.308755,lng:-71.382745},{company:"Oxford Industries Inc",lat:33.7811172,lng:-84.3837092},{company:"Cato Corp",lat:35.128699,lng:-80.87873},{company:"JC Penney",lat:33.0136764,lng:-96.6925096},{company:"G-III Apparel Group, LTD.",lat:40.6256945,lng:-73.9870861},{company:"Lojas Renner S.A.",lat:-30.0324999,lng:-51.2303767},{company:"Kering",lat:48.8464177,lng:2.3153025},{company:"Caleres Inc",lat:38.6526865,lng:-90.3477704},{company:"Genesco Inc.",lat:36.114742,lng:-86.693776},{company:"Ascena Retail Group Inc",lat:41.07202702,lng:-74.17060403},{company:"Wolverine World Wide",lat:43.13425389,lng:-85.54185089},{company:"Mulberry Group Plc",lat:51.50370825,lng:-.191581413},{company:"Luxottica Group SpA",lat:45.4673878,lng:9.1775777},{company:"Arvind Limited",lat:23.0583877,lng:72.6371753},{company:"Aditya Birla Fashion & Retail Ltd",lat:19.0652797,lng:72.8793805},{company:"Vipshop Holdings",lat:23.1025812,lng:113.2245207},{company:"Geox SpA",lat:45.7883555,lng:12.0476363},{company:"Alpargatas - Havaianas",lat:-23.5506507,lng:-46.6333824},{company:"Onward Holdings",lat:35.666255,lng:139.775565},{company:"Lao Feng Xiang Jewelry",lat:31.2322758,lng:121.4692071},{company:"Richemont",lat:46.2587,lng:6.1351},{company:"Cia Hering",lat:-7.33561,lng:-47.46218},{company:"Vera Bradley Inc.",lat:40.9570408,lng:-85.3015323},{company:"Boot Barn Holdings Inc.",lat:33.6596704,lng:-117.7380569},{company:"Swatch Group",lat:47.1354263,lng:7.234641},{company:"Francesca's",lat:29.83278726,lng:-95.51077112},{company:"Chow Tai Fook",lat:22.28365,lng:114.15494},{company:"Van de Velde",lat:51.01324,lng:3.9258203},{company:"YOOX NET-A-PORTER Group SpA",lat:45.4450409,lng:9.1514221},{company:"Grendene",lat:-3.68611,lng:-40.34972}]},{name:"apparel_top_100_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"},transform:[{type:"lookup",from:"market_cap",key:"company",fields:["id"],values:["value"],as:["market_cap"],default:0},{type:"lookup",from:"apparel_top_100_geo",key:"company",fields:["name"],values:["lat","lng"],as:["lat","lng"],default:0},{type:"geopoint",projection:"projection",fields:["lng","lat"]},{type:"formula",as:"market_cap_text",expr:"replace(format(datum.market_cap,'$,.4s'), 'G', 'B')"}]},{name:"graticule",transform:[{type:"graticule",step:[15,15]}]}],projections:[{name:"projection",type:"mercator"}],scales:[{name:"size",domain:{data:"apparel_top_100_companies",field:"market_cap"},zero:!1,range:[30,500]},{name:"color",type:"linear",nice:!0,domain:{data:"apparel_top_100_companies",field:"market_cap"},range:["#fef1eb","#F7733D"]}],marks:[{type:"shape",from:{data:"graticule"},encode:{update:{strokeWidth:{value:1},fill:{value:null}}},transform:[{type:"geoshape",projection:"projection"}]},{type:"shape",from:{data:"world"},encode:{update:{fill:{value:"#1D1E3F"},stroke:{value:"rgba(247,247,248, 0.8)"},strokeWidth:{signal:"+borderWidth"},zindex:{value:0}}},transform:[{type:"geoshape",projection:"projection"}]},{name:"circles",type:"symbol",from:{data:"apparel_top_100_companies"},encode:{enter:{x:{field:"x"},y:{field:"y"},size:{scale:"size",field:"market_cap"},fillOpacity:{value:1},stroke:{value:"white"},strokeWidth:{value:.5},tooltip:{signal:"{'title': datum.name,'Headquarters': datum.headquarters, 'Market Cap': datum.market_cap_text}"}},update:{fill:{scale:"color",field:"market_cap"},stroke:{value:"#171832"}},hover:{fill:{value:"#912E06"},stroke:{value:"#171832"}}},transform:[{type:"force",static:!0,forces:[{force:"collide",radius:{expr:"1 + sqrt(datum.size) / 2"}},{force:"x",x:"datum.x"},{force:"y",y:"datum.y"}]}]},{type:"text",interactive:!1,encode:{enter:{x:{value:895},y:{value:550},fill:{value:"#F7F7F8"},fontSize:{value:12},align:{value:"right"}},update:{text:{signal:"title"}}}}],legends:[{fill:"color",orient:"bottom-left",title:"Market Cap (in USD$)",labelColor:"#F7F7F8",titleColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}}).catch(console.warn)}),this.http.get("https://wikirate.org/Commons+Employee+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list").subscribe(a=>{this.total_employees=this.getSum(a)}),this.http.get("https://wikirate.org/Commons+Supplied_By+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&filter[year]="+this.selectedYear+"&limit=100&view=answer_list").subscribe(a=>{this.number_of_suppliers=this.getSum(a)}),this.http.get("https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers+Answers.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Supplier of Apparel 100&view=answer_list").subscribe(a=>{this.workers_in_supply_chain=this.getSum(a)})}getSum(i){let r=0;for(var o=0;o<i.length;o++)"Unknown"!==i[o].value&&!Number.isNaN(Number(i[o].value))&&(r+=Number(i[o].value));return 0==r&&(this.workers_in_supply_chain="Unknown"),r}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(yb))},t.\u0275cmp=kt({type:t,selectors:[["app-market-cap-map"]],decls:63,vars:25,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row","mb-2"],[1,"col-md-8"],[1,"showcase-title-white"],[1,"showcase-subtitle-white"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","justify-content-center","mb-2"],["id","vis",1,"mt-2"],[1,"row","align-items-end","mt-4"],[1,"mt-1","col-md","text-center"],[1,"secondary-info","mt-1"],[1,"primary-info"],[1,"explore","mt-1","d-none","d-md-block"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Y(5," The top 100 apparel companies "),B(),$(6,"h3",5)(7,"p"),Y(8,"By headquarter location and market cap"),B()()(),$(9,"div",6)(10,"div",7)(11,"select",8),Oe("ngModelChange",function(a){return o.selectedYear=a})("change",function(){return o.updateSection()}),$(12,"option",9),Y(13,"latest"),B(),$(14,"option",10),Y(15,"2020"),B(),$(16,"option",11),Y(17,"2019"),B(),$(18,"option",12),Y(19,"2018"),B()()()()(),$(20,"div",13),Re(21,"div",14),B(),$(22,"div",15)(23,"div",16)(24,"div",17),Y(25,"Total Market Cap"),B(),$(26,"div",18),Y(27),Ef(28,"bigNumSuff"),B(),$(29,"div",19)(30,"a",20),Y(31,"Dive Deeper"),Re(32,"i",21),B()()(),$(33,"div",16)(34,"div",17),Y(35,"Employees"),B(),$(36,"div",18),Y(37),Ef(38,"bigNumSuff"),B(),$(39,"div",19)(40,"a",20),Y(41,"Dive Deeper"),Re(42,"i",21),B()()(),$(43,"div",16)(44,"div",17),Y(45,"Suppliers"),B(),$(46,"div",18),Y(47),Ef(48,"bigNumSuff"),B(),$(49,"div",19)(50,"a",20),Y(51,"Dive Deeper"),Re(52,"i",21),B()()(),$(53,"div",16)(54,"div",17),Y(55," Employees in Supply Chain "),B(),$(56,"div",18),Y(57),Ef(58,"bigNumSuff"),B(),$(59,"div",19)(60,"a",20),Y(61,"Dive Deeper"),Re(62,"i",21),B()()()()()()),2&r&&(q(11),X("ngModel",o.selectedYear),q(1),X("ngValue","latest"),q(2),X("ngValue",2020),q(2),X("ngValue",2019),q(2),X("ngValue",2018),q(9),Gi("USD$ ",V0(28,13,o.total_market_cap,1),"+"),q(3),_u("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Market%20Cap&filter%5Byear%5D=",o.selectedYear,"",Vo),q(7),Gi("",V0(38,16,o.total_employees,2),"+"),q(3),_u("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Employees&filter%5Byear%5D=",o.selectedYear,"",Vo),q(7),Gi("",V0(48,19,o.number_of_suppliers,2),"+"),q(3),_u("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20by&filter%5Byear%5D=",o.selectedYear,"",Vo),q(7),Gi("",V0(58,22,o.workers_in_supply_chain,2),"+"),q(3),_u("href","https://wikirate.org/Clean_Clothes_Campaign+Number_of_Workers?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bcompany_group%5D%5B%5D=Supplier%20of%20Apparel%20100&filter%5Byear%5D=",o.selectedYear,"",Vo))},dependencies:[Tg,xg,Ic,Cg,xf,Zrt],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),tot=(()=>{const t=class{constructor(){}ngOnInit(){this.createChart()}createChart(){R_("div#line-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Apparel Top 100 Companies Reporting their Suppliers.",width:500,height:200,padding:5,signals:[{name:"interpolate",value:"cardinal"}],data:[{name:"supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answer.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&limit=0&view=answer_list",format:{type:"json",property:"items"},transform:[{type:"aggregate",groupby:["year"],fields:["company"],ops:["count"],as:["number_of_lists"]},{type:"filter",expr:"datum.year > 2016 && datum.year < 2021"}]}],scales:[{name:"x",type:"linear",range:"width",nice:!0,zero:!1,round:!0,domain:[2016,2021]},{name:"y",type:"linear",domain:[0,100],range:"height",nice:!0,zero:!1,round:!0},{name:"align",type:"ordinal",domain:["left","right","top","bottom"],range:["right","left","center","center"]},{name:"base",type:"ordinal",domain:["left","right","top","bottom"],range:["middle","middle","bottom","top"]},{name:"dx",type:"ordinal",domain:["left","right","top","bottom"],range:[-7,6,0,0]},{name:"dy",type:"ordinal",domain:["left","right","top","bottom"],range:[1,1,-5,8]}],axes:[{orient:"bottom",scale:"x",tickMinStep:1,format:""},{orient:"left",scale:"y",tickMinStep:2}],marks:[{type:"line",from:{data:"supplier_lists"},encode:{enter:{interpolate:{value:"linear"},x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},stroke:{value:"#000"},strokeWidth:{value:3}}}},{type:"symbol",from:{data:"supplier_lists"},encode:{enter:{x:{scale:"x",field:"year"},y:{scale:"y",field:"number_of_lists"},fill:{value:"#fff"},stroke:{value:"#000"},strokeWidth:{value:1},size:{value:60},tooltip:{signal:"{'Number of Companies': datum.number_of_lists, 'Year': datum.year}"}},update:{fill:{value:"#fff"},stroke:{value:"#000"}},hover:{fill:{value:"#000"},stroke:{value:"#fff"}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=kt({type:t,selectors:[["app-supplier-lists-on-wikirate"]],decls:20,vars:0,consts:[[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"col-md"],[1,"wikirate","chart-container","mt-2"],["id","line-chart",1,"m-2"],[1,"col-md-9"],[1,"showcase-main-text","mt-2"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplier%20List%20(all)"],[1,"bi","bi-arrow-right","ml-1"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),Y(4," Companies reporting their suppliers "),B(),$(5,"h3",4),Y(6," Number of the top 100 apparel companies publishing their list of suppliers "),B()()(),$(7,"div",1)(8,"div",5)(9,"div",6),Re(10,"div",7),B()()(),$(11,"div",1)(12,"div",8)(13,"div",9),Y(14," The number of the top 100 apparel companies reporting their suppliers more than doubled from 10 to 23 between 2017 and 2020. "),B()(),$(15,"div",10)(16,"div",11)(17,"a",12),Y(18,"Dive Deeper"),Re(19,"i",13),B()()()()())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),not=(()=>{const t=class{transform(i,r){return"string"==typeof i?i:Number.isNaN(i)?null:i<1e3?i:i.toString().slice(0,i.toString().length-3)+","+i.toString().slice(-3)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=ur({name:"numFormat",type:t,pure:!0}),e})();function iot(e,t){if(1&e&&($(0,"span")(1,"i"),Y(2),B()()),2&e){const n=_e();q(2),pi("For "+n.selectedYear)}}function rot(e,t){1&e&&($(0,"i"),Y(1,"For the most recent years"),B())}let oot=(()=>{const t=class{constructor(i,r){this.http=i,this.route=r,this.number_of_reporting_companies="Unknown",this.unique_suppliers="Unknown",this.selectedYear="latest"}ngOnInit(){this.updateSection(),this.updateChart()}ngAfterViewInit(){}updateChart(){R_("div#bar-chart",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"Number of Published Supplier Lists",width:750,height:510,padding:5,autosize:"fit",data:[{name:"companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"published_supplier_lists",url:"https://wikirate.org/Commons+Supplier_List_all+Answers.json?filter[not_ids]=&filter[company_name]=&filter[value][]=Yes&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",transform:[{type:"lookup",from:"companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"aggregate",groupby:["company_name","headquarters"]}]}],marks:[{type:"rect",from:{data:"published_supplier_lists"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"count"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'No. of Supplier Lists':datum.count}"},fill:{scale:"color",field:"count"},cornerRadiusTopRight:{value:5},cornerRadiusTopLeft:{value:5}},hover:{fill:{value:"#912E06"}}}}],scales:[{name:"y",type:"linear",domain:{data:"published_supplier_lists",field:"count"},range:"height",nice:!0},{name:"x",type:"band",domain:{data:"published_supplier_lists",field:"company_name",sort:{op:"max",field:"count",order:"descending"}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"published_supplier_lists",field:"count"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:100,labelFontSize:14,tickColor:"#F7F7F8",labelColor:"#F7F7F8",domainColor:"#F7F7F8"}]},{renderer:"svg",actions:{source:!1,editor:!1}})}updateSection(){this.http.get("https://wikirate.org/Commons+Supplied_By+Answer.json?filter[not_ids]=&filter[company_name]=&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0&filter[year]="+this.selectedYear).subscribe(o=>{this.number_of_reporting_companies=0;for(var s=0;s<o.length;s++)"Unknown"!==o[s].value&&this.number_of_reporting_companies++}),this.http.get("https://wikirate.org/Commons+Supplier_of+Answer.json?filter[company_group][]=Supplier%20of%20Apparel%20100&filter[year]="+this.selectedYear+"&view=answer_list&limit=0").subscribe(o=>{this.unique_suppliers=o.length})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(yb),L(fl))},t.\u0275cmp=kt({type:t,selectors:[["app-number-of-suppliers-per-company"]],decls:43,vars:12,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"col-md-4","mt-2","mb-2"],[1,"year-filter","col-md-5","ml-md-auto"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],["value","2018",3,"ngValue"],[1,"row","mt-2"],[1,"col-md"],[1,"wikirate-box","chart-container"],["id","bar-chart",1,"m-2"],[1,"showcase-main-text-white","col-md-9"],[4,"ngIf"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank","href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=Supplied%20By&filter%5Byear%5D=latest"],[1,"bi","bi-arrow-right","ml-1"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Y(5," Published supplier lists "),B(),$(6,"h3",5),Y(7,"Number of published supplier lists per company since 2017"),B()(),$(8,"div",6)(9,"div",7)(10,"select",8),Oe("ngModelChange",function(a){return o.selectedYear=a})("change",function(){return o.updateSection()}),$(11,"option",9),Y(12,"latest"),B(),$(13,"option",10),Y(14,"2020"),B(),$(15,"option",11),Y(16,"2019"),B(),$(17,"option",12),Y(18,"2018"),B()()()()(),$(19,"div",13)(20,"div",14)(21,"div",15),Re(22,"div",16),B()()(),$(23,"div",13)(24,"div",17),ge(25,iot,3,1,"span",18),ge(26,rot,2,0,"i",18),Y(27," WikiRate's researchers retrieved the supplier lists of "),$(28,"i"),Y(29),B(),Y(30," out of the top 100 companies. In total, these "),$(31,"i"),Y(32),B(),Y(33," were supplied by "),$(34,"i"),Y(35),Ef(36,"numFormat"),B(),Y(37,". "),B(),$(38,"div",19)(39,"div",20)(40,"a",21),Y(41,"Dive Deeper"),Re(42,"i",22),B()()()()()()),2&r&&(q(10),X("ngModel",o.selectedYear),q(1),X("ngValue","latest"),q(2),X("ngValue",2020),q(2),X("ngValue",2019),q(2),X("ngValue",2018),q(8),X("ngIf","latest"!==o.selectedYear),q(1),X("ngIf","latest"===o.selectedYear),q(3),Gi("",o.number_of_reporting_companies," companies"),q(3),Gi("",o.number_of_reporting_companies," companies"),q(3),Gi("",mN(36,10,o.unique_suppliers)," different suppliers"))},dependencies:[Tg,xg,Ic,Cg,xf,qi,not],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#f7f7f8;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),sot=(()=>{const t=class{constructor(i){this.router=i}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(mr))},t.\u0275cmp=kt({type:t,selectors:[["more-data"]],decls:12,vars:0,consts:[[1,"wikirate-box"],[1,"wikirate-container","align-content-center"],[1,"row","justify-content-center"],[1,"showcase-title","call-to-action-title","text-center","mb-2","col-8"],[1,"mini-text","col-8"],[1,"row","justify-content-center","mt-4"],[1,"explore","mt-1"],["target","_blank","href","https://docs.google.com/forms/d/e/1FAIpQLSf4vZZ25-LQ1_xxriPxFH-Iwm6Mgok6exzAe1B3Hus1Yj8ifg/viewform"],[1,"bi","bi-arrow-right","ml-1"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),Y(4,"We need more open data"),B(),$(5,"div",4),Y(6," The top 100 apparel companies in the world disclose only half of key environmental, social and governance indicators assessed here. To create systemic change and achieve the environmental and societal goals of the 21st century, we need more comparable, open data! "),B()(),$(7,"div",5)(8,"div",6)(9,"a",7),Y(10,"Learn More"),Re(11,"i",8),B()()()()())},styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{cursor:pointer;color:inherit;text-decoration:inherit}"]}),e})();const aot=["radarChartContainer"];function lot(e,t){if(1&e&&($(0,"option",15),Y(1),B()),2&e){const n=t.$implicit;X("ngValue",n.id),q(1),pi(n.name)}}function uot(e,t){1&e&&($(0,"div",21),Re(1,"img",22),$(2,"p",23),Y(3,"You explored unresearched areas, no data available."),B()())}let cot=(()=>{const t=class{constructor(i,r,o,s){this.http=i,this.route=r,this.apparelService=o,this.renderer=s,this.environmental_disclosure_rate=0,this.social_disclosure_rate=0,this.governance_disclosure_rate=0,this.nodata=!0,this.selectedYear="latest",this.selectedCompany=0,this.apparelTop100=[],this.apparelTop100=o.getCompanies()}ngOnInit(){this.updateSection()}updateSection(){null!=this.radarChart&&this.renderer.removeChild(this.radarChartContainer.nativeElement,this.radarChart),this.nodata=!0,0!=this.selectedCompany?this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(i=>{i.length>0&&(this.environmental_disclosure_rate=i[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(r=>{r.length>0&&(this.social_disclosure_rate=r[0].value,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+~"+this.selectedCompany+"+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(o=>{o.length>0&&(this.governance_disclosure_rate=o[0].value,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="radar-chart-container m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of "+this.apparelService.getCompany(+this.selectedCompany).name))}))}))}):this.http.get("https://wikirate.org/Apparel_Research_Group+Environmental_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(i=>{this.environmental_disclosure_rate=0;for(var r=0;r<i.length;r++)this.environmental_disclosure_rate+=+i[r].value;this.environmental_disclosure_rate=this.environmental_disclosure_rate/i.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Social_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&"+this.selectedYear+"&limit=0&view=answer_list").subscribe(o=>{this.social_disclosure_rate=0;for(var s=0;s<o.length;s++)this.social_disclosure_rate+=+o[s].value;this.social_disclosure_rate=this.social_disclosure_rate/o.length,this.http.get("https://wikirate.org/Apparel_Research_Group+Governance_Disclosure_Rate+Answer.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&limit=0&view=answer_list").subscribe(a=>{this.governance_disclosure_rate=0;for(var l=0;l<a.length;l++)this.governance_disclosure_rate+=+a[l].value;this.governance_disclosure_rate=this.governance_disclosure_rate/a.length,this.nodata=!1,this.radarChart=this.renderer.createElement("div"),this.radarChart.id="esg-performance",this.radarChart.class="m-2",this.renderer.appendChild(this.radarChartContainer.nativeElement,this.radarChart),this.updateRadarChart("of Apparel Top 100 (avg Rating)")})})})}updateRadarChart(i){R_("div#esg-performance",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A radar chart example, showing multiple dimensions in a radial layout.",width:510,height:460,padding:40,autosize:{type:"none",contains:"padding"},title:{text:"ESG Disclosure Rate ("+this.selectedYear+")",anchor:"middle",dy:-8,dx:{signal:"-width/4"},subtitle:i,color:"#F7F7F8",subtitleColor:"#F7F7F8"},signals:[{name:"radius",update:"width / 2.2"}],data:[{name:"table",values:[{key:["Environmental","Disclosure","Rate"],value:(Math.round(100*this.environmental_disclosure_rate)/100).toFixed(2),category:0},{key:["Social","Disclosure","Rate"],value:(Math.round(100*this.social_disclosure_rate)/100).toFixed(2),category:0},{key:["Governance","Disclosure","Rate"],value:(Math.round(100*this.governance_disclosure_rate)/100).toFixed(2),category:0}]},{name:"keys",source:"table",transform:[{type:"aggregate",groupby:["key"]}]}],scales:[{name:"angular",type:"point",range:[-3.14159,3.14159],padding:.5,domain:{data:"table",field:"key"}},{name:"radial",type:"linear",range:{signal:"[0, radius]"},zero:!0,nice:!1,domain:[0,10],domainMin:0},{name:"color",type:"ordinal",domain:{data:"table",field:"category"},range:["#F7733D","#F7733D"]}],encode:{enter:{x:{signal:"radius"},y:{signal:"radius"}}},marks:[{type:"group",name:"categories",zindex:1,from:{facet:{data:"table",name:"facet",groupby:["category"]}},marks:[{type:"line",name:"category-line",from:{data:"facet"},encode:{enter:{interpolate:{value:"linear-closed"},x:{signal:"scale('radial', datum.value) * cos(scale('angular', datum.key))"},y:{signal:"scale('radial', datum.value) * sin(scale('angular', datum.key))"},stroke:{scale:"color",field:"category"},strokeWidth:{value:1},fill:{scale:"color",field:"category"},fillOpacity:{value:.2}}}},{type:"text",name:"value-text",from:{data:"category-line"},encode:{enter:{x:{signal:"datum.x + 14 * cos(scale('angular', datum.datum.key))"},y:{signal:"datum.y + 14 * sin(scale('angular', datum.datum.key))"},text:{signal:"datum.datum.value"},align:{value:"center"},baseline:{value:"middle"},fontWeight:{value:"bold"},fill:{value:"#F7F7F8"}}}}]},{type:"rule",name:"radial-grid",from:{data:"keys"},zindex:0,encode:{enter:{x:{value:0},y:{value:0},x2:{signal:"radius * cos(scale('angular', datum.key))"},y2:{signal:"radius * sin(scale('angular', datum.key))"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}},{type:"text",name:"key-label",from:{data:"keys"},zindex:1,encode:{enter:{x:{signal:"(radius + 11) * cos(scale('angular', datum.key))"},y:{signal:"(radius - 5) * sin(scale('angular', datum.key))"},text:{field:"key"},align:[{test:"abs(scale('angular', datum.key)) > PI / 2",value:"right"},{value:"left"}],baseline:[{test:"scale('angular', datum.key) > 0",value:"top"},{test:"scale('angular', datum.key) == 0",value:"middle"},{value:"bottom"}],fill:{value:"#F7F7F8"},fontWeight:{value:"bold"}}}},{type:"line",name:"outer-line",from:{data:"radial-grid"},encode:{enter:{interpolate:{value:"linear-closed"},x:{field:"x2"},y:{field:"y2"},stroke:{value:"#F7F7F8"},strokeWidth:{value:1}}}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(yb),L(fl),L(Dg),L(pr))},t.\u0275cmp=kt({type:t,selectors:[["app-esg-performance"]],viewQuery:function(r,o){if(1&r&&fa(aot,5),2&r){let s;yt(s=vt())&&(o.radarChartContainer=s.first)}},decls:30,vars:8,consts:[[1,"wikirate-navy-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8","vertical-center"],[1,"content-container"],[1,"showcase-title","text-white"],[1,"showcase-subtitle-white"],[1,"filters","col-md-4"],[1,"row","col","justify-content-md-end"],[1,"company-filter","mt-1","mr-1"],["id","inputCompany",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"year-filter","mt-1"],["id","inputYear",1,"form-control-navy","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"row","col-12","mt-2"],[1,"col-md"],[1,"chart-container"],["radarChartContainer",""],["id","no_data","class","text-center mt-5",4,"ngIf"],["id","no_data",1,"text-center","mt-5"],["src","assets/moon-light.svg","width","60px",1,"mb-1"],[1,"mt-3","showcase-main-text","text-white"]],template:function(r,o){1&r&&($(0,"div",0),Re(1,"hr"),$(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),Y(7," Broken-down company ESG disclosure rating "),B(),$(8,"h3",6),Y(9," The top 100 apparel companies\u2019 ESG disclosure rates per axis by year "),B()()(),$(10,"div",7)(11,"div",8)(12,"div",9)(13,"select",10),Oe("ngModelChange",function(a){return o.selectedCompany=a})("change",function(){return o.updateSection()}),ge(14,lot,2,2,"option",11),B()(),$(15,"div",12)(16,"select",13),Oe("ngModelChange",function(a){return o.selectedYear=a})("change",function(){return o.updateSection()}),$(17,"option",14),Y(18,"latest"),B(),$(19,"option",15),Y(20,"2020"),B(),$(21,"option",15),Y(22,"2019"),B(),$(23,"option",15),Y(24,"2018"),B()()()()(),$(25,"div",16)(26,"div",17)(27,"div",18,19),ge(29,uot,4,0,"div",20),B()()()()()()),2&r&&(q(13),X("ngModel",o.selectedCompany),q(1),X("ngForOf",o.apparelTop100),q(2),X("ngModel",o.selectedYear),q(1),X("ngValue","latest"),q(2),X("ngValue",2020),q(2),X("ngValue",2019),q(2),X("ngValue",2018),q(6),X("ngIf",o.nodata))},dependencies:[Tg,xg,Ic,Cg,xf,po,qi],styles:[".radar-chart-container[_ngcontent-%COMP%]{width:470px;height:380px;border-radius:5px}"]}),e})(),dot=(()=>{const t=class{constructor(){this.selectedYear="latest",this.innerWidth=0}ngOnInit(){this.innerWidth=window.innerWidth,console.log(this.innerWidth),this.updateBarChart()}updateBarChart(){let i=20;this.innerWidth>=1200?i=40:this.innerWidth>=800&&(i=30),R_("div#esg-overall-wikirating",{$schema:"https://vega.github.io/schema/vega/v5.json",description:"ESG Disclosure Rate",width:1080,height:510,padding:5,signals:[{name:"companies",value:i,bind:{input:"range",min:20,max:100,step:1}},{name:"order",value:"descending",bind:{input:"select",options:["ascending","descending"]}}],data:[{name:"apparel_companies",url:"../../assets/content/Apparel-100-Companies.json",format:{type:"json",property:"items"}},{name:"suppplier_info",url:"https://wikirate.org/Apparel_Research_Group+ESG_Disclosure_Rate+Answers.json?filter[not_ids]=&filter[company_name]=&filter[year]="+this.selectedYear+"&filter[company_group][]=Apparel%20100%20Companies&view=answer_list&limit=0",format:{type:"json",parse:{value:"number"}},transform:[{type:"lookup",from:"apparel_companies",key:"id",fields:["company"],values:["name","headquarters"],as:["company_name","headquarters"],default:0},{type:"window",sort:{field:"value",order:{signal:"order"}},ops:["row_number"],as:["rank"]},{type:"filter",expr:"datum.rank <= companies"},{type:"formula",as:"rate",expr:"format(datum.value,',.2f')"}]}],marks:[{type:"rect",from:{data:"suppplier_info"},encode:{update:{y:{scale:"y",value:0},y2:{scale:"y",field:"value"},x:{scale:"x",field:"company_name"},width:{scale:"x",band:1},tooltip:{signal:"{'Company':datum.company_name, 'Headquarters':datum.headquarters , 'ESG Disclosure Rate':datum.rate}"},fill:{scale:"color",field:"value"},cornerRadiusTopRight:{value:3},cornerRadiusTopLeft:{value:3}},hover:{fill:{value:"black"}}}}],scales:[{name:"y",type:"linear",domain:[0,10],range:"height",nice:!0},{name:"x",type:"band",domain:{data:"suppplier_info",field:"company_name",sort:{op:"max",field:"value",order:{signal:"order"}}},range:"width",padding:.1},{name:"color",type:"linear",nice:!0,domain:{data:"suppplier_info",field:"value"},range:["#fef1eb","#F7733D"]}],axes:[{scale:"y",orient:"left",format:",d",tickCount:5,labelFontSize:{signal:"10 + 300 / companies"}},{scale:"x",orient:"bottom",labelAngle:55,labelAlign:"left",labelLimit:130,labelFontSize:{signal:"10 + 300 / companies"}}]},{renderer:"svg",actions:{source:!1,editor:!1}})}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=kt({type:t,selectors:[["app-esg-disclosure-rates"]],decls:29,vars:6,consts:[[1,"wikirate-box"],[1,"wikirate-container"],[1,"row"],[1,"col-md-8"],[1,"showcase-title"],[1,"showcase-subtitle"],[1,"filters","col-md-4","mt-1"],[1,"year-filter","col-md-5","ml-auto"],["id","inputYear",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["selected","","value","latest",3,"ngValue"],["value","2020",3,"ngValue"],["value","2019",3,"ngValue"],[1,"col-12","mt-2"],[1,"bar-chart-container"],["id","esg-overall-wikirating",1,"m-2"],[1,"showcase-main-text","mt-2","col-md-9"],[1,"col-md-3","d-flex","align-items-end"],[1,"explore","mt-1","d-none","d-md-block","ml-auto"],["target","_blank",3,"href"],[1,"bi","bi-arrow-right","ml-1"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Y(5),B(),$(6,"h3",5),Y(7," Based on ESG data shared by companies publicly "),B()(),$(8,"div",6)(9,"div",7)(10,"select",8),Oe("ngModelChange",function(a){return o.selectedYear=a})("change",function(){return o.updateBarChart()}),$(11,"option",9),Y(12,"latest"),B(),$(13,"option",10),Y(14,"2020"),B(),$(15,"option",11),Y(16,"2019"),B()()()()(),$(17,"div",2)(18,"div",12)(19,"div",13),Re(20,"div",14),B()()(),$(21,"div",2)(22,"div",15),Y(23," Nearly a third of the top 100 apparel companies don\u2019t publish a recent report with sustainability information. For example, only half share information about their greenhouse gas (GHG) emissions. "),B(),$(24,"div",16)(25,"div",17)(26,"a",18),Y(27,"Dive Deeper"),Re(28,"i",19),B()()()()()()),2&r&&(q(5),Gi(" Company ESG disclosure rating (",o.selectedYear,") "),q(5),X("ngModel",o.selectedYear),q(1),X("ngValue","latest"),q(2),X("ngValue",2020),q(2),X("ngValue",2019),q(11),_u("href","https://wikirate.org/Apparel_100_Analysis?filter%5Bnot_ids%5D=&filter%5Bcompany_name%5D=&filter%5Bmetric_name%5D=ESG%20Disclosure&filter%5Byear%5D=",o.selectedYear,"",Vo))},dependencies:[Tg,xg,Ic,Cg,xf],styles:[".explore[_ngcontent-%COMP%]{font-family:IBMPlexSans;font-style:normal;font-weight:700;font-size:14px;line-height:16px;letter-spacing:.3px;color:#484c9d;text-transform:uppercase;text-align:center}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}"]}),e})(),fot=(()=>{const t=class{constructor(i,r,o,s){this.route=i,this.scroll=r,this.meta=o,this.titleService=s,s.setTitle("Apparel companies' ESG data disclosure ratings & supplier transparency"),o.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics, Laureen van Breen"},{name:"description",content:"Discover ESG data disclosure ratings and supplier transparency of the biggest 100 apparel companies in infographics, charts, and maps by Wikirate."},{name:"author",content:"Theresa Heithaus, Tom Howie, Laureen van Breen, Melanie Twele, Vasiliki Gkatziaki"}])}ngOnInit(){this.route.params.subscribe(i=>{this.report_params={id:+i.id,year:i.year}}),this.scrollToTop()}scrollToTop(){this.scroll.scrollToPosition([0,0])}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(fl),L(Y0),L(yO),L(pE))},t.\u0275cmp=kt({type:t,selectors:[["dynamic-report"]],decls:8,vars:0,consts:[["id","market-cap-map"]],template:function(r,o){1&r&&Re(0,"intro")(1,"app-market-cap-map",0)(2,"app-esg-disclosure-rates")(3,"app-esg-performance")(4,"app-supplier-lists-on-wikirate")(5,"app-number-of-suppliers-per-company")(6,"app-suppliers-map")(7,"more-data")},dependencies:[FOe,Jrt,eot,tot,oot,sot,cot,dot]}),e})();function qfe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Yfe(e){return[Br,qo,Wo,Ur].some(function(t){return e[t]>=0})}const Kfe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function hot(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=Fg(t,{elementContext:"reference"}),a=Fg(t,{altBoundary:!0}),l=qfe(s,i),u=qfe(a,r,o),c=Yfe(l),d=Yfe(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}};var m8=nD({defaultModifiers:[Lk,$k,Bk,Uk,Vk,Ik,Fk,Pk,Kfe]});const Wd=new Map,_8={set(e,t,n){Wd.has(e)||Wd.set(e,new Map);const i=Wd.get(e);i.has(t)||0===i.size?i.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,t)=>Wd.has(e)&&Wd.get(e).get(t)||null,remove(e,t){if(!Wd.has(e))return;const n=Wd.get(e);n.delete(t),0===n.size&&Wd.delete(e)}},y8="transitionend",Xfe=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),_ot=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Qfe=e=>{e.dispatchEvent(new Event(y8))},ac=e=>!(!e||"object"!=typeof e)&&(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),qd=e=>ac(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(Xfe(e)):null,P_=e=>{if(!ac(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const i=e.closest("summary");if(i&&i.parentNode!==n||null===i)return!1}return t},Yd=e=>!(e&&e.nodeType===Node.ELEMENT_NODE&&!e.classList.contains("disabled"))||(typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),Jfe=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Jfe(e.parentNode):null},Ox=()=>{},Zfe=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v8=[],Zs=()=>"rtl"===document.documentElement.dir,ea=e=>{(e=>{"loading"===document.readyState?(v8.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of v8)t()}),v8.push(e)):e()})(()=>{const t=Zfe();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},Ro=(e,t=[],n=e)=>"function"==typeof e?e(...t):n,ehe=(e,t,n=!0)=>{if(!n)return void Ro(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return i||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let o=!1;const s=({target:a})=>{a===t&&(o=!0,t.removeEventListener(y8,s),Ro(e))};t.addEventListener(y8,s),setTimeout(()=>{o||Qfe(t)},r)},b8=(e,t,n,i)=>{const r=e.length;let o=e.indexOf(t);return-1===o?!n&&i?e[r-1]:e[0]:(o+=n?1:-1,i&&(o=(o+r)%r),e[Math.max(0,Math.min(o,r-1))])},wot=/[^.]*(?=\..*)\.|.*/,Eot=/\..*/,Dot=/::\d+$/,w8={};let the=1;const nhe={mouseenter:"mouseover",mouseleave:"mouseout"},Cot=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ihe(e,t){return t&&`${t}::${the++}`||e.uidEvent||the++}function rhe(e){const t=ihe(e);return e.uidEvent=t,w8[t]=w8[t]||{},w8[t]}function ohe(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function she(e,t,n){const i="string"==typeof t,r=i?n:t||n;let o=lhe(e);return Cot.has(o)||(o=e),[i,r,o]}function ahe(e,t,n,i,r){if("string"!=typeof t||!e)return;let[o,s,a]=she(t,n,i);var p;t in nhe&&(p=s,s=function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)});const l=rhe(e),u=l[a]||(l[a]={}),c=ohe(u,s,o?n:null);if(c)return void(c.oneOff=c.oneOff&&r);const d=ihe(s,t.replace(wot,"")),f=o?function Aot(e,t,n){return function i(r){const o=e.querySelectorAll(t);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return D8(r,{delegateTarget:s}),i.oneOff&&le.off(e,r.type,t,n),n.apply(s,[r])}}(e,n,s):function Sot(e,t){return function n(i){return D8(i,{delegateTarget:e}),n.oneOff&&le.off(e,i.type,t),t.apply(e,[i])}}(e,s);f.delegationSelector=o?n:null,f.callable=s,f.oneOff=r,f.uidEvent=d,u[d]=f,e.addEventListener(a,f,o)}function E8(e,t,n,i,r){const o=ohe(t[n],i,r);o&&(e.removeEventListener(n,o,Boolean(r)),delete t[n][o.uidEvent])}function Tot(e,t,n,i){const r=t[n]||{};for(const[o,s]of Object.entries(r))o.includes(i)&&E8(e,t,n,s.callable,s.delegationSelector)}function lhe(e){return e=e.replace(Eot,""),nhe[e]||e}const le={on(e,t,n,i){ahe(e,t,n,i,!1)},one(e,t,n,i){ahe(e,t,n,i,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;const[r,o,s]=she(t,n,i),a=s!==t,l=rhe(e),u=l[s]||{},c=t.startsWith(".");if(typeof o<"u"){if(!Object.keys(u).length)return;E8(e,l,s,o,r?n:null)}else{if(c)for(const d of Object.keys(l))Tot(e,l,d,t.slice(1));for(const[d,f]of Object.entries(u)){const h=d.replace(Dot,"");(!a||t.includes(h))&&E8(e,l,s,f.callable,f.delegationSelector)}}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const i=Zfe();let s=null,a=!0,l=!0,u=!1;t!==lhe(t)&&i&&(s=i.Event(t,n),i(e).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),u=s.isDefaultPrevented());const c=D8(new Event(t,{bubbles:a,cancelable:!0}),n);return u&&c.preventDefault(),l&&e.dispatchEvent(c),c.defaultPrevented&&s&&s.preventDefault(),c}};function D8(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get:()=>i})}return e}function uhe(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function C8(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const lc={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${C8(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${C8(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=uhe(e.dataset[i])}return t},getDataAttribute:(e,t)=>uhe(e.getAttribute(`data-bs-${C8(t)}`))};class wb{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const i=ac(n)?lc.getDataAttribute(n,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...ac(n)?lc.getDataAttributes(n):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[i,r]of Object.entries(n)){const o=t[i],s=ac(o)?"element":_ot(o);if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${r}".`)}}}class Ja extends wb{constructor(t,n){super(),(t=qd(t))&&(this._element=t,this._config=this._getConfig(n),_8.set(this._element,this.constructor.DATA_KEY,this))}dispose(){_8.remove(this._element,this.constructor.DATA_KEY),le.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){ehe(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return _8.get(qd(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,"object"==typeof n?n:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const S8=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map(n=>Xfe(n)).join(","):null},Ge={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(n=>n.matches(t)),parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!Yd(n)&&P_(n))},getSelectorFromElement(e){const t=S8(e);return t&&Ge.findOne(t)?t:null},getElementFromSelector(e){const t=S8(e);return t?Ge.findOne(t):null},getMultipleElementsFromSelector(e){const t=S8(e);return t?Ge.find(t):[]}},kx=(e,t="hide")=>{const i=e.NAME;le.on(document,`click.dismiss${e.EVENT_KEY}`,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Yd(this))return;const o=Ge.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(o)[t]()})};class Ix extends Ja{static get NAME(){return"alert"}close(){if(le.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const n=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),le.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=Ix.getOrCreateInstance(this);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t](this)}})}}kx(Ix,"close"),ea(Ix);const dhe='[data-bs-toggle="button"]';class Rx extends Ja{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const n=Rx.getOrCreateInstance(this);"toggle"===t&&n[t]()})}}le.on(document,"click.bs.button.data-api",dhe,e=>{e.preventDefault();const t=e.target.closest(dhe);Rx.getOrCreateInstance(t).toggle()}),ea(Rx);const L_=".bs.swipe",Uot=`touchstart${L_}`,Vot=`touchmove${L_}`,jot=`touchend${L_}`,Hot=`pointerdown${L_}`,zot=`pointerup${L_}`,Kot={endCallback:null,leftCallback:null,rightCallback:null},Xot={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Fx extends wb{constructor(t,n){super(),this._element=t,t&&Fx.isSupported()&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Kot}static get DefaultType(){return Xot}static get NAME(){return"swipe"}dispose(){le.off(this._element,L_)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ro(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const n=t/this._deltaX;this._deltaX=0,n&&Ro(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(le.on(this._element,Hot,t=>this._start(t)),le.on(this._element,zot,t=>this._end(t)),this._element.classList.add("pointer-event")):(le.on(this._element,Uot,t=>this._start(t)),le.on(this._element,Vot,t=>this._move(t)),le.on(this._element,jot,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Kd=".bs.carousel",Eb="next",$_="prev",B_="left",Px="right",tst=`slide${Kd}`,A8=`slid${Kd}`,nst=`keydown${Kd}`,ist=`mouseenter${Kd}`,rst=`mouseleave${Kd}`,ost=`dragstart${Kd}`,sst=`load${Kd}.data-api`,ast=`click${Kd}.data-api`,Lx="active",ghe=".carousel-item",hst=".active"+ghe,yst={ArrowLeft:Px,ArrowRight:B_},vst={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},bst={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Db extends Ja{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ge.findOne(".carousel-indicators",this._element),this._addEventListeners(),"carousel"===this._config.ride&&this.cycle()}static get Default(){return vst}static get DefaultType(){return bst}static get NAME(){return"carousel"}next(){this._slide(Eb)}nextWhenVisible(){!document.hidden&&P_(this._element)&&this.next()}prev(){this._slide($_)}pause(){this._isSliding&&Qfe(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void le.one(this._element,A8,()=>this.cycle());this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding)return void le.one(this._element,A8,()=>this.to(t));const i=this._getItemIndex(this._getActive());i!==t&&this._slide(t>i?Eb:$_,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&le.on(this._element,nst,t=>this._keydown(t)),"hover"===this._config.pause&&(le.on(this._element,ist,()=>this.pause()),le.on(this._element,rst,()=>this._maybeEnableCycle())),this._config.touch&&Fx.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ge.find(".carousel-item img",this._element))le.on(i,ost,r=>r.preventDefault());this._swipeHelper=new Fx(this._element,{leftCallback:()=>this._slide(this._directionToOrder(B_)),rightCallback:()=>this._slide(this._directionToOrder(Px)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=yst[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=Ge.findOne(".active",this._indicatorsElement);n.classList.remove(Lx),n.removeAttribute("aria-current");const i=Ge.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(Lx),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const i=this._getActive(),r=t===Eb,o=n||b8(this._getItems(),i,r,this._config.wrap);if(o===i)return;const s=this._getItemIndex(o),a=h=>le.trigger(this._element,h,{relatedTarget:o,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:s});if(a(tst).defaultPrevented||!i||!o)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=o;const c=r?"carousel-item-start":"carousel-item-end",d=r?"carousel-item-next":"carousel-item-prev";o.classList.add(d),i.classList.add(c),o.classList.add(c),this._queueCallback(()=>{o.classList.remove(c,d),o.classList.add(Lx),i.classList.remove(Lx,d,c),this._isSliding=!1,a(A8)},i,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ge.findOne(hst,this._element)}_getItems(){return Ge.find(ghe,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Zs()?t===B_?$_:Eb:t===B_?Eb:$_}_orderToDirection(t){return Zs()?t===$_?B_:Px:t===$_?Px:B_}static jQueryInterface(t){return this.each(function(){const n=Db.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}}else n.to(t)})}}le.on(document,ast,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=Ge.getElementFromSelector(this);if(!t||!t.classList.contains("carousel"))return;e.preventDefault();const n=Db.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===lc.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),le.on(window,sst,()=>{const e=Ge.find('[data-bs-ride="carousel"]');for(const t of e)Db.getOrCreateInstance(t)}),ea(Db);const Cb=".bs.collapse",Dst=`show${Cb}`,Cst=`shown${Cb}`,Sst=`hide${Cb}`,Ast=`hidden${Cb}`,Tst=`click${Cb}.data-api`,T8="show",U_="collapse",$x="collapsing",Mst=`:scope .${U_} .${U_}`,x8='[data-bs-toggle="collapse"]',Rst={parent:null,toggle:!0},Fst={parent:"(null|element)",toggle:"boolean"};class Sb extends Ja{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const i=Ge.find(x8);for(const r of i){const o=Ge.getSelectorFromElement(r),s=Ge.find(o).filter(a=>a===this._element);null!==o&&s.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Rst}static get DefaultType(){return Fst}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(a=>a!==this._element).map(a=>Sb.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||le.trigger(this._element,Dst).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(U_),this._element.classList.add($x),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($x),this._element.classList.add(U_,T8),this._element.style[i]="",le.trigger(this._element,Cst)},this._element,!0),this._element.style[i]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown()||le.trigger(this._element,Sst).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,this._element.classList.add($x),this._element.classList.remove(U_,T8);for(const r of this._triggerArray){const o=Ge.getElementFromSelector(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0,this._element.style[n]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($x),this._element.classList.add(U_),le.trigger(this._element,Ast)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(T8)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=qd(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(x8);for(const n of t){const i=Ge.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){const n=Ge.find(Mst,this._config.parent);return Ge.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const i of t)i.classList.toggle("collapsed",!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return"string"==typeof t&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const i=Sb.getOrCreateInstance(this,n);if("string"==typeof t){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}le.on(document,Tst,x8,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of Ge.getMultipleElementsFromSelector(this))Sb.getOrCreateInstance(t,{toggle:!1}).toggle()}),ea(Sb);const fp=".bs.dropdown",M8=".data-api",Lst="ArrowUp",yhe="ArrowDown",Bst=`hide${fp}`,Ust=`hidden${fp}`,Vst=`show${fp}`,jst=`shown${fp}`,vhe=`click${fp}${M8}`,bhe=`keydown${fp}${M8}`,Hst=`keyup${fp}${M8}`,V_="show",hp='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Kst=`${hp}.${V_}`,Bx=".dropdown-menu",Zst=Zs()?"top-end":"top-start",eat=Zs()?"top-start":"top-end",tat=Zs()?"bottom-end":"bottom-start",nat=Zs()?"bottom-start":"bottom-end",iat=Zs()?"left-start":"right-start",rat=Zs()?"right-start":"left-start",aat={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},lat={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class iu extends Ja{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Ge.next(this._element,Bx)[0]||Ge.prev(this._element,Bx)[0]||Ge.findOne(Bx,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return aat}static get DefaultType(){return lat}static get NAME(){return"dropdown"}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Yd(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!le.trigger(this._element,Vst,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const i of[].concat(...document.body.children))le.on(i,"mouseover",Ox);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(V_),this._element.classList.add(V_),le.trigger(this._element,jst,t)}}hide(){!Yd(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!le.trigger(this._element,Bst,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))le.off(i,"mouseover",Ox);this._popper&&this._popper.destroy(),this._menu.classList.remove(V_),this._element.classList.remove(V_),this._element.setAttribute("aria-expanded","false"),lc.removeDataAttribute(this._menu,"popper"),le.trigger(this._element,Ust,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!ac(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${"dropdown".toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof ro>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:ac(this._config.reference)?t=qd(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=m8(t,this._menu,n)}_isShown(){return this._menu.classList.contains(V_)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return iat;if(t.classList.contains("dropstart"))return rat;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const n="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?n?eat:Zst:n?nat:tat}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(n=>Number.parseInt(n,10)):"function"==typeof t?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(lc.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ro(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const i=Ge.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(r=>P_(r));i.length&&b8(i,n,t===yhe,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=iu.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const n=Ge.find(Kst);for(const i of n){const r=iu.getInstance(i);if(!r||!1===r._config.autoClose)continue;const o=t.composedPath(),s=o.includes(r._menu);if(o.includes(r._element)||"inside"===r._config.autoClose&&!s||"outside"===r._config.autoClose&&s||r._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};"click"===t.type&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,r=[Lst,yhe].includes(t.key);if(!r&&!i||n&&!i)return;t.preventDefault();const o=this.matches(hp)?this:Ge.prev(this,hp)[0]||Ge.next(this,hp)[0]||Ge.findOne(hp,t.delegateTarget.parentNode),s=iu.getOrCreateInstance(o);if(r)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),o.focus())}}le.on(document,bhe,hp,iu.dataApiKeydownHandler),le.on(document,bhe,Bx,iu.dataApiKeydownHandler),le.on(document,vhe,iu.clearMenus),le.on(document,Hst,iu.clearMenus),le.on(document,vhe,hp,function(e){e.preventDefault(),iu.getOrCreateInstance(this).toggle()}),ea(iu);const Dhe="mousedown.bs.backdrop",cat={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},dat={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Che extends wb{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return cat}static get DefaultType(){return dat}static get NAME(){return"backdrop"}show(t){if(!this._config.isVisible)return void Ro(t);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{Ro(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),Ro(t)})):Ro(t)}dispose(){this._isAppended&&(le.off(this._element,Dhe),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=qd(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),le.on(t,Dhe,()=>{Ro(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){ehe(t,this._getElement(),this._config.isAnimated)}}const Ux=".bs.focustrap",hat=`focusin${Ux}`,pat=`keydown.tab${Ux}`,_at={autofocus:!0,trapElement:null},yat={autofocus:"boolean",trapElement:"element"};class Ahe extends wb{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _at}static get DefaultType(){return yat}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),le.off(document,Ux),le.on(document,hat,t=>this._handleFocusin(t)),le.on(document,pat,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,le.off(document,Ux))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const i=Ge.focusableChildren(n);0===i.length?n.focus():"backward"===this._lastTabNavDirection?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}}const The=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xhe=".sticky-top",Vx="padding-right",Mhe="margin-right";class N8{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vx,n=>n+t),this._setElementAttributes(The,Vx,n=>n+t),this._setElementAttributes(xhe,Mhe,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vx),this._resetElementAttributes(The,Vx),this._resetElementAttributes(xhe,Mhe)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){const r=this.getWidth();this._applyManipulationCallback(t,s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+r)return;this._saveInitialAttribute(s,n);const a=window.getComputedStyle(s).getPropertyValue(n);s.style.setProperty(n,`${i(Number.parseFloat(a))}px`)})}_saveInitialAttribute(t,n){const i=t.style.getPropertyValue(n);i&&lc.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){this._applyManipulationCallback(t,r=>{const o=lc.getDataAttribute(r,n);null!==o?(lc.removeDataAttribute(r,n),r.style.setProperty(n,o)):r.style.removeProperty(n)})}_applyManipulationCallback(t,n){if(ac(t))n(t);else for(const i of Ge.find(t,this._element))n(i)}}const ta=".bs.modal",Eat=`hide${ta}`,Dat=`hidePrevented${ta}`,Nhe=`hidden${ta}`,Ohe=`show${ta}`,Cat=`shown${ta}`,Sat=`resize${ta}`,Aat=`click.dismiss${ta}`,Tat=`mousedown.dismiss${ta}`,xat=`keydown.dismiss${ta}`,Mat=`click${ta}.data-api`,khe="modal-open",O8="modal-static",Fat={backdrop:!0,focus:!0,keyboard:!0},Pat={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class j_ extends Ja{constructor(t,n){super(t,n),this._dialog=Ge.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new N8,this._addEventListeners()}static get Default(){return Fat}static get DefaultType(){return Pat}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||le.trigger(this._element,Ohe,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(khe),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||le.trigger(this._element,Eat).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){le.off(window,ta),le.off(this._dialog,ta),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Che({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ahe({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Ge.findOne(".modal-body",this._dialog);n&&(n.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,le.trigger(this._element,Cat,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){le.on(this._element,xat,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();this._triggerBackdropTransition()}}),le.on(window,Sat,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),le.on(this._element,Tat,t=>{le.one(this._element,Aat,n=>{if(this._element===t.target&&this._element===n.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(khe),this._resetAdjustments(),this._scrollBar.reset(),le.trigger(this._element,Nhe)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(le.trigger(this._element,Dat).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(O8)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(O8),this._queueCallback(()=>{this._element.classList.remove(O8),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){const r=Zs()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&t){const r=Zs()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const i=j_.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}}le.on(document,Mat,'[data-bs-toggle="modal"]',function(e){const t=Ge.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),le.one(t,Ohe,r=>{r.defaultPrevented||le.one(t,Nhe,()=>{P_(this)&&this.focus()})});const n=Ge.findOne(".modal.show");n&&j_.getInstance(n).hide(),j_.getOrCreateInstance(t).toggle(this)}),kx(j_),ea(j_);const uc=".bs.offcanvas",$at=`load${uc}.data-api`,$he=".offcanvas.show",Vat=`show${uc}`,jat=`shown${uc}`,Hat=`hide${uc}`,Bhe=`hidePrevented${uc}`,Uhe=`hidden${uc}`,zat=`resize${uc}`,Gat=`click${uc}.data-api`,Wat=`keydown.dismiss${uc}`,Yat={backdrop:!0,keyboard:!0,scroll:!1},Kat={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Xd extends Ja{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yat}static get DefaultType(){return Kat}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||le.trigger(this._element,Vat,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new N8).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove("showing"),le.trigger(this._element,jat,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&!le.trigger(this._element,Hat).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new N8).reset(),le.trigger(this._element,Uhe)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=Boolean(this._config.backdrop);return new Che({className:"offcanvas-backdrop",isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?()=>{"static"!==this._config.backdrop?this.hide():le.trigger(this._element,Bhe)}:null})}_initializeFocusTrap(){return new Ahe({trapElement:this._element})}_addEventListeners(){le.on(this._element,Wat,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();le.trigger(this._element,Bhe)}})}static jQueryInterface(t){return this.each(function(){const n=Xd.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t](this)}})}}le.on(document,Gat,'[data-bs-toggle="offcanvas"]',function(e){const t=Ge.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Yd(this))return;le.one(t,Uhe,()=>{P_(this)&&this.focus()});const n=Ge.findOne($he);n&&n!==t&&Xd.getInstance(n).hide(),Xd.getOrCreateInstance(t).toggle(this)}),le.on(window,$at,()=>{for(const e of Ge.find($he))Xd.getOrCreateInstance(e).show()}),le.on(window,zat,()=>{for(const e of Ge.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Xd.getOrCreateInstance(e).hide()}),kx(Xd),ea(Xd);const Vhe={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xat=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Qat=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Jat=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Xat.has(n)||Boolean(Qat.test(e.nodeValue)):t.filter(i=>i instanceof RegExp).some(i=>i.test(n))},tlt={allowList:Vhe,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},nlt={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ilt={entry:"(string|element|function|null)",selector:"(string|element)"};class rlt extends wb{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return tlt}static get DefaultType(){return nlt}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(t,o,r);const n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},ilt)}_setContent(t,n,i){const r=Ge.findOne(i,t);if(r){if(!(n=this._resolvePossibleFunction(n)))return void r.remove();if(ac(n))return void this._putElementInTemplate(qd(n),r);if(this._config.html)return void(r.innerHTML=this._maybeSanitize(n));r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?function Zat(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const s of o){const a=s.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){s.remove();continue}const l=[].concat(...s.attributes),u=[].concat(t["*"]||[],t[a]||[]);for(const c of l)Jat(c,u)||s.removeAttribute(c.nodeName)}return r.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ro(t,[this])}_putElementInTemplate(t,n){if(this._config.html)return n.innerHTML="",void n.append(t);n.textContent=t.textContent}}const slt=new Set(["sanitize","allowList","sanitizeFn"]),k8="fade",jx="show",Hhe="hide.bs.modal",Ab="hover",I8="focus",wlt={AUTO:"auto",TOP:"top",RIGHT:Zs()?"left":"right",BOTTOM:"bottom",LEFT:Zs()?"right":"left"},Elt={allowList:Vhe,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Dlt={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class H_ extends Ja{constructor(t,n){if(typeof ro>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Elt}static get DefaultType(){return Dlt}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),le.off(this._element.closest(".modal"),Hhe,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=le.trigger(this._element,this.constructor.eventName("show")),i=(Jfe(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),le.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(r),r.classList.add(jx),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))le.on(a,"mouseover",Ox);this._queueCallback(()=>{le.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!le.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(jx),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))le.off(r,"mouseover",Ox);this._activeTrigger.click=!1,this._activeTrigger[I8]=!1,this._activeTrigger[Ab]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),le.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(k8,jx),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(k8),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new rlt({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(k8)}_isShown(){return this.tip&&this.tip.classList.contains(jx)}_createPopper(t){const n=Ro(this._config.placement,[this,t,this._element]),i=wlt[n.toUpperCase()];return m8(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(n=>Number.parseInt(n,10)):"function"==typeof t?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Ro(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...Ro(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if("click"===n)le.on(this._element,this.constructor.eventName("click"),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if("manual"!==n){const i=this.constructor.eventName(n===Ab?"mouseenter":"focusin"),r=this.constructor.eventName(n===Ab?"mouseleave":"focusout");le.on(this._element,i,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger["focusin"===o.type?I8:Ab]=!0,s._enter()}),le.on(this._element,r,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger["focusout"===o.type?I8:Ab]=s._element.contains(o.relatedTarget),s._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},le.on(this._element.closest(".modal"),Hhe,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=lc.getDataAttributes(this._element);for(const i of Object.keys(n))slt.has(i)&&delete n[i];return t={...n,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:qd(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=H_.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ea(H_);const Tlt={...H_.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},xlt={...H_.DefaultType,content:"(null|string|element|function)"};class R8 extends H_{static get Default(){return Tlt}static get DefaultType(){return xlt}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=R8.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ea(R8);const F8=".bs.scrollspy",Olt=`activate${F8}`,zhe=`click${F8}`,klt=`load${F8}.data-api`,z_="active",P8="[href]",Blt={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ult={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Hx extends Ja{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Blt}static get DefaultType(){return Ult}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=qd(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(le.off(this._config.target,zhe),le.on(this._config.target,zhe,P8,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:r,behavior:"smooth"});i.scrollTop=r}}))}_getNewObserver(){return new IntersectionObserver(n=>this._observerCallback(n),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(t){const n=s=>this._targetLinks.get(`#${s.target.id}`),i=s=>{this._previousScrollData.visibleEntryTop=s.target.offsetTop,this._process(n(s))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(s));continue}const a=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&a){if(i(s),!r)return}else!o&&!a&&i(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ge.find(P8,this._config.target);for(const n of t){if(!n.hash||Yd(n))continue;const i=Ge.findOne(decodeURI(n.hash),this._element);P_(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(z_),this._activateParents(t),le.trigger(this._element,Olt,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))Ge.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(z_);else for(const n of Ge.parents(t,".nav, .list-group"))for(const i of Ge.prev(n,".nav-link, .nav-item > .nav-link, .list-group-item"))i.classList.add(z_)}_clearActiveClass(t){t.classList.remove(z_);const n=Ge.find(`${P8}.${z_}`,t);for(const i of n)i.classList.remove(z_)}static jQueryInterface(t){return this.each(function(){const n=Hx.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}})}}le.on(window,klt,()=>{for(const e of Ge.find('[data-bs-spy="scroll"]'))Hx.getOrCreateInstance(e)}),ea(Hx);const pp=".bs.tab",jlt=`hide${pp}`,Hlt=`hidden${pp}`,zlt=`show${pp}`,Glt=`shown${pp}`,Wlt=`click${pp}`,qlt=`keydown${pp}`,Ylt=`load${pp}`,Klt="ArrowLeft",Whe="ArrowRight",Xlt="ArrowUp",qhe="ArrowDown",L8="Home",Yhe="End",gp="active",$8="show",Xhe=".dropdown-toggle",B8=`:not(${Xhe})`,Qhe='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',U8=`.nav-link${B8}, .list-group-item${B8}, [role="tab"]${B8}, ${Qhe}`,nut=`.${gp}[data-bs-toggle="tab"], .${gp}[data-bs-toggle="pill"], .${gp}[data-bs-toggle="list"]`;class G_ extends Ja{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),le.on(this._element,qlt,n=>this._keydown(n)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),i=n?le.trigger(n,jlt,{relatedTarget:t}):null;le.trigger(t,zlt,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){t&&(t.classList.add(gp),this._activate(Ge.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),le.trigger(t,Glt,{relatedTarget:n})):t.classList.add($8)},t,t.classList.contains("fade")))}_deactivate(t,n){t&&(t.classList.remove(gp),t.blur(),this._deactivate(Ge.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),le.trigger(t,Hlt,{relatedTarget:n})):t.classList.remove($8)},t,t.classList.contains("fade")))}_keydown(t){if(![Klt,Whe,Xlt,qhe,L8,Yhe].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(r=>!Yd(r));let i;if([L8,Yhe].includes(t.key))i=n[t.key===L8?0:n.length-1];else{const r=[Whe,qhe].includes(t.key);i=b8(n,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),G_.getOrCreateInstance(i).show())}_getChildren(){return Ge.find(U8,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=Ge.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const r=(o,s)=>{const a=Ge.findOne(o,i);a&&a.classList.toggle(s,n)};r(Xhe,gp),r(".dropdown-menu",$8),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(gp)}_getInnerElement(t){return t.matches(U8)?t:Ge.findOne(U8,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const n=G_.getOrCreateInstance(this);if("string"==typeof t){if(void 0===n[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);n[t]()}})}}le.on(document,Wlt,Qhe,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!Yd(this)&&G_.getOrCreateInstance(this).show()}),le.on(window,Ylt,()=>{for(const e of Ge.find(nut))G_.getOrCreateInstance(e)}),ea(G_);const Qd=".bs.toast",rut=`mouseover${Qd}`,out=`mouseout${Qd}`,sut=`focusin${Qd}`,aut=`focusout${Qd}`,lut=`hide${Qd}`,uut=`hidden${Qd}`,cut=`show${Qd}`,dut=`shown${Qd}`,zx="show",Gx="showing",hut={animation:"boolean",autohide:"boolean",delay:"number"},put={animation:!0,autohide:!0,delay:5e3};class Wx extends Ja{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return put}static get DefaultType(){return hut}static get NAME(){return"toast"}show(){le.trigger(this._element,cut).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(zx,Gx),this._queueCallback(()=>{this._element.classList.remove(Gx),le.trigger(this._element,dut),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!le.trigger(this._element,lut).defaultPrevented&&(this._element.classList.add(Gx),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Gx,zx),le.trigger(this._element,uut)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(zx),super.dispose()}isShown(){return this._element.classList.contains(zx)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=n;break;case"focusin":case"focusout":this._hasKeyboardInteraction=n}if(n)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){le.on(this._element,rut,t=>this._onInteraction(t,!0)),le.on(this._element,out,t=>this._onInteraction(t,!1)),le.on(this._element,sut,t=>this._onInteraction(t,!0)),le.on(this._element,aut,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=Wx.getOrCreateInstance(this,t);if("string"==typeof t){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}kx(Wx),ea(Wx);const gut=["carousel"];function mut(e,t){if(1&e&&($(0,"div",51)(1,"div",52)(2,"div",53),Re(3,"img",54),B(),$(4,"div",55),Y(5),B()()()),2&e){const n=t.$implicit;q(3),sl("src",n.logo,Vo),sl("alt",n.contributor),q(2),Gi(" ",n.contributor," ")}}const _ut=[{path:"apparel_top_100/reports/0/latest",redirectTo:"/apparel_top_100/home",pathMatch:"full"},{path:"apparel_top_100/home",component:fot},{path:"apparel_top_100/about",component:(()=>{const t=class{constructor(i,r,o){this.scroll=i,this.meta=r,this.titleService=o,this.images=[944,1011,984].map(s=>`https://picsum.photos/id/${s}/900/500`),this.currentIndex=1,this.contributors=[{contributor:"Fashion Revolution",logo:"https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"},{contributor:"Open Supply Hub",logo:"https://dq06ugkuram52.cloudfront.net/files/5661929/40040943-medium.jpeg"},{contributor:"AMD Akademie Mode & Design Berlin",logo:"https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"},{contributor:"Walk Free Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"},{contributor:"Clean Clothes Campaign",logo:"https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"},{contributor:"Columbia University SIPA",logo:"https://dq06ugkuram52.cloudfront.net/files/8104623/26042255-medium.png"},{contributor:"University of Wollongong",logo:"https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"},{contributor:"Glasgow Caledonian University",logo:"https://dq06ugkuram52.cloudfront.net/files/2381047/12602618-medium.png"},{contributor:"Nottingham Trent University",logo:"https://dq06ugkuram52.cloudfront.net/files/3700624/14894897-medium.png"},{contributor:"Universidad EAFIT",logo:"https://dq06ugkuram52.cloudfront.net/files/2593569/15069279-medium.png"},{contributor:"Ewha Womans University",logo:"https://dq06ugkuram52.cloudfront.net/files/2718582/12716390-medium.jpeg"},{contributor:"University of Connecticut",logo:"https://dq06ugkuram52.cloudfront.net/files/2877060/13099154-medium.png"},{contributor:"Australian National University",logo:"https://dq06ugkuram52.cloudfront.net/files/5295432/20444349-medium.png"},{contributor:"University of Nottingham",logo:"https://dq06ugkuram52.cloudfront.net/files/3149947/13561221-medium.png"},{contributor:"Global Reporting Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/801180/12603989-medium.jpg"},{contributor:"Ellen MacArthur Foundation",logo:"https://dq06ugkuram52.cloudfront.net/files/5405942/20706304-medium.png"},{contributor:"Textile Exchange",logo:"https://dq06ugkuram52.cloudfront.net/files/5406497/20709161-medium.jpg"},{contributor:"Science Based Targets Initiative",logo:"../../assets/SBTI-logo.jpg"},{contributor:"Poverty Footprint",logo:"https://dq06ugkuram52.cloudfront.net/files/1828145/12602552-medium.png"},{contributor:"Business & Human Rights Resource Center",logo:"../../assets/BHRRC-logo.png"},{logo:"https://dq06ugkuram52.cloudfront.net/files/5663399/21715396-medium.jpeg",contributor:"As You Sow"},{contributor:"Responsible Sourcing Network",logo:"https://dq06ugkuram52.cloudfront.net/files/5340655/20553116-medium.jpg"},{contributor:"Accord on Fire and Building Safety in Bangladesh",logo:"https://dq06ugkuram52.cloudfront.net/files/5424763/20734161-medium.png"},{contributor:"Ethical Trading Initiative",logo:"https://dq06ugkuram52.cloudfront.net/files/168320/20704071-medium.jpeg"},{contributor:"Fair Labor Association",logo:"https://dq06ugkuram52.cloudfront.net/files/61327/12604154-medium.gif"},{contributor:"ACT Action, Collaboration, Transformation",logo:"https://dq06ugkuram52.cloudfront.net/files/5417974/20726868-medium.png"},{contributor:"ShareAction",logo:"https://dq06ugkuram52.cloudfront.net/files/3763173/15057247-medium.png"},{contributor:"SustainoMetric",logo:"https://dq06ugkuram52.cloudfront.net/files/8126858/26084088-medium.png"}],o.setTitle("Who made Apparel 100 and why?"),r.addTags([{name:"keywords",content:"wikirate, esg data,apparel supply chain,apparel company esg ratings,manufacturing supply chain,supply chain,supply transparency,apparel esg data,fashion esg data,esg company,esg companies,esg company rating,esg rating,esg ratings,esg ranking,esg rankings,esg data ranking,esg data rating,environmental,environmental concerns,social concerns,environmental social corporate governance,adidas esg data,data visualizations,data infographics, Laureen van Breen"},{name:"description",content:"Apparel 100 was made by WikiRate to showcase supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics create a sector snapshot that tells a story the world deserves to know."}]),r.updateTag({name:"og:title",content:"Behind Apparel 100"},"property='og:title'"),r.updateTag({name:"og:url",content:"//showcase.wikirate.org/#/apparel_top_100/about"},"property='og:url'"),r.updateTag({name:"og:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='og:description'"),r.updateTag({name:"twitter:description",content:"Apparel 100 was made by Wikirate.org to showcase our supply chain transparency and ESG data in an engaging and accessible way."},"property='twitter:description'"),r.updateTag({name:"twitter:title",content:"Behind Apparel 100"},"property='twitter:title'")}ngOnInit(){this.scrollToTop()}prev(){this.carousel.nativeElement.carousel("prev")}next(){this.carousel.nativeElement.on("slid.bs.carousel",()=>{this.carousel.nativeElement.carousel("2")})}scrollToTop(){this.scroll.scrollToPosition([0,0])}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(Y0),L(yO),L(pE))},t.\u0275cmp=kt({type:t,selectors:[["app-about"]],viewQuery:function(r,o){if(1&r&&fa(gut,7),2&r){let s;yt(s=vt())&&(o.carousel=s.first)}},decls:152,vars:1,consts:[[1,"wikirate-creme-box"],[1,"wikirate-container"],[1,"row"],[1,"col","mt-2","text-center"],[1,"mini-title","text-center"],[1,"showcase-main-text","mt-3"],[1,"row","mt-4"],[1,"col-4","text-center","mb-4"],[1,"primary-info-navy"],[1,"secondary-info-navy","mt-1"],[1,"col-4","text-center"],[1,"wikirate-navy-box"],[1,"col-md-8"],[1,"showcase-title","text-white","mt-2","mb-2"],[1,"showcase-main-text-white"],[1,"col-md-4","vertical-center","justify-content-center"],["onclick","window.open('https://forms.gle/8ru3Wh8QMoJ8NZ8Y7','_blank')",1,"btn","btn-highlight","pr-4","pl-4","mt-2"],[1,"wikirate-box"],[1,"mini-title","text-center","mt-4"],[1,"row","mt-5","mb-4"],[1,"secondary-info-navy"],["id","quotes","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","mt-4","mb-4","active"],[1,"row","justify-content-center"],[1,"col-9"],[1,"image-box","col-3","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/3765463/22301376-medium.jpg"],[1,"showcase-main-text","font-italic"],[1,"note","mt-3"],[1,"note"],[1,"carousel-item","mt-4","mb-4"],["src","https://dq06ugkuram52.cloudfront.net/files/564260/12604027-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/5467212/20834915-medium.jpg"],[1,"col-3","image-box","vertical-center","justify-content-center","d-none","d-md-inline-flex"],["src","https://dq06ugkuram52.cloudfront.net/files/2549498/12602498-medium.png"],["src","https://dq06ugkuram52.cloudfront.net/files/1831839/12602420-medium.png"],["role","button","data-slide","prev","href","#quotes",1,"carousel-control-prev","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button","data-slide","next","href","#quotes",1,"carousel-control-next","mt-4","mr-4"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"wikirate-box","wikirate-container","d-none","d-md-block"],["id","partners-logos","data-ride","carousel",1,"carousel","slide"],[1,"container","mt-4","mb-4"],[1,"section"],[1,"col-lg-12","p-3"],[1,"mb-3"],[1,"slider","mt-3"],[1,"slide-track"],["class","slide",4,"ngFor","ngForOf"],[1,"slide"],[1,"row","col-12","justify-content-center"],[1,"image-box","d-flex","justify-content-center","align-items-center","m-2"],[3,"src","alt"],[1,"contributor-name","m3","text-center"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Y(5," Who made Apparel 100 and why? "),B(),$(6,"div",5)(7,"p"),Y(8,"Apparel 100 was made by WikiRate to showcase supply chain transparency and ESG data in an engaging and accessible way. These maps and infographics create a sector snapshot that tells a story the world deserves to know. "),B(),$(9,"p"),Y(10," This showcase came together with the support of the WikiRate community. "),B()(),$(11,"div",6)(12,"div",7)(13,"div",8),Y(14,"335"),B(),$(15,"div",9),Y(16,"RESEARCHERS"),B()(),$(17,"div",10)(18,"div",8),Y(19,"10"),B(),$(20,"div",9),Y(21,"UNIVERSITIES"),B()(),$(22,"div",10)(23,"div",8),Y(24,"17"),B(),$(25,"div",9),Y(26,"NGOs"),B()()()()()()(),$(27,"div",11)(28,"div",1)(29,"div",2)(30,"div",12)(31,"h2",13),Y(32,"Create your own open data showcase "),B(),$(33,"div",14)(34,"p"),Y(35,"With our flexible data infrastructure and committed community we have created an open data ecosystem that you can be part of. "),B()()(),$(36,"div",15)(37,"button",16),Y(38," Contact Us "),B()()()()(),$(39,"div",17)(40,"div",1)(41,"p",18),Y(42," The research in numbers "),B(),$(43,"div",19)(44,"div",10)(45,"div",8),Y(46,"31K+"),B(),$(47,"div",20),Y(48,"DATA POINTS"),B()(),$(49,"div",10)(50,"div",8),Y(51,"171"),B(),$(52,"div",20),Y(53,"METRICS"),B()(),$(54,"div",10)(55,"div",8),Y(56,"30K+"),B(),$(57,"div",20),Y(58,"CORPORATE RELATIONSHIPS"),B()()()()(),$(59,"div",0)(60,"div",1)(61,"div",21)(62,"div",22)(63,"div",23)(64,"div",24)(65,"div",25)(66,"div",24)(67,"div",26),Re(68,"img",27),B(),$(69,"div",12)(70,"div",28),Y(71,'"We believe in collaborating to improve the fashion industry and are delighted to be continuing our partnership with WikiRate into 2022. Using the WikiRate platform to host FTI research has made our work more accessible and impactful across a range of stakeholders who use our data to enable their activism and research." '),B(),$(72,"div",29)(73,"b"),Y(74," Fashion Revolution "),B()(),Re(75,"div",30),B()()()()(),$(76,"div",31)(77,"div",24)(78,"div",25)(79,"div",2)(80,"div",26),Re(81,"img",32),B(),$(82,"div",12)(83,"div",28),Y(84,'"WikiRate has proven an invaluable partner for our Fashion Checker campaign. The platform\u2019s sophisticated functionalities and open data approach has given us the flexibility we needed to bring our data to the public so that it can be used by advocates to create real change." '),B(),$(85,"div",29)(86,"b"),Y(87," Anne Bienias "),B()(),$(88,"div",30),Y(89,"Clean Clothes Campaign"),B()()()()()(),$(90,"div",31)(91,"div",24)(92,"div",25)(93,"div",2)(94,"div",26),Re(95,"img",33),B(),$(96,"div",12)(97,"div",28),Y(98,'"This collaborative project was a great opportunity to further develop our research skills which in turn allowed us to be more critical and analytical of fashion labels. Working with WikiRate made us understand the importance of finding the right and accurate information that backs up or contradicts the image that a fashion label is trying to portray" '),B(),$(99,"div",29)(100,"b"),Y(101," Student of Akademie Mode & Design (AMD) Berlin "),B()(),Re(102,"div",30),B()()()()(),$(103,"div",31)(104,"div",24)(105,"div",25)(106,"div",2)(107,"div",34),Re(108,"img",35),B(),$(109,"div",12)(110,"div",28),Y(111,'"WikiRate provides the opportunity for students to get a real-life experience with CSR, which helps develop their social awareness, problem-solving and critical thinking skills" '),B(),$(112,"div",29)(113,"b"),Y(114," Dr. Stephanie Perkiss "),B()(),$(115,"div",30),Y(116,"University of Wollongong, Australia"),B()()()()()(),$(117,"div",31)(118,"div",24)(119,"div",25)(120,"div",2)(121,"div",26),Re(122,"img",36),B(),$(123,"div",12)(124,"div",28),Y(125,'"We\'ve worked with the WikiRate for the last five years to scale our research on modern slavery. The WikiRate team maintains our methodology on their platform and each year coordinates hundreds of university students to contribute new data for analysis that we use to improve legislation to end modern slavery." '),B(),$(126,"div",29)(127,"b"),Y(128," Katharine Bryant "),B()(),$(129,"div",30),Y(130,"Walk Free Initiative"),B()()()()()()(),$(131,"a",37),Re(132,"span",38),$(133,"span",39),Y(134,"Previous"),B()(),$(135,"a",40),Re(136,"span",41),$(137,"span",39),Y(138,"Next"),B()()()()(),$(139,"div",42)(140,"div",43)(141,"div",44)(142,"div",45)(143,"div",2)(144,"div",46)(145,"h3",47),Y(146,"Research Contributors"),B(),$(147,"p"),Y(148,"This research was performed with the contribution of the following organisations"),B(),$(149,"div",48)(150,"div",49),ge(151,mut,6,3,"div",50),B()()()()()()()()),2&r&&(q(151),X("ngForOf",o.contributors))},dependencies:[po],styles:[".roadmap[_ngcontent-%COMP%]{height:500px}.showcase-circle-purple[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#484c9d!important}.showcase-circle-orange[_ngcontent-%COMP%]{width:4.25rem;height:4.25rem;background-color:#f7733d!important}.img[_ngcontent-%COMP%]{width:250px!important;height:250px!important;min-width:250px!important;min-height:250px!important}.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%!important;max-height:100%!important;height:auto!important}.contributor-name[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.6em}.image-box[_ngcontent-%COMP%]{width:140px!important;height:140px!important}.image-box-small-screen[_ngcontent-%COMP%]{height:auto!important;max-width:200px!important}@keyframes _ngcontent-%COMP%_scroll{0%{transform:translate(0)}to{transform:translate(-1750px)}}.slider[_ngcontent-%COMP%]{height:200px;margin:auto;overflow:hidden;position:relative;width:auto}.slider[_ngcontent-%COMP%]   .slide-track[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scroll 60s linear infinite;display:flex;width:3500px}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{height:100px;width:250px}"]}),e})()},{path:"**",redirectTo:"/apparel_top_100/home",pathMatch:"full"}];let yut=(()=>{const t=class{};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Bt({providers:[{provide:wc,useClass:qN}],imports:[JO.forRoot(_ut,{anchorScrolling:"enabled"}),JO]}),e})();const vut=["search_text"];let but=(()=>{const t=class{constructor(i,r,o){this.route=i,this.router=r,this.apparelService=o,this.exploreMore=!1,this.apparelTop100=[],this.apparelTop100=o.getCompanies()}ngOnInit(){this.report_params={id:0,year:"latest"},this.router.events.pipe(Xn(i=>i instanceof kO&&Object.keys(i.snapshot.params).length>0),Xe(i=>i instanceof kO?i.snapshot.params:{})).subscribe(i=>{this.report_params.id=i.id,this.report_params.year=i.year,this.selectedCompany=this.apparelService.getCompany(+this.report_params.id).name}),this.apparelService.exploreMore.subscribe(i=>{this.exploreMore=i})}setValue(i){this.search_text.nativeElement.value=i.name,this.report_params.id=i.id,null===i&&(this.search_text.nativeElement.value="overview",this.report_params.id=0)}navigateToYear(i){let r=i.target.value;r&&(null===this.report_params.id&&(this.report_params.id=0),this.router.navigate(["/apparel_top_100/reports/"+this.report_params.id+"/"+r]))}navigateToCompany(i){this.router.navigate(["/apparel_top_100/reports/"+i.id+"/"+this.report_params.year])}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(fl),L(mr),L(Dg))},t.\u0275cmp=kt({type:t,selectors:[["header-component"]],viewQuery:function(r,o){if(1&r&&fa(vut,5),2&r){let s;yt(s=vt())&&(o.search_text=s.first)}},decls:26,vars:0,consts:[[1,"wikirate-box","bg-navy"],[1,"container"],[1,"navbar","bg-navy","navbar-expand","nomargin","drop-shadow","navbar-light"],["routerLink","apparel_top_100/home",1,"navbar-brand","title","mr-3"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","apparel_top_100/about",1,"nav-link","ml-3","mr-3"],[1,"nav-item","dropdown"],["type","button","id","share","data-toggle","dropdown","aria-expanded","false",1,"nav-item","nav-link","ml-3","mr-3","dropdown-toggle"],[1,"bi","bi-arrow-up-right"],["aria-labelledby","share",1,"dropdown-menu"],["target","_blank","href","https://www.facebook.com/sharer/sharer.php?u=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-facebook","ml-2","mr-2"],["target","_blank","href","https://twitter.com/intent/tweet?url=https://showcase.wikirate.org/&text=",1,"dropdown-item"],[1,"bi","bi-twitter","ml-2","mr-2"],["target","_blank","href","https://www.linkedin.com/shareArticle?mini=true&url=https://showcase.wikirate.org/",1,"dropdown-item"],[1,"bi","bi-linkedin","ml-2","mr-2"],["target","_blank","href","mailto:info@example.com?&subject=&cc=&bcc=&body=https://showcase.wikirate.org/%0A",1,"dropdown-item"],[1,"bi","bi-envelope-fill","ml-2","mr-2"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"nav",2)(3,"a",3),Y(4,"Apparel 100"),B(),$(5,"ul",4)(6,"li",5)(7,"a",6),Y(8,"ABOUT"),B()(),$(9,"li",7)(10,"a",8),Y(11," SHARE "),Re(12,"i",9),B(),$(13,"div",10)(14,"a",11),Re(15,"i",12),Y(16,"facebook"),B(),$(17,"a",13),Re(18,"i",14),Y(19,"twitter"),B(),$(20,"a",15),Re(21,"i",16),Y(22,"linkedin"),B(),$(23,"a",17),Re(24,"i",18),Y(25,"mail"),B()()()()()()())},dependencies:[BE],styles:["a[_ngcontent-%COMP%]{color:#000}hr[_ngcontent-%COMP%]{margin:.5em}.nav[_ngcontent-%COMP%]{margin-top:.5em;background:white}.title[_ngcontent-%COMP%]{font-weight:700;letter-spacing:0em;text-align:left;color:#fff!important}.dropdown-menu[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:none!important}"]}),e})(),wut=(()=>{const t=class{constructor(){this.current_year=2022,this.current_year=(new Date).getFullYear()}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=kt({type:t,selectors:[["footer"]],decls:32,vars:1,consts:[[1,"wikirate-creme-purple-box"],[1,"wikirate-container"],[1,"row","text-center"],[1,"col-12"],[1,"row","justify-content-center","mb-3"],[1,"tiny-text"],[1,"row","justify-content-center"],["href","https://wikirate.org","target","_blank"],["src","assets/wikirate_logo.svg",1,"logo"],[1,"col-sm-7","mini-text","mt-3","justify-content-center"],[1,"wikirate-navy-box"],[1,"footer-container"],[1,"row"],[1,"col-11"],[1,"note","mt-3","text-light-white","mb-3"],["href","https://wikirate.org/~8079639","target","_blank"],["href","https://wikirate.org/~836561","target","_blank"],["href","https://creativecommons.org/licenses/by/4.0","target","_blank"]],template:function(r,o){1&r&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),Y(6,"Powered by "),B()(),$(7,"div",6)(8,"a",7),Re(9,"img",8),B()(),$(10,"div",6)(11,"div",9),Y(12," WikiRate is an open data platform that brings corporate ESG data together in one place, making it accessible, comparable, and free for all. "),B()()()()()(),$(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),Y(18," This showcase was created by using data from "),$(19,"a",7),Y(20,"Wikirate.org"),B(),Y(21,", '"),$(22,"a",15),Y(23,"Apparel 100 Analysis"),B(),Y(24,"' by "),$(25,"a",16),Y(26,"theresah"),B(),Y(27,", licensed under "),$(28,"a",17),Y(29,"CC BY 4.0"),B()(),$(30,"div",14),Y(31),B()()()()()),2&r&&(q(31),Gi(" Copyright \xa9 ",o.current_year," Wikirate.org All rights reserved "))},styles:[".nopadding[_ngcontent-%COMP%]{padding:0!important}.text-light-white[_ngcontent-%COMP%]{color:#f7f7f8!important}"]}),e})();function Eut(e,t){if(1&e){const n=vn();$(0,"div",2),Oe("click",function(){return It(n),Rt(_e().scrollToTop())}),$(1,"button",3),Oe("click",function(){return It(n),Rt(_e().scrollToTop())}),Re(2,"i",4),B()()}}let Dut=(()=>{const t=class{constructor(i,r){this.scroll=i,this.router=r,this.pageYoffset=0}onScroll(i){this.pageYoffset=window.pageYOffset}ngOnInit(){this.setUpAnalytics()}scrollToTop(){this.scroll.scrollToPosition([0,0])}setUpAnalytics(){this.router.events.pipe(Xn(i=>i instanceof xc)).subscribe(i=>{gtag("config","UA-34941429-8",{page_path:i.urlAfterRedirects})})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(L(Y0),L(mr))},t.\u0275cmp=kt({type:t,selectors:[["app-root"]],hostBindings:function(r,o){1&r&&Oe("scroll",function(a){return o.onScroll(a)},0,U7)},decls:6,vars:1,consts:[["report",""],["class","scroll-to-top show-scrollTop",3,"click",4,"ngIf"],[1,"scroll-to-top","show-scrollTop",3,"click"],[1,"btn","btn-highlight","btn-circle",3,"click"],[1,"bi","bi-chevron-up"]],template:function(r,o){1&r&&($(0,"div",null,0),Re(2,"header-component")(3,"router-outlet"),ge(4,Eut,3,0,"div",1),B(),Re(5,"footer")),2&r&&(q(4),X("ngIf",o.pageYoffset>0))},dependencies:[qi,BO,but,wut],styles:[".scroll-to-top[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;opacity:0;transition:all .2s ease-in-out}.show-scrollTop[_ngcontent-%COMP%]{opacity:1;transition:all .2s ease-in-out}"]}),e})(),Cut=(()=>{const t=class{constructor(i){this.apparelService=i}resolve(i,r){return this.apparelService.getCompany(+i.params.id)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(fe(Dg))},t.\u0275prov=he({token:t,factory:t.\u0275fac}),e})();function Zhe(e){return new Z(3e3,!1)}function oct(){return typeof window<"u"&&typeof window.document<"u"}function V8(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Jd(e){switch(e.length){case 0:return new yy;case 1:return e[0];default:return new xG(e)}}function epe(e,t,n,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,u=null;if(i.forEach(c=>{const d=c.get("offset"),f=d==l,h=f&&u||new Map;c.forEach((p,g)=>{let m=g,_=p;if("offset"!==g)switch(m=t.normalizePropertyName(m,s),_){case ZO:_=r.get(g);break;case Du:_=o.get(g);break;default:_=t.normalizeStyleValue(g,m,_,s)}h.set(m,_)}),f||a.push(h),u=h,l=d}),s.length)throw function qut(e){return new Z(3502,!1)}();return a}function j8(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&H8(n,"start",e)));break;case"done":e.onDone(()=>i(n&&H8(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&H8(n,"destroy",e)))}}function H8(e,t,n){const o=z8(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),s=e._data;return null!=s&&(o._data=s),o}function z8(e,t,n,i,r="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function gs(e,t,n){let i=e.get(t);return i||e.set(t,i=n),i}function tpe(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}let G8=(e,t)=>!1,npe=(e,t,n)=>[],ipe=null;function W8(e){const t=e.parentNode||e.host;return t===ipe?null:t}(V8()||typeof Element<"u")&&(oct()?(ipe=(()=>document.documentElement)(),G8=(e,t)=>{for(;t;){if(t===e)return!0;t=W8(t)}return!1}):G8=(e,t)=>e.contains(t),npe=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let mp=null,rpe=!1;const ope=G8,spe=npe;let ape=(()=>{class e{validateStyleProperty(n){return function act(e){mp||(mp=function lct(){return typeof document<"u"?document.body:null}()||{},rpe=!!mp.style&&"WebkitAppearance"in mp.style);let t=!0;return mp.style&&!function sct(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in mp.style,!t&&rpe&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in mp.style)),t}(n)}matchesElement(n,i){return!1}containsElement(n,i){return ope(n,i)}getParentElement(n){return W8(n)}query(n,i,r){return spe(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,o,s,a=[],l){return new yy(r,o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),q8=(()=>{class e{}return e.NOOP=new ape,e})();const uct=1e3,Y8="ng-enter",qx="ng-leave",Yx="ng-trigger",Kx=".ng-trigger",upe="ng-animating",K8=".ng-animating";function cc(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:X8(parseFloat(t[1]),t[2])}function X8(e,t){return"s"===t?e*uct:e}function Xx(e,t,n){return e.hasOwnProperty("duration")?e:function dct(e,t,n){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(Zhe()),{duration:0,delay:0,easing:""};r=X8(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=X8(parseFloat(l),a[4]));const u=a[5];u&&(s=u)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push(function Sut(){return new Z(3100,!1)}()),a=!0),o<0&&(t.push(function Aut(){return new Z(3101,!1)}()),a=!0),a&&t.splice(l,0,Zhe())}return{duration:r,delay:o,easing:s}}(e,t,n)}function Tb(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function cpe(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function Zd(e,t=new Map,n){if(n)for(let[i,r]of n)t.set(i,r);for(let[i,r]of e)t.set(i,r);return t}function fpe(e,t,n){return n?t+":"+n+";":""}function hpe(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=fpe(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=fpe(0,gct(n),e.style[n]));e.setAttribute("style",t)}function ru(e,t,n){e.style&&(t.forEach((i,r)=>{const o=J8(r);n&&!n.has(r)&&n.set(r,e.style[o]),e.style[o]=i}),V8()&&hpe(e))}function _p(e,t){e.style&&(t.forEach((n,i)=>{const r=J8(i);e.style[r]=""}),V8()&&hpe(e))}function xb(e){return Array.isArray(e)?1==e.length?e[0]:AG(e):e}const Q8=new RegExp("{{\\s*(.+?)\\s*}}","g");function ppe(e){let t=[];if("string"==typeof e){let n;for(;n=Q8.exec(e);)t.push(n[1]);Q8.lastIndex=0}return t}function Mb(e,t,n){const i=e.toString(),r=i.replace(Q8,(o,s)=>{let a=t[s];return null==a&&(n.push(function xut(e){return new Z(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function Qx(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const pct=/-+([a-z0-9])/g;function J8(e){return e.replace(pct,(...t)=>t[1].toUpperCase())}function gct(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ms(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function Mut(e){return new Z(3004,!1)}()}}function gpe(e,t){return window.getComputedStyle(e)[t]}const e2="*";function wct(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function Ect(e,t,n){if(":"==e[0]){const l=function Dct(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(function Hut(e){return new Z(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function jut(e){return new Z(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push(mpe(r,s));"<"==o[0]&&!(r==e2&&s==e2)&&t.push(mpe(s,r))}(i,n,t)):n.push(e),n}const t2=new Set(["true","1"]),n2=new Set(["false","0"]);function mpe(e,t){const n=t2.has(e)||n2.has(e),i=t2.has(t)||n2.has(t);return(r,o)=>{let s=e==e2||e==r,a=t==e2||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?t2.has(e):n2.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?t2.has(t):n2.has(t)),s&&a}}const Cct=new RegExp("s*:selfs*,?","g");function Z8(e,t,n,i){return new Sct(e).build(t,n,i)}class Sct{constructor(t){this._driver=t}build(t,n,i){const r=new xct(n);return this._resetContextStyleTimingState(r),ms(this,xb(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&n.errors.push(function Out(){return new Z(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,o.push(this.visitState(l,n))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(function kut(){return new Z(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{ppe(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&(Qx(o.values()),n.errors.push(function Iut(e,t){return new Z(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=ms(this,xb(t.animation),n);return{type:1,matchers:wct(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:yp(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>ms(this,i,n)),options:yp(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const o=t.steps.map(s=>{n.currentTime=i;const a=ms(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:yp(t.options)}}visitAnimate(t,n){const i=function Nct(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return e6(Xx(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=e6(0,0,"");return o.dynamic=!0,o.strValue=n,o}const r=Xx(n,t);return e6(r.duration,r.delay,r.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,o=t.styles?t.styles:Ns({});if(5==o.type)r=this.visitKeyframes(o,n);else{let s=t.styles,a=!1;if(!s){a=!0;const u={};i.easing&&(u.easing=i.easing),s=Ns(u)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Du?i.push(a):n.errors.push(new Z(3002,!1)):i.push(cpe(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const u=n.collectedStyles.get(n.currentQuerySelector),c=u.get(l);let d=!0;c&&(o!=r&&o>=c.startTime&&r<=c.endTime&&(n.errors.push(function Fut(e,t,n,i,r){return new Z(3010,!1)}()),d=!1),o=c.startTime),d&&u.set(l,{startTime:o,endTime:r}),n.options&&function hct(e,t,n){const i=t.params||{},r=ppe(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(function Tut(e){return new Z(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function Put(){return new Z(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,u=0;const c=t.steps.map(_=>{const y=this._makeStyleAst(_,n);let v=null!=y.offset?y.offset:function Mct(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(y.styles),b=0;return null!=v&&(o++,b=y.offset=v),l=l||b<0||b>1,a=a||b<u,u=b,s.push(b),y});l&&n.errors.push(function Lut(){return new Z(3012,!1)}()),a&&n.errors.push(function $ut(){return new Z(3200,!1)}());const d=t.steps.length;let f=0;o>0&&o<d?n.errors.push(function But(){return new Z(3202,!1)}()):0==o&&(f=1/(d-1));const h=d-1,p=n.currentTime,g=n.currentAnimateTimings,m=g.duration;return c.forEach((_,y)=>{const v=f>0?y==h?1:f*y:s[y],b=v*m;n.currentTime=p+g.delay+b,g.duration=b,this._validateStyleAst(_,n),_.offset=v,i.styles.push(_)}),i}visitReference(t,n){return{type:8,animation:ms(this,xb(t.animation),n),options:yp(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:yp(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:yp(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[o,s]=function Act(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(Cct,"")),e=e.replace(/@\*/g,Kx).replace(/@\w+/g,n=>Kx+"-"+n.slice(1)).replace(/:animating/g,K8),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+o:o,gs(n.collectedStyles,n.currentQuerySelector,new Map);const a=ms(this,xb(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:yp(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function Uut(){return new Z(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:Xx(t.timings,n.errors,!0);return{type:12,animation:ms(this,xb(t.animation),n),timings:i,options:null}}}class xct{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function yp(e){return e?(e=Tb(e)).params&&(e.params=function Tct(e){return e?Tb(e):null}(e.params)):e={},e}function e6(e,t,n){return{duration:e,delay:t,easing:n}}function t6(e,t,n,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class i2{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Ict=new RegExp(":enter","g"),Fct=new RegExp(":leave","g");function n6(e,t,n,i,r,o=new Map,s=new Map,a,l,u=[]){return(new Pct).buildKeyframes(e,t,n,i,r,o,s,a,l,u)}class Pct{buildKeyframes(t,n,i,r,o,s,a,l,u,c=[]){u=u||new i2;const d=new i6(t,n,u,r,o,c,[]);d.options=l;const f=l.delay?cc(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,l),ms(this,i,d);const h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){const m=h[g];if(m.element===n){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[t6(n,[],[],[],0,f,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,i),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:cc(Mb(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,n,i){let o=n.currentTimeline.currentTime;const s=null!=i.duration?cc(i.duration):null,a=null!=i.delay?cc(i.delay):null;return 0!==s&&t.forEach(l=>{const u=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(t,n){n.updateOptions(t.options,!0),ms(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const o=t.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=r2);const s=cc(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>ms(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const o=t.options&&t.options.delay?cc(t.options.delay):0;t.steps.forEach(s=>{const a=n.createSubContext(t.options);o&&a.delayNextStep(o),ms(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return Xx(n.params?Mb(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},o=r.delay?cc(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=r2);let s=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{n.currentQueryIndex=c;const d=n.createSubContext(t.options,u);o&&d.delayNextStep(o),u===n.element&&(l=d.currentTimeline),ms(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1);let l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const c=n.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;ms(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const r2={};class i6{constructor(t,n,i,r,o,s,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=r2,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new o2(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=cc(i.duration)),null!=i.delay&&(r.delay=cc(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=Mb(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,o=new i6(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=r2,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:n??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new Lct(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Ict,"."+this._enterClassName)).replace(Fct,"."+this._leaveClassName);let u=this._driver.query(this.element,t,1!=i);0!==i&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&0==a.length&&s.push(function Vut(e){return new Z(3014,!1)}()),a}}class o2{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new o2(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Du),this._currentKeyframe.set(n,Du);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&this._previousKeyframe.set("easing",n);const o=r&&r.params||{},s=function $ct(e,t){const n=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)n.set(o,Du)}else Zd(r,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of s){const u=Mb(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Du),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const u=Zd(a,new Map,this._backFill);u.forEach((c,d)=>{c===ZO?t.add(d):c===Du&&n.add(d)}),i||u.set("offset",l/this.duration),r.push(u)});const o=t.size?Qx(t.values()):[],s=n.size?Qx(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return t6(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Lct extends o2{constructor(t,n,i,r,o,s,a=!1){super(t,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],s=i+n,a=n/s,l=Zd(t[0]);l.set("offset",0),o.push(l);const u=Zd(t[0]);u.set("offset",vpe(a)),o.push(u);const c=t.length-1;for(let d=1;d<=c;d++){let f=Zd(t[d]);const h=f.get("offset");f.set("offset",vpe((n+h*i)/s)),o.push(f)}i=s,n=0,r="",t=o}return t6(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function vpe(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class r6{}const Bct=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Uct extends r6{normalizePropertyName(t,n){return J8(t)}normalizeStyleValue(t,n,i,r){let o="";const s=i.toString().trim();if(Bct.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Nut(e,t){return new Z(3005,!1)}())}return s+o}}function bpe(e,t,n,i,r,o,s,a,l,u,c,d,f){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:f}}const o6={};class wpe{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function Vct(e,t,n,i,r){return e.some(o=>o(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(n,i):new Map}build(t,n,i,r,o,s,a,l,u,c){const d=[],f=this.ast.options&&this.ast.options.params||o6,p=this.buildStyles(i,a&&a.params||o6,d),g=l&&l.params||o6,m=this.buildStyles(r,g,d),_=new Set,y=new Map,v=new Map,b="void"===r,w={params:jct(g,f),delay:this.ast.options?.delay},D=c?[]:n6(t,n,this.ast.animation,o,s,p,m,w,u,d);let E=0;if(D.forEach(M=>{E=Math.max(M.duration+M.delay,E)}),d.length)return bpe(n,this._triggerName,i,r,b,p,m,[],[],y,v,E,d);D.forEach(M=>{const k=M.element,R=gs(y,k,new Set);M.preStyleProps.forEach(P=>R.add(P));const F=gs(v,k,new Set);M.postStyleProps.forEach(P=>F.add(P)),k!==n&&_.add(k)});const S=Qx(_.values());return bpe(n,this._triggerName,i,r,b,p,m,D,S,y,v,E)}}function jct(e,t){const n=Tb(t);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n[i]=e[i]);return n}class Hct{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i=new Map,r=Tb(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Mb(s,r,n));const l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),i.set(a,s)})}),i}}class Gct{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new Hct(r.style,r.options&&r.options.params||{},i))}),Epe(this.states,"true","1"),Epe(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new wpe(t,r,this.states))}),this.fallbackTransition=function Wct(e,t,n){return new wpe(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(s=>s.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function Epe(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const qct=new i2;class Yct{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const i=[],r=[],o=Z8(this._driver,n,i,r);if(i.length)throw function Yut(e){return new Z(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,n,i){const r=t.element,o=epe(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=n6(this._driver,n,o,Y8,qx,new Map,new Map,i,qct,r),s.forEach(c=>{const d=gs(a,c.element,new Map);c.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function Kut(){return new Z(3300,!1)}()),s=[]),r.length)throw function Xut(e){return new Z(3504,!1)}();a.forEach((c,d)=>{c.forEach((f,h)=>{c.set(h,this._driver.computeStyle(d,h,Du))})});const u=Jd(s.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(t,u),u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function Qut(e){return new Z(3301,!1)}();return n}listen(t,n,i,r){const o=z8(n,"","","");return j8(this._getPlayer(t),i,o,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Dpe="ng-animate-queued",s6="ng-animate-disabled",Zct=[],Cpe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},edt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},na="__ng_removed";class a6{get params(){return this.options.params}constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function rdt(e){return e??null}(i?t.value:t),i){const o=Tb(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const Nb="void",l6=new a6(Nb);class tdt{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ia(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.has(n))throw function Jut(e,t){return new Z(3302,!1)}();if(null==i||0==i.length)throw function Zut(e){return new Z(3303,!1)}();if(!function odt(e){return"start"==e||"done"==e}(i))throw function ect(e,t){return new Z(3400,!1)}();const o=gs(this._elementListeners,t,[]),s={name:n,phase:i,callback:r};o.push(s);const a=gs(this._engine.statesByElement,t,new Map);return a.has(n)||(ia(t,Yx),ia(t,Yx+"-"+n),a.set(n,l6)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function tct(e){return new Z(3401,!1)}();return n}trigger(t,n,i,r=!0){const o=this._getTrigger(n),s=new u6(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(ia(t,Yx),ia(t,Yx+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const u=new a6(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(n,u),l||(l=l6),u.value!==Nb&&l.value===u.value){if(!function ldt(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(l.params,u.params)){const g=[],m=o.matchStyles(l.value,l.params,g),_=o.matchStyles(u.value,u.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{_p(t,m),ru(t,_)})}return}const f=gs(this._engine.playersByElement,t,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,u.value,t,u.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:h,fromState:l,toState:u,player:s,isFallbackTransition:p}),p||(ia(t,Dpe),s.onStart(()=>{W_(t,Dpe)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(t);if(m){let _=m.indexOf(s);_>=0&&m.splice(_,1)}}),this.players.push(s),f.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,Kx,!0);i.forEach(r=>{if(r[na])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){const c=this.trigger(t,u,Nb,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,s),i&&Jd(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,u=i.get(s)||l6,c=new a6(Nb),d=new u6(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const o=t[na];(!o||o===Cpe)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){ia(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=z8(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,j8(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class ndt{_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new tdt(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const u=i.indexOf(l);i.splice(u+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}return n}trigger(t,n,i,r){if(s2(n)){const o=this._fetchNamespace(t);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!s2(n))return;const o=n[na];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ia(t,s6)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),W_(t,s6))}removeNode(t,n,i,r){if(s2(n)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,o){this.collectedLeaveElements.push(n),n[na]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,n,i,r,o){return s2(n)?this._fetchNamespace(t).listen(n,i,r,o):()=>{}}_buildInstruction(t,n,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,o)}destroyInnerAnimations(t){let n=this.driver.query(t,Kx,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,K8,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Jd(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[na];if(n&&n.setForRemoval){if(t[na]=Cpe,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(s6)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ia(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?Jd(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function nct(e){return new Z(3402,!1)}()}_flushAnimations(t,n){const i=new i2,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(T=>{c.add(T);const O=this.driver.query(T,".ng-animate-queued",!0);for(let x=0;x<O.length;x++)c.add(O[x])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=Tpe(f,this.collectedEnterElements),p=new Map;let g=0;h.forEach((T,O)=>{const x=Y8+g++;p.set(O,x),T.forEach(N=>ia(N,x))});const m=[],_=new Set,y=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){const O=this.collectedLeaveElements[T],x=O[na];x&&x.setForRemoval&&(m.push(O),_.add(O),x.hasAnimation?this.driver.query(O,".ng-star-inserted",!0).forEach(N=>_.add(N)):y.add(O))}const v=new Map,b=Tpe(f,Array.from(_));b.forEach((T,O)=>{const x=qx+g++;v.set(O,x),T.forEach(N=>ia(N,x))}),t.push(()=>{h.forEach((T,O)=>{const x=p.get(O);T.forEach(N=>W_(N,x))}),b.forEach((T,O)=>{const x=v.get(O);T.forEach(N=>W_(N,x))}),m.forEach(T=>{this.processLeaveNode(T)})});const w=[],D=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(n).forEach(x=>{const N=x.player,I=x.element;if(w.push(N),this.collectedEnterElements.length){const K=I[na];if(K&&K.setForMove){if(K.previousTriggersValues&&K.previousTriggersValues.has(x.triggerName)){const ce=K.previousTriggersValues.get(x.triggerName),W=this.statesByElement.get(x.element);if(W&&W.has(x.triggerName)){const ne=W.get(x.triggerName);ne.value=ce,W.set(x.triggerName,ne)}}return void N.destroy()}}const U=!d||!this.driver.containsElement(d,I),V=v.get(I),H=p.get(I),j=this._buildInstruction(x,i,H,V,U);if(j.errors&&j.errors.length)return void D.push(j);if(U)return N.onStart(()=>_p(I,j.fromStyles)),N.onDestroy(()=>ru(I,j.toStyles)),void r.push(N);if(x.isFallbackTransition)return N.onStart(()=>_p(I,j.fromStyles)),N.onDestroy(()=>ru(I,j.toStyles)),void r.push(N);const z=[];j.timelines.forEach(K=>{K.stretchStartingKeyframe=!0,this.disabledNodes.has(K.element)||z.push(K)}),j.timelines=z,i.append(I,j.timelines),s.push({instruction:j,player:N,element:I}),j.queriedElements.forEach(K=>gs(a,K,[]).push(N)),j.preStyleProps.forEach((K,ce)=>{if(K.size){let W=l.get(ce);W||l.set(ce,W=new Set),K.forEach((ne,ie)=>W.add(ie))}}),j.postStyleProps.forEach((K,ce)=>{let W=u.get(ce);W||u.set(ce,W=new Set),K.forEach((ne,ie)=>W.add(ie))})});if(D.length){const T=[];D.forEach(O=>{T.push(function ict(e,t){return new Z(3505,!1)}())}),w.forEach(O=>O.destroy()),this.reportError(T)}const E=new Map,S=new Map;s.forEach(T=>{const O=T.element;i.has(O)&&(S.set(O,O),this._beforeAnimationBuild(T.player.namespaceId,T.instruction,E))}),r.forEach(T=>{const O=T.element;this._getPreviousPlayers(O,!1,T.namespaceId,T.triggerName,null).forEach(N=>{gs(E,O,[]).push(N),N.destroy()})});const M=m.filter(T=>Mpe(T,l,u)),k=new Map;Ape(k,this.driver,y,u,Du).forEach(T=>{Mpe(T,l,u)&&M.push(T)});const F=new Map;h.forEach((T,O)=>{Ape(F,this.driver,new Set(T),l,ZO)}),M.forEach(T=>{const O=k.get(T),x=F.get(T);k.set(T,new Map([...Array.from(O?.entries()??[]),...Array.from(x?.entries()??[])]))});const P=[],A=[],C={};s.forEach(T=>{const{element:O,player:x,instruction:N}=T;if(i.has(O)){if(c.has(O))return x.onDestroy(()=>ru(O,N.toStyles)),x.disabled=!0,x.overrideTotalTime(N.totalTime),void r.push(x);let I=C;if(S.size>1){let V=O;const H=[];for(;V=V.parentNode;){const j=S.get(V);if(j){I=j;break}H.push(V)}H.forEach(j=>S.set(j,I))}const U=this._buildAnimation(x.namespaceId,N,E,o,F,k);if(x.setRealPlayer(U),I===C)P.push(x);else{const V=this.playersByElement.get(I);V&&V.length&&(x.parentPlayer=Jd(V)),r.push(x)}}else _p(O,N.fromStyles),x.onDestroy(()=>ru(O,N.toStyles)),A.push(x),c.has(O)&&r.push(x)}),A.forEach(T=>{const O=o.get(T.element);if(O&&O.length){const x=Jd(O);T.setRealPlayer(x)}}),r.forEach(T=>{T.parentPlayer?T.syncPlayerEvents(T.parentPlayer):T.destroy()});for(let T=0;T<m.length;T++){const O=m[T],x=O[na];if(W_(O,qx),x&&x.hasAnimation)continue;let N=[];if(a.size){let U=a.get(O);U&&U.length&&N.push(...U);let V=this.driver.query(O,K8,!0);for(let H=0;H<V.length;H++){let j=a.get(V[H]);j&&j.length&&N.push(...j)}}const I=N.filter(U=>!U.destroyed);I.length?sdt(this,O,I):this.processLeaveNode(O)}return m.length=0,P.forEach(T=>{this.players.push(T),T.onDone(()=>{T.destroy();const O=this.players.indexOf(T);this.players.splice(O,1)}),T.play()}),P}elementContainsData(t,n){let i=!1;const r=n[na];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,o){let s=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Nb;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,n,i){const o=n.element,s=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const u=l.element,c=u!==o,d=gs(i,u,[]);this._getPreviousPlayers(u,c,s,a,n.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}_p(o,n.fromStyles)}_buildAnimation(t,n,i,r,o,s){const a=n.triggerName,l=n.element,u=[],c=new Set,d=new Set,f=n.timelines.map(p=>{const g=p.element;c.add(g);const m=g[na];if(m&&m.removedBeforeQueried)return new yy(p.duration,p.delay);const _=g!==l,y=function adt(e){const t=[];return xpe(e,t),t}((i.get(g)||Zct).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===g),v=o.get(g),b=s.get(g),w=epe(0,this._normalizer,0,p.keyframes,v,b),D=this._buildPlayer(p,w,y);if(p.subTimeline&&r&&d.add(g),_){const E=new u6(t,a,g);E.setRealPlayer(D),u.push(E)}return D});u.forEach(p=>{gs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function idt(e,t,n){let i=e.get(t);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}return i}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>ia(p,upe));const h=Jd(f);return h.onDestroy(()=>{c.forEach(p=>W_(p,upe)),ru(l,n.toStyles)}),d.forEach(p=>{gs(r,p,[]).push(h)}),h}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new yy(t.duration,t.delay)}}class u6{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new yy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>j8(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){gs(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function s2(e){return e&&1===e.nodeType}function Spe(e,t){const n=e.style.display;return e.style.display=t??"none",n}function Ape(e,t,n,i,r){const o=[];n.forEach(l=>o.push(Spe(l)));const s=[];i.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const f=t.computeStyle(u,d,r);c.set(d,f),(!f||0==f.length)&&(u[na]=edt,s.push(u))}),e.set(u,c)});let a=0;return n.forEach(l=>Spe(l,o[a++])),s}function Tpe(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const i=1,r=new Set(t),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;const u=a.parentNode;return l=n.has(u)?u:r.has(u)?i:s(u),o.set(a,l),l}return t.forEach(a=>{const l=s(a);l!==i&&n.get(l).push(a)}),n}function ia(e,t){e.classList?.add(t)}function W_(e,t){e.classList?.remove(t)}function sdt(e,t,n){Jd(n).onDone(()=>e.processLeaveNode(t))}function xpe(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof xG?xpe(i.players,t):t.push(i)}}function Mpe(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(o=>r.add(o)):t.set(e,i),n.delete(e),!0}class a2{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new ndt(t,n,i),this._timelineEngine=new Yct(t,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,n,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=[],c=Z8(this._driver,o,l,u);if(l.length)throw function Wut(e,t){return new Z(3404,!1)}();a=function zct(e,t,n){return new Gct(e,t,n)}(r,c,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[o,s]=tpe(i);this._timelineEngine.command(o,n,s,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,o){if("@"==i.charAt(0)){const[s,a]=tpe(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(t,n,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let cdt=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(n);o||e.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ru(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ru(this._element,this._initialStyles),this._endStyles&&(ru(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(_p(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_p(this._element,this._endStyles),this._endStyles=null),ru(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function c6(e){let t=null;return e.forEach((n,i)=>{(function ddt(e){return"display"===e||"position"===e})(i)&&(t=t||new Map,t.set(i,n))}),t}class Npe{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(t,n,i){return t.animate(this._convertKeyframesToObject(n),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:gpe(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class fdt{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return ope(t,n)}getParentElement(t){return W8(t)}query(t,n,i){return spe(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const u=new Map,c=s.filter(h=>h instanceof Npe);(function mct(e,t){return 0===e||0===t})(i,r)&&c.forEach(h=>{h.currentSnapshot.forEach((p,g)=>u.set(g,p))});let d=function fct(e){return e.length?e[0]instanceof Map?e:e.map(t=>cpe(t)):[]}(n).map(h=>Zd(h));d=function _ct(e,t,n){if(n.size&&t.length){let i=t[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,gpe(e,a)))}}return t}(t,d,u);const f=function udt(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=c6(t[0]),t.length>1&&(i=c6(t[t.length-1]))):t instanceof Map&&(n=c6(t)),n||i?new cdt(e,n,i):null}(t,d);return new Npe(t,d,l,f)}}let hdt=(()=>{class e extends SG{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:oa.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?AG(n):n;return Ope(this._renderer,null,i,"register",[r]),new pdt(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(fe(zp),fe(hn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class pdt extends VAe{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new gdt(this._id,t,n||{},this._renderer)}}class gdt{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Ope(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ope(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const kpe="@.disabled";let mdt=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(n,i){const o=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let c=this._rendererCache.get(o);return c||(c=new Ipe("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,c)),c}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(s,a,n,c.name,c)};return i.data.animation.forEach(l),new _dt(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(fe(zp),fe(a2),fe(Dt))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class Ipe{constructor(t,n,i,r){this.namespaceId=t,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==kpe?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class _dt extends Ipe{constructor(t,n,i,r,o){super(n,i,r,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==kpe?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.slice(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function ydt(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let o=n.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function vdt(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let bdt=(()=>{class e extends a2{constructor(n,i,r,o){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(fe(hn),fe(q8),fe(r6),fe(Df))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const Rpe=[{provide:SG,useClass:hdt},{provide:r6,useFactory:function wdt(){return new Uct}},{provide:a2,useClass:bdt},{provide:zp,useFactory:function Edt(e,t,n){return new mdt(e,t,n)},deps:[hE,a2,Dt]}],d6=[{provide:q8,useFactory:()=>new fdt},{provide:Bj,useValue:"BrowserAnimations"},...Rpe],Fpe=[{provide:q8,useClass:ape},{provide:Bj,useValue:"NoopAnimations"},...Rpe];let Ddt=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?Fpe:d6}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=zt({type:e}),e.\u0275inj=Bt({providers:d6,imports:[uz]}),e})(),Cdt=(()=>{const t=class{};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t,bootstrap:[Dut]}),t.\u0275inj=Bt({providers:[Dg,Cut],imports:[lxe,uz,yut,Grt,JO,ROe,Ddt]}),e})();tCe().bootstrapModule(Cdt).catch(e=>console.error(e))},564:q_=>{var Rb=/("(?:[^\\"]|\\.)*")|[:,]/g;q_.exports=function(ef,ra){var dc,bp,fc;return ra=ra||{},dc=JSON.stringify([1],void 0,void 0===ra.indent?2:ra.indent).slice(2,-3),bp=""===dc?1/0:void 0===ra.maxLength?80:ra.maxLength,fc=ra.replacer,function wp(Ui,tf,Y_){var nf,Fo,ou,rf,sf,af,ro,wt,lf,uf,_s,Vi;if(Ui&&"function"==typeof Ui.toJSON&&(Ui=Ui.toJSON()),void 0===(_s=JSON.stringify(Ui,fc)))return _s;if(_s.length<=(ro=bp-tf.length-Y_)&&(lf=_s.replace(Rb,function(Fb,Pb){return Pb||Fb+" "})).length<=ro)return lf;if(null!=fc&&(Ui=JSON.parse(_s),fc=void 0),"object"==typeof Ui&&null!==Ui){if(wt=tf+dc,ou=[],Fo=0,Array.isArray(Ui))for(uf="[",nf="]",ro=Ui.length;Fo<ro;Fo++)ou.push(wp(Ui[Fo],wt,Fo===ro-1?0:1)||"null");else for(uf="{",nf="}",ro=(af=Object.keys(Ui)).length;Fo<ro;Fo++)rf=af[Fo],sf=JSON.stringify(rf)+": ",void 0!==(Vi=wp(Ui[rf],wt,sf.length+(Fo===ro-1?0:1)))&&ou.push(sf+Vi);if(ou.length>0)return[uf,dc+ou.join(",\n"+wt),nf].join("\n"+tf)}return _s}(ef,"",0)}}},q_=>{q_(q_.s=830)}]);